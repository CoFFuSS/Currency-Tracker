(()=>{var e={8679:(e,i,r)=>{"use strict";var n=r(1296),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function u(e){return n.isMemo(e)?o:l[e.$$typeof]||a}l[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[n.Memo]=o;var h=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(i,r,n){if("string"!=typeof r){if(m){var a=p(r);a&&a!==m&&e(i,a,n)}var o=c(r);d&&(o=o.concat(d(r)));for(var l=u(i),_=u(r),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&!(n&&n[y])&&!(_&&_[y])&&!(l&&l[y])){var v=f(r,y);try{h(i,y,v)}catch(e){}}}}return i}},6103:(e,i)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,_=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var i=e.$$typeof;switch(i){case n:switch(e=e.type){case c:case d:case s:case l:case o:case p:return e;default:switch(e=e&&e.$$typeof){case h:case f:case g:case _:case u:return e;default:return i}}case a:return i}}}function M(e){return w(e)===d}i.AsyncMode=c,i.ConcurrentMode=d,i.ContextConsumer=h,i.ContextProvider=u,i.Element=n,i.ForwardRef=f,i.Fragment=s,i.Lazy=g,i.Memo=_,i.Portal=a,i.Profiler=l,i.StrictMode=o,i.Suspense=p,i.isAsyncMode=function(e){return M(e)||w(e)===c},i.isConcurrentMode=M,i.isContextConsumer=function(e){return w(e)===h},i.isContextProvider=function(e){return w(e)===u},i.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},i.isForwardRef=function(e){return w(e)===f},i.isFragment=function(e){return w(e)===s},i.isLazy=function(e){return w(e)===g},i.isMemo=function(e){return w(e)===_},i.isPortal=function(e){return w(e)===a},i.isProfiler=function(e){return w(e)===l},i.isStrictMode=function(e){return w(e)===o},i.isSuspense=function(e){return w(e)===p},i.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===l||e===o||e===p||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===u||e.$$typeof===h||e.$$typeof===f||e.$$typeof===v||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y)},i.typeOf=w},1296:(e,i,r)=>{"use strict";e.exports=r(6103)},6158:function(e){e.exports=function(){"use strict";var e,i,r;function n(n,a){if(e){if(i){var s="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",o={};e(o),r=a(o),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(r.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else i=a}else e=a}return n(["exports"],function(e){let i,r,n,a,s,o,l,u,h,c,d;var f,p="3.2.0";let m={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==i){let e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{i=null!="MISSING_ENV_VAR".API_URL_REGEX?new RegExp("MISSING_ENV_VAR".API_URL_REGEX):e}catch(r){i=e}}return i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!m.API_URL)return null;try{let e=new URL(m.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},_={supported:!1,testSupport:function(e){!v&&y&&(x?w(e):g=e)}},g,y,v=!1,x=!1,b="undefined"!=typeof self?self:{};function w(e){let i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,y),e.isContextLost())return;_.supported=!0}catch(r){}e.deleteTexture(i),v=!0}function M(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T(e,i,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(n-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=i,this.p2x=r,this.p2y=n}b.document&&((y=b.document.createElement("img")).onload=function(){g&&w(g),g=null,x=!0},y.onerror=function(){v=!0,g=null},y.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),T.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,i){if(void 0===i&&(i=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var a=this.sampleCurveX(r)-e;if(Math.abs(a)<i)return r;var s=this.sampleCurveDerivativeX(r);if(1e-6>Math.abs(s))break;r-=a/s}var o=0,l=1;for(r=e,n=0;n<20&&!(Math.abs((a=this.sampleCurveX(r))-e)<i);n++)e>a?o=r:l=r,r=.5*(l-o)+o;return r},solve:function(e,i){return this.sampleCurveY(this.solveCurveX(e,i))}};var L=M(T);function S(e,i){this.x=e,this.y=i}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,i){return this.clone()._rotateAround(e,i)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var i=e.x-this.x,r=e.y-this.y;return i*i+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,i){return Math.atan2(this.x*i-this.y*e,this.x*e+this.y*i)},_matMult:function(e){var i=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var i=Math.cos(e),r=Math.sin(e),n=r*this.x+i*this.y;return this.x=i*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,i){var r=Math.cos(e),n=Math.sin(e),a=i.y+n*(this.x-i.x)+r*(this.y-i.y);return this.x=i.x+r*(this.x-i.x)-n*(this.y-i.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(e){return e instanceof S?e:Array.isArray(e)?new S(e[0],e[1]):e};var k=M(S);let D=Math.PI/180,E=180/Math.PI,A=[[0,0],[1,0],[1,1],[0,1]];function P(e){if(e<=0)return 0;if(e>=1)return 1;let i=e*e,r=i*e;return 4*(e<.5?r:3*(e-i)+r-.75)}function C(e,i,r,n){let a=new L(e,i,r,n);return function(e){return a.solve(e)}}let I=C(.25,.1,.25,1);function O(e,i,r){return Math.min(r,Math.max(i,e))}function z(e,i,r){return(r=O((r-e)/(i-e),0,1))*r*(3-2*r)}function R(e,i,r){let n=r-i,a=((e-i)%n+n)%n+i;return a===i?r:a}function Y(e,i,r){if(!e.length)return r(null,[]);let n=e.length,a=Array(e.length),s=null;e.forEach((e,o)=>{i(e,(e,i)=>{e&&(s=e),a[o]=i,0==--n&&r(s,a)})})}function F(e){let i=[];for(let r in e)i.push(e[r]);return i}function j(e,...i){for(let r of i)for(let i in r)e[i]=r[i];return e}let B=1;function N(){return B++}function H(){return function e(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function V(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function U(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function $(e,i){e.forEach(e=>{i[e]&&(i[e]=i[e].bind(i))})}function W(e,i){return -1!==e.indexOf(i,e.length-i.length)}function G(e,i,r){let n={};for(let a in e)n[a]=i.call(r||this,e[a],a,e);return n}function q(e,i,r){let n={};for(let a in e)i.call(r||this,e[a],a,e)&&(n[a]=e[a]);return n}function Z(e){return Array.isArray(e)?e.map(Z):"object"==typeof e&&e?G(e,Z):e}let X={};function J(e){X[e]||(X[e]=!0)}function K(e,i,r){return(r.y-e.y)*(i.x-e.x)>(i.y-e.y)*(r.x-e.x)}function Q([e,i,r]){let n=(i+90)*D,a=r*D;return{x:e*Math.cos(n)*Math.sin(a),y:e*Math.sin(n)*Math.sin(a),z:e*Math.cos(a),azimuthal:i,polar:r}}function ee(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function et(e){let i={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,r,n,a)=>{let s=n||a;return i[r]=!s||s.toLowerCase(),""}),i["max-age"]){let e=parseInt(i["max-age"],10);isNaN(e)?delete i["max-age"]:i["max-age"]=e}return i}let ei=null;function er(e){try{let i=self[e];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch(i){return!1}}function en(e,i){return[e[4*i],e[4*i+1],e[4*i+2],e[4*i+3]]}function ea(e,i,r,n){for(;i<r;){let a=i+r>>1;e[a]<n?i=a+1:r=a}return i}function es(e,i,r,n){for(;i<r;){let a=i+r>>1;e[a]<=n?i=a+1:r=a}return i}let eo="mapbox-tiles",el=500,eu=50;function eh(){try{return caches}catch(e){}}function ec(){let e=eh();e&&!r&&(r=e.open(eo))}function ed(e){let i=e.indexOf("?");if(i<0)return e;let r=(function(e){let i=e.indexOf("?");return i>0?e.slice(i+1).split("&"):[]})(e).filter(e=>{let i=e.split("=");return"language"===i[0]||"worldview"===i[0]});return r.length?`${e.slice(0,i)}?${r.join("&")}`:e.slice(0,i)}let ef=1/0,ep={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};"function"==typeof Object.freeze&&Object.freeze(ep);class em extends Error{constructor(e,i,r){401===i&&eM(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=i,this.url=r}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}let e_=ee()?()=>self.worker&&self.worker.referrer:()=>("blob:"===location.protocol?parent:self).location.href,eg=function(e,i){var a;if(!(/^file:/.test(a=e.url)||/^file:/.test(e_())&&!/^\w+:/.test(a))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(e,i){var a;let s=new AbortController,o=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:e_(),referrerPolicy:e.referrerPolicy,signal:s.signal}),l=!1,u=!1,h=(a=o.url).indexOf("sku=")>0&&eM(a);"json"===e.type&&o.headers.set("Accept","application/json");let c=(r,n,a)=>{if(u)return;if(r&&"SecurityError"!==r.message&&J(r.toString()),n&&a)return d(n);let s=Date.now();fetch(o).then(r=>{if(r.ok){let e=h?r.clone():null;return d(r,e,s)}return i(new em(r.statusText,r.status,e.url))}).catch(r=>{"AbortError"!==r.name&&i(Error(`${r.message} ${e.url}`))})},d=(a,s,h)=>{("arrayBuffer"===e.type?a.arrayBuffer():"json"===e.type?a.json():a.text()).then(e=>{u||(s&&h&&function(e,i,a){if(ec(),!r)return;let s={status:i.status,statusText:i.statusText,headers:new Headers};i.headers.forEach((e,i)=>s.headers.set(i,e));let o=et(i.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&s.headers.set("Expires",new Date(a+1e3*o["max-age"]).toUTCString());let l=s.headers.get("Expires");l&&(new Date(l).getTime()-a<42e4||function(e,i){if(void 0===n)try{new Response(new ReadableStream),n=!0}catch(r){n=!1}n?i(e.body):e.blob().then(i)}(i,i=>{let n=new Response(i,s);ec(),r&&r.then(i=>i.put(ed(e.url),n)).catch(e=>J(e.message))}))}(o,s,h),l=!0,i(null,e,a.headers.get("Cache-Control"),a.headers.get("Expires")))}).catch(e=>{u||i(Error(e.message))})};return h?function(e,i){if(ec(),!r)return i(null);let n=ed(e.url);r.then(e=>{e.match(n).then(r=>{let a=function(e){if(!e)return!1;let i=new Date(e.headers.get("Expires")||0),r=et(e.headers.get("Cache-Control")||"");return i>Date.now()&&!r["no-cache"]}(r);e.delete(n),a&&e.put(n,r.clone()),i(null,r,a)}).catch(i)}).catch(i)}(o,c):c(null,null),{cancel:()=>{u=!0,l||s.abort()}}}(e,i);if(ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,i,void 0,!0)}return function(e,i){let r=new XMLHttpRequest;for(let i in r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer"),e.headers)r.setRequestHeader(i,e.headers[i]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=()=>{i(Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let n=r.response;if("json"===e.type)try{n=JSON.parse(r.response)}catch(a){return i(a)}i(null,n,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else i(new em(r.statusText,r.status,e.url))},r.send(e.body),{cancel:()=>r.abort()}}(e,i)},ey=function(e,i){return eg(j(e,{type:"arrayBuffer"}),i)},ev="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";a=[],s=0;let ex=function(e,i){if(_.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),s>=m.MAX_PARALLEL_IMAGE_REQUESTS){let r={requestParameters:e,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return a.push(r),r}s++;let r=!1,n=()=>{if(!r)for(r=!0,s--;a.length&&s<m.MAX_PARALLEL_IMAGE_REQUESTS;){let e=a.shift(),{requestParameters:i,callback:r,cancelled:n}=e;n||(e.cancel=ex(i,r).cancel)}},o=ey(e,(e,r,a,s)=>{n(),e?i(e):r&&(self.createImageBitmap?function(e,i){let r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then(e=>{i(null,e)}).catch(e=>{i(Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(r,(e,r)=>i(e,r,a,s)):function(e,i){let r=new Image;r.onload=()=>{i(null,r),URL.revokeObjectURL(r.src),r.onload=null,requestAnimationFrame(()=>{r.src=ev})},r.onerror=()=>i(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let n=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?URL.createObjectURL(n):ev}(r,(e,r)=>i(e,r,a,s)))});return{cancel:()=>{o.cancel(),n()}}},eb="NO_ACCESS_TOKEN";function ew(e){return 0===e.indexOf("mapbox:")}function eM(e){return m.API_URL_REGEX.test(e)}function eT(e){return m.API_CDN_URL_REGEX.test(e)}function eL(e){return m.API_STYLE_REGEX.test(e)&&!eS(e)}function eS(e){return m.API_SPRITE_REGEX.test(e)}let ek=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function eD(e){let i=e.match(ek);if(!i)throw Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function eE(e){let i=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${i}`}let eA="mapbox.eventData";function eP(e){if(!e)return null;let i=e.split(".");if(!i||3!==i.length)return null;try{return JSON.parse(decodeURIComponent(atob(i[1]).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(r){return null}}class eC{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){let i=eP(m.ACCESS_TOKEN),r="";return r=i&&i.u?btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(e,i)=>String.fromCharCode(Number("0x"+i)))):m.ACCESS_TOKEN||"",e?`${eA}.${e}:${r}`:`${eA}:${r}`}fetchEventData(){let e=er("localStorage"),i=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{let e=localStorage.getItem(i);e&&(this.eventData=JSON.parse(e));let n=localStorage.getItem(r);n&&(this.anonId=n)}catch(n){J("Unable to read from LocalStorage")}}saveEventData(){let e=er("localStorage"),i=this.getStorageKey(),r=this.getStorageKey("uuid"),n=this.anonId;if(e&&n)try{localStorage.setItem(r,n),Object.keys(this.eventData).length>=1&&localStorage.setItem(i,JSON.stringify(this.eventData))}catch(a){J("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,i,r,n){if(!m.EVENTS_URL)return;let a=eD(m.EVENTS_URL);a.params.push(`access_token=${n||m.ACCESS_TOKEN||""}`);let s={event:this.type,created:new Date(e).toISOString()},o=i?j(s,i):s,l={url:eE(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([o])};this.pendingRequest=eg(j(l,{method:"POST"}),e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)})}queueRequest(e,i){this.queue.push(e),this.processRequests(i)}}let eI=new class extends eC{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,i){m.EVENTS_URL&&m.ACCESS_TOKEN&&Array.isArray(e)&&e.some(e=>ew(e)||eM(e))&&this.queueRequest(Date.now(),i)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();let i=eP(m.ACCESS_TOKEN),r=i?i.u:m.ACCESS_TOKEN,n=r!==this.eventData.tokenU;U(this.anonId)||(this.anonId=H(),n=!0);let a=this.queue.shift();if(this.eventData.lastSuccess){let e=new Date(this.eventData.lastSuccess),i=new Date(a),r=(a-this.eventData.lastSuccess)/864e5;n=n||r>=1||r<-1||e.getDate()!==i.getDate()}else n=!0;n?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:"01","enabled.telemetry":!1,userId:this.anonId},e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)},e):this.processRequests()}},eO=eI.postTurnstileEvent.bind(eI),ez=new class extends eC{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,i,r,n){this.skuToken=i,this.errorCb=n,m.EVENTS_URL&&(r||m.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(Error(eb)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;let{id:i,timestamp:r}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),U(this.anonId)||(this.anonId=H()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:p,skuId:"01",skuToken:this.skuToken,userId:this.anonId},e=>{e?this.errorCb(e):i&&(this.success[i]=!0)},e))}},eR=ez.postMapLoadEvent.bind(ez),eY=new class extends eC{constructor(){super("gljs.performance")}postPerformanceEvent(e,i){m.EVENTS_URL&&(e||m.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;let{timestamp:i,performanceData:r}=this.queue.shift(),n=function(e){let i=performance.getEntriesByType("resource"),r=performance.getEntriesByType("mark"),n=function(e){let i={};if(e){for(let r in e)if("other"!==r)for(let n of e[r]){let e=`${r}ResolveRangeMin`,a=`${r}ResolveRangeMax`,s=`${r}RequestCount`,o=`${r}RequestCachedCount`;i[e]=Math.min(i[e]||1/0,n.startTime),i[a]=Math.max(i[a]||-1/0,n.responseEnd);let l=e=>{void 0===i[e]&&(i[e]=0),++i[e]};void 0!==n.transferSize&&0===n.transferSize&&l(o),l(s)}}return i}(function(e,i){let r={};if(e)for(let n of e){let e=i(n);void 0===r[e]&&(r[e]=[]),r[e].push(n)}return r}(i,eV)),a=window.devicePixelRatio,s=navigator.connection||navigator.mozConnection||navigator.webkitConnection,o=s?s.effectiveType:void 0,l={counters:[],metadata:[],attributes:[]},u=(e,i,r)=>{null!=r&&e.push({name:i,value:r.toString()})};for(let e in n)u(l.counters,e,n[e]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(u(l.counters,"interactionRangeMin",e.interactionRange[0]),u(l.counters,"interactionRangeMax",e.interactionRange[1])),r)for(let e of Object.keys(eH)){let i=eH[e],n=r.find(e=>e.name===i);n&&u(l.counters,i,n.startTime)}return u(l.counters,"visibilityHidden",e.visibilityHidden),u(l.attributes,"style",function(e){if(e)for(let i of e){let e=i.name.split("?")[0];if(eL(e)){let i=e.split("/").slice(-2);if(2===i.length)return`mapbox://styles/${i[0]}/${i[1]}`}}}(i)),u(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),u(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),u(l.attributes,"projection",e.projection),u(l.attributes,"zoom",e.zoom),u(l.metadata,"devicePixelRatio",a),u(l.metadata,"connectionEffectiveType",o),u(l.metadata,"navigatorUserAgent",navigator.userAgent),u(l.metadata,"screenWidth",window.screen.width),u(l.metadata,"screenHeight",window.screen.height),u(l.metadata,"windowWidth",window.innerWidth),u(l.metadata,"windowHeight",window.innerHeight),u(l.metadata,"mapWidth",e.width/a),u(l.metadata,"mapHeight",e.height/a),u(l.metadata,"webglRenderer",e.renderer),u(l.metadata,"webglVendor",e.vendor),u(l.metadata,"sdkVersion",p),u(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(r);for(let e of n.metadata);for(let e of n.counters);for(let e of n.attributes);this.postEvent(i,n,()=>{},e)}},eF=eY.postPerformanceEvent.bind(eY),ej=new class extends eC{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,i,r,n){if(!m.API_URL||!m.SESSION_PATH)return;let a=eD(m.API_URL+m.SESSION_PATH);a.params.push(`sku=${i||""}`),a.params.push(`access_token=${n||m.ACCESS_TOKEN||""}`);let s={url:eE(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=eg(j(s,{method:"GET"}),e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)})}getSessionAPI(e,i,r,n){this.skuToken=i,this.errorCb=n,m.SESSION_PATH&&m.API_URL&&(r||m.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},r):this.errorCb(Error(eb)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;let{id:i,timestamp:r}=this.queue.shift();i&&this.success[i]||this.getSession(r,this.skuToken,e=>{e?this.errorCb(e):i&&(this.success[i]=!0)},e)}},eB=ej.getSessionAPI.bind(ej),eN=new Set,eH={create:"create",load:"load",fullLoad:"fullLoad"};function eV(e){let i=e.name.split("?")[0];return eT(i)&&i.includes("mapbox-gl.js")?"javascript":eT(i)&&i.includes("mapbox-gl.css")?"css":m.API_FONTS_REGEX.test(i)?"fontRange":eS(i)?"sprite":eL(i)?"style":m.API_TILEJSON_REGEX.test(i)?"tilejson":"other"}function eU(e){let i=e?e.url.toString():void 0;return i?performance.getEntriesByName(i):[]}function e$(){return null==o&&(o=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),o}let eW={now:()=>void 0!==h?h:performance.now(),setNow(e){h=e},restoreNow(){h=void 0},frame(e){let i=requestAnimationFrame(e);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(e,i=0){let{width:r,height:n}=e;c||(c=document.createElement("canvas"));let a=c.getContext("2d",{willReadFrequently:!0});if(!a)throw Error("failed to create canvas 2d context");return(r>c.width||n>c.height)&&(c.width=r,c.height=n),a.clearRect(-i,-i,r+2*i,n+2*i),a.drawImage(e,0,0,r,n),a.getImageData(-i,-i,r+2*i,n+2*i)},resolveURL:e=>(l||(l=document.createElement("a")),l.href=e,l.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(null==u&&(u=window.matchMedia("(prefers-reduced-motion: reduce)")),u.matches)},hasCanvasFingerprintNoise(){if(!e$())return!1;let e=new OffscreenCanvas(85,1),i=e.getContext("2d",{willReadFrequently:!0}),r=0;for(let n=0;n<e.width;++n)i.fillStyle=`rgba(${r++},${r++},${r++}, 255)`,i.fillRect(n,0,1,1);let n=i.getImageData(0,0,e.width,e.height);r=0;for(let e=0;e<n.data.length;++e)if(e%4!=3&&r++!==n.data[e])return!0;return!1}};function eG(e,i,r){r[e]&&-1!==r[e].indexOf(i)||(r[e]=r[e]||[],r[e].push(i))}function eq(e,i,r){if(r&&r[e]){let n=r[e].indexOf(i);-1!==n&&r[e].splice(n,1)}}class eZ{constructor(e,i={}){j(this,i),this.type=e}}class eX extends eZ{constructor(e,i={}){super("error",j({error:e},i))}}class eJ{on(e,i){return this._listeners=this._listeners||{},eG(e,i,this._listeners),this}off(e,i){return eq(e,i,this._listeners),eq(e,i,this._oneTimeListeners),this}once(e,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},eG(e,i,this._oneTimeListeners),this):new Promise(i=>this.once(e,i))}fire(e,i){"string"==typeof e&&(e=new eZ(e,i||{}));let r=e.type;if(this.listens(r)){for(let i of(e.target=this,this._listeners&&this._listeners[r]?this._listeners[r].slice():[]))i.call(this,e);for(let i of this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[])eq(r,i,this._oneTimeListeners),i.call(this,e);let i=this._eventedParent;i&&(j(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof eX&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,i){return this._eventedParent=e,this._eventedParentData=i,this}}var eK=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","default":[0,1],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');class eQ{constructor(e,i,r,n){this.message=(e?`${e}: `:"")+r,n&&(this.identifier=n),null!=i&&i.__line__&&(this.line=i.__line__)}}class e0 extends eQ{}function e1(e,...i){for(let r of i)for(let i in r)e[i]=r[i];return e}function e2(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function e3(e){if(Array.isArray(e))return e.map(e3);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){let i={};for(let r in e)i[r]=e3(e[r]);return i}return e2(e)}var e4=class extends Error{constructor(e,i){super(i),this.message=i,this.key=e}};class e5{constructor(e,i=[]){for(let[r,n]of(this.parent=e,this.bindings={},i))this.bindings[r]=n}concat(e){return new e5(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}let e6={kind:"null"},e8={kind:"number"},e7={kind:"string"},e9={kind:"boolean"},te={kind:"color"},tt={kind:"object"},ti={kind:"value"},tr={kind:"collator"},tn={kind:"formatted"},ta={kind:"resolvedImage"};function ts(e,i){return{kind:"array",itemType:e,N:i}}function to(e){if("array"===e.kind){let i=to(e.itemType);return"number"==typeof e.N?`array<${i}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${i}>`}return e.kind}let tl=[e6,e8,e7,e9,te,tn,tt,ts(ti),ta];function tu(e,i){if("error"===i.kind)return null;if("array"===e.kind){if("array"===i.kind&&(0===i.N&&"value"===i.itemType.kind||!tu(e.itemType,i.itemType))&&("number"!=typeof e.N||e.N===i.N))return null}else{if(e.kind===i.kind)return null;if("value"===e.kind){for(let e of tl)if(!tu(e,i))return null}}return`Expected ${to(e)} but found ${to(i)} instead.`}function th(e,i){return i.some(i=>i.kind===e.kind)}function tc(e,i){return i.some(i=>"null"===i?null===e:"array"===i?Array.isArray(e):"object"===i?e&&!Array.isArray(e)&&"object"==typeof e:i===typeof e)}var td,tf={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function tp(e){return(e=Math.round(e))<0?0:e>255?255:e}function tm(e){return tp("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function t_(e){var i;return(i="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:i>1?1:i}function tg(e,i,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(i-e)*r*6:2*r<1?i:3*r<2?e+(i-e)*(2/3-r)*6:e}try{td=({}).parseCSSColor=function(e){var i,r=e.replace(/ /g,"").toLowerCase();if(r in tf)return tf[r].slice();if("#"===r[0])return 4===r.length?(i=parseInt(r.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:7===r.length&&(i=parseInt(r.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var n=r.indexOf("("),a=r.indexOf(")");if(-1!==n&&a+1===r.length){var s=r.substr(0,n),o=r.substr(n+1,a-(n+1)).split(","),l=1;switch(s){case"rgba":if(4!==o.length)break;l=t_(o.pop());case"rgb":return 3!==o.length?null:[tm(o[0]),tm(o[1]),tm(o[2]),l];case"hsla":if(4!==o.length)break;l=t_(o.pop());case"hsl":if(3!==o.length)break;var u=(parseFloat(o[0])%360+360)%360/360,h=t_(o[1]),c=t_(o[2]),d=c<=.5?c*(h+1):c+h-c*h,f=2*c-d;return[tp(255*tg(f,d,u+1/3)),tp(255*tg(f,d,u)),tp(255*tg(f,d,u-1/3)),l]}}return null}}catch(ty){}class tv{constructor(e,i,r,n=1){this.r=e,this.g=i,this.b=r,this.a=n}static parse(e){if(!e)return;if(e instanceof tv)return e;if("string"!=typeof e)return;let i=td(e);return i?new tv(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){let[e,i,r,n]=this.toArray();return`rgba(${Math.round(e)},${Math.round(i)},${Math.round(r)},${n})`}toArray(){let{r:e,g:i,b:r,a:n}=this;return 0===n?[0,0,0,0]:[255*e/n,255*i/n,255*r/n,n]}toArray01(){let{r:e,g:i,b:r,a:n}=this;return 0===n?[0,0,0,0]:[e/n,i/n,r/n,n]}toArray01Scaled(e){let{r:i,g:r,b:n,a:a}=this;return 0===a?[0,0,0]:[i/a*e,r/a*e,n/a*e]}toArray01PremultipliedAlpha(){let{r:e,g:i,b:r,a:n}=this;return[e,i,r,n]}toArray01Linear(){let{r:e,g:i,b:r,a:n}=this;return 0===n?[0,0,0,0]:[Math.pow(e/n,2.2),Math.pow(i/n,2.2),Math.pow(r/n,2.2),n]}}tv.black=new tv(0,0,0,1),tv.white=new tv(1,1,1,1),tv.transparent=new tv(0,0,0,0),tv.red=new tv(1,0,0,1),tv.blue=new tv(0,0,1,1);class tx{constructor(e,i,r){this.sensitivity=e?i?"variant":"case":i?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,i){return this.collator.compare(e,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tb{constructor(e,i,r,n,a){this.text=e.normalize?e.normalize():e,this.image=i,this.scale=r,this.fontStack=n,this.textColor=a}}class tw{constructor(e){this.sections=e}static fromString(e){return new tw([new tb(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.namePrimary.length)}static factory(e){return e instanceof tw?e:tw.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){let e=["format"];for(let i of this.sections){if(i.image){e.push(["image",i.image.namePrimary]);continue}e.push(i.text);let r={};i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),e.push(r)}return e}}class tM{constructor(e){this.namePrimary=e.namePrimary,e.nameSecondary&&(this.nameSecondary=e.nameSecondary),this.available=e.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(e,i){return e?new tM({namePrimary:e,nameSecondary:i,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function tT(e,i,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,i,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,i,r,n]:[e,i,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tL(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof tv||e instanceof tx||e instanceof tw||e instanceof tM)return!0;if(Array.isArray(e)){for(let i of e)if(!tL(i))return!1;return!0}if("object"==typeof e){for(let i in e)if(!tL(e[i]))return!1;return!0}return!1}function tS(e){if(null===e)return e6;if("string"==typeof e)return e7;if("boolean"==typeof e)return e9;if("number"==typeof e)return e8;if(e instanceof tv)return te;if(e instanceof tx)return tr;if(e instanceof tw)return tn;if(e instanceof tM)return ta;if(Array.isArray(e)){let i;let r=e.length;for(let r of e){let e=tS(r);if(i){if(i===e)continue;i=ti;break}i=e}return ts(i||ti,r)}return tt}function tk(e){let i=typeof e;return null===e?"":"string"===i||"number"===i||"boolean"===i?String(e):e instanceof tv||e instanceof tw||e instanceof tM?e.toString():JSON.stringify(e)}class tD{constructor(e,i){this.type=e,this.value=i}static parse(e,i){if(2!==e.length)return i.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!tL(e[1]))return i.error("invalid value");let r=e[1],n=tS(r),a=i.expectedType;return"array"===n.kind&&0===n.N&&a&&"array"===a.kind&&("number"!=typeof a.N||0===a.N)&&(n=a),new tD(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof tv?["rgba"].concat(this.value.toArray()):this.value instanceof tw?this.value.serialize():this.value}}var tE=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};let tA={string:e7,number:e8,boolean:e9,object:tt};class tP{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let r,n=1,a=e[0];if("array"===a){let a,s;if(e.length>2){let r=e[1];if("string"!=typeof r||!(r in tA)||"object"===r)return i.error('The item type argument of "array" must be one of string, number, boolean',1);a=tA[r],n++}else a=ti;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return i.error('The length argument to "array" must be a positive integer literal',2);s=e[2],n++}r=ts(a,s)}else r=tA[a];let s=[];for(;n<e.length;n++){let r=i.parse(e[n],n,ti);if(!r)return null;s.push(r)}return new tP(r,s)}evaluate(e){for(let i=0;i<this.args.length;i++){let r=this.args[i].evaluate(e);if(!tu(this.type,tS(r)))return r;if(i===this.args.length-1)throw new tE(`Expected value to be of type ${to(this.type)}, but found ${to(tS(r))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){let e=this.type,i=[e.kind];if("array"===e.kind){let r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){i.push(r.kind);let n=e.N;("number"==typeof n||this.args.length>1)&&i.push(n)}}return i.concat(this.args.map(e=>e.serialize()))}}class tC{constructor(e){this.type=tn,this.sections=e}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return i.error("First argument must be an image or text section.");let n=[],a=!1;for(let r=1;r<=e.length-1;++r){let s=e[r];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;let e=null;if(s["font-scale"]&&!(e=i.parse(s["font-scale"],1,e8)))return null;let r=null;if(s["text-font"]&&!(r=i.parse(s["text-font"],1,ts(e7))))return null;let o=null;if(s["text-color"]&&!(o=i.parse(s["text-color"],1,te)))return null;let l=n[n.length-1];l.scale=e,l.font=r,l.textColor=o}else{let s=i.parse(e[r],1,ti);if(!s)return null;let o=s.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:s,scale:null,font:null,textColor:null})}}return new tC(n)}evaluate(e){return new tw(this.sections.map(i=>{let r=i.content.evaluate(e);return tS(r)===ta?new tb("",r,null,null,null):new tb(tk(r),null,i.scale?i.scale.evaluate(e):null,i.font?i.font.evaluate(e).join(","):null,i.textColor?i.textColor.evaluate(e):null)}))}eachChild(e){for(let i of this.sections)e(i.content),i.scale&&e(i.scale),i.font&&e(i.font),i.textColor&&e(i.textColor)}outputDefined(){return!1}serialize(){let e=["format"];for(let i of this.sections){e.push(i.content.serialize());let r={};i.scale&&(r["font-scale"]=i.scale.serialize()),i.font&&(r["text-font"]=i.font.serialize()),i.textColor&&(r["text-color"]=i.textColor.serialize()),e.push(r)}return e}}class tI{constructor(e,i){this.type=ta,this.inputPrimary=e,this.inputSecondary=i}static parse(e,i){if(e.length<2)return i.error("Expected two or more arguments.");let r=i.parse(e[1],1,e7);if(!r)return i.error("No image name provided.");if(2===e.length)return new tI(r);let n=i.parse(e[2],1,e7);return n?new tI(r,n):i.error("Secondary image variant is not a string.")}evaluate(e){let i=tM.fromString(this.inputPrimary.evaluate(e),this.inputSecondary?this.inputSecondary.evaluate(e):void 0);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(i.namePrimary)>-1,i.nameSecondary&&i.available&&e.availableImages&&(i.available=e.availableImages.indexOf(i.nameSecondary)>-1)),i}eachChild(e){e(this.inputPrimary),this.inputSecondary&&e(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function tO(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}let tz={"to-boolean":e9,"to-color":te,"to-number":e8,"to-string":e7};class tR{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expected at least one argument.");let r=e[0],n=[],a=e6;if("to-array"===r){if(!Array.isArray(e[1]))return null;let r=e[1].length;if(i.expectedType){if("array"!==i.expectedType.kind)return i.error(`Expected ${i.expectedType.kind} but found array.`);a=ts(i.expectedType.itemType,r)}else{if(!(r>0&&tL(e[1][0])))return null;a=ts(tS(e[1][0]),r)}for(let s=0;s<r;s++){let r;let o=e[1][s];if("array"===tO(o))r=i.parse(o,void 0,a.itemType);else{let e=tO(o);if(e!==a.itemType.kind)return i.error(`Expected ${a.itemType.kind} but found ${e}.`);r=i.registry.literal.parse(["literal",void 0===o?null:o],i)}if(!r)return null;n.push(r)}}else{if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return i.error("Expected one argument.");a=tz[r];for(let r=1;r<e.length;r++){let a=i.parse(e[r],r,ti);if(!a)return null;n.push(a)}}return new tR(a,n)}evaluate(e){if("boolean"===this.type.kind)return!!this.args[0].evaluate(e);if("color"===this.type.kind){let i,r;for(let n of this.args){if(i=n.evaluate(e),r=null,i instanceof tv)return i;if("string"==typeof i){let r=e.parseColor(i);if(r)return r}else if(Array.isArray(i)&&!(r=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:tT(i[0],i[1],i[2],i[3])))return new tv(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new tE(r||`Could not parse color from value '${"string"==typeof i?i:String(JSON.stringify(i))}'`)}if("number"===this.type.kind){let i=null;for(let r of this.args){if(null===(i=r.evaluate(e)))return 0;let n=Number(i);if(!isNaN(n))return n}throw new tE(`Could not convert ${JSON.stringify(i)} to number.`)}return"formatted"===this.type.kind?tw.fromString(tk(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?tM.fromString(tk(this.args[0].evaluate(e))):"array"===this.type.kind?this.args.map(i=>i.evaluate(e)):tk(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new tC([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new tI(this.args[0]).serialize();let e="array"===this.type.kind?[]:[`to-${this.type.kind}`];return this.eachChild(i=>{e.push(i.serialize())}),e}}let tY=["Unknown","Point","LineString","Polygon"];var tF=class{constructor(e,i){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=e,this.options=i}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?tY[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(e){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){let e=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:r,y:n}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*i-e[0])+this.featureDistanceData.bearing[1]*(n*i-e[1])}return 0}parseColor(e){let i=this._parseColorCache[e];return i||(i=this._parseColorCache[e]=tv.parse(e)),i}getConfig(e){return this.options?this.options.get(e):null}};class tj{constructor(e,i,r,n,a){this.name=e,this.type=i,this._evaluate=r,this.args=n,this._overloadIndex=a}evaluate(e){if(!this._evaluate){let e=tj.definitions[this.name];this._evaluate=Array.isArray(e)?e[2]:e.overloads[this._overloadIndex][1]}return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,i){let r=e[0],n=tj.definitions[r];if(!n)return i.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);let a=Array.isArray(n)?n[0]:n.type,s=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,o=[],l=null,u=-1;for(let[n,h]of s){if(Array.isArray(n)&&n.length!==e.length-1)continue;o.push(n),u++,l=new iM(i.registry,i.path,null,i.scope,void 0,i._scope,i.options);let s=[],c=!1;for(let i=1;i<e.length;i++){let r=e[i],a=Array.isArray(n)?n[i-1]:n.type,o=l.parse(r,1+s.length,a);if(!o){c=!0;break}s.push(o)}if(!c){if(Array.isArray(n)&&n.length!==s.length)l.error(`Expected ${n.length} arguments, but found ${s.length} instead.`);else{for(let e=0;e<s.length;e++){let i=Array.isArray(n)?n[e]:n.type,r=s[e];l.concat(e+1).checkSubtype(i,r.type)}if(0===l.errors.length)return new tj(r,a,h,s,u)}}}if(1===o.length)i.errors.push(...l.errors);else{let r=(o.length?o:s.map(([e])=>e)).map(tB).join(" | "),n=[];for(let r=1;r<e.length;r++){let a=i.parse(e[r],1+n.length);if(!a)return null;n.push(to(a.type))}i.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(e,i){for(let r in tj.definitions=i,i)e[r]=tj}}function tB(e){return Array.isArray(e)?`(${e.map(to).join(", ")})`:`(${to(e.type)}...)`}class tN{constructor(e,i,r){this.type=tr,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=i}static parse(e,i){if(2!==e.length)return i.error("Expected one argument.");let r=e[1];if("object"!=typeof r||Array.isArray(r))return i.error("Collator options argument must be an object.");let n=i.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,e9);if(!n)return null;let a=i.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,e9);if(!a)return null;let s=null;return!r.locale||(s=i.parse(r.locale,1,e7))?new tN(n,a,s):null}evaluate(e){return new tx(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){let e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}var tH={exports:{}};tH.exports=function(){function e(e,i,r){var n=e[i];e[i]=e[r],e[r]=n}function i(e,i){return e<i?-1:e>i?1:0}return function(r,n,a,s,o){!function i(r,n,a,s,o){for(;s>a;){if(s-a>600){var l=s-a+1,u=n-a+1,h=Math.log(l),c=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*c*(l-c)/l)*(u-l/2<0?-1:1);i(r,n,Math.max(a,Math.floor(n-u*c/l+d)),Math.min(s,Math.floor(n+(l-u)*c/l+d)),o)}var f=r[n],p=a,m=s;for(e(r,a,n),o(r[s],f)>0&&e(r,a,s);p<m;){for(e(r,p,m),p++,m--;0>o(r[p],f);)p++;for(;o(r[m],f)>0;)m--}0===o(r[a],f)?e(r,a,m):e(r,++m,s),m<=n&&(a=m+1),n<=m&&(s=m-1)}}(r,n,a||0,s||r.length-1,o||i)}}();var tV=M(tH.exports);function tU(e,i){e[0]=Math.min(e[0],i[0]),e[1]=Math.min(e[1],i[1]),e[2]=Math.max(e[2],i[0]),e[3]=Math.max(e[3],i[1])}function t$(e,i){return!(e[0]<=i[0]||e[2]>=i[2]||e[1]<=i[1]||e[3]>=i[3])}function tW(e,i,r=!1){let n=!1;for(let a=0,s=i.length;a<s;a++){let s=i[a];for(let i=0,a=s.length,o=a-1;i<a;o=i++){let a=s[o],l=s[i];if(function(e,i,r){let n=e[0]-i[0],a=e[1]-i[1],s=e[0]-r[0],o=e[1]-r[1];return n*o-s*a==0&&n*s<=0&&a*o<=0}(e,a,l))return r;a[1]>e[1]!=l[1]>e[1]&&e[0]<(l[0]-a[0])*(e[1]-a[1])/(l[1]-a[1])+a[0]&&(n=!n)}}return n}function tG(e,i,r,n){let a=n[0]-r[0],s=n[1]-r[1],o=(e[0]-r[0])*s-a*(e[1]-r[1]),l=(i[0]-r[0])*s-a*(i[1]-r[1]);return o>0&&l<0||o<0&&l>0}function tq(e,i,r,n){var a,s;return 0!=(a=[n[0]-r[0],n[1]-r[1]])[0]*(s=[i[0]-e[0],i[1]-e[1]])[1]-a[1]*s[0]&&!(!tG(e,i,r,n)||!tG(r,n,e,i))}function tZ(e,i){for(let r=0;r<e.length;++r)if(!tW(e[r],i))return!1;for(let r=0;r<e.length-1;++r)if(function(e,i,r){for(let n of r)for(let r=0,a=n.length,s=a-1;r<a;s=r++)if(tq(e,i,n[s],n[r]))return!0;return!1}(e[r],e[r+1],i))return!1;return!0}function tX(e,i,r){let n=[];for(let a=0;a<e.length;a++){let s=[];for(let n=0;n<e[a].length;n++){let o=function(e,i){let r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,a=Math.pow(2,i.z);return[Math.round(r*a*8192),Math.round(n*a*8192)]}(e[a][n],r);tU(i,o),s.push(o)}n.push(s)}return n}function tJ(e,i,r){let n=[];for(let a=0;a<e.length;a++){let s=tX(e[a],i,r);n.push(s)}return n}function tK(e,i,r,n){if(e[0]<r[0]||e[0]>r[2]){let i=.5*n,a=e[0]-r[0]>i?-n:r[0]-e[0]>i?n:0;0===a&&(a=e[0]-r[2]>i?-n:r[2]-e[0]>i?n:0),e[0]+=a}tU(i,e)}function tQ(e,i,r,n){let a=8192*Math.pow(2,n.z),s=[8192*n.x,8192*n.y],o=[];if(!e)return o;for(let n of e)for(let e of n){let n=[e.x+s[0],e.y+s[1]];tK(n,i,r,a),o.push(n)}return o}function t0(e,i,r,n){let a=8192*Math.pow(2,n.z),s=[8192*n.x,8192*n.y],o=[];if(!e)return o;for(let r of e){let e=[];for(let n of r){let r=[n.x+s[0],n.y+s[1]];tU(i,r),e.push(r)}o.push(e)}if(i[2]-i[0]<=a/2)for(let e of(i[0]=i[1]=1/0,i[2]=i[3]=-1/0,o))for(let n of e)tK(n,i,r,a);return o}class t1{constructor(e,i){this.type=e9,this.geojson=e,this.geometries=i}static parse(e,i){if(2!==e.length)return i.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(tL(e[1])){let i=e[1];if("FeatureCollection"===i.type)for(let e=0;e<i.features.length;++e){let r=i.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new t1(i,i.features[e].geometry)}else if("Feature"===i.type){let e=i.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new t1(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new t1(i,i)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,i){let r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===i.type){let s=tX(i.coordinates,n,a),o=tQ(e.geometry(),r,n,a);if(!t$(r,n))return!1;for(let e of o)if(!tW(e,s))return!1}if("MultiPolygon"===i.type){let s=tJ(i.coordinates,n,a),o=tQ(e.geometry(),r,n,a);if(!t$(r,n))return!1;for(let e of o)if(!function(e,i){for(let r=0;r<i.length;r++)if(tW(e,i[r]))return!0;return!1}(e,s))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,i){let r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===i.type){let s=tX(i.coordinates,n,a),o=t0(e.geometry(),r,n,a);if(!t$(r,n))return!1;for(let e of o)if(!tZ(e,s))return!1}if("MultiPolygon"===i.type){let s=tJ(i.coordinates,n,a),o=t0(e.geometry(),r,n,a);if(!t$(r,n))return!1;for(let e of o)if(!function(e,i){for(let r=0;r<i.length;r++)if(tZ(e,i[r]))return!0;return!1}(e,s))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var t2={exports:{}};t2.exports=function(){var e={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},i=1/298.257223563*(2-1/298.257223563),r=Math.PI/180,n=function(n,a){if(void 0===n)throw Error("No latitude given.");if(a&&!e[a])throw Error("Unknown unit "+a+". Use one of: "+Object.keys(e).join(", "));var s=6378.137*r*(a?e[a]:1),o=Math.cos(n*r),l=1/(1-i*(1-o*o)),u=Math.sqrt(l);this.kx=s*u*o,this.ky=s*u*l*(1-i)},a={units:{configurable:!0}};function s(e,i){return e[0]===i[0]&&e[1]===i[1]}function o(e,i,r){var n=l(i[0]-e[0]);return[e[0]+n*r,e[1]+(i[1]-e[1])*r]}function l(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}return n.fromTile=function(e,i,a){var s=Math.PI*(1-2*(e+.5)/Math.pow(2,i));return new n(Math.atan(.5*(Math.exp(s)-Math.exp(-s)))/r,a)},a.units.get=function(){return e},n.prototype.distance=function(e,i){var r=l(e[0]-i[0])*this.kx,n=(e[1]-i[1])*this.ky;return Math.sqrt(r*r+n*n)},n.prototype.bearing=function(e,i){return Math.atan2(l(i[0]-e[0])*this.kx,(i[1]-e[1])*this.ky)/r},n.prototype.destination=function(e,i,n){var a=n*r;return this.offset(e,Math.sin(a)*i,Math.cos(a)*i)},n.prototype.offset=function(e,i,r){return[e[0]+i/this.kx,e[1]+r/this.ky]},n.prototype.lineDistance=function(e){for(var i=0,r=0;r<e.length-1;r++)i+=this.distance(e[r],e[r+1]);return i},n.prototype.area=function(e){for(var i=0,r=0;r<e.length;r++)for(var n=e[r],a=0,s=n.length,o=s-1;a<s;o=a++)i+=l(n[a][0]-n[o][0])*(n[a][1]+n[o][1])*(r?-1:1);return Math.abs(i)/2*this.kx*this.ky},n.prototype.along=function(e,i){var r=0;if(i<=0)return e[0];for(var n=0;n<e.length-1;n++){var a=e[n],s=e[n+1],l=this.distance(a,s);if((r+=l)>i)return o(a,s,(i-(r-l))/l)}return e[e.length-1]},n.prototype.pointToSegmentDistance=function(e,i,r){var n=i[0],a=i[1],s=l(r[0]-n)*this.kx,o=(r[1]-a)*this.ky,u=0;return 0===s&&0===o||((u=(l(e[0]-n)*this.kx*s+(e[1]-a)*this.ky*o)/(s*s+o*o))>1?(n=r[0],a=r[1]):u>0&&(n+=s/this.kx*u,a+=o/this.ky*u)),Math.sqrt((s=l(e[0]-n)*this.kx)*s+(o=(e[1]-a)*this.ky)*o)},n.prototype.pointOnLine=function(e,i){for(var r,n,a,s,o=1/0,u=0;u<e.length-1;u++){var h=e[u][0],c=e[u][1],d=l(e[u+1][0]-h)*this.kx,f=(e[u+1][1]-c)*this.ky,p=0;0===d&&0===f||((p=(l(i[0]-h)*this.kx*d+(i[1]-c)*this.ky*f)/(d*d+f*f))>1?(h=e[u+1][0],c=e[u+1][1]):p>0&&(h+=d/this.kx*p,c+=f/this.ky*p));var m=(d=l(i[0]-h)*this.kx)*d+(f=(i[1]-c)*this.ky)*f;m<o&&(o=m,r=h,n=c,a=u,s=p)}return{point:[r,n],index:a,t:Math.max(0,Math.min(1,s))}},n.prototype.lineSlice=function(e,i,r){var n=this.pointOnLine(r,e),a=this.pointOnLine(r,i);if(n.index>a.index||n.index===a.index&&n.t>a.t){var o=n;n=a,a=o}var l=[n.point],u=n.index+1,h=a.index;!s(r[u],l[0])&&u<=h&&l.push(r[u]);for(var c=u+1;c<=h;c++)l.push(r[c]);return s(r[h],a.point)||l.push(a.point),l},n.prototype.lineSliceAlong=function(e,i,r){for(var n=0,a=[],s=0;s<r.length-1;s++){var l=r[s],u=r[s+1],h=this.distance(l,u);if((n+=h)>e&&0===a.length&&a.push(o(l,u,(e-(n-h))/h)),n>=i)return a.push(o(l,u,(i-(n-h))/h)),a;n>e&&a.push(u)}return a},n.prototype.bufferPoint=function(e,i){var r=i/this.ky,n=i/this.kx;return[e[0]-n,e[1]-r,e[0]+n,e[1]+r]},n.prototype.bufferBBox=function(e,i){var r=i/this.ky,n=i/this.kx;return[e[0]-n,e[1]-r,e[2]+n,e[3]+r]},n.prototype.insideBBox=function(e,i){return l(e[0]-i[0])>=0&&0>=l(e[0]-i[2])&&e[1]>=i[1]&&e[1]<=i[3]},Object.defineProperties(n,a),n}();var t3=M(t2.exports),t4={exports:{}};t4.exports=function(){var e=function(e,r){if(void 0===e&&(e=[]),void 0===r&&(r=i),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function i(e,i){return e<i?-1:e>i?1:0}return e.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(0!==this.length){var e=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),e}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(e){for(var i=this.data,r=this.compare,n=i[e];e>0;){var a=e-1>>1,s=i[a];if(r(n,s)>=0)break;i[e]=s,e=a}i[e]=n},e.prototype._down=function(e){for(var i=this.data,r=this.compare,n=this.length>>1,a=i[e];e<n;){var s=1+(e<<1),o=i[s],l=s+1;if(l<this.length&&0>r(i[l],o)&&(s=l,o=i[l]),r(o,a)>=0)break;i[e]=o,e=s}i[e]=a},e}();var t5=M(t4.exports);function t6(e,i){return i.dist-e.dist}function t8(e){let i=[1/0,1/0,-1/0,-1/0];if(i.length!==e.length)return!1;for(let r=0;r<i.length;r++)if(i[r]!==e[r])return!1;return!0}function t7(e){return e[1]-e[0]+1}function t9(e,i){return e[1]>=e[0]&&e[1]<i}function ie(e,i){if(e[0]>e[1])return[null,null];let r=t7(e);if(i){if(2===r)return[e,null];let i=Math.floor(r/2);return[[e[0],e[0]+i],[e[0]+i,e[1]]]}{if(1===r)return[e,null];let i=Math.floor(r/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}}function it(e,i){let r=[1/0,1/0,-1/0,-1/0];if(!t9(i,e.length))return r;for(let n=i[0];n<=i[1];++n)tU(r,e[n]);return r}function ii(e){let i=[1/0,1/0,-1/0,-1/0];for(let r=0;r<e.length;++r)for(let n=0;n<e[r].length;++n)tU(i,e[r][n]);return i}function ir(e,i,r){if(t8(e)||t8(i))return NaN;let n=0,a=0;return e[2]<i[0]&&(n=i[0]-e[2]),e[0]>i[2]&&(n=e[0]-i[2]),e[1]>i[3]&&(a=e[1]-i[3]),e[3]<i[1]&&(a=i[1]-e[3]),r.distance([0,0],[n,a])}function ia(e,i){let r=Math.pow(2,i.z);return[(e.x/8192+i.x)/r*360-180,360/Math.PI*Math.atan(Math.exp((180-(e.y/8192+i.y)/r*360)*Math.PI/180))-90]}function is(e,i,r){let n=r.pointOnLine(i,e).point;return r.distance(e,n)}function io(e,i,r,n,a){let s=r.slice(n[0],n[1]+1),o=1/0;for(let r=i[0];r<=i[1];++r)if(0===(o=Math.min(o,is(e[r],s,a))))return 0;return o}function il(e,i,r,n,a){return Math.min(Math.min(a.pointToSegmentDistance(e,r,n),a.pointToSegmentDistance(i,r,n)),Math.min(a.pointToSegmentDistance(r,e,i),a.pointToSegmentDistance(n,e,i)))}function iu(e,i){for(let r of e)for(let e=0;e<=r.length-1;++e)if(tW(r[e],i,!0))return!0;return!1}function ih(e,i,r,n,a,s,o){if(null===s||null===o)return;let l=ir(it(n,s),it(a,o),r);l<i&&e.push({dist:l,range1:s,range2:o})}function ic(e,i,r,n,a,s=1/0){let o=Math.min(s,a.distance(e[0],r[0]));if(0===o)return o;let l=new t5([{dist:0,range1:[0,e.length-1],range2:[0,r.length-1]}],t6),u=i?50:100,h=n?50:100;for(;l.length;){let s=l.pop();if(s.dist>=o)continue;let c=s.range1,d=s.range2;if(t7(c)<=u&&t7(d)<=h){if(!t9(c,e.length)||!t9(d,r.length))return NaN;if(i&&n?o=Math.min(o,function(e,i,r,n,a){if(!t9(i,e.length)||!t9(n,r.length))return NaN;let s=1/0;for(let o=i[0];o<i[1];++o)for(let i=n[0];i<n[1];++i){if(tq(e[o],e[o+1],r[i],r[i+1]))return 0;s=Math.min(s,il(e[o],e[o+1],r[i],r[i+1],a))}return s}(e,c,r,d,a)):i||n?i&&!n?o=Math.min(o,io(r,d,e,c,a)):!i&&n&&(o=Math.min(o,io(e,c,r,d,a))):o=Math.min(o,function(e,i,r,n,a){if(!t9(i,e.length)||!t9(n,r.length))return NaN;let s=1/0;for(let o=i[0];o<=i[1];++o)for(let i=n[0];i<=n[1];++i)if(0===(s=Math.min(s,a.distance(e[o],r[i]))))return s;return s}(e,c,r,d,a)),0===o)break}else{let s=ie(c,i),u=ie(d,n);ih(l,o,a,e,r,s[0],u[0]),ih(l,o,a,e,r,s[0],u[1]),ih(l,o,a,e,r,s[1],u[0]),ih(l,o,a,e,r,s[1],u[1])}}return o}function id(e,i,r,n,a=1/0){let s=a,o=it(e,[0,e.length-1]);for(let a of r)if(!(s!==1/0&&ir(o,it(a,[0,a.length-1]),n)>=s)&&0===(s=Math.min(s,ic(e,i,a,!0,n,s))))break;return s}function ip(e,i,r,n,a=1/0){let s=a,o=it(e,[0,e.length-1]);for(let a of r){if(s!==1/0&&ir(o,ii(a),n)>=s)continue;let r=function(e,i,r,n,a=1/0){let s=Math.min(n.distance(e[0],r[0][0]),a);if(0===s)return s;let o=new t5([{dist:0,range1:[0,e.length-1],range2:[0,0]}],t6),l=i?50:100,u=ii(r);for(;o.length;){let a=o.pop();if(a.dist>=s)continue;let h=a.range1;if(t7(h)<=l){if(!t9(h,e.length))return NaN;if(i){if(0===(s=Math.min(s,function(e,i,r,n){if(!t9(i,e.length))return NaN;for(let n=i[0];n<=i[1];++n)if(tW(e[n],r,!0))return 0;let a=1/0;for(let s=i[0];s<i[1];++s)for(let i of r)for(let r=0,o=i.length,l=o-1;r<o;l=r++){if(tq(e[s],e[s+1],i[l],i[r]))return 0;a=Math.min(a,il(e[s],e[s+1],i[l],i[r],n))}return a}(e,h,r,n))))break}else for(let i=h[0];i<=h[1];++i)if(0===(s=Math.min(s,function(e,i,r){if(tW(e,i,!0))return 0;let n=1/0;for(let a of i){let i=a.length;if(i<2)return NaN;if(a[0]!==a[i-1]&&0===(n=Math.min(n,r.pointToSegmentDistance(e,a[i-1],a[0])))||0===(n=Math.min(n,is(e,a,r))))break}return n}(e[i],r,n))))return s}else{let r=ie(h,i);if(null!==r[0]){let i=ir(it(e,r[0]),u,n);i<s&&o.push({dist:i,range1:r[0],range2:[0,0]})}if(null!==r[1]){let i=ir(it(e,r[1]),u,n);i<s&&o.push({dist:i,range1:r[1],range2:[0,0]})}}}return s}(e,i,a,n,s);if(isNaN(r))return r;if(0===(s=Math.min(s,r)))break}return s}function im(e){return"Point"===e||"MultiPoint"===e||"LineString"===e||"MultiLineString"===e||"Polygon"===e||"MultiPolygon"===e}class i_{constructor(e,i){this.type=e8,this.geojson=e,this.geometries=i}static parse(e,i){if(2!==e.length)return i.error(`'distance' expression requires either one argument, but found ' ${e.length-1} instead.`);if(tL(e[1])){let i=e[1];if("FeatureCollection"===i.type){for(let e=0;e<i.features.length;++e)if(im(i.features[e].geometry.type))return new i_(i,i.features[e].geometry)}else if("Feature"===i.type){if(im(i.geometry.type))return new i_(i,i.geometry)}else if(im(i.type))return new i_(i,i)}return i.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){let i=e.geometry(),r=e.canonicalID();if(null!=i&&null!=r){if("Point"===e.geometryType())return function(e,i,r){let n=[];for(let r of e)for(let e of r)n.push(ia(e,i));let a=new t3(n[0][1],"meters");return"Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type?ic(n,!1,"Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,a):"MultiLineString"===r.type?id(n,!1,r.coordinates,a):"Polygon"===r.type||"MultiPolygon"===r.type?ip(n,!1,"Polygon"===r.type?[r.coordinates]:r.coordinates,a):null}(i,r,this.geometries);if("LineString"===e.geometryType())return function(e,i,r){let n=[];for(let r of e){let e=[];for(let n of r)e.push(ia(n,i));n.push(e)}let a=new t3(n[0][0][1],"meters");if("Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type)return id("Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,n,a);if("MultiLineString"===r.type){let e=1/0;for(let i=0;i<r.coordinates.length;i++){let s=id(r.coordinates[i],!0,n,a,e);if(isNaN(s))return s;if(0===(e=Math.min(e,s)))break}return e}if("Polygon"===r.type||"MultiPolygon"===r.type){let e=1/0;for(let i=0;i<n.length;i++){let s=ip(n[i],!0,"Polygon"===r.type?[r.coordinates]:r.coordinates,a,e);if(isNaN(s))return s;if(0===(e=Math.min(e,s)))break}return e}return null}(i,r,this.geometries);if("Polygon"===e.geometryType())return function(e,i,r){let n=[];for(let r of function(e,i){let r,n;let a=e.length;if(a<=1)return[e];let s=[];for(let i=0;i<a;i++){let a=function(e){let i=0;for(let r,n,a=0,s=e.length,o=s-1;a<s;o=a++)r=e[a],i+=((n=e[o]).x-r.x)*(r.y+n.y);return i}(e[i]);0!==a&&(e[i].area=Math.abs(a),void 0===n&&(n=a<0),n===a<0?(r&&s.push(r),r=[e[i]]):r.push(e[i]))}return r&&s.push(r),s}(e)){let e=[];for(let n=0;n<r.length;++n)e.push(function(e,i){let r=[];for(let n=0;n<e.length;++n)r.push(ia(e[n],i));return r}(r[n],i));n.push(e)}let a=new t3(n[0][0][0][1],"meters");if("Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type)return ip("Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,n,a);if("MultiLineString"===r.type){let e=1/0;for(let i=0;i<r.coordinates.length;i++){let s=ip(r.coordinates[i],!0,n,a,e);if(isNaN(s))return s;if(0===(e=Math.min(e,s)))break}return e}return"Polygon"===r.type||"MultiPolygon"===r.type?function(e,i,r){let n=1/0;for(let a of e)for(let e of i){let i=function(e,i,r,n=1/0){let a=ii(e),s=ii(i);if(n!==1/0&&ir(a,s,r)>=n)return n;if(t$(a,s)){if(iu(e,i))return 0}else if(iu(i,e))return 0;let o=n;for(let n of e)for(let e=0,a=n.length,s=a-1;e<a;s=e++)for(let a of i)for(let i=0,l=a.length,u=l-1;i<l;u=i++){if(tq(n[s],n[e],a[u],a[i]))return 0;o=Math.min(o,il(n[s],n[e],a[u],a[i],r))}return o}(a,e,r,n);if(isNaN(i))return i;if(0===(n=Math.min(n,i)))return n}return n}("Polygon"===r.type?[r.coordinates]:r.coordinates,n,a):null}(i,r,this.geometries)}return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function ig(e){if(e instanceof tj&&("get"===e.name&&1===e.args.length||"feature-state"===e.name||"has"===e.name&&1===e.args.length||"properties"===e.name||"geometry-type"===e.name||"id"===e.name||/^filter-/.test(e.name))||e instanceof t1||e instanceof i_)return!1;let i=!0;return e.eachChild(e=>{i&&!ig(e)&&(i=!1)}),i}function iy(e){if(e instanceof tj&&"feature-state"===e.name)return!1;let i=!0;return e.eachChild(e=>{i&&!iy(e)&&(i=!1)}),i}function iv(e){if(e instanceof tj&&"config"===e.name)return!1;let i=!0;return e.eachChild(e=>{i&&!iv(e)&&(i=!1)}),i}function ix(e,i){if(e instanceof tj&&i.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild(e=>{r&&!ix(e,i)&&(r=!1)}),r}class ib{constructor(e,i){this.type=i.type,this.name=e,this.boundExpression=i}static parse(e,i){if(2!==e.length||"string"!=typeof e[1])return i.error("'var' expression requires exactly one string literal argument.");let r=e[1];return i.scope.has(r)?new ib(r,i.scope.get(r)):i.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class iw{constructor(e,i=[],r,n=new e5,a=[],s,o){this.registry=e,this.path=i,this.key=i.map(e=>`[${e}]`).join(""),this.scope=n,this.errors=a,this.expectedType=r,this._scope=s,this.options=o}parse(e,i,r,n,a={}){return i||r?this.concat(i,r,n)._parse(e,a):this._parse(e,a)}_parse(e,i){function r(e,i,r){return"assert"===r?new tP(i,[e]):"coerce"===r?new tR(i,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let n="string"==typeof e[0]?this.registry[e[0]]:void 0;if(n){let a=n.parse(e,this);if(!a)return null;if(this.expectedType){let e=this.expectedType,n=a.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==n.kind){if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==n.kind&&"string"!==n.kind){if(this.checkSubtype(e,n))return null}else a=r(a,e,i.typeAnnotation||"coerce")}else a=r(a,e,i.typeAnnotation||"assert")}if(!(a instanceof tD)&&"resolvedImage"!==a.type.kind&&function e(i){if(i instanceof ib)return e(i.boundExpression);if(i instanceof tj&&"error"===i.name||i instanceof tj&&"config"===i.name||i instanceof tN||i instanceof t1||i instanceof i_)return!1;let r=i instanceof tR||i instanceof tP,n=!0;return i.eachChild(i=>{n=r?n&&e(i):n&&i instanceof tD}),!!n&&ig(i)&&ix(i,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light"])}(a)){let e=new tF(this._scope,this.options);try{a=new tD(a.type,a.evaluate(e))}catch(i){return this.error(i.message),null}}return a}return tR.parse(["to-array",e],this)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,i,r){let n="number"==typeof e?this.path.concat(e):this.path,a=r?this.scope.concat(r):this.scope;return new iw(this.registry,n,i||null,a,this.errors,this._scope,this.options)}error(e,...i){let r=`${this.key}${i.map(e=>`[${e}]`).join("")}`;this.errors.push(new e4(r,e))}checkSubtype(e,i){let r=tu(e,i);return r&&this.error(r),r}}var iM=iw;function iT(e,i){let r=e.length-1,n,a,s=0,o=r,l=0;for(;s<=o;)if(n=e[l=Math.floor((s+o)/2)],a=e[l+1],n<=i){if(l===r||i<a)return l;s=l+1}else{if(!(n>i))throw new tE("Input is not a number.");o=l-1}return 0}class iL{constructor(e,i,r){for(let[n,a]of(this.type=e,this.input=i,this.labels=[],this.outputs=[],r))this.labels.push(n),this.outputs.push(a)}static parse(e,i){if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");let r=i.parse(e[1],1,e8);if(!r)return null;let n=[],a=null;i.expectedType&&"value"!==i.expectedType.kind&&(a=i.expectedType);for(let r=1;r<e.length;r+=2){let s=1===r?-1/0:e[r],o=e[r+1],l=r,u=r+1;if("number"!=typeof s)return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(n.length&&n[n.length-1][0]>=s)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);let h=i.parse(o,u,a);if(!h)return null;a=a||h.type,n.push([s,h])}return new iL(a,r,n)}evaluate(e){let i=this.labels,r=this.outputs;if(1===i.length)return r[0].evaluate(e);let n=this.input.evaluate(e);if(n<=i[0])return r[0].evaluate(e);let a=i.length;return n>=i[a-1]?r[a-1].evaluate(e):r[iT(i,n)].evaluate(e)}eachChild(e){for(let i of(e(this.input),this.outputs))e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&e.push(this.labels[i]),e.push(this.outputs[i].serialize());return e}}function iS(e,i,r){return e*(1-r)+i*r}function ik(e,i,r){return e.map((e,n)=>iS(e,i[n],r))}var iD=Object.freeze({__proto__:null,array:ik,color:function(e,i,r){return new tv(iS(e.r,i.r,r),iS(e.g,i.g,r),iS(e.b,i.b,r),iS(e.a,i.a,r))},number:iS});let iE=4/29,iA=6/29,iP=6/29*3*(6/29),iC=6/29*(6/29)*(6/29),iI=Math.PI/180,iO=180/Math.PI;function iz(e){return e>iC?Math.pow(e,1/3):e/iP+iE}function iR(e){return e>iA?e*e*e:iP*(e-iE)}function iY(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function iF(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ij(e){let i=iF(e.r),r=iF(e.g),n=iF(e.b),a=iz((.4124564*i+.3575761*r+.1804375*n)/.95047),s=iz((.2126729*i+.7151522*r+.072175*n)/1);return{l:116*s-16,a:500*(a-s),b:200*(s-iz((.0193339*i+.119192*r+.9503041*n)/1.08883)),alpha:e.a}}function iB(e){let i=(e.l+16)/116,r=isNaN(e.a)?i:i+e.a/500,n=isNaN(e.b)?i:i-e.b/200;return i=1*iR(i),new tv(iY(3.2404542*(r=.95047*iR(r))-1.5371385*i-.4985314*(n=1.08883*iR(n))),iY(-.969266*r+1.8760108*i+.041556*n),iY(.0556434*r-.2040259*i+1.0572252*n),e.alpha)}let iN={forward:ij,reverse:iB,interpolate:function(e,i,r){return{l:iS(e.l,i.l,r),a:iS(e.a,i.a,r),b:iS(e.b,i.b,r),alpha:iS(e.alpha,i.alpha,r)}}},iH={forward:function(e){let{l:i,a:r,b:n}=ij(e),a=Math.atan2(n,r)*iO;return{h:a<0?a+360:a,c:Math.sqrt(r*r+n*n),l:i,alpha:e.a}},reverse:function(e){let i=e.h*iI,r=e.c;return iB({l:e.l,a:Math.cos(i)*r,b:Math.sin(i)*r,alpha:e.alpha})},interpolate:function(e,i,r){return{h:function(e,i,r){let n=i-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}(e.h,i.h,r),c:iS(e.c,i.c,r),l:iS(e.l,i.l,r),alpha:iS(e.alpha,i.alpha,r)}}};var iV=Object.freeze({__proto__:null,hcl:iH,lab:iN});class iU{constructor(e,i,r,n,a){for(let[s,o]of(this.type=e,this.operator=i,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[],a))this.labels.push(s),this.outputs.push(o)}static interpolationFactor(e,i,r,n){let a=0;if("exponential"===e.name)a=i$(i,e.base,r,n);else if("linear"===e.name)a=i$(i,1,r,n);else if("cubic-bezier"===e.name){let s=e.controlPoints;a=new L(s[0],s[1],s[2],s[3]).solve(i$(i,1,r,n))}return a}static parse(e,i){let[r,n,a,...s]=e;if(!Array.isArray(n)||0===n.length)return i.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){let e=n[1];if("number"!=typeof e)return i.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return i.error(`Unknown interpolation type ${String(n[0])}`,1,0);{let e=n.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(a=i.parse(a,2,e8)))return null;let o=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=te:i.expectedType&&"value"!==i.expectedType.kind&&(l=i.expectedType);for(let e=0;e<s.length;e+=2){let r=s[e],n=s[e+1],a=e+3,u=e+4;if("number"!=typeof r)return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(o.length&&o[o.length-1][0]>=r)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);let h=i.parse(n,u,l);if(!h)return null;l=l||h.type,o.push([r,h])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new iU(l,r,n,a,o):i.error(`Type ${to(l)} is not interpolatable.`)}evaluate(e){let i=this.labels,r=this.outputs;if(1===i.length)return r[0].evaluate(e);let n=this.input.evaluate(e);if(n<=i[0])return r[0].evaluate(e);let a=i.length;if(n>=i[a-1])return r[a-1].evaluate(e);let s=iT(i,n),o=iU.interpolationFactor(this.interpolation,n,i[s],i[s+1]),l=r[s].evaluate(e),u=r[s+1].evaluate(e);return"interpolate"===this.operator?iD[this.type.kind.toLowerCase()](l,u,o):"interpolate-hcl"===this.operator?iH.reverse(iH.interpolate(iH.forward(l),iH.forward(u),o)):iN.reverse(iN.interpolate(iN.forward(l),iN.forward(u),o))}eachChild(e){for(let i of(e(this.input),this.outputs))e(i)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);let i=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)i.push(this.labels[e],this.outputs[e].serialize());return i}}function i$(e,i,r,n){let a=n-r,s=e-r;return 0===a?0:1===i?s/a:(Math.pow(i,s)-1)/(Math.pow(i,a)-1)}class iW{constructor(e,i){this.type=e,this.args=i}static parse(e,i){if(e.length<2)return i.error("Expectected at least one argument.");let r=null,n=i.expectedType;n&&"value"!==n.kind&&(r=n);let a=[];for(let n of e.slice(1)){let e=i.parse(n,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,a.push(e)}return new iW(n&&a.some(e=>tu(n,e.type))?ti:r,a)}evaluate(e){let i,r=null,n=0;for(let a of this.args){if(n++,(r=a.evaluate(e))&&r instanceof tM&&!r.available&&(i||(i=r),r=null,n===this.args.length))return i;if(null!==r)break}return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){let e=["coalesce"];return this.eachChild(i=>{e.push(i.serialize())}),e}}class iG{constructor(e,i){this.type=i.type,this.bindings=[].concat(e),this.result=i}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(let i of this.bindings)e(i[1]);e(this.result)}static parse(e,i){if(e.length<4)return i.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);let r=[];for(let n=1;n<e.length-1;n+=2){let a=e[n];if("string"!=typeof a)return i.error(`Expected string, but found ${typeof a} instead.`,n);if(/[^a-zA-Z0-9_]/.test(a))return i.error("Variable names must contain only alphanumeric characters or '_'.",n);let s=i.parse(e[n+1],n+1);if(!s)return null;r.push([a,s])}let n=i.parse(e[e.length-1],e.length-1,i.expectedType,r);return n?new iG(r,n):null}outputDefined(){return this.result.outputDefined()}serialize(){let e=["let"];for(let[i,r]of this.bindings)e.push(i,r.serialize());return e.push(this.result.serialize()),e}}class iq{constructor(e,i,r){this.type=e,this.index=i,this.input=r}static parse(e,i){if(3!==e.length)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let r=i.parse(e[1],1,e8),n=i.parse(e[2],2,ts(i.expectedType||ti));return r&&n?new iq(n.type.itemType,r,n):null}evaluate(e){let i=this.index.evaluate(e),r=this.input.evaluate(e);if(i<0)throw new tE(`Array index out of bounds: ${i} < 0.`);if(i>=r.length)throw new tE(`Array index out of bounds: ${i} > ${r.length-1}.`);if(i!==Math.floor(i))throw new tE(`Array index must be an integer, but found ${i} instead.`);return r[i]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class iZ{constructor(e,i){this.type=e9,this.needle=e,this.haystack=i}static parse(e,i){if(3!==e.length)return i.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let r=i.parse(e[1],1,ti),n=i.parse(e[2],2,ti);return r&&n?th(r.type,[e9,e7,e8,e6,ti])?new iZ(r,n):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${to(r.type)} instead`):null}evaluate(e){let i=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!tc(i,["boolean","string","number","null"]))throw new tE(`Expected first argument to be of type boolean, string, number or null, but found ${to(tS(i))} instead.`);if(!tc(r,["string","array"]))throw new tE(`Expected second argument to be of type array or string, but found ${to(tS(r))} instead.`);return r.indexOf(i)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class iX{constructor(e,i,r){this.type=e8,this.needle=e,this.haystack=i,this.fromIndex=r}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let r=i.parse(e[1],1,ti),n=i.parse(e[2],2,ti);if(!r||!n)return null;if(!th(r.type,[e9,e7,e8,e6,ti]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${to(r.type)} instead`);if(4===e.length){let a=i.parse(e[3],3,e8);return a?new iX(r,n,a):null}return new iX(r,n)}evaluate(e){let i=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!tc(i,["boolean","string","number","null"]))throw new tE(`Expected first argument to be of type boolean, string, number or null, but found ${to(tS(i))} instead.`);if(!tc(r,["string","array"]))throw new tE(`Expected second argument to be of type array or string, but found ${to(tS(r))} instead.`);if(this.fromIndex){let n=this.fromIndex.evaluate(e);return r.indexOf(i,n)}return r.indexOf(i)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){let e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class iJ{constructor(e,i,r,n,a,s){this.inputType=e,this.type=i,this.input=r,this.cases=n,this.outputs=a,this.otherwise=s}static parse(e,i){let r,n;if(e.length<5)return i.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return i.error("Expected an even number of arguments.");i.expectedType&&"value"!==i.expectedType.kind&&(n=i.expectedType);let a={},s=[];for(let o=2;o<e.length-1;o+=2){let l=e[o],u=e[o+1];Array.isArray(l)||(l=[l]);let h=i.concat(o);if(0===l.length)return h.error("Expected at least one branch label.");for(let e of l){if("number"!=typeof e&&"string"!=typeof e)return h.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return h.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return h.error("Numeric branch labels must be integer values.");if(r){if(h.checkSubtype(r,tS(e)))return null}else r=tS(e);if(void 0!==a[String(e)])return h.error("Branch labels must be unique.");a[String(e)]=s.length}let c=i.parse(u,o,n);if(!c)return null;n=n||c.type,s.push(c)}let o=i.parse(e[1],1,ti);if(!o)return null;let l=i.parse(e[e.length-1],e.length-1,n);return l?"value"!==o.type.kind&&i.concat(1).checkSubtype(r,o.type)?null:new iJ(r,n,o,a,s,l):null}evaluate(e){let i=this.input.evaluate(e);return(tS(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){let e=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),r=[],n={};for(let e of i){let i=n[this.cases[e]];void 0===i?(n[this.cases[e]]=r.length,r.push([this.cases[e],[e]])):r[i][1].push(e)}let a=e=>"number"===this.inputType.kind?Number(e):e;for(let[i,n]of r)e.push(1===n.length?a(n[0]):n.map(a)),e.push(this.outputs[i].serialize());return e.push(this.otherwise.serialize()),e}}class iK{constructor(e,i,r){this.type=e,this.branches=i,this.otherwise=r}static parse(e,i){let r;if(e.length<4)return i.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return i.error("Expected an odd number of arguments.");i.expectedType&&"value"!==i.expectedType.kind&&(r=i.expectedType);let n=[];for(let a=1;a<e.length-1;a+=2){let s=i.parse(e[a],a,e9);if(!s)return null;let o=i.parse(e[a+1],a+1,r);if(!o)return null;n.push([s,o]),r=r||o.type}let a=i.parse(e[e.length-1],e.length-1,r);return a?new iK(r,n,a):null}evaluate(e){for(let[i,r]of this.branches)if(i.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(let[i,r]of this.branches)e(i),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){let e=["case"];return this.eachChild(i=>{e.push(i.serialize())}),e}}class iQ{constructor(e,i,r,n){this.type=e,this.input=i,this.beginIndex=r,this.endIndex=n}static parse(e,i){if(e.length<=2||e.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let r=i.parse(e[1],1,ti),n=i.parse(e[2],2,e8);if(!r||!n)return null;if(!th(r.type,[ts(ti),e7,ti]))return i.error(`Expected first argument to be of type array or string, but found ${to(r.type)} instead`);if(4===e.length){let a=i.parse(e[3],3,e8);return a?new iQ(r.type,r,n,a):null}return new iQ(r.type,r,n)}evaluate(e){let i=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!tc(i,["string","array"]))throw new tE(`Expected first argument to be of type array or string, but found ${to(tS(i))} instead.`);if(this.endIndex){let n=this.endIndex.evaluate(e);return i.slice(r,n)}return i.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){let e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function i0(e,i){return"=="===e||"!="===e?"boolean"===i.kind||"string"===i.kind||"number"===i.kind||"null"===i.kind||"value"===i.kind:"string"===i.kind||"number"===i.kind||"value"===i.kind}function i1(e,i,r,n){return 0===n.compare(i,r)}function i2(e,i,r){let n="=="!==e&&"!="!==e;return class a{constructor(e,i,r){this.type=e9,this.lhs=e,this.rhs=i,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===i.type.kind}static parse(e,i){if(3!==e.length&&4!==e.length)return i.error("Expected two or three arguments.");let r=e[0],s=i.parse(e[1],1,ti);if(!s)return null;if(!i0(r,s.type))return i.concat(1).error(`"${r}" comparisons are not supported for type '${to(s.type)}'.`);let o=i.parse(e[2],2,ti);if(!o)return null;if(!i0(r,o.type))return i.concat(2).error(`"${r}" comparisons are not supported for type '${to(o.type)}'.`);if(s.type.kind!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return i.error(`Cannot compare types '${to(s.type)}' and '${to(o.type)}'.`);n&&("value"===s.type.kind&&"value"!==o.type.kind?s=new tP(o.type,[s]):"value"!==s.type.kind&&"value"===o.type.kind&&(o=new tP(s.type,[o])));let l=null;if(4===e.length){if("string"!==s.type.kind&&"string"!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return i.error("Cannot use collator to compare non-string types.");if(!(l=i.parse(e[3],3,tr)))return null}return new a(s,o,l)}evaluate(a){let s=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){let i=tS(s),r=tS(o);if(i.kind!==r.kind||"string"!==i.kind&&"number"!==i.kind)throw new tE(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${i.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){let e=tS(s),r=tS(o);if("string"!==e.kind||"string"!==r.kind)return i(a,s,o)}return this.collator?r(a,s,o,this.collator.evaluate(a)):i(a,s,o)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){let i=[e];return this.eachChild(e=>{i.push(e.serialize())}),i}}}let i3=i2("==",function(e,i,r){return i===r},i1),i4=i2("!=",function(e,i,r){return i!==r},function(e,i,r,n){return!i1(0,i,r,n)}),i5=i2("<",function(e,i,r){return i<r},function(e,i,r,n){return 0>n.compare(i,r)}),i6=i2(">",function(e,i,r){return i>r},function(e,i,r,n){return n.compare(i,r)>0}),i8=i2("<=",function(e,i,r){return i<=r},function(e,i,r,n){return 0>=n.compare(i,r)}),i7=i2(">=",function(e,i,r){return i>=r},function(e,i,r,n){return n.compare(i,r)>=0});class i9{constructor(e,i,r,n,a,s){this.type=e7,this.number=e,this.locale=i,this.currency=r,this.unit=n,this.minFractionDigits=a,this.maxFractionDigits=s}static parse(e,i){if(3!==e.length)return i.error("Expected two arguments.");let r=i.parse(e[1],1,e8);if(!r)return null;let n=e[2];if("object"!=typeof n||Array.isArray(n))return i.error("NumberFormat options argument must be an object.");let a=null;if(n.locale&&!(a=i.parse(n.locale,1,e7)))return null;let s=null;if(n.currency&&!(s=i.parse(n.currency,1,e7)))return null;let o=null;if(n.unit&&!(o=i.parse(n.unit,1,e7)))return null;let l=null;if(n["min-fraction-digits"]&&!(l=i.parse(n["min-fraction-digits"],1,e8)))return null;let u=null;return!n["max-fraction-digits"]||(u=i.parse(n["max-fraction-digits"],1,e8))?new i9(r,a,s,o,l,u):null}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){let e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class re{constructor(e){this.type=e8,this.input=e}static parse(e,i){if(2!==e.length)return i.error(`Expected 1 argument, but found ${e.length-1} instead.`);let r=i.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?i.error(`Expected argument of type string or array, but found ${to(r.type)} instead.`):new re(r):null}evaluate(e){let i=this.input.evaluate(e);if("string"==typeof i||Array.isArray(i))return i.length;throw new tE(`Expected value to be of type string or array, but found ${to(tS(i))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){let e=["length"];return this.eachChild(i=>{e.push(i.serialize())}),e}}function rt(e){return function(){let i=Math.imul((e=1831565813+(e|=0)|0)^e>>>15,1|e);return(((i=i+Math.imul(i^i>>>7,61|i)^i)^i>>>14)>>>0)/4294967296}}let ri={"==":i3,"!=":i4,">":i6,"<":i5,">=":i7,"<=":i8,array:tP,at:iq,boolean:tP,case:iK,coalesce:iW,collator:tN,format:tC,image:tI,in:iZ,"index-of":iX,interpolate:iU,"interpolate-hcl":iU,"interpolate-lab":iU,length:re,let:iG,literal:tD,match:iJ,number:tP,"number-format":i9,object:tP,slice:iQ,step:iL,string:tP,"to-boolean":tR,"to-color":tR,"to-number":tR,"to-string":tR,var:ib,within:t1,distance:i_};function rr(e,[i,r,n,a]){i=i.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);let s=a?a.evaluate(e):1,o=tT(i,r,n,s);if(o)throw new tE(o);return new tv(i/255*s,r/255*s,n/255*s,s)}function rn(e,[i,r,n,a]){var s,o,l;i=i.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);let u=a?a.evaluate(e):1,h=(s=i,o=r,l=n,"number"==typeof s&&s>=0&&s<=360?"number"==typeof o&&o>=0&&o<=100&&"number"==typeof l&&l>=0&&l<=100?void 0===u||"number"==typeof u&&u>=0&&u<=1?null:`Invalid hsla value [${[s,o,l,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${("number"==typeof u?[s,o,l,u]:[s,o,l]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${("number"==typeof u?[s,o,l,u]:[s,o,l]).join(", ")}]: 'h' must be between 0 and 360.`);if(h)throw new tE(h);let c=`hsla(${i}, ${r}%, ${n}%, ${u})`,d=tv.parse(c);if(!d)throw new tE(`Failed to parse HSLA color: ${c}`);return d}function ra(e,i){let r=i[e];return void 0===r?null:r}function rs(e,i){switch(e){case"string":return String(i);case"number":return+i;case"boolean":return!!i;case"color":return tv.parse(i)}return i}function ro(e,i,r,n){return void 0!==n&&(e=n*Math.round(e/n)),void 0!==i&&e<i&&(e=i),void 0!==r&&e>r&&(e=r),e}function rl(e,i,r){i=[i,r,e.scope].filter(Boolean).join("\x1f");let n=e.getConfig(i);if(!n)return null;let{type:a,value:s,values:o,minValue:l,maxValue:u,stepValue:h}=n,c=n.default.evaluate(e),d=c;if(s){let i=e.scope;e.scope=(i||"").split("\x1f").slice(1).join("\x1f"),d=s.evaluate(e),e.scope=i}return a&&(d=rs(a,d)),void 0!==s&&void 0!==d&&o&&!o.includes(d)&&(d=c,a&&(d=rs(a,d))),void 0===d||void 0===l&&void 0===u&&void 0===h||("number"==typeof d?d=ro(d,l,u,h):Array.isArray(d)&&(d=d.map(e=>"number"==typeof e?ro(e,l,u,h):e))),d}function ru(e){return{type:e}}function rh(e){return{result:"success",value:e}}function rc(e){return{result:"error",value:e}}function rd(e,i){return!!e&&!!e.parameters&&e.parameters.indexOf(i)>-1}function rf(e){return"data-driven"===e["property-type"]}function rp(e){return rd(e.expression,"measure-light")}function rm(e){return rd(e.expression,"zoom")}function r_(e){return!!e.expression&&e.expression.interpolated}function rg(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function ry(e){return e}function rv(e,i,r){return void 0!==e?e:void 0!==i?i:void 0!==r?r:void 0}function rx(e,i,r,n,a){return rv(typeof r===a?n[r]:void 0,e.default,i.default)}function rb(e,i,r){if("number"!==tO(r))return rv(e.default,i.default);let n=e.stops.length;if(1===n||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];let a=iT(e.stops.map(e=>e[0]),r);return e.stops[a][1]}function rw(e,i,r){let n=void 0!==e.base?e.base:1;if("number"!==tO(r))return rv(e.default,i.default);let a=e.stops.length;if(1===a||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[a-1][0])return e.stops[a-1][1];let s=iT(e.stops.map(e=>e[0]),r),o=function(e,i,r,n){let a=n-r,s=e-r;return 0===a?0:1===i?s/a:(Math.pow(i,s)-1)/(Math.pow(i,a)-1)}(r,n,e.stops[s][0],e.stops[s+1][0]),l=e.stops[s][1],u=e.stops[s+1][1],h=iD[i.type]||ry;if(e.colorSpace&&"rgb"!==e.colorSpace){let i=iV[e.colorSpace];h=(e,r)=>i.reverse(i.interpolate(i.forward(e),i.forward(r),o))}return"function"==typeof l.evaluate?{evaluate(...e){let i=l.evaluate.apply(void 0,e),r=u.evaluate.apply(void 0,e);if(void 0!==i&&void 0!==r)return h(i,r,o)}}:h(l,u,o)}function rM(e,i,r){return"color"===i.type?r=tv.parse(r):"formatted"===i.type?r=tw.fromString(r.toString()):"resolvedImage"===i.type?r=tM.fromString(r.toString()):tO(r)===i.type||"enum"===i.type&&i.values[r]||(r=void 0),rv(r,e.default,i.default)}tj.register(ri,{error:[{kind:"error"},[e7],(e,[i])=>{throw new tE(i.evaluate(e))}],typeof:[e7,[ti],(e,[i])=>to(tS(i.evaluate(e)))],"to-rgba":[ts(e8,4),[te],(e,[i])=>i.evaluate(e).toArray()],rgb:[te,[e8,e8,e8],rr],rgba:[te,[e8,e8,e8,e8],rr],hsl:[te,[e8,e8,e8],rn],hsla:[te,[e8,e8,e8,e8],rn],has:{type:e9,overloads:[[[e7],(e,[i])=>i.evaluate(e) in e.properties()],[[e7,tt],(e,[i,r])=>i.evaluate(e) in r.evaluate(e)]]},get:{type:ti,overloads:[[[e7],(e,[i])=>ra(i.evaluate(e),e.properties())],[[e7,tt],(e,[i,r])=>ra(i.evaluate(e),r.evaluate(e))]]},config:{type:ti,overloads:[[[e7],(e,[i])=>rl(e,i.evaluate(e))],[[e7,e7],(e,[i,r])=>rl(e,i.evaluate(e),r.evaluate(e))]]},"feature-state":[ti,[e7],(e,[i])=>ra(i.evaluate(e),e.featureState||{})],properties:[tt,[],e=>e.properties()],"geometry-type":[e7,[],e=>e.geometryType()],id:[ti,[],e=>e.id()],zoom:[e8,[],e=>e.globals.zoom],pitch:[e8,[],e=>e.globals.pitch||0],"distance-from-center":[e8,[],e=>e.distanceFromCenter()],"measure-light":[e8,[e7],(e,[i])=>e.measureLight(i.evaluate(e))],"heatmap-density":[e8,[],e=>e.globals.heatmapDensity||0],"line-progress":[e8,[],e=>e.globals.lineProgress||0],"raster-value":[e8,[],e=>e.globals.rasterValue||0],"sky-radial-progress":[e8,[],e=>e.globals.skyRadialProgress||0],accumulated:[ti,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[e8,ru(e8),(e,i)=>{let r=0;for(let n of i)r+=n.evaluate(e);return r}],"*":[e8,ru(e8),(e,i)=>{let r=1;for(let n of i)r*=n.evaluate(e);return r}],"-":{type:e8,overloads:[[[e8,e8],(e,[i,r])=>i.evaluate(e)-r.evaluate(e)],[[e8],(e,[i])=>-i.evaluate(e)]]},"/":[e8,[e8,e8],(e,[i,r])=>i.evaluate(e)/r.evaluate(e)],"%":[e8,[e8,e8],(e,[i,r])=>i.evaluate(e)%r.evaluate(e)],ln2:[e8,[],()=>Math.LN2],pi:[e8,[],()=>Math.PI],e:[e8,[],()=>Math.E],"^":[e8,[e8,e8],(e,[i,r])=>Math.pow(i.evaluate(e),r.evaluate(e))],sqrt:[e8,[e8],(e,[i])=>Math.sqrt(i.evaluate(e))],log10:[e8,[e8],(e,[i])=>Math.log(i.evaluate(e))/Math.LN10],ln:[e8,[e8],(e,[i])=>Math.log(i.evaluate(e))],log2:[e8,[e8],(e,[i])=>Math.log(i.evaluate(e))/Math.LN2],sin:[e8,[e8],(e,[i])=>Math.sin(i.evaluate(e))],cos:[e8,[e8],(e,[i])=>Math.cos(i.evaluate(e))],tan:[e8,[e8],(e,[i])=>Math.tan(i.evaluate(e))],asin:[e8,[e8],(e,[i])=>Math.asin(i.evaluate(e))],acos:[e8,[e8],(e,[i])=>Math.acos(i.evaluate(e))],atan:[e8,[e8],(e,[i])=>Math.atan(i.evaluate(e))],min:[e8,ru(e8),(e,i)=>Math.min(...i.map(i=>i.evaluate(e)))],max:[e8,ru(e8),(e,i)=>Math.max(...i.map(i=>i.evaluate(e)))],abs:[e8,[e8],(e,[i])=>Math.abs(i.evaluate(e))],round:[e8,[e8],(e,[i])=>{let r=i.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[e8,[e8],(e,[i])=>Math.floor(i.evaluate(e))],ceil:[e8,[e8],(e,[i])=>Math.ceil(i.evaluate(e))],"filter-==":[e9,[e7,ti],(e,[i,r])=>e.properties()[i.value]===r.value],"filter-id-==":[e9,[ti],(e,[i])=>e.id()===i.value],"filter-type-==":[e9,[e7],(e,[i])=>e.geometryType()===i.value],"filter-<":[e9,[e7,ti],(e,[i,r])=>{let n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n<a}],"filter-id-<":[e9,[ti],(e,[i])=>{let r=e.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[e9,[e7,ti],(e,[i,r])=>{let n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n>a}],"filter-id->":[e9,[ti],(e,[i])=>{let r=e.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[e9,[e7,ti],(e,[i,r])=>{let n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[e9,[ti],(e,[i])=>{let r=e.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[e9,[e7,ti],(e,[i,r])=>{let n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[e9,[ti],(e,[i])=>{let r=e.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[e9,[ti],(e,[i])=>i.value in e.properties()],"filter-has-id":[e9,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[e9,[ts(e7)],(e,[i])=>i.value.indexOf(e.geometryType())>=0],"filter-id-in":[e9,[ts(ti)],(e,[i])=>i.value.indexOf(e.id())>=0],"filter-in-small":[e9,[e7,ts(ti)],(e,[i,r])=>r.value.indexOf(e.properties()[i.value])>=0],"filter-in-large":[e9,[e7,ts(ti)],(e,[i,r])=>(function(e,i,r,n){for(;r<=n;){let a=r+n>>1;if(i[a]===e)return!0;i[a]>e?n=a-1:r=a+1}return!1})(e.properties()[i.value],r.value,0,r.value.length-1)],all:{type:e9,overloads:[[[e9,e9],(e,[i,r])=>i.evaluate(e)&&r.evaluate(e)],[ru(e9),(e,i)=>{for(let r of i)if(!r.evaluate(e))return!1;return!0}]]},any:{type:e9,overloads:[[[e9,e9],(e,[i,r])=>i.evaluate(e)||r.evaluate(e)],[ru(e9),(e,i)=>{for(let r of i)if(r.evaluate(e))return!0;return!1}]]},"!":[e9,[e9],(e,[i])=>!i.evaluate(e)],"is-supported-script":[e9,[e7],(e,[i])=>{let r=e.globals&&e.globals.isSupportedScript;return!r||r(i.evaluate(e))}],upcase:[e7,[e7],(e,[i])=>i.evaluate(e).toUpperCase()],downcase:[e7,[e7],(e,[i])=>i.evaluate(e).toLowerCase()],concat:[e7,ru(ti),(e,i)=>i.map(i=>tk(i.evaluate(e))).join("")],"resolved-locale":[e7,[tr],(e,[i])=>i.evaluate(e).resolvedLocale()],random:[e8,[e8,e8,ti],(e,i)=>{let r;let[n,a,s]=i.map(i=>i.evaluate(e));if(n>a||n===a)return n;if("string"==typeof s)r=function(e){let i=0;if(0===e.length)return i;for(let r=0;r<e.length;r++)i=(i<<5)-i+e.charCodeAt(r),i&=i;return i}(s);else{if("number"!=typeof s)throw new tE(`Invalid seed input: ${s}`);r=s}return n+rt(r)()*(a-n)}]});class rT{constructor(e,i,r,n){this.expression=e,this._warningHistory={},this._evaluator=new tF(r,n),this._defaultValue=i?"color"===i.type&&(rg(i.default)||Array.isArray(i.default))?new tv(0,0,0,0):"color"===i.type?tv.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=i&&"enum"===i.type?i.values:null}evaluateWithoutErrorHandling(e,i,r,n,a,s,o,l){return this._evaluator.globals=e,this._evaluator.feature=i,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(e,i,r,n,a,s,o,l){this._evaluator.globals=e,this._evaluator.feature=i||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=l||null;try{let e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new tE(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,"undefined"!=typeof console&&u.message),this._defaultValue}}}function rL(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in ri}function rS(e,i,r,n){let a=new iM(ri,[],i?function(e){let i={color:te,string:e7,number:e8,enum:e7,boolean:e9,formatted:tn,resolvedImage:ta};return"array"===e.type?ts(i[e.value]||ti,e.length):i[e.type]}(i):void 0,void 0,void 0,r,n),s=a.parse(e,void 0,void 0,void 0,i&&"string"===i.type?{typeAnnotation:"coerce"}:void 0);return s?rh(new rT(s,i,r,n)):rc(a.errors)}class rk{constructor(e,i,r){this.kind=e,this._styleExpression=i,this.isLightConstant=r,this.isStateDependent="constant"!==e&&!iy(i.expression),this.isConfigDependent=!iv(i.expression)}evaluateWithoutErrorHandling(e,i,r,n,a,s){return this._styleExpression.evaluateWithoutErrorHandling(e,i,r,n,a,s)}evaluate(e,i,r,n,a,s){return this._styleExpression.evaluate(e,i,r,n,a,s)}}class rD{constructor(e,i,r,n,a){this.kind=e,this.zoomStops=r,this._styleExpression=i,this.isStateDependent="camera"!==e&&!iy(i.expression),this.isLightConstant=a,this.isConfigDependent=!iv(i.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,i,r,n,a,s){return this._styleExpression.evaluateWithoutErrorHandling(e,i,r,n,a,s)}evaluate(e,i,r,n,a,s){return this._styleExpression.evaluate(e,i,r,n,a,s)}interpolationFactor(e,i,r){return this.interpolationType?iU.interpolationFactor(this.interpolationType,e,i,r):0}}function rE(e,i,r,n){if("error"===(e=rS(e,i,r,n)).result)return e;let a=e.value.expression,s=ig(a);if(!s&&!rf(i))return rc([new e4("","data expressions not supported")]);let o=ix(a,["zoom","pitch","distance-from-center"]);if(!o&&!rm(i))return rc([new e4("","zoom expressions not supported")]);let l=ix(a,["measure-light"]);if(!l&&!rp(i))return rc([new e4("","measure-light expression not supported")]);let u=i.expression&&i.expression.relaxZoomRestriction,h=function e(i){let r=null;if(i instanceof iG)r=e(i.result);else if(i instanceof iW){for(let n of i.args)if(r=e(n))break}else(i instanceof iL||i instanceof iU)&&i.input instanceof tj&&"zoom"===i.input.name&&(r=i);return r instanceof e4||i.eachChild(i=>{let n=e(i);n instanceof e4?r=n:r&&n&&r!==n&&(r=new e4("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}(a);return h||o||u?h instanceof e4?rc([h]):h instanceof iU&&!r_(i)?rc([new e4("",'"interpolate" expressions cannot be used with this property')]):rh(h?new rD(s?"camera":"composite",e.value,h.labels,h instanceof iU?h.interpolation:void 0,l):new rk(s?"constant":"source",e.value,l)):rc([new e4("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class rA{constructor(e,i){this._parameters=e,this._specification=i,e1(this,function e(i,r){let n,a,s;let o="color"===r.type,l=i.stops&&"object"==typeof i.stops[0][0],u=l||!(l||void 0!==i.property),h=i.type||(r_(r)?"exponential":"interval");if(o&&((i=e1({},i)).stops&&(i.stops=i.stops.map(e=>[e[0],tv.parse(e[1])])),i.default=tv.parse(i.default?i.default:r.default)),i.colorSpace&&"rgb"!==i.colorSpace&&!iV[i.colorSpace])throw Error(`Unknown color space: ${i.colorSpace}`);if("exponential"===h)n=rw;else if("interval"===h)n=rb;else if("categorical"===h){for(let e of(n=rx,a=Object.create(null),i.stops))a[e[0]]=e[1];s=typeof i.stops[0][0]}else{if("identity"!==h)throw Error(`Unknown function type "${h}"`);n=rM}if(l){let n={},a=[];for(let e=0;e<i.stops.length;e++){let r=i.stops[e],s=r[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:i.type,property:i.property,default:i.default,stops:[]},a.push(s)),n[s].stops.push([r[0].value,r[1]])}let s=[];for(let i of a)s.push([n[i].zoom,e(n[i],r)]);let o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:iU.interpolationFactor.bind(void 0,o),zoomStops:s.map(e=>e[0]),evaluate:({zoom:e},n)=>rw({stops:s,base:i.base},r,e).evaluate(e,n)}}if(u){let e="exponential"===h?{name:"exponential",base:void 0!==i.base?i.base:1}:null;return{kind:"camera",interpolationType:e,interpolationFactor:iU.interpolationFactor.bind(void 0,e),zoomStops:i.stops.map(e=>e[0]),evaluate:({zoom:e})=>n(i,r,e,a,s)}}return{kind:"source",evaluate(e,o){let l=o&&o.properties?o.properties[i.property]:void 0;return void 0===l?rv(i.default,r.default):n(i,r,l,a,s)}}}(this._parameters,this._specification))}static deserialize(e){return new rA(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function rP(e){let i=e.key,r=e.value,n=e.valueSpec||{},a=e.objectElementValidators||{},s=e.style,o=e.styleSpec,l=[],u=tO(r);if("object"!==u)return[new eQ(i,r,`object expected, ${u} found`)];for(let e in r){let u;let h=e.split(".")[0];a[h]?u=a[h]:n[h]?u=r6:a["*"]?u=a["*"]:n["*"]&&(u=r6),u?l=l.concat(u({key:(i?`${i}.`:i)+e,value:r[e],valueSpec:n[h]||n["*"],style:s,styleSpec:o,object:r,objectKey:e},r)):l.push(new e0(i,r[e],`unknown property "${e}"`))}for(let e in n)a[e]||n[e].required&&void 0===n[e].default&&void 0===r[e]&&l.push(new eQ(i,r,`missing required property "${e}"`));return l}function rC(e){let i=e.value,r=e.valueSpec,n=e.style,a=e.styleSpec,s=e.key,o=e.arrayElementValidator||r6;if("array"!==tO(i))return[new eQ(s,i,`array expected, ${tO(i)} found`)];if(r.length&&i.length!==r.length)return[new eQ(s,i,`array length ${r.length} expected, length ${i.length} found`)];if(r["min-length"]&&i.length<r["min-length"])return[new eQ(s,i,`array length at least ${r["min-length"]} expected, length ${i.length} found`)];let l={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};a.$version<7&&(l.function=r.function),"object"===tO(r.value)&&(l=r.value);let u=[];for(let e=0;e<i.length;e++)u=u.concat(o({array:i,arrayIndex:e,value:i[e],valueSpec:l,style:n,styleSpec:a,key:`${s}[${e}]`},!0));return u}function rI(e){let i=e.key,r=e.value,n=e.valueSpec,a=tO(r);if("number"===a&&r!=r&&(a="NaN"),"number"!==a)return[new eQ(i,r,`number expected, ${a} found`)];if("minimum"in n){let a=n.minimum;if("array"===tO(n.minimum)&&(a=n.minimum[e.arrayIndex]),r<a)return[new eQ(i,r,`${r} is less than the minimum value ${a}`)]}if("maximum"in n){let a=n.maximum;if("array"===tO(n.maximum)&&(a=n.maximum[e.arrayIndex]),r>a)return[new eQ(i,r,`${r} is greater than the maximum value ${a}`)]}return[]}function rO(e){let i=e.valueSpec,r=e2(e.value.type),n,a,s,o={},l="categorical"!==r&&void 0===e.value.property,u="array"===tO(e.value.stops)&&"array"===tO(e.value.stops[0])&&"object"===tO(e.value.stops[0][0]),h=rP({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new eQ(e.key,e.value,'identity function may not have a "stops" property')];let i=[],n=e.value;return i=i.concat(rC({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:c})),"array"===tO(n)&&0===n.length&&i.push(new eQ(e.key,n,"array must have at least one stop")),i},default:function(e){return r6({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&l&&h.push(new eQ(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||h.push(new eQ(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!r_(e.valueSpec)&&h.push(new eQ(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l||rf(e.valueSpec)?l&&!rm(e.valueSpec)&&h.push(new eQ(e.key,e.value,"zoom functions not supported")):h.push(new eQ(e.key,e.value,"property functions not supported"))),("categorical"===r||u)&&void 0===e.value.property&&h.push(new eQ(e.key,e.value,'"property" property is required')),h;function c(e){let r=[],n=e.value,l=e.key;if("array"!==tO(n))return[new eQ(l,n,`array expected, ${tO(n)} found`)];if(2!==n.length)return[new eQ(l,n,`array length 2 expected, length ${n.length} found`)];if(u){if("object"!==tO(n[0]))return[new eQ(l,n,`object expected, ${tO(n[0])} found`)];if(void 0===n[0].zoom)return[new eQ(l,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new eQ(l,n,"object stop key must have value")];let i=e2(n[0].zoom);if("number"!=typeof i)return[new eQ(l,n[0].zoom,"stop zoom values must be numbers")];if(s&&s>i)return[new eQ(l,n[0].zoom,"stop zoom values must appear in ascending order")];i!==s&&(s=i,a=void 0,o={}),r=r.concat(rP({key:`${l}[0]`,value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:rI,value:d}}))}else r=r.concat(d({key:`${l}[0]`,value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return rL(e3(n[1]))?r.concat([new eQ(`${l}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(r6({key:`${l}[1]`,value:n[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function d(e,s){let l=tO(e.value),u=e2(e.value),h=null!==e.value?e.value:s;if(n){if(l!==n)return[new eQ(e.key,h,`${l} stop domain type must match previous stop domain type ${n}`)]}else n=l;if("number"!==l&&"string"!==l&&"boolean"!==l&&"number"!=typeof u&&"string"!=typeof u&&"boolean"!=typeof u)return[new eQ(e.key,h,"stop domain value must be a number, string, or boolean")];if("number"!==l&&"categorical"!==r){let n=`number expected, ${l} found`;return rf(i)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new eQ(e.key,h,n)]}return"categorical"!==r||"number"!==l||"number"==typeof u&&isFinite(u)&&Math.floor(u)===u?"categorical"!==r&&"number"===l&&"number"==typeof u&&"number"==typeof a&&void 0!==a&&u<a?[new eQ(e.key,h,"stop domain values must appear in ascending order")]:(a=u,"categorical"===r&&u in o?[new eQ(e.key,h,"stop domain values must be unique")]:(o[u]=!0,[])):[new eQ(e.key,h,`integer expected, found ${String(u)}`)]}}function rz(e){let i=("property"===e.expressionContext?rE:rS)(e3(e.value),e.valueSpec);if("error"===i.result)return i.value.map(i=>new eQ(`${e.key}${i.key}`,e.value,i.message));let r=i.value.expression||i.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new eQ(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!iy(r))return[new eQ(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return function e(i,r){let n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(let e of r.valueSpec.expression.parameters)n.delete(e);if(0===n.size)return[];let a=[];return i instanceof tj&&n.has(i.name)?[new eQ(r.key,r.value,`["${i.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(i.eachChild(i=>{a.push(...e(i,r))}),a)}(r,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!ix(r,["zoom","feature-state"]))return[new eQ(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!ig(r))return[new eQ(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rR(e){let i=e.key,r=e.value,n=e.valueSpec,a=[];return Array.isArray(n.values)?-1===n.values.indexOf(e2(r))&&a.push(new eQ(i,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(e2(r))&&a.push(new eQ(i,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),a}function rY(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(let i of e.slice(1))if(!rY(i)&&"boolean"!=typeof i)return!1;return!0;default:return!0}}function rF(e,i="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};rY(e)||(e=function e(i){if(!i)return!0;let r=i[0];return i.length<=1?"any"!==r:"=="===r?rH(i[1],i[2],"=="):"!="===r?r$(rH(i[1],i[2],"==")):"<"===r||">"===r||"<="===r||">="===r?rH(i[1],i[2],r):"any"===r?["any"].concat(i.slice(1).map(e)):"all"===r?["all"].concat(i.slice(1).map(e)):"none"===r?["all"].concat(i.slice(1).map(e).map(r$)):"in"===r?rV(i[1],i.slice(2)):"!in"===r?r$(rV(i[1],i.slice(2))):"has"===r?rU(i[1]):"!has"!==r||r$(rU(i[1]))}(e));let r=e,n=!0;try{n=function(e){if(!rj(e))return e;let i=e3(e);return function e(i){let r=!1,n=[];if("case"===i[0]){for(let e=1;e<i.length-1;e+=2)r=r||rj(i[e]),n.push(i[e+1]);n.push(i[i.length-1])}else if("match"===i[0]){r=r||rj(i[1]);for(let e=2;e<i.length-1;e+=2)n.push(i[e+1]);n.push(i[i.length-1])}else if("step"===i[0]){r=r||rj(i[1]);for(let e=1;e<i.length-1;e+=2)n.push(i[e+1])}r&&(i.length=0,i.push("any",...n));for(let r=1;r<i.length;r++)e(i[r])}(i),i=function e(i){if(!Array.isArray(i))return i;let r=function(e){if(rB.has(e[0])){for(let i=1;i<e.length;i++)if(rj(e[i]))return!0}return e}(i);return!0===r?r:r.map(i=>e(i))}(i)}(r)}catch(a){JSON.stringify(r,null,2)}let s=eK[`filter_${i}`],o=rS(n,s),l=null;if("error"===o.result)throw Error(o.value.map(e=>`${e.key}: ${e.message}`).join(", "));l=(e,i,r)=>o.value.evaluate(e,i,{},r);let u=null,h=null;if(n!==r){let e=rS(r,s);if("error"===e.result)throw Error(e.value.map(e=>`${e.key}: ${e.message}`).join(", "));u=(i,r,n,a,s)=>e.value.evaluate(i,r,{},n,void 0,void 0,a,s),h=!ig(e.value.expression)}return{filter:l,dynamicFilter:u||void 0,needGeometry:function e(i){if(!Array.isArray(i))return!1;if("within"===i[0]||"distance"===i[0])return!0;for(let r=1;r<i.length;r++)if(e(i[r]))return!0;return!1}(n),needFeature:!!h}}function rj(e){var i;if(!Array.isArray(e))return!1;if("pitch"===(i=e[0])||"distance-from-center"===i)return!0;for(let i=1;i<e.length;i++)if(rj(e[i]))return!0;return!1}let rB=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function rN(e,i){return e<i?-1:e>i?1:0}function rH(e,i,r){switch(e){case"$type":return[`filter-type-${r}`,i];case"$id":return[`filter-id-${r}`,i];default:return[`filter-${r}`,e,i]}}function rV(e,i){if(0===i.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(e=>typeof e!=typeof i[0])?["filter-in-large",e,["literal",i.sort(rN)]]:["filter-in-small",e,["literal",i]]}}function rU(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function r$(e){return["!",e]}function rW(e){return rY(e3(e.value))?rz(e1({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):function e(i){let r=i.value,n=i.key;if("array"!==tO(r))return[new eQ(n,r,`array expected, ${tO(r)} found`)];let a=i.styleSpec,s,o=[];if(r.length<1)return[new eQ(n,r,"filter array must have at least 1 element")];switch(o=o.concat(rR({key:`${n}[0]`,value:r[0],valueSpec:a.filter_operator,style:i.style,styleSpec:i.styleSpec})),e2(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===e2(r[1])&&o.push(new eQ(n,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":3!==r.length&&o.push(new eQ(n,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&"string"!==(s=tO(r[1]))&&o.push(new eQ(`${n}[1]`,r[1],`string expected, ${s} found`));for(let e=2;e<r.length;e++)s=tO(r[e]),"$type"===e2(r[1])?o=o.concat(rR({key:`${n}[${e}]`,value:r[e],valueSpec:a.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==s&&"number"!==s&&"boolean"!==s&&o.push(new eQ(`${n}[${e}]`,r[e],`string, number, or boolean expected, ${s} found`));break;case"any":case"all":case"none":for(let a=1;a<r.length;a++)o=o.concat(e({key:`${n}[${a}]`,value:r[a],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":s=tO(r[1]),2!==r.length?o.push(new eQ(n,r,`filter array for "${r[0]}" operator must have 2 elements`)):"string"!==s&&o.push(new eQ(`${n}[1]`,r[1],`string expected, ${s} found`))}return o}(e)}function rG(e,i){let r;let n=e.key,a=e.style,s=e.layer,o=e.styleSpec,l=e.value,u=e.objectKey,h=o[`${i}_${e.layerType}`];if(!h)return[];let c=u.match(/^(.*)-transition$/);if("paint"===i&&c&&h[c[1]]&&h[c[1]].transition)return r6({key:n,value:l,valueSpec:o.transition,style:a,styleSpec:o});let d=e.valueSpec||h[u];if(!d)return[new e0(n,l,`unknown property "${u}"`)];if("string"===tO(l)&&rf(d)&&!d.tokens&&(r=/^{([^}]+)}$/.exec(l))){let e=`\`{ "type": "identity", "property": ${r?JSON.stringify(r[1]):'"_"'} }\``;return[new eQ(n,l,`"${u}" does not support interpolation syntax
Use an identity property function instead: ${e}.`)]}let f=[];if("symbol"===e.layerType)"text-field"!==u||!a||a.glyphs||a.imports||f.push(new eQ(n,l,'use of "text-field" requires a style "glyphs" property')),"text-font"===u&&rg(e3(l))&&"identity"===e2(l.type)&&f.push(new eQ(n,l,'"text-font" does not support identity functions'));else if("model"===e.layerType&&"paint"===i&&s&&s.layout&&s.layout.hasOwnProperty("model-id")&&rf(d)&&(rp(d)||rm(d))){let e=rE(e3(l),d),i=e.value.expression||e.value._styleExpression.expression;i&&!ix(i,["measure-light"])&&("model-emissive-strength"===u&&ig(i)&&iy(i)||f.push(new eQ(n,l,`${u} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return f.concat(r6({key:e.key,value:l,valueSpec:d,style:a,styleSpec:o,expressionContext:"property",propertyType:i,propertyKey:u}))}function rq(e){return rG(e,"paint")}function rZ(e){return rG(e,"layout")}function rX(e){let i=[],r=e.value,n=e.key,a=e.style,s=e.styleSpec;r.type||r.ref||i.push(new eQ(n,r,'either "type" or "ref" is required'));let o=e2(r.type),l=e2(r.ref);if(r.id){let s=e2(r.id);for(let o=0;o<e.arrayIndex;o++){let e=a.layers[o];e2(e.id)===s&&i.push(new eQ(n,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in r&&i.push(new eQ(n,r[e],`"${e}" is prohibited for ref layers`))}),a.layers.forEach(i=>{e2(i.id)===l&&(e=i)}),e?e.ref?i.push(new eQ(n,r.ref,"ref cannot reference another ref layer")):o=e2(e.type):"string"==typeof l&&i.push(new eQ(n,r.ref,`ref layer "${l}" not found`))}else if("background"!==o&&"sky"!==o&&"slot"!==o){if(r.source){let e=a.sources&&a.sources[r.source],s=e&&e2(e.type);e?"vector"===s&&"raster"===o?i.push(new eQ(n,r.source,`layer "${r.id}" requires a raster source`)):"raster"===s&&"raster"!==o?i.push(new eQ(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==s||r["source-layer"]?"raster-dem"===s&&"hillshade"!==o?i.push(new eQ(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===o&&r.paint&&(r.paint["line-gradient"]||r.paint["line-trim-offset"])&&("geojson"!==s||!e.lineMetrics)&&i.push(new eQ(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new eQ(n,r,`layer "${r.id}" must specify a "source-layer"`)):i.push(new eQ(n,r.source,`source "${r.source}" not found`))}else i.push(new eQ(n,r,'missing required property "source"'))}return i=i.concat(rP({key:n,value:r,valueSpec:s.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>r6({key:`${n}.type`,value:r.type,valueSpec:s.layer.type,style:e.style,styleSpec:e.styleSpec,object:r,objectKey:"type"}),filter:e=>rW(e1({layerType:o},e)),layout:e=>rP({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>rZ(e1({layerType:o},e))}}),paint:e=>rP({layer:r,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>rq(e1({layerType:o,layer:r},e))}})}}))}function rJ(e){let i=e.value,r=e.key,n=tO(i);return"string"!==n?[new eQ(r,i,`string expected, ${n} found`)]:[]}let rK={promoteId:function({key:e,value:i}){if("string"===tO(i))return rJ({key:e,value:i});{let r=[];for(let n in i)r.push(...rJ({key:`${e}.${n}`,value:i[n]}));return r}}};function rQ(e){let i=e.value,r=e.key,n=e.styleSpec,a=e.style;if(!i.type)return[new eQ(r,i,'"type" is required')];let s=e2(i.type),o=[];switch(["vector","raster","raster-dem"].includes(s)&&(i.url||i.tiles||o.push(new e0(r,i,'Either "url" or "tiles" is required.'))),s){case"vector":case"raster":case"raster-dem":return o.concat(rP({key:r,value:i,valueSpec:n[`source_${s.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:rK}));case"geojson":if(o=rP({key:r,value:i,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:rK}),i.cluster)for(let e in i.clusterProperties){let[n,a]=i.clusterProperties[e],s="string"==typeof n?[n,["accumulated"],["get",e]]:n;o.push(...rz({key:`${r}.${e}.map`,value:a,expressionContext:"cluster-map"})),o.push(...rz({key:`${r}.${e}.reduce`,value:s,expressionContext:"cluster-reduce"}))}return o;case"video":return rP({key:r,value:i,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return rP({key:r,value:i,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new eQ(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rR({key:`${r}.type`,value:i.type,valueSpec:{values:n.source.reduce((e,i)=>{let r=n[i];return"enum"===r.type.type&&(e=e.concat(Object.keys(r.type.values))),e},[])},style:a,styleSpec:n})}}function r0(e){let i=e.value,r=[];if(!i)return r;let n=tO(i);return"string"!==n?r=r.concat([new eQ(e.key,i,`string expected, "${n}" found`)]):(function(e){let i=-1===e.indexOf("://");try{return new URL(e,i?"http://example.com":void 0),!0}catch(r){return!1}}(i)||(r=r.concat([new eQ(e.key,i,`invalid url "${i}"`)])),r)}function r1(e){let i=e.value,r=e.styleSpec,n=r.light,a=e.style,s=[],o=tO(i);if(void 0===i)return s;if("object"!==o)return s.concat([new eQ("light",i,`object expected, ${o} found`)]);for(let e in i){let o=e.match(/^(.*)-transition$/);s=s.concat(o&&n[o[1]]&&n[o[1]].transition?r6({key:e,value:i[e],valueSpec:r.transition,style:a,styleSpec:r}):n[e]?r6({key:e,value:i[e],valueSpec:n[e],style:a,styleSpec:r}):[new eQ(e,i[e],`unknown property "${e}"`)])}return s}function r2(e){let i=e.value,r=[];if(!i)return r;let n=tO(i);if("object"!==n)return r.concat([new eQ("light-3d",i,`object expected, ${n} found`)]);let a=e.styleSpec,s=a["light-3d"],o=e.key,l=e.style,u=e.style.lights;for(let e of["type","id"])if(!(e in i))return r.concat([new eQ("light-3d",i,`missing property ${e} on light`)]);if(i.type&&u)for(let n=0;n<e.arrayIndex;n++){let e=e2(i.type),a=u[n];e2(a.type)===e&&r.push(new eQ(o,i.id,`duplicate light type "${i.type}", previously defined at line ${a.id.__line__}`))}let h=`properties_light_${i.type}`;if(!(h in a))return r.concat([new eQ("light-3d",i,`Invalid light type ${i.type}`)]);let c=a[h];for(let n in i)if("properties"===n){let s=i[n],o=tO(s);if("object"!==o)return r.concat([new eQ("properties",s,`object expected, ${o} found`)]);for(let i in s)r=r.concat(c[i]?r6({key:i,value:s[i],valueSpec:c[i],style:l,styleSpec:a}):[new e0(e.key,s[i],`unknown property "${i}"`)])}else{let e=n.match(/^(.*)-transition$/);r=r.concat(e&&s[e[1]]&&s[e[1]].transition?r6({key:n,value:i[n],valueSpec:a.transition,style:l,styleSpec:a}):s[n]?r6({key:n,value:i[n],valueSpec:s[n],style:l,styleSpec:a}):[new e0(n,i[n],`unknown property "${n}"`)])}return r}function r3(e){let i=e.value,r=e.key,n=e.style,a=e.styleSpec,s=a.terrain,o=[],l=tO(i);if(void 0===i||"null"===l)return o;if("object"!==l)return o.concat([new eQ("terrain",i,`object expected, ${l} found`)]);for(let e in i){let r=e.match(/^(.*)-transition$/);o=o.concat(r&&s[r[1]]&&s[r[1]].transition?r6({key:e,value:i[e],valueSpec:a.transition,style:n,styleSpec:a}):s[e]?r6({key:e,value:i[e],valueSpec:s[e],style:n,styleSpec:a}):[new e0(e,i[e],`unknown property "${e}"`)])}if(i.source){let e=n.sources&&n.sources[i.source],a=e&&e2(e.type);e?"raster-dem"!==a&&o.push(new eQ(r,i.source,`terrain cannot be used with a source of type ${String(a)}, it only be used with a "raster-dem" source type`)):o.push(new eQ(r,i.source,`source "${i.source}" not found`))}else o.push(new eQ(r,i,'terrain is missing required property "source"'));return o}function r4(e){let i=e.value,r=e.style,n=e.styleSpec,a=n.fog,s=[],o=tO(i);if(void 0===i)return s;if("object"!==o)return s.concat([new eQ("fog",i,`object expected, ${o} found`)]);for(let e in i){let o=e.match(/^(.*)-transition$/);s=s.concat(o&&a[o[1]]&&a[o[1]].transition?r6({key:e,value:i[e],valueSpec:n.transition,style:r,styleSpec:n}):a[e]?r6({key:e,value:i[e],valueSpec:a[e],style:r,styleSpec:n}):[new e0(e,i[e],`unknown property "${e}"`)])}return s}let r5={"*":()=>[],array:rC,boolean:function(e){let i=e.value,r=e.key,n=tO(i);return"boolean"!==n?[new eQ(r,i,`boolean expected, ${n} found`)]:[]},number:rI,color:function(e){let i=e.key,r=e.value,n=tO(r);return"string"!==n?[new eQ(i,r,`color expected, ${n} found`)]:null===td(r)?[new eQ(i,r,`color expected, "${r}" found`)]:[]},enum:rR,filter:rW,function:rO,layer:rX,object:rP,source:rQ,model:r0,light:r1,"light-3d":r2,terrain:r3,fog:r4,string:rJ,formatted:function(e){return 0===rJ(e).length?[]:rz(e)},resolvedImage:function(e){return 0===rJ(e).length?[]:rz(e)},projection:function(e){let i=e.value,r=e.styleSpec,n=r.projection,a=e.style,s=[],o=tO(i);if("object"===o)for(let e in i)s=s.concat(r6({key:e,value:i[e],valueSpec:n[e],style:a,styleSpec:r}));else"string"!==o&&(s=s.concat([new eQ("projection",i,`object or string expected, ${o} found`)]));return s},import:function(e){let{value:i,styleSpec:r}=e,{data:n,...a}=i;Object.defineProperty(a,"__line__",{value:i.__line__,enumerable:!1});let s=rP(e1({},e,{value:a,valueSpec:r.import}));return""===e2(a.id)&&s.push(new eQ(`${e.key}.id`,a,"import id can't be an empty string")),n&&(s=s.concat(r7(n,r,{key:`${e.key}.data`}))),s}};function r6(e,i=!1){let r=e.value,n=e.valueSpec,a=e.styleSpec;if(n.expression&&rg(e2(r)))return rO(e);if(n.expression&&rL(e3(r)))return rz(e);if(n.type&&r5[n.type]){let r=r5[n.type](e);return!0===i&&r.length>0&&"array"===tO(e.value)?rz(e):r}return rP(e1({},e,{valueSpec:n.type?a[n.type]:n}))}function r8(e){let i=e.value,r=e.key,n=rJ(e);return n.length||(-1===i.indexOf("{fontstack}")&&n.push(new eQ(r,i,'"glyphs" url must include a "{fontstack}" token')),-1===i.indexOf("{range}")&&n.push(new eQ(r,i,'"glyphs" url must include a "{range}" token'))),n}function r7(e,i=eK,r={}){return r6({key:r.key||"",value:e,valueSpec:i.$root,styleSpec:i,style:e,objectElementValidators:{glyphs:r8,"*":()=>[]}})}function r9(e,i=eK){return ni(r7(e,i))}let ne=e=>ni(rq(e)),nt=e=>ni(rZ(e));function ni(e){return e.slice().sort((e,i)=>e.line&&i.line?e.line-i.line:0)}function nr(e,i){let r=!1;if(i&&i.length)for(let n of i)n instanceof e0?J(n.message):(e.fire(new eX(Error(n.message))),r=!0);return r}function nn(e,i,r){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],this.d=(i=a[1])+2*(r=a[2]);for(var s=0;s<this.d*this.d;s++){var o=a[3+s],l=a[3+s+1];n.push(o===l?null:a.subarray(o,l))}var u=a[3+n.length+1];this.keys=a.subarray(a[3+n.length],u),this.bboxes=a.subarray(u),this.insert=this._insertReadonly}else{this.d=i+2*r;for(var h=0;h<this.d*this.d;h++)n.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=e,this.padding=r,this.scale=i/e,this.uid=0;var c=r/i*e;this.min=-c,this.max=e+c}nn.prototype.insert=function(e,i,r,n,a){this._forEachCell(i,r,n,a,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(a)},nn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},nn.prototype._insertCell=function(e,i,r,n,a,s){this.cells[a].push(s)},nn.prototype.query=function(e,i,r,n,a){var s=this.min,o=this.max;if(e<=s&&i<=s&&o<=r&&o<=n&&!a)return Array.prototype.slice.call(this.keys);var l=[];return this._forEachCell(e,i,r,n,this._queryCell,l,{},a),l},nn.prototype._queryCell=function(e,i,r,n,a,s,o,l){var u=this.cells[a];if(null!==u)for(var h=this.keys,c=this.bboxes,d=0;d<u.length;d++){var f=u[d];if(void 0===o[f]){var p=4*f;(l?l(c[p+0],c[p+1],c[p+2],c[p+3]):e<=c[p+2]&&i<=c[p+3]&&r>=c[p+0]&&n>=c[p+1])?(o[f]=!0,s.push(h[f])):o[f]=!1}}},nn.prototype._forEachCell=function(e,i,r,n,a,s,o,l){for(var u=this._convertToCellCoord(e),h=this._convertToCellCoord(i),c=this._convertToCellCoord(r),d=this._convertToCellCoord(n),f=u;f<=c;f++)for(var p=h;p<=d;p++){var m=this.d*p+f;if((!l||l(this._convertFromCellCoord(f),this._convertFromCellCoord(p),this._convertFromCellCoord(f+1),this._convertFromCellCoord(p+1)))&&a.call(this,e,i,r,n,m,s,o,l))return}},nn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},nn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},nn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,i=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var a=new Int32Array(i+r+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var s=i,o=0;o<e.length;o++){var l=e[o];a[3+o]=s,a.set(l,s),s+=l.length}return a[3+e.length]=s,a.set(this.keys,s),a[3+e.length+1]=s+=this.keys.length,a.set(this.bboxes,s),s+=this.bboxes.length,a.buffer};var na=M(nn);let ns={};function no(e,i,r={}){Object.defineProperty(e,"_classRegistryKey",{value:i,writeable:!1}),ns[i]={klass:e,omit:r.omit||[]}}for(let e in no(Object,"Object"),na.serialize=function(e,i){let r=e.toArrayBuffer();return i&&i.add(r),{buffer:r}},na.deserialize=function(e){return new na(e.buffer)},Object.defineProperty(na,"name",{value:"Grid"}),no(na,"Grid"),no(tv,"Color"),no(Error,"Error"),no(tw,"Formatted"),no(tb,"FormattedSection"),no(em,"AJAXError"),no(tM,"ResolvedImage"),no(rA,"StylePropertyFunction"),no(rT,"StyleExpression",{omit:["_evaluator"]}),no(rD,"ZoomDependentExpression"),no(rk,"ZoomConstantExpression"),no(tj,"CompoundExpression",{omit:["_evaluate"]}),ri)ns[ri[e]._classRegistryKey]||no(ri[e],`Expression${e}`);function nl(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function nu(e){return self.ImageBitmap&&e instanceof ImageBitmap}function nh(e,i){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(nl(e)||nu(e))return i&&i.add(e),e;if(ArrayBuffer.isView(e))return i&&i.add(e.buffer),e;if(e instanceof ImageData)return i&&i.add(e.data.buffer),e;if(Array.isArray(e)){let r=[];for(let n of e)r.push(nh(n,i));return r}if(e instanceof Map){let i={$name:"Map"};for(let[r,n]of e.entries())i[r]=nh(n);return i}if("object"==typeof e){let r=e.constructor,n=r._classRegistryKey;if(!n)throw Error(`can't serialize object of unregistered class ${n}`);let a=r.serialize?r.serialize(e,i):{};if(!r.serialize){for(let r in e)e.hasOwnProperty(r)&&(ns[n].omit.indexOf(r)>=0||(a[r]=nh(e[r],i)));e instanceof Error&&(a.message=e.message)}if(a.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(a.$name=n),a}throw Error("can't serialize object of type "+typeof e)}function nc(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||nl(e)||nu(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(nc);if("object"==typeof e){let i=e.$name||"Object";if("Map"===i){let i=new Map;for(let r of Object.keys(e))"$name"!==r&&i.set(r,nc(e[r]));return i}let{klass:r}=ns[i];if(!r)throw Error(`can't deserialize unregistered class ${i}`);if(r.deserialize)return r.deserialize(e);let n=Object.create(r.prototype);for(let i of Object.keys(e))"$name"!==i&&(n[i]=nc(e[i]));return n}throw Error("can't deserialize object of type "+typeof e)}let nd={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519,"CJK Unified Ideographs Extension B":e=>e>=131072&&e<=173791};function nf(e){for(let i of e)if(np(i.charCodeAt(0)))return!0;return!1}function np(e){return!(746!==e&&747!==e&&(e<4352||!(nd["Bopomofo Extended"](e)||nd.Bopomofo(e)||nd["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||nd["CJK Compatibility Ideographs"](e)||nd["CJK Compatibility"](e)||nd["CJK Radicals Supplement"](e)||nd["CJK Strokes"](e)||!(!nd["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||nd["CJK Unified Ideographs Extension A"](e)||nd["CJK Unified Ideographs"](e)||nd["Enclosed CJK Letters and Months"](e)||nd["Hangul Compatibility Jamo"](e)||nd["Hangul Jamo Extended-A"](e)||nd["Hangul Jamo Extended-B"](e)||nd["Hangul Jamo"](e)||nd["Hangul Syllables"](e)||nd.Hiragana(e)||nd["Ideographic Description Characters"](e)||nd.Kanbun(e)||nd["Kangxi Radicals"](e)||nd["Katakana Phonetic Extensions"](e)||nd.Katakana(e)&&12540!==e||!(!nd["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!nd["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||nd["Unified Canadian Aboriginal Syllabics"](e)||nd["Unified Canadian Aboriginal Syllabics Extended"](e)||nd["Vertical Forms"](e)||nd["Yijing Hexagram Symbols"](e)||nd["Yi Syllables"](e)||nd["Yi Radicals"](e))))}function nm(e){return!(np(e)||nd["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||nd["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||nd["Letterlike Symbols"](e)||nd["Number Forms"](e)||nd["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||nd["Control Pictures"](e)&&9251!==e||nd["Optical Character Recognition"](e)||nd["Enclosed Alphanumerics"](e)||nd["Geometric Shapes"](e)||nd["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||nd["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||nd["CJK Symbols and Punctuation"](e)||nd.Katakana(e)||nd["Private Use Area"](e)||nd["CJK Compatibility Forms"](e)||nd["Small Form Variants"](e)||nd["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}function n_(e){return e>=1424&&e<=2303||nd["Arabic Presentation Forms-A"](e)||nd["Arabic Presentation Forms-B"](e)}let ng="deferred",ny="loading",nv="loaded",nx=null,nb="unavailable",nw=null,nM=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(nb="error"),nx&&nx(e)};function nT(){nL.fire(new eZ("pluginStateChange",{pluginStatus:nb,pluginURL:nw}))}let nL=new eJ,nS=function(){return nb},nk=function(){if(nb!==ng||!nw)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nb=ny,nT(),nw&&ey({url:nw},e=>{e?nM(e):(nb=nv,nT())})},nD={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>nb===nv||null!=nD.applyArabicShaping,isLoading:()=>nb===ny,setState(e){nb=e.pluginStatus,nw=e.pluginURL},isParsed:()=>null!=nD.applyArabicShaping&&null!=nD.processBidirectionalText&&null!=nD.processStyledBidirectionalText,getPluginURL:()=>nw};class nE{constructor(e,i){this.zoom=e,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.transition=i.transition,this.pitch=i.pitch,this.brightness=i.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(e,i){for(let n of e){var r;if(r=n.charCodeAt(0),!i&&n_(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||nd.Khmer(r))return!1}return!0}(e,nD.isLoaded())}}class nA{constructor(e,i,r,n){this.property=e,this.value=i,this.expression=function(e,i,r,n){if(rg(e))return new rA(e,i);if(rL(e)||Array.isArray(e)&&e.length>0){let a=rE(e,i,r,n);if("error"===a.result)throw Error(a.value.map(e=>`${e.key}: ${e.message}`).join(", "));return a.value}{let r=e;return"string"==typeof e&&"color"===i.type&&(r=tv.parse(e)),{kind:"constant",isConfigDependent:!1,evaluate:()=>r}}}(void 0===i?e.specification.default:i,e.specification,r,n)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,i,r){return this.property.possiblyEvaluate(this,e,i,r)}}class nP{constructor(e,i,r){this.property=e,this.value=new nA(e,void 0,i,r)}transitioned(e,i){return new nI(this.property,this.value,i,j({},e.transition,this.transition),e.now)}untransitioned(){return new nI(this.property,this.value,null,{},0)}}class nC{constructor(e,i,r){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._scope=i,this._options=r,this.isConfigDependent=!1}getValue(e){return Z(this._values[e].value.value)}setValue(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new nP(this._values[e].property,this._scope,this._options)),this._values[e].value=new nA(this._values[e].property,null===i?void 0:Z(i),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].value.expression.isConfigDependent}setTransitionOrValue(e,i){i&&(this._options=i);let r=this._properties.properties;if(e)for(let i in e){let n=e[i];if(W(i,"-transition")){let e=i.slice(0,-11);r[e]&&this.setTransition(e,n)}else r[i]&&this.setValue(i,n)}}getTransition(e){return Z(this._values[e].transition)}setTransition(e,i){this._values.hasOwnProperty(e)||(this._values[e]=new nP(this._values[e].property)),this._values[e].transition=Z(i)||void 0}serialize(){let e={};for(let i of Object.keys(this._values)){let r=this.getValue(i);void 0!==r&&(e[i]=r);let n=this.getTransition(i);void 0!==n&&(e[`${i}-transition`]=n)}return e}transitioned(e,i){let r=new nO(this._properties);for(let n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(e,i._values[n]);return r}untransitioned(){let e=new nO(this._properties);for(let i of Object.keys(this._values))e._values[i]=this._values[i].untransitioned();return e}}class nI{constructor(e,i,r,n,a){let s=n.delay||0,o=n.duration||0;a=a||0,this.property=e,this.value=i,this.begin=a+s,this.end=this.begin+o,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(e,i,r){let n=e.now||0,a=this.value.possiblyEvaluate(e,i,r),s=this.prior;if(s){if(n>this.end||this.value.isDataDriven())return this.prior=null,a;if(n<this.begin)return s.possiblyEvaluate(e,i,r);{let o=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(e,i,r),a,P(o))}}return a}}class nO{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,i,r){let n=new nY(this._properties);for(let a of Object.keys(this._values))n._values[a]=this._values[a].possiblyEvaluate(e,i,r);return n}hasTransition(){for(let e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class nz{constructor(e,i,r){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._scope=i,this._options=r,this.isConfigDependent=!1}getValue(e){return Z(this._values[e].value)}setValue(e,i){this._values[e]=new nA(this._values[e].property,null===i?void 0:Z(i),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].expression.isConfigDependent}serialize(){let e={};for(let i of Object.keys(this._values)){let r=this.getValue(i);void 0!==r&&(e[i]=r)}return e}possiblyEvaluate(e,i,r){let n=new nY(this._properties);for(let a of Object.keys(this._values))n._values[a]=this._values[a].possiblyEvaluate(e,i,r);return n}}class nR{constructor(e,i,r){this.property=e,this.value=i,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,i,r,n){return this.property.evaluate(this.value,this.parameters,e,i,r,n)}}class nY{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class nF{constructor(e){this.specification=e}possiblyEvaluate(e,i){return e.expression.evaluate(i)}interpolate(e,i,r){let n=iD[this.specification.type];return n?n(e,i,r):e}}class nj{constructor(e,i){this.specification=e,this.overrides=i}possiblyEvaluate(e,i,r,n){return new nR(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(i,null,{},r,n)}:e.expression,i)}interpolate(e,i,r){if("constant"!==e.value.kind||"constant"!==i.value.kind)return e;if(void 0===e.value.value||void 0===i.value.value)return new nR(this,{kind:"constant",value:void 0},e.parameters);let n=iD[this.specification.type];return n?new nR(this,{kind:"constant",value:n(e.value.value,i.value.value,r)},e.parameters):e}evaluate(e,i,r,n,a,s){return"constant"===e.kind?e.value:e.evaluate(i,r,n,a,s)}}class nB{constructor(e){this.specification=e}possiblyEvaluate(e,i,r,n){return!!e.expression.evaluate(i,null,{},r,n)}interpolate(){return!1}}class nN{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];let i=new nE(0,{});for(let r in e){let n=e[r];n.specification.overridable&&this.overridableProperties.push(r);let a=this.defaultPropertyValues[r]=new nA(n,void 0),s=this.defaultTransitionablePropertyValues[r]=new nP(n);this.defaultTransitioningPropertyValues[r]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate(i)}}}function nH(e,i){return i?`${e}${i}`:e}no(nj,"DataDrivenProperty"),no(nF,"DataConstantProperty"),no(nB,"ColorRampProperty");let nV="-transition";class nU extends eJ{constructor(e,i,r,n){if(super(),this.id=e.id,this.fqid=nH(this.id,r),this.type=e.type,this.scope=r,this.options=n,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&"slot"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),e.slot&&(this.slot=e.slot),i.layout&&(this._unevaluatedLayout=new nz(i.layout,this.scope,n),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),i.paint)){for(let r in this._transitionablePaint=new nC(i.paint,this.scope,n),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(let i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nY(i.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,i,r={}){if(null!=i&&this._validate(nt,`layers.${this.id}.layout.${e}`,e,i,r))return;if("custom"===this.type&&"visibility"===e)return void(this.visibility=i);let n=this._unevaluatedLayout;n._properties.properties[e]&&(n.setValue(e,i),this.isConfigDependent=this.isConfigDependent||n.isConfigDependent,"visibility"===e&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(e){return W(e,nV)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,i,r={}){if(null!=i&&this._validate(ne,`layers.${this.id}.paint.${e}`,e,i,r))return!1;let n=this._transitionablePaint,a=n._properties.properties;if(W(e,nV)){let r=e.slice(0,-11);return a[r]&&n.setTransition(r,i||void 0),!1}if(!a[e])return!1;let s=n._values[e],o=s.value.isDataDriven(),l=s.value;n.setValue(e,i),this.isConfigDependent=this.isConfigDependent||n.isConfigDependent,this._handleSpecialPaintPropertyUpdate(e);let u=n._values[e].value,h=u.isDataDriven(),c=W(e,"pattern")||"line-dasharray"===e;return h||o||c||this._handleOverridablePaintPropertyUpdate(e,l,u)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,i){return null}_handleOverridablePaintPropertyUpdate(e,i,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,i){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,i)}serialize(){return q({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,i)=>!(void 0===e||"layout"===i&&!Object.keys(e).length||"paint"===i&&!Object.keys(e).length))}_validate(e,i,r,n,a={}){return(!a||!1!==a.validate)&&nr(this,e.call(r9,{key:i,layerType:this.type,objectKey:r,value:n,styleSpec:eK,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}resize(){}isStateDependent(){for(let e in this.paint._values){let i=this.paint.get(e);if(i instanceof nR&&rf(i.property.specification)&&("source"===i.value.kind||"composite"===i.value.kind)&&i.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=rF(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(){this._stats&&(this._stats.numRenderedVerticesInShadowPass=0,this._stats.numRenderedVerticesInTransparentPass=0)}}let n$={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class nW{constructor(e,i){this._structArray=e,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class nG{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,i){return e._trim(),i&&(e.isTransferred=!0,i.add(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){let i=Object.create(this.prototype);return i.arrayBuffer=e.arrayBuffer,i.length=e.length,i.capacity=e.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function nq(e,i=1){let r=0,n=0;return{members:e.map(e=>{let a=n$[e.type].BYTES_PER_ELEMENT,s=r=nZ(r,Math.max(i,a)),o=e.components||1;return n=Math.max(n,a),r+=a*o,{name:e.name,type:e.type,components:o,offset:s}}),size:nZ(r,Math.max(n,i)),alignment:i}}function nZ(e,i){return Math.ceil(e/i)*i}class nX extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i){let r=this.length;return this.resize(r+1),this.emplace(r,e,i)}emplace(e,i,r){let n=2*e;return this.int16[n+0]=i,this.int16[n+1]=r,e}}nX.prototype.bytesPerElement=4,no(nX,"StructArrayLayout2i4");class nJ extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,r){let n=this.length;return this.resize(n+1),this.emplace(n,e,i,r)}emplace(e,i,r,n){let a=3*e;return this.int16[a+0]=i,this.int16[a+1]=r,this.int16[a+2]=n,e}}nJ.prototype.bytesPerElement=6,no(nJ,"StructArrayLayout3i6");class nK extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,r,n){let a=this.length;return this.resize(a+1),this.emplace(a,e,i,r,n)}emplace(e,i,r,n,a){let s=4*e;return this.int16[s+0]=i,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=a,e}}nK.prototype.bytesPerElement=8,no(nK,"StructArrayLayout4i8");class nQ extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,i,r,n,a)}emplace(e,i,r,n,a,s){let o=5*e;return this.int16[o+0]=i,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=a,this.int16[o+4]=s,e}}nQ.prototype.bytesPerElement=10,no(nQ,"StructArrayLayout5i10");class n0 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o){let l=this.length;return this.resize(l+1),this.emplace(l,e,i,r,n,a,s,o)}emplace(e,i,r,n,a,s,o,l){let u=6*e,h=12*e;return this.int16[u+0]=i,this.int16[u+1]=r,this.uint8[h+4]=n,this.uint8[h+5]=a,this.uint8[h+6]=s,this.uint8[h+7]=o,this.float32[3*e+2]=l,e}}n0.prototype.bytesPerElement=12,no(n0,"StructArrayLayout2i4ub1f12");class n1 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n){let a=this.length;return this.resize(a+1),this.emplace(a,e,i,r,n)}emplace(e,i,r,n,a){let s=4*e;return this.float32[s+0]=i,this.float32[s+1]=r,this.float32[s+2]=n,this.float32[s+3]=a,e}}n1.prototype.bytesPerElement=16,no(n1,"StructArrayLayout4f16");class n2 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,i,r,n,a)}emplace(e,i,r,n,a,s){let o=6*e;return this.uint16[o+0]=i,this.uint16[o+1]=r,this.uint16[o+2]=n,this.uint16[o+3]=a,this.float32[3*e+2]=s,e}}n2.prototype.bytesPerElement=12,no(n2,"StructArrayLayout4ui1f12");class n3 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,r,n){let a=this.length;return this.resize(a+1),this.emplace(a,e,i,r,n)}emplace(e,i,r,n,a){let s=4*e;return this.uint16[s+0]=i,this.uint16[s+1]=r,this.uint16[s+2]=n,this.uint16[s+3]=a,e}}n3.prototype.bytesPerElement=8,no(n3,"StructArrayLayout4ui8");class n4 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s){let o=this.length;return this.resize(o+1),this.emplace(o,e,i,r,n,a,s)}emplace(e,i,r,n,a,s,o){let l=6*e;return this.int16[l+0]=i,this.int16[l+1]=r,this.int16[l+2]=n,this.int16[l+3]=a,this.int16[l+4]=s,this.int16[l+5]=o,e}}n4.prototype.bytesPerElement=12,no(n4,"StructArrayLayout6i12");class n5 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o,l,u,h,c,d){let f=this.length;return this.resize(f+1),this.emplace(f,e,i,r,n,a,s,o,l,u,h,c,d)}emplace(e,i,r,n,a,s,o,l,u,h,c,d,f){let p=12*e;return this.int16[p+0]=i,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=a,this.uint16[p+4]=s,this.uint16[p+5]=o,this.uint16[p+6]=l,this.uint16[p+7]=u,this.int16[p+8]=h,this.int16[p+9]=c,this.int16[p+10]=d,this.int16[p+11]=f,e}}n5.prototype.bytesPerElement=24,no(n5,"StructArrayLayout4i4ui4i24");class n6 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s){let o=this.length;return this.resize(o+1),this.emplace(o,e,i,r,n,a,s)}emplace(e,i,r,n,a,s,o){let l=10*e,u=5*e;return this.int16[l+0]=i,this.int16[l+1]=r,this.int16[l+2]=n,this.float32[u+2]=a,this.float32[u+3]=s,this.float32[u+4]=o,e}}n6.prototype.bytesPerElement=20,no(n6,"StructArrayLayout3i3f20");class n8 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint32[1*e+0]=i,e}}n8.prototype.bytesPerElement=4,no(n8,"StructArrayLayout1ul4");class n7 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i){let r=this.length;return this.resize(r+1),this.emplace(r,e,i)}emplace(e,i,r){let n=2*e;return this.uint16[n+0]=i,this.uint16[n+1]=r,e}}n7.prototype.bytesPerElement=4,no(n7,"StructArrayLayout2ui4");class n9 extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o,l,u,h,c,d,f){let p=this.length;return this.resize(p+1),this.emplace(p,e,i,r,n,a,s,o,l,u,h,c,d,f)}emplace(e,i,r,n,a,s,o,l,u,h,c,d,f,p){let m=20*e,_=10*e;return this.int16[m+0]=i,this.int16[m+1]=r,this.int16[m+2]=n,this.int16[m+3]=a,this.int16[m+4]=s,this.float32[_+3]=o,this.float32[_+4]=l,this.float32[_+5]=u,this.float32[_+6]=h,this.int16[m+14]=c,this.uint32[_+8]=d,this.uint16[m+18]=f,this.uint16[m+19]=p,e}}n9.prototype.bytesPerElement=40,no(n9,"StructArrayLayout5i4f1i1ul2ui40");class ae extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o){let l=this.length;return this.resize(l+1),this.emplace(l,e,i,r,n,a,s,o)}emplace(e,i,r,n,a,s,o,l){let u=8*e;return this.int16[u+0]=i,this.int16[u+1]=r,this.int16[u+2]=n,this.int16[u+4]=a,this.int16[u+5]=s,this.int16[u+6]=o,this.int16[u+7]=l,e}}ae.prototype.bytesPerElement=16,no(ae,"StructArrayLayout3i2i2i16");class at extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,i,r,n,a)}emplace(e,i,r,n,a,s){let o=4*e,l=8*e;return this.float32[o+0]=i,this.float32[o+1]=r,this.float32[o+2]=n,this.int16[l+6]=a,this.int16[l+7]=s,e}}at.prototype.bytesPerElement=16,no(at,"StructArrayLayout2f1f2i16");class ai extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n){let a=this.length;return this.resize(a+1),this.emplace(a,e,i,r,n)}emplace(e,i,r,n,a){let s=12*e,o=3*e;return this.uint8[s+0]=i,this.uint8[s+1]=r,this.float32[o+1]=n,this.float32[o+2]=a,e}}ai.prototype.bytesPerElement=12,no(ai,"StructArrayLayout2ub2f12");class ar extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,r){let n=this.length;return this.resize(n+1),this.emplace(n,e,i,r)}emplace(e,i,r,n){let a=3*e;return this.uint16[a+0]=i,this.uint16[a+1]=r,this.uint16[a+2]=n,e}}ar.prototype.bytesPerElement=6,no(ar,"StructArrayLayout3ui6");class an extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b){let w=this.length;return this.resize(w+1),this.emplace(w,e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b)}emplace(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w){let M=30*e,T=15*e,L=60*e;return this.int16[M+0]=i,this.int16[M+1]=r,this.int16[M+2]=n,this.float32[T+2]=a,this.float32[T+3]=s,this.uint16[M+8]=o,this.uint16[M+9]=l,this.uint32[T+5]=u,this.uint32[T+6]=h,this.uint32[T+7]=c,this.uint16[M+16]=d,this.uint16[M+17]=f,this.uint16[M+18]=p,this.float32[T+10]=m,this.float32[T+11]=_,this.uint8[L+48]=g,this.uint8[L+49]=y,this.uint8[L+50]=v,this.uint32[T+13]=x,this.int16[M+28]=b,this.uint8[L+58]=w,e}}an.prototype.bytesPerElement=60,no(an,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class aa extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w,M,T,L,S,k,D,E,A,P,C){let I=this.length;return this.resize(I+1),this.emplace(I,e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w,M,T,L,S,k,D,E,A,P,C)}emplace(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w,M,T,L,S,k,D,E,A,P,C,I){let O=20*e,z=40*e;return this.float32[O+0]=i,this.float32[O+1]=r,this.int16[z+4]=n,this.int16[z+5]=a,this.int16[z+6]=s,this.int16[z+7]=o,this.int16[z+8]=l,this.int16[z+9]=u,this.int16[z+10]=h,this.int16[z+11]=c,this.int16[z+12]=d,this.uint16[z+13]=f,this.uint16[z+14]=p,this.uint16[z+15]=m,this.uint16[z+16]=_,this.uint16[z+17]=g,this.uint16[z+18]=y,this.uint16[z+19]=v,this.uint16[z+20]=x,this.uint16[z+21]=b,this.uint16[z+22]=w,this.uint16[z+23]=M,this.uint16[z+24]=T,this.uint16[z+25]=L,this.uint16[z+26]=S,this.uint16[z+27]=k,this.uint32[O+14]=D,this.float32[O+15]=E,this.float32[O+16]=A,this.float32[O+17]=P,this.float32[O+18]=C,this.uint8[80*e+76]=I,e}}aa.prototype.bytesPerElement=80,no(aa,"StructArrayLayout2f9i15ui1ul4f1ub80");class as extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.float32[1*e+0]=i,e}}as.prototype.bytesPerElement=4,no(as,"StructArrayLayout1f4");class ao extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,i,r,n,a)}emplace(e,i,r,n,a,s){let o=5*e;return this.float32[o+0]=i,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=a,this.float32[o+4]=s,e}}ao.prototype.bytesPerElement=20,no(ao,"StructArrayLayout5f20");class al extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o){let l=this.length;return this.resize(l+1),this.emplace(l,e,i,r,n,a,s,o)}emplace(e,i,r,n,a,s,o,l){let u=7*e;return this.float32[u+0]=i,this.float32[u+1]=r,this.float32[u+2]=n,this.float32[u+3]=a,this.float32[u+4]=s,this.float32[u+5]=o,this.float32[u+6]=l,e}}al.prototype.bytesPerElement=28,no(al,"StructArrayLayout7f28");class au extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,i,r,n){let a=this.length;return this.resize(a+1),this.emplace(a,e,i,r,n)}emplace(e,i,r,n,a){let s=6*e;return this.uint32[3*e+0]=i,this.uint16[s+2]=r,this.uint16[s+3]=n,this.uint16[s+4]=a,e}}au.prototype.bytesPerElement=12,no(au,"StructArrayLayout1ul3ui12");class ah extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint16[1*e+0]=i,e}}ah.prototype.bytesPerElement=2,no(ah,"StructArrayLayout1ui2");class ac extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r){let n=this.length;return this.resize(n+1),this.emplace(n,e,i,r)}emplace(e,i,r,n){let a=3*e;return this.float32[a+0]=i,this.float32[a+1]=r,this.float32[a+2]=n,e}}ac.prototype.bytesPerElement=12,no(ac,"StructArrayLayout3f12");class ad extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i){let r=this.length;return this.resize(r+1),this.emplace(r,e,i)}emplace(e,i,r){let n=2*e;return this.float32[n+0]=i,this.float32[n+1]=r,e}}ad.prototype.bytesPerElement=8,no(ad,"StructArrayLayout2f8");class af extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_){let g=this.length;return this.resize(g+1),this.emplace(g,e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_)}emplace(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g){let y=16*e;return this.float32[y+0]=i,this.float32[y+1]=r,this.float32[y+2]=n,this.float32[y+3]=a,this.float32[y+4]=s,this.float32[y+5]=o,this.float32[y+6]=l,this.float32[y+7]=u,this.float32[y+8]=h,this.float32[y+9]=c,this.float32[y+10]=d,this.float32[y+11]=f,this.float32[y+12]=p,this.float32[y+13]=m,this.float32[y+14]=_,this.float32[y+15]=g,e}}af.prototype.bytesPerElement=64,no(af,"StructArrayLayout16f64");class ap extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,i,r,n,a,s,o){let l=this.length;return this.resize(l+1),this.emplace(l,e,i,r,n,a,s,o)}emplace(e,i,r,n,a,s,o,l){let u=10*e,h=5*e;return this.uint16[u+0]=i,this.uint16[u+1]=r,this.uint16[u+2]=n,this.uint16[u+3]=a,this.float32[h+2]=s,this.float32[h+3]=o,this.float32[h+4]=l,e}}ap.prototype.bytesPerElement=20,no(ap,"StructArrayLayout4ui3f20");class am extends nG{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){let i=this.length;return this.resize(i+1),this.emplace(i,e)}emplace(e,i){return this.uint8[1*e+0]=i,e}}am.prototype.bytesPerElement=1,no(am,"StructArrayLayout1ub1");class a_ extends nW{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}a_.prototype.size=40;class ag extends n9{get(e){return new a_(this,e)}}no(ag,"CollisionBoxArray");class ay extends nW{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}ay.prototype.size=60;class av extends an{get(e){return new ay(this,e)}}no(av,"PlacedSymbolArray");class ax extends nW{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}ax.prototype.size=80;class ab extends aa{get(e){return new ax(this,e)}}no(ab,"SymbolInstanceArray");class aw extends as{getoffsetX(e){return this.float32[1*e+0]}}no(aw,"GlyphOffsetArray");class aM extends nX{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}no(aM,"SymbolLineVertexArray");class aT extends nW{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}aT.prototype.size=12;class aL extends au{get(e){return new aT(this,e)}}no(aL,"FeatureIndexArray");class aS extends n7{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}no(aS,"FillExtrusionCentroidArray");let ak=nq([{name:"a_pos",components:2,type:"Int16"}],4),aD=nq([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class aE{constructor(e=[]){this.segments=e}_prepareSegment(e,i,r,n){let a=this.segments[this.segments.length-1];return e>aE.MAX_VERTEX_ARRAY_LENGTH&&J(`Max vertices per segment is ${aE.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!a||a.vertexLength+e>aE.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==n)&&(a={vertexOffset:i,primitiveOffset:r,vertexLength:0,primitiveLength:0},void 0!==n&&(a.sortKey=n),this.segments.push(a)),a}prepareSegment(e,i,r,n){return this._prepareSegment(e,i.length,r.length,n)}get(){return this.segments}destroy(){for(let e of this.segments)for(let i in e.vaos)e.vaos[i].destroy()}static simpleSegment(e,i,r,n){return new aE([{vertexOffset:e,primitiveOffset:i,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}function aA(e,i){return 256*(e=O(Math.floor(e),0,255))+O(Math.floor(i),0,255)}aE.MAX_VERTEX_ARRAY_LENGTH=65535,no(aE,"SegmentVector");let aP=nq([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),aC=nq([{name:"a_dash",components:4,type:"Uint16"}]);var aI={exports:{}},aO={exports:{}};aO.exports=function(e,i){var r,n,a,s,o,l;for(n=e.length-(r=3&e.length),a=i,l=0;l<n;)o=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,a=27492+(65535&(s=5*(65535&(a=(a^=o=(65535&(o=(o=(65535&o)*3432918353+(((o>>>16)*3432918353&65535)<<16)&4294967295)<<15|o>>>17))*461845907+(((o>>>16)*461845907&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(o=0,r){case 3:o^=(255&e.charCodeAt(l+2))<<16;case 2:o^=(255&e.charCodeAt(l+1))<<8;case 1:a^=o=(65535&(o=(o=(65535&(o^=255&e.charCodeAt(l)))*3432918353+(((o>>>16)*3432918353&65535)<<16)&4294967295)<<15|o>>>17))*461845907+(((o>>>16)*461845907&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0};var az=aO.exports,aR={exports:{}};aR.exports=function(e,i){for(var r,n=e.length,a=i^n,s=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24))+((1540483477*(r>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++s;switch(n){case 3:a^=(255&e.charCodeAt(s+2))<<16;case 2:a^=(255&e.charCodeAt(s+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(s)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0};var aY=aR.exports;aI.exports=az,aI.exports.murmur3=az,aI.exports.murmur2=aY;var aF=M(aI.exports);class aj{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,i,r,n){this.ids.push(aB(e)),this.positions.push(i,r,n)}eachPosition(e,i){let r=aB(e),n=0,a=this.ids.length-1;for(;n<a;){let e=n+a>>1;this.ids[e]>=r?a=e:n=e+1}for(;this.ids[n]===r;)i(this.positions[3*n],this.positions[3*n+1],this.positions[3*n+2]),n++}static serialize(e,i){let r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return function e(i,r,n,a){for(;n<a;){let s=i[n+a>>1],o=n-1,l=a+1;for(;;){do o++;while(i[o]<s)do l--;while(i[l]>s)if(o>=l)break;aN(i,o,l),aN(r,3*o,3*l),aN(r,3*o+1,3*l+1),aN(r,3*o+2,3*l+2)}l-n<a-l?(e(i,r,n,l),n=l+1):(e(i,r,l+1,a),a=l)}}(r,n,0,r.length-1),i&&(i.add(r.buffer),i.add(n.buffer)),{ids:r,positions:n}}static deserialize(e){let i;let r=new aj;for(let n of(r.ids=e.ids,r.positions=e.positions,r.ids))n!==i&&r.uniqueIds.push(n),i=n;return r.indexed=!0,r}}function aB(e){let i=+e;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:aF(String(e))}function aN(e,i,r){let n=e[i];e[i]=e[r],e[r]=n}no(aj,"FeaturePositionMap");class aH{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,i){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,i),this.initialized=!0),!!this.location}}class aV extends aH{constructor(e){super(e),this.current=0}set(e,i,r){this.fetchUniformLocation(e,i)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}}class aU extends aH{constructor(e){super(e),this.current=0}set(e,i,r){this.fetchUniformLocation(e,i)&&this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class a$ extends aH{constructor(e){super(e),this.current=[0,0]}set(e,i,r){this.fetchUniformLocation(e,i)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}}class aW extends aH{constructor(e){super(e),this.current=[0,0,0]}set(e,i,r){this.fetchUniformLocation(e,i)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}}class aG extends aH{constructor(e){super(e),this.current=[0,0,0,0]}set(e,i,r){this.fetchUniformLocation(e,i)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3])))}}class aq extends aH{constructor(e){super(e),this.current=tv.transparent}set(e,i,r){this.fetchUniformLocation(e,i)&&(r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a)))}}let aZ=new Float32Array(16);class aX extends aH{constructor(e){super(e),this.current=aZ}set(e,i,r){if(this.fetchUniformLocation(e,i)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}}let aJ=new Float32Array(9),aK=new Float32Array(4);class aQ extends aH{constructor(e){super(e),this.current=aK}set(e,i,r){if(this.fetchUniformLocation(e,i)){for(let e=0;e<4;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}}}function a0(e){return[aA(255*e.r,255*e.g),aA(255*e.b,255*e.a)]}class a1{constructor(e,i,r){this.value=e,this.uniformNames=i.map(e=>`u_${e}`),this.type=r}setUniform(e,i,r,n,a){i.set(e,a,n.constantOr(this.value))}getBinding(e,i){return"color"===this.type?new aq(e):new aU(e)}}class a2{constructor(e,i){this.uniformNames=i.map(e=>`u_${e}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,i,r,n,a){let s="u_pattern"===a||"u_dash"===a?this.pattern:"u_pixel_ratio"===a?this.pixelRatio:null;s&&i.set(e,a,s)}getBinding(e,i){return"u_pattern"===i||"u_dash"===i?new aG(e):new aU(e)}}class a3{constructor(e,i,r,n){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=i.map(e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0})),this.paintVertexArray=new n}populatePaintArray(e,i,r,n,a,s,o){let l=this.paintVertexArray.length,u=this.expression.evaluate(new nE(0,{brightness:s}),i,{},a,n,o);this.paintVertexArray.resize(e),this._setPaintValue(l,e,u)}updatePaintArray(e,i,r,n,a,s,o){let l=this.expression.evaluate({zoom:0,brightness:o},r,n,void 0,a);this._setPaintValue(e,i,l)}_setPaintValue(e,i,r){if("color"===this.type){let n=a0(r);for(let r=e;r<i;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=e;n<i;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class a4{constructor(e,i,r,n,a,s){this.expression=e,this.uniformNames=i.map(e=>`u_${e}_t`),this.type=r,this.useIntegerZoom=n,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=i.map(e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0})),this.paintVertexArray=new s}populatePaintArray(e,i,r,n,a,s,o){let l=this.expression.evaluate(new nE(this.zoom,{brightness:s}),i,{},a,n,o),u=this.expression.evaluate(new nE(this.zoom+1,{brightness:s}),i,{},a,n,o),h=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(h,e,l,u)}updatePaintArray(e,i,r,n,a,s,o){let l=this.expression.evaluate({zoom:this.zoom,brightness:o},r,n,void 0,a),u=this.expression.evaluate({zoom:this.zoom+1,brightness:o},r,n,void 0,a);this._setPaintValue(e,i,l,u)}_setPaintValue(e,i,r,n){if("color"===this.type){let a=a0(r),s=a0(n);for(let r=e;r<i;r++)this.paintVertexArray.emplace(r,a[0],a[1],s[0],s[1])}else{for(let a=e;a<i;a++)this.paintVertexArray.emplace(a,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,i,r,n,a){let s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,o=O(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);i.set(e,a,o)}getBinding(e,i){return new aU(e)}}class a5{constructor(e,i,r,n,a){this.expression=e,this.layerId=a,this.paintVertexAttributes=("array"===r?aC:aP).members;for(let e=0;e<i.length;++e);this.paintVertexArray=new n}populatePaintArray(e,i,r){let n=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(n,e,i.patterns&&i.patterns[this.layerId],r)}updatePaintArray(e,i,r,n,a,s,o){this._setPaintValues(e,i,r.patterns&&r.patterns[this.layerId],s)}_setPaintValues(e,i,r,n){if(!n||!r)return;let a=n[r];if(!a)return;let{tl:s,br:o,pixelRatio:l}=a;for(let r=e;r<i;r++)this.paintVertexArray.emplace(r,s[0],s[1],o[0],o[1],l)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class a6{constructor(e,i,r=()=>!0){this.binders={},this._buffers=[];let n=[];for(let s in e.paint._values){var a;let o=e.paint.get(s);if(!r(s)||!(o instanceof nR&&rf(o.property.specification)))continue;let l=(a=e.type,a7[s]||[s.replace(`${a}-`,"").replace(/-/g,"_")]),u=o.value,h=o.property.specification.type,c=!!o.property.useIntegerZoom,d="line-dasharray"===s||s.endsWith("pattern"),f="line-dasharray"===s&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==u.kind||f){if("source"===u.kind||f||d){let i=st(s,h,"source");this.binders[s]=d?new a5(u,l,h,i,e.id):new a3(u,l,h,i),n.push(`/a_${s}`)}else{let e=st(s,h,"composite");this.binders[s]=new a4(u,l,h,c,i,e),n.push(`/z_${s}`)}}else this.binders[s]=d?new a2(u.value,l):new a1(u.value,l,h),n.push(`/u_${s}`)}this.cacheKey=n.sort().join("")}getMaxValue(e){let i=this.binders[e];return i instanceof a3||i instanceof a4?i.maxValue:0}populatePaintArrays(e,i,r,n,a,s,o){for(let l in this.binders){let u=this.binders[l];(u instanceof a3||u instanceof a4||u instanceof a5)&&u.populatePaintArray(e,i,r,n,a,s,o)}}setConstantPatternPositions(e){for(let i in this.binders){let r=this.binders[i];r instanceof a2&&r.setConstantPatternPositions(e)}}updatePaintArrays(e,i,r,n,a,s,o,l){let u=!1,h=Object.keys(e),c=0!==h.length,d=c?h:i.uniqueIds;for(let h in this.binders){let f=this.binders[h];if((f instanceof a3||f instanceof a4||f instanceof a5)&&(!0===f.expression.isStateDependent||!1===f.expression.isLightConstant)){let p=a.paint.get(h);for(let r of(f.expression=p.value,d)){let a=e[r.toString()];i.eachPosition(r,(e,i,r)=>{let u=n.feature(e);f.updatePaintArray(i,r,u,a,s,o,l)})}if(!c)for(let i of r.uniqueIds){let a=e[i.toString()];r.eachPosition(i,(e,i,r)=>{let u=n.feature(e);f.updatePaintArray(i,r,u,a,s,o,l)})}u=!0}}return u}defines(){let e=[];for(let i in this.binders){let r=this.binders[i];(r instanceof a1||r instanceof a2)&&e.push(...r.uniformNames.map(e=>`#define HAS_UNIFORM_${e}`))}return e}getBinderAttributes(){let e=[];for(let i in this.binders){let r=this.binders[i];if(r instanceof a3||r instanceof a4||r instanceof a5)for(let i=0;i<r.paintVertexAttributes.length;i++)e.push(r.paintVertexAttributes[i].name)}return e}getBinderUniforms(){let e=[];for(let i in this.binders){let r=this.binders[i];if(r instanceof a1||r instanceof a2||r instanceof a4)for(let i of r.uniformNames)e.push(i)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){let i=[];for(let r in this.binders){let n=this.binders[r];if(n instanceof a1||n instanceof a2||n instanceof a4)for(let a of n.uniformNames)i.push({name:a,property:r,binding:n.getBinding(e,a)})}return i}setUniforms(e,i,r,n,a){for(let{name:i,property:s,binding:o}of r)this.binders[s].setUniform(e,o,a,n.get(s),i)}updatePaintBuffers(){for(let e in this._buffers=[],this.binders){let i=this.binders[e];(i instanceof a3||i instanceof a4||i instanceof a5)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(e){for(let i in this.binders){let r=this.binders[i];(r instanceof a3||r instanceof a4||r instanceof a5)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(let e in this.binders){let i=this.binders[e];(i instanceof a3||i instanceof a4||i instanceof a5)&&i.destroy()}}}class a8{constructor(e,i,r=()=>!0){for(let n of(this.programConfigurations={},e))this.programConfigurations[n.id]=new a6(n,i,r);this.needsUpload=!1,this._featureMap=new aj,this._featureMapWithoutIds=new aj,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,i,r,n,a,s,o,l){for(let r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(e,i,n,a,s,o,l);void 0!==i.id?this._featureMap.add(i.id,r,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,r,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,i,r,n,a,s){for(let o of r)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,i,o,n,a,s||0)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(let i in this.programConfigurations)this.programConfigurations[i].upload(e);this.needsUpload=!1}}destroy(){for(let e in this.programConfigurations)this.programConfigurations[e].destroy()}}let a7={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]},a9={"line-pattern":{source:n2,composite:n2},"fill-pattern":{source:n2,composite:n2},"fill-extrusion-pattern":{source:n2,composite:n2},"line-dasharray":{source:n3,composite:n3}},se={color:{source:ad,composite:n1},number:{source:as,composite:ad}};function st(e,i,r){let n=a9[e];return n&&n[r]||se[i][r]}no(a1,"ConstantBinder"),no(a2,"PatternConstantBinder"),no(a3,"SourceExpressionBinder"),no(a5,"PatternCompositeBinder"),no(a4,"CompositeExpressionBinder"),no(a6,"ProgramConfiguration",{omit:["_buffers"]}),no(a8,"ProgramConfigurationSet");class si{constructor(e,i){e&&(i?this.setSouthWest(e).setNorthEast(i):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof l3?new l3(e.lng,e.lat):l3.convert(e),this}setSouthWest(e){return this._sw=e instanceof l3?new l3(e.lng,e.lat):l3.convert(e),this}extend(e){let i,r;let n=this._sw,a=this._ne;if(e instanceof l3)i=e,r=e;else{if(!(e instanceof si))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(si.convert(e)):this.extend(l3.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(l3.convert(e)):this;if(i=e._sw,r=e._ne,!i||!r)return this}return n||a?(n.lng=Math.min(i.lng,n.lng),n.lat=Math.min(i.lat,n.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this._sw=new l3(i.lng,i.lat),this._ne=new l3(r.lng,r.lat)),this}getCenter(){return new l3((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l3(this.getWest(),this.getNorth())}getSouthEast(){return new l3(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){let{lng:i,lat:r}=l3.convert(e),n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n}static convert(e){return!e||e instanceof si?e:new si(e)}}var sr={},sn={};Object.defineProperty(sn,"__esModule",{value:!0}),sn.setMatrixArrayType=function(e){sn.ARRAY_TYPE=ss=e},sn.toRadian=function(e){return e*so},sn.equals=function(e,i){return Math.abs(e-i)<=sa*Math.max(1,Math.abs(e),Math.abs(i))},sn.RANDOM=sn.ARRAY_TYPE=sn.EPSILON=void 0;var sa=1e-6;sn.EPSILON=sa;var ss="undefined"!=typeof Float32Array?Float32Array:Array;sn.ARRAY_TYPE=ss,sn.RANDOM=Math.random;var so=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,i=arguments.length;i--;)e+=arguments[i]*arguments[i];return Math.sqrt(e)});var sl={};function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(sl,"__esModule",{value:!0}),sl.create=function(){var e=new sh.ARRAY_TYPE(4);return sh.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},sl.clone=function(e){var i=new sh.ARRAY_TYPE(4);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i},sl.copy=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e},sl.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},sl.fromValues=function(e,i,r,n){var a=new sh.ARRAY_TYPE(4);return a[0]=e,a[1]=i,a[2]=r,a[3]=n,a},sl.set=function(e,i,r,n,a){return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e},sl.transpose=function(e,i){if(e===i){var r=i[1];e[1]=i[2],e[2]=r}else e[0]=i[0],e[1]=i[2],e[2]=i[1],e[3]=i[3];return e},sl.invert=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=r*s-a*n;return o?(e[0]=s*(o=1/o),e[1]=-n*o,e[2]=-a*o,e[3]=r*o,e):null},sl.adjoint=function(e,i){var r=i[0];return e[0]=i[3],e[1]=-i[1],e[2]=-i[2],e[3]=r,e},sl.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},sl.multiply=sd,sl.rotate=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=Math.sin(r),u=Math.cos(r);return e[0]=n*u+s*l,e[1]=a*u+o*l,e[2]=-(n*l)+s*u,e[3]=-(a*l)+o*u,e},sl.scale=function(e,i,r){var n=i[1],a=i[2],s=i[3],o=r[0],l=r[1];return e[0]=i[0]*o,e[1]=n*o,e[2]=a*l,e[3]=s*l,e},sl.fromRotation=function(e,i){var r=Math.sin(i),n=Math.cos(i);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e},sl.fromScaling=function(e,i){return e[0]=i[0],e[1]=0,e[2]=0,e[3]=i[1],e},sl.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sl.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},sl.LDU=function(e,i,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,i,r]},sl.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e},sl.subtract=sf,sl.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]},sl.equals=function(e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=i[0],l=i[1],u=i[2],h=i[3];return Math.abs(r-o)<=sh.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-l)<=sh.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-u)<=sh.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-h)<=sh.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))},sl.multiplyScalar=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e},sl.multiplyScalarAndAdd=function(e,i,r,n){return e[0]=i[0]+r[0]*n,e[1]=i[1]+r[1]*n,e[2]=i[2]+r[2]*n,e[3]=i[3]+r[3]*n,e},sl.sub=sl.mul=void 0;var sh=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==su(e)&&"function"!=typeof e)return{default:e};var r=sc(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(sn);function sc(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(sc=function(e){return e?r:i})(e)}function sd(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=r[0],u=r[1],h=r[2],c=r[3];return e[0]=n*l+s*u,e[1]=a*l+o*u,e[2]=n*h+s*c,e[3]=a*h+o*c,e}function sf(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e}sl.mul=sd,sl.sub=sf;var sp={};function sm(e){return(sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(sp,"__esModule",{value:!0}),sp.create=function(){var e=new s_.ARRAY_TYPE(6);return s_.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},sp.clone=function(e){var i=new s_.ARRAY_TYPE(6);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i},sp.copy=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e},sp.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},sp.fromValues=function(e,i,r,n,a,s){var o=new s_.ARRAY_TYPE(6);return o[0]=e,o[1]=i,o[2]=r,o[3]=n,o[4]=a,o[5]=s,o},sp.set=function(e,i,r,n,a,s,o){return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=o,e},sp.invert=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=r*s-n*a;return u?(e[0]=s*(u=1/u),e[1]=-n*u,e[2]=-a*u,e[3]=r*u,e[4]=(a*l-s*o)*u,e[5]=(n*o-r*l)*u,e):null},sp.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},sp.multiply=sy,sp.rotate=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=Math.sin(r),c=Math.cos(r);return e[0]=n*c+s*h,e[1]=a*c+o*h,e[2]=-(n*h)+s*c,e[3]=-(a*h)+o*c,e[4]=l,e[5]=u,e},sp.scale=function(e,i,r){var n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=r[0],h=r[1];return e[0]=i[0]*u,e[1]=n*u,e[2]=a*h,e[3]=s*h,e[4]=o,e[5]=l,e},sp.translate=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=r[0],c=r[1];return e[0]=n,e[1]=a,e[2]=s,e[3]=o,e[4]=n*h+s*c+l,e[5]=a*h+o*c+u,e},sp.fromRotation=function(e,i){var r=Math.sin(i),n=Math.cos(i);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e},sp.fromScaling=function(e,i){return e[0]=i[0],e[1]=0,e[2]=0,e[3]=i[1],e[4]=0,e[5]=0,e},sp.fromTranslation=function(e,i){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=i[0],e[5]=i[1],e},sp.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sp.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)},sp.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e[4]=i[4]+r[4],e[5]=i[5]+r[5],e},sp.subtract=sv,sp.multiplyScalar=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e[4]=i[4]*r,e[5]=i[5]*r,e},sp.multiplyScalarAndAdd=function(e,i,r,n){return e[0]=i[0]+r[0]*n,e[1]=i[1]+r[1]*n,e[2]=i[2]+r[2]*n,e[3]=i[3]+r[3]*n,e[4]=i[4]+r[4]*n,e[5]=i[5]+r[5]*n,e},sp.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]&&e[4]===i[4]&&e[5]===i[5]},sp.equals=function(e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=i[0],h=i[1],c=i[2],d=i[3],f=i[4],p=i[5];return Math.abs(r-u)<=s_.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-h)<=s_.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-c)<=s_.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-d)<=s_.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-f)<=s_.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(l-p)<=s_.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))},sp.sub=sp.mul=void 0;var s_=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==sm(e)&&"function"!=typeof e)return{default:e};var r=sg(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(sn);function sg(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(sg=function(e){return e?r:i})(e)}function sy(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=r[0],c=r[1],d=r[2],f=r[3],p=r[4],m=r[5];return e[0]=n*h+s*c,e[1]=a*h+o*c,e[2]=n*d+s*f,e[3]=a*d+o*f,e[4]=n*p+s*m+l,e[5]=a*p+o*m+u,e}function sv(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e[4]=i[4]-r[4],e[5]=i[5]-r[5],e}sp.mul=sy,sp.sub=sv;var sx={};function sb(e){return(sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(sx,"__esModule",{value:!0}),sx.create=function(){var e=new sw.ARRAY_TYPE(9);return sw.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},sx.fromMat4=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[4],e[4]=i[5],e[5]=i[6],e[6]=i[8],e[7]=i[9],e[8]=i[10],e},sx.clone=function(e){var i=new sw.ARRAY_TYPE(9);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i},sx.copy=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e},sx.fromValues=function(e,i,r,n,a,s,o,l,u){var h=new sw.ARRAY_TYPE(9);return h[0]=e,h[1]=i,h[2]=r,h[3]=n,h[4]=a,h[5]=s,h[6]=o,h[7]=l,h[8]=u,h},sx.set=function(e,i,r,n,a,s,o,l,u,h){return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=o,e[6]=l,e[7]=u,e[8]=h,e},sx.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},sx.transpose=function(e,i){if(e===i){var r=i[1],n=i[2],a=i[5];e[1]=i[3],e[2]=i[6],e[3]=r,e[5]=i[7],e[6]=n,e[7]=a}else e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8];return e},sx.invert=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=i[6],h=i[7],c=i[8],d=c*o-l*h,f=-c*s+l*u,p=h*s-o*u,m=r*d+n*f+a*p;return m?(e[0]=d*(m=1/m),e[1]=(-c*n+a*h)*m,e[2]=(l*n-a*o)*m,e[3]=f*m,e[4]=(c*r-a*u)*m,e[5]=(-l*r+a*s)*m,e[6]=p*m,e[7]=(-h*r+n*u)*m,e[8]=(o*r-n*s)*m,e):null},sx.adjoint=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=i[6],h=i[7],c=i[8];return e[0]=o*c-l*h,e[1]=a*h-n*c,e[2]=n*l-a*o,e[3]=l*u-s*c,e[4]=r*c-a*u,e[5]=a*s-r*l,e[6]=s*h-o*u,e[7]=n*u-r*h,e[8]=r*o-n*s,e},sx.determinant=function(e){var i=e[3],r=e[4],n=e[5],a=e[6],s=e[7],o=e[8];return e[0]*(o*r-n*s)+e[1]*(-o*i+n*a)+e[2]*(s*i-r*a)},sx.multiply=sT,sx.translate=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=i[8],f=r[0],p=r[1];return e[0]=n,e[1]=a,e[2]=s,e[3]=o,e[4]=l,e[5]=u,e[6]=f*n+p*o+h,e[7]=f*a+p*l+c,e[8]=f*s+p*u+d,e},sx.rotate=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=i[8],f=Math.sin(r),p=Math.cos(r);return e[0]=p*n+f*o,e[1]=p*a+f*l,e[2]=p*s+f*u,e[3]=p*o-f*n,e[4]=p*l-f*a,e[5]=p*u-f*s,e[6]=h,e[7]=c,e[8]=d,e},sx.scale=function(e,i,r){var n=r[0],a=r[1];return e[0]=n*i[0],e[1]=n*i[1],e[2]=n*i[2],e[3]=a*i[3],e[4]=a*i[4],e[5]=a*i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e},sx.fromTranslation=function(e,i){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=i[0],e[7]=i[1],e[8]=1,e},sx.fromRotation=function(e,i){var r=Math.sin(i),n=Math.cos(i);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},sx.fromScaling=function(e,i){return e[0]=i[0],e[1]=0,e[2]=0,e[3]=0,e[4]=i[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},sx.fromMat2d=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=0,e[3]=i[2],e[4]=i[3],e[5]=0,e[6]=i[4],e[7]=i[5],e[8]=1,e},sx.fromQuat=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=r+r,l=n+n,u=a+a,h=r*o,c=n*o,d=n*l,f=a*o,p=a*l,m=a*u,_=s*o,g=s*l,y=s*u;return e[0]=1-d-m,e[3]=c-y,e[6]=f+g,e[1]=c+y,e[4]=1-h-m,e[7]=p-_,e[2]=f-g,e[5]=p+_,e[8]=1-h-d,e},sx.normalFromMat4=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=i[6],h=i[7],c=i[8],d=i[9],f=i[10],p=i[11],m=i[12],_=i[13],g=i[14],y=i[15],v=r*l-n*o,x=r*u-a*o,b=r*h-s*o,w=n*u-a*l,M=n*h-s*l,T=a*h-s*u,L=c*_-d*m,S=c*g-f*m,k=c*y-p*m,D=d*g-f*_,E=d*y-p*_,A=f*y-p*g,P=v*A-x*E+b*D+w*k-M*S+T*L;return P?(e[0]=(l*A-u*E+h*D)*(P=1/P),e[1]=(u*k-o*A-h*S)*P,e[2]=(o*E-l*k+h*L)*P,e[3]=(a*E-n*A-s*D)*P,e[4]=(r*A-a*k+s*S)*P,e[5]=(n*k-r*E-s*L)*P,e[6]=(_*T-g*M+y*w)*P,e[7]=(g*b-m*T-y*x)*P,e[8]=(m*M-_*b+y*v)*P,e):null},sx.projection=function(e,i,r){return e[0]=2/i,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},sx.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},sx.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},sx.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e[4]=i[4]+r[4],e[5]=i[5]+r[5],e[6]=i[6]+r[6],e[7]=i[7]+r[7],e[8]=i[8]+r[8],e},sx.subtract=sL,sx.multiplyScalar=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=i[7]*r,e[8]=i[8]*r,e},sx.multiplyScalarAndAdd=function(e,i,r,n){return e[0]=i[0]+r[0]*n,e[1]=i[1]+r[1]*n,e[2]=i[2]+r[2]*n,e[3]=i[3]+r[3]*n,e[4]=i[4]+r[4]*n,e[5]=i[5]+r[5]*n,e[6]=i[6]+r[6]*n,e[7]=i[7]+r[7]*n,e[8]=i[8]+r[8]*n,e},sx.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]&&e[4]===i[4]&&e[5]===i[5]&&e[6]===i[6]&&e[7]===i[7]&&e[8]===i[8]},sx.equals=function(e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=i[0],f=i[1],p=i[2],m=i[3],_=i[4],g=i[5],y=i[6],v=i[7],x=i[8];return Math.abs(r-d)<=sw.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-f)<=sw.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-p)<=sw.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-m)<=sw.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-_)<=sw.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(l-g)<=sw.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-y)<=sw.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-v)<=sw.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(c-x)<=sw.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))},sx.sub=sx.mul=void 0;var sw=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==sb(e)&&"function"!=typeof e)return{default:e};var r=sM(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(sn);function sM(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(sM=function(e){return e?r:i})(e)}function sT(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=i[8],f=r[0],p=r[1],m=r[2],_=r[3],g=r[4],y=r[5],v=r[6],x=r[7],b=r[8];return e[0]=f*n+p*o+m*h,e[1]=f*a+p*l+m*c,e[2]=f*s+p*u+m*d,e[3]=_*n+g*o+y*h,e[4]=_*a+g*l+y*c,e[5]=_*s+g*u+y*d,e[6]=v*n+x*o+b*h,e[7]=v*a+x*l+b*c,e[8]=v*s+x*u+b*d,e}function sL(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e[4]=i[4]-r[4],e[5]=i[5]-r[5],e[6]=i[6]-r[6],e[7]=i[7]-r[7],e[8]=i[8]-r[8],e}sx.mul=sT,sx.sub=sL;var sS={};function sk(e){return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(sS,"__esModule",{value:!0}),sS.create=function(){var e=new sD.ARRAY_TYPE(16);return sD.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},sS.clone=function(e){var i=new sD.ARRAY_TYPE(16);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},sS.copy=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},sS.fromValues=function(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_){var g=new sD.ARRAY_TYPE(16);return g[0]=e,g[1]=i,g[2]=r,g[3]=n,g[4]=a,g[5]=s,g[6]=o,g[7]=l,g[8]=u,g[9]=h,g[10]=c,g[11]=d,g[12]=f,g[13]=p,g[14]=m,g[15]=_,g},sS.set=function(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g){return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=o,e[6]=l,e[7]=u,e[8]=h,e[9]=c,e[10]=d,e[11]=f,e[12]=p,e[13]=m,e[14]=_,e[15]=g,e},sS.identity=sA,sS.transpose=function(e,i){if(e===i){var r=i[1],n=i[2],a=i[3],s=i[6],o=i[7],l=i[11];e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=r,e[6]=i[9],e[7]=i[13],e[8]=n,e[9]=s,e[11]=i[14],e[12]=a,e[13]=o,e[14]=l}else e[0]=i[0],e[1]=i[4],e[2]=i[8],e[3]=i[12],e[4]=i[1],e[5]=i[5],e[6]=i[9],e[7]=i[13],e[8]=i[2],e[9]=i[6],e[10]=i[10],e[11]=i[14],e[12]=i[3],e[13]=i[7],e[14]=i[11],e[15]=i[15];return e},sS.invert=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=i[6],h=i[7],c=i[8],d=i[9],f=i[10],p=i[11],m=i[12],_=i[13],g=i[14],y=i[15],v=r*l-n*o,x=r*u-a*o,b=r*h-s*o,w=n*u-a*l,M=n*h-s*l,T=a*h-s*u,L=c*_-d*m,S=c*g-f*m,k=c*y-p*m,D=d*g-f*_,E=d*y-p*_,A=f*y-p*g,P=v*A-x*E+b*D+w*k-M*S+T*L;return P?(e[0]=(l*A-u*E+h*D)*(P=1/P),e[1]=(a*E-n*A-s*D)*P,e[2]=(_*T-g*M+y*w)*P,e[3]=(f*M-d*T-p*w)*P,e[4]=(u*k-o*A-h*S)*P,e[5]=(r*A-a*k+s*S)*P,e[6]=(g*b-m*T-y*x)*P,e[7]=(c*T-f*b+p*x)*P,e[8]=(o*E-l*k+h*L)*P,e[9]=(n*k-r*E-s*L)*P,e[10]=(m*M-_*b+y*v)*P,e[11]=(d*b-c*M-p*v)*P,e[12]=(l*S-o*D-u*L)*P,e[13]=(r*D-n*S+a*L)*P,e[14]=(_*x-m*w-g*v)*P,e[15]=(c*w-d*x+f*v)*P,e):null},sS.adjoint=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=i[6],h=i[7],c=i[8],d=i[9],f=i[10],p=i[11],m=i[12],_=i[13],g=i[14],y=i[15];return e[0]=l*(f*y-p*g)-d*(u*y-h*g)+_*(u*p-h*f),e[1]=-(n*(f*y-p*g)-d*(a*y-s*g)+_*(a*p-s*f)),e[2]=n*(u*y-h*g)-l*(a*y-s*g)+_*(a*h-s*u),e[3]=-(n*(u*p-h*f)-l*(a*p-s*f)+d*(a*h-s*u)),e[4]=-(o*(f*y-p*g)-c*(u*y-h*g)+m*(u*p-h*f)),e[5]=r*(f*y-p*g)-c*(a*y-s*g)+m*(a*p-s*f),e[6]=-(r*(u*y-h*g)-o*(a*y-s*g)+m*(a*h-s*u)),e[7]=r*(u*p-h*f)-o*(a*p-s*f)+c*(a*h-s*u),e[8]=o*(d*y-p*_)-c*(l*y-h*_)+m*(l*p-h*d),e[9]=-(r*(d*y-p*_)-c*(n*y-s*_)+m*(n*p-s*d)),e[10]=r*(l*y-h*_)-o*(n*y-s*_)+m*(n*h-s*l),e[11]=-(r*(l*p-h*d)-o*(n*p-s*d)+c*(n*h-s*l)),e[12]=-(o*(d*g-f*_)-c*(l*g-u*_)+m*(l*f-u*d)),e[13]=r*(d*g-f*_)-c*(n*g-a*_)+m*(n*f-a*d),e[14]=-(r*(l*g-u*_)-o*(n*g-a*_)+m*(n*u-a*l)),e[15]=r*(l*f-u*d)-o*(n*f-a*d)+c*(n*u-a*l),e},sS.determinant=function(e){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=e[8],c=e[9],d=e[10],f=e[11],p=e[12],m=e[13],_=e[14],g=e[15];return(i*o-r*s)*(d*g-f*_)-(i*l-n*s)*(c*g-f*m)+(i*u-a*s)*(c*_-d*m)+(r*l-n*o)*(h*g-f*p)-(r*u-a*o)*(h*_-d*p)+(n*u-a*l)*(h*m-c*p)},sS.multiply=sP,sS.translate=function(e,i,r){var n,a,s,o,l,u,h,c,d,f,p,m,_=r[0],g=r[1],y=r[2];return i===e?(e[12]=i[0]*_+i[4]*g+i[8]*y+i[12],e[13]=i[1]*_+i[5]*g+i[9]*y+i[13],e[14]=i[2]*_+i[6]*g+i[10]*y+i[14],e[15]=i[3]*_+i[7]*g+i[11]*y+i[15]):(a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=i[8],f=i[9],p=i[10],m=i[11],e[0]=n=i[0],e[1]=a,e[2]=s,e[3]=o,e[4]=l,e[5]=u,e[6]=h,e[7]=c,e[8]=d,e[9]=f,e[10]=p,e[11]=m,e[12]=n*_+l*g+d*y+i[12],e[13]=a*_+u*g+f*y+i[13],e[14]=s*_+h*g+p*y+i[14],e[15]=o*_+c*g+m*y+i[15]),e},sS.scale=function(e,i,r){var n=r[0],a=r[1],s=r[2];return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=i[3]*n,e[4]=i[4]*a,e[5]=i[5]*a,e[6]=i[6]*a,e[7]=i[7]*a,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=i[11]*s,e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},sS.rotate=function(e,i,r,n){var a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w,M,T,L,S,k,D,E=n[0],A=n[1],P=n[2],C=Math.hypot(E,A,P);return C<sD.EPSILON?null:(E*=C=1/C,A*=C,P*=C,a=Math.sin(r),s=Math.cos(r),u=i[1],h=i[2],c=i[3],f=i[5],p=i[6],m=i[7],g=i[9],y=i[10],v=i[11],M=E*A*(o=1-s)-P*a,T=A*A*o+s,L=P*A*o+E*a,S=E*P*o+A*a,k=A*P*o-E*a,D=P*P*o+s,e[0]=(l=i[0])*(x=E*E*o+s)+(d=i[4])*(b=A*E*o+P*a)+(_=i[8])*(w=P*E*o-A*a),e[1]=u*x+f*b+g*w,e[2]=h*x+p*b+y*w,e[3]=c*x+m*b+v*w,e[4]=l*M+d*T+_*L,e[5]=u*M+f*T+g*L,e[6]=h*M+p*T+y*L,e[7]=c*M+m*T+v*L,e[8]=l*S+d*k+_*D,e[9]=u*S+f*k+g*D,e[10]=h*S+p*k+y*D,e[11]=c*S+m*k+v*D,i!==e&&(e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e)},sS.rotateX=function(e,i,r){var n=Math.sin(r),a=Math.cos(r),s=i[4],o=i[5],l=i[6],u=i[7],h=i[8],c=i[9],d=i[10],f=i[11];return i!==e&&(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[4]=s*a+h*n,e[5]=o*a+c*n,e[6]=l*a+d*n,e[7]=u*a+f*n,e[8]=h*a-s*n,e[9]=c*a-o*n,e[10]=d*a-l*n,e[11]=f*a-u*n,e},sS.rotateY=function(e,i,r){var n=Math.sin(r),a=Math.cos(r),s=i[0],o=i[1],l=i[2],u=i[3],h=i[8],c=i[9],d=i[10],f=i[11];return i!==e&&(e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=s*a-h*n,e[1]=o*a-c*n,e[2]=l*a-d*n,e[3]=u*a-f*n,e[8]=s*n+h*a,e[9]=o*n+c*a,e[10]=l*n+d*a,e[11]=u*n+f*a,e},sS.rotateZ=function(e,i,r){var n=Math.sin(r),a=Math.cos(r),s=i[0],o=i[1],l=i[2],u=i[3],h=i[4],c=i[5],d=i[6],f=i[7];return i!==e&&(e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e[0]=s*a+h*n,e[1]=o*a+c*n,e[2]=l*a+d*n,e[3]=u*a+f*n,e[4]=h*a-s*n,e[5]=c*a-o*n,e[6]=d*a-l*n,e[7]=f*a-u*n,e},sS.fromTranslation=function(e,i){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e},sS.fromScaling=function(e,i){return e[0]=i[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=i[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},sS.fromRotation=function(e,i,r){var n,a,s,o=r[0],l=r[1],u=r[2],h=Math.hypot(o,l,u);return h<sD.EPSILON?null:(o*=h=1/h,l*=h,u*=h,n=Math.sin(i),a=Math.cos(i),e[0]=o*o*(s=1-a)+a,e[1]=l*o*s+u*n,e[2]=u*o*s-l*n,e[3]=0,e[4]=o*l*s-u*n,e[5]=l*l*s+a,e[6]=u*l*s+o*n,e[7]=0,e[8]=o*u*s+l*n,e[9]=l*u*s-o*n,e[10]=u*u*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},sS.fromXRotation=function(e,i){var r=Math.sin(i),n=Math.cos(i);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},sS.fromYRotation=function(e,i){var r=Math.sin(i),n=Math.cos(i);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},sS.fromZRotation=function(e,i){var r=Math.sin(i),n=Math.cos(i);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},sS.fromRotationTranslation=sC,sS.fromQuat2=function(e,i){var r=new sD.ARRAY_TYPE(3),n=-i[0],a=-i[1],s=-i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=n*n+a*a+s*s+o*o;return d>0?(r[0]=2*(l*o+c*n+u*s-h*a)/d,r[1]=2*(u*o+c*a+h*n-l*s)/d,r[2]=2*(h*o+c*s+l*a-u*n)/d):(r[0]=2*(l*o+c*n+u*s-h*a),r[1]=2*(u*o+c*a+h*n-l*s),r[2]=2*(h*o+c*s+l*a-u*n)),sC(e,i,r),e},sS.getTranslation=function(e,i){return e[0]=i[12],e[1]=i[13],e[2]=i[14],e},sS.getScaling=sI,sS.getRotation=function(e,i){var r=new sD.ARRAY_TYPE(3);sI(r,i);var n=1/r[0],a=1/r[1],s=1/r[2],o=i[0]*n,l=i[1]*a,u=i[2]*s,h=i[4]*n,c=i[5]*a,d=i[6]*s,f=i[8]*n,p=i[9]*a,m=i[10]*s,_=o+c+m,g=0;return _>0?(g=2*Math.sqrt(_+1),e[3]=.25*g,e[0]=(d-p)/g,e[1]=(f-u)/g,e[2]=(l-h)/g):o>c&&o>m?(g=2*Math.sqrt(1+o-c-m),e[3]=(d-p)/g,e[0]=.25*g,e[1]=(l+h)/g,e[2]=(f+u)/g):c>m?(g=2*Math.sqrt(1+c-o-m),e[3]=(f-u)/g,e[0]=(l+h)/g,e[1]=.25*g,e[2]=(d+p)/g):(g=2*Math.sqrt(1+m-o-c),e[3]=(l-h)/g,e[0]=(f+u)/g,e[1]=(d+p)/g,e[2]=.25*g),e},sS.fromRotationTranslationScale=function(e,i,r,n){var a=i[0],s=i[1],o=i[2],l=i[3],u=a+a,h=s+s,c=o+o,d=a*u,f=a*h,p=a*c,m=s*h,_=s*c,g=o*c,y=l*u,v=l*h,x=l*c,b=n[0],w=n[1],M=n[2];return e[0]=(1-(m+g))*b,e[1]=(f+x)*b,e[2]=(p-v)*b,e[3]=0,e[4]=(f-x)*w,e[5]=(1-(d+g))*w,e[6]=(_+y)*w,e[7]=0,e[8]=(p+v)*M,e[9]=(_-y)*M,e[10]=(1-(d+m))*M,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},sS.fromRotationTranslationScaleOrigin=function(e,i,r,n,a){var s=i[0],o=i[1],l=i[2],u=i[3],h=s+s,c=o+o,d=l+l,f=s*h,p=s*c,m=s*d,_=o*c,g=o*d,y=l*d,v=u*h,x=u*c,b=u*d,w=n[0],M=n[1],T=n[2],L=a[0],S=a[1],k=a[2],D=(1-(_+y))*w,E=(p+b)*w,A=(m-x)*w,P=(p-b)*M,C=(1-(f+y))*M,I=(g+v)*M,O=(m+x)*T,z=(g-v)*T,R=(1-(f+_))*T;return e[0]=D,e[1]=E,e[2]=A,e[3]=0,e[4]=P,e[5]=C,e[6]=I,e[7]=0,e[8]=O,e[9]=z,e[10]=R,e[11]=0,e[12]=r[0]+L-(D*L+P*S+O*k),e[13]=r[1]+S-(E*L+C*S+z*k),e[14]=r[2]+k-(A*L+I*S+R*k),e[15]=1,e},sS.fromQuat=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=r+r,l=n+n,u=a+a,h=r*o,c=n*o,d=n*l,f=a*o,p=a*l,m=a*u,_=s*o,g=s*l,y=s*u;return e[0]=1-d-m,e[1]=c+y,e[2]=f-g,e[3]=0,e[4]=c-y,e[5]=1-h-m,e[6]=p+_,e[7]=0,e[8]=f+g,e[9]=p-_,e[10]=1-h-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},sS.frustum=function(e,i,r,n,a,s,o){var l=1/(r-i),u=1/(a-n),h=1/(s-o);return e[0]=2*s*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*u,e[6]=0,e[7]=0,e[8]=(r+i)*l,e[9]=(a+n)*u,e[10]=(o+s)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*h,e[15]=0,e},sS.perspectiveNO=sO,sS.perspectiveZO=function(e,i,r,n,a){var s,o=1/Math.tan(i/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(e[10]=a*(s=1/(n-a)),e[14]=a*n*s):(e[10]=-1,e[14]=-n),e},sS.perspectiveFromFieldOfView=function(e,i,r,n){var a=Math.tan(i.upDegrees*Math.PI/180),s=Math.tan(i.downDegrees*Math.PI/180),o=Math.tan(i.leftDegrees*Math.PI/180),l=Math.tan(i.rightDegrees*Math.PI/180),u=2/(o+l),h=2/(a+s);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(o-l)*u*.5,e[9]=(a-s)*h*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},sS.orthoNO=sz,sS.orthoZO=function(e,i,r,n,a,s,o){var l=1/(i-r),u=1/(n-a),h=1/(s-o);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=h,e[11]=0,e[12]=(i+r)*l,e[13]=(a+n)*u,e[14]=s*h,e[15]=1,e},sS.lookAt=function(e,i,r,n){var a,s,o,l,u,h,c,d,f,p,m=i[0],_=i[1],g=i[2],y=n[0],v=n[1],x=n[2],b=r[0],w=r[1],M=r[2];return Math.abs(m-b)<sD.EPSILON&&Math.abs(_-w)<sD.EPSILON&&Math.abs(g-M)<sD.EPSILON?sA(e):(c=m-b,d=_-w,f=g-M,(p=Math.hypot(a=v*(f*=p=1/Math.hypot(c,d,f))-x*(d*=p),s=x*(c*=p)-y*f,o=y*d-v*c))?(a*=p=1/p,s*=p,o*=p):(a=0,s=0,o=0),(p=Math.hypot(l=d*o-f*s,u=f*a-c*o,h=c*s-d*a))?(l*=p=1/p,u*=p,h*=p):(l=0,u=0,h=0),e[0]=a,e[1]=l,e[2]=c,e[3]=0,e[4]=s,e[5]=u,e[6]=d,e[7]=0,e[8]=o,e[9]=h,e[10]=f,e[11]=0,e[12]=-(a*m+s*_+o*g),e[13]=-(l*m+u*_+h*g),e[14]=-(c*m+d*_+f*g),e[15]=1,e)},sS.targetTo=function(e,i,r,n){var a=i[0],s=i[1],o=i[2],l=n[0],u=n[1],h=n[2],c=a-r[0],d=s-r[1],f=o-r[2],p=c*c+d*d+f*f;p>0&&(c*=p=1/Math.sqrt(p),d*=p,f*=p);var m=u*f-h*d,_=h*c-l*f,g=l*d-u*c;return(p=m*m+_*_+g*g)>0&&(m*=p=1/Math.sqrt(p),_*=p,g*=p),e[0]=m,e[1]=_,e[2]=g,e[3]=0,e[4]=d*g-f*_,e[5]=f*m-c*g,e[6]=c*_-d*m,e[7]=0,e[8]=c,e[9]=d,e[10]=f,e[11]=0,e[12]=a,e[13]=s,e[14]=o,e[15]=1,e},sS.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},sS.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},sS.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e[4]=i[4]+r[4],e[5]=i[5]+r[5],e[6]=i[6]+r[6],e[7]=i[7]+r[7],e[8]=i[8]+r[8],e[9]=i[9]+r[9],e[10]=i[10]+r[10],e[11]=i[11]+r[11],e[12]=i[12]+r[12],e[13]=i[13]+r[13],e[14]=i[14]+r[14],e[15]=i[15]+r[15],e},sS.subtract=sR,sS.multiplyScalar=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=i[7]*r,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,e[11]=i[11]*r,e[12]=i[12]*r,e[13]=i[13]*r,e[14]=i[14]*r,e[15]=i[15]*r,e},sS.multiplyScalarAndAdd=function(e,i,r,n){return e[0]=i[0]+r[0]*n,e[1]=i[1]+r[1]*n,e[2]=i[2]+r[2]*n,e[3]=i[3]+r[3]*n,e[4]=i[4]+r[4]*n,e[5]=i[5]+r[5]*n,e[6]=i[6]+r[6]*n,e[7]=i[7]+r[7]*n,e[8]=i[8]+r[8]*n,e[9]=i[9]+r[9]*n,e[10]=i[10]+r[10]*n,e[11]=i[11]+r[11]*n,e[12]=i[12]+r[12]*n,e[13]=i[13]+r[13]*n,e[14]=i[14]+r[14]*n,e[15]=i[15]+r[15]*n,e},sS.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]&&e[4]===i[4]&&e[5]===i[5]&&e[6]===i[6]&&e[7]===i[7]&&e[8]===i[8]&&e[9]===i[9]&&e[10]===i[10]&&e[11]===i[11]&&e[12]===i[12]&&e[13]===i[13]&&e[14]===i[14]&&e[15]===i[15]},sS.equals=function(e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=e[9],f=e[10],p=e[11],m=e[12],_=e[13],g=e[14],y=e[15],v=i[0],x=i[1],b=i[2],w=i[3],M=i[4],T=i[5],L=i[6],S=i[7],k=i[8],D=i[9],E=i[10],A=i[11],P=i[12],C=i[13],I=i[14],O=i[15];return Math.abs(r-v)<=sD.EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-x)<=sD.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(a-b)<=sD.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(s-w)<=sD.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-M)<=sD.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(l-T)<=sD.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-L)<=sD.EPSILON*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(h-S)<=sD.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(c-k)<=sD.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(d-D)<=sD.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(f-E)<=sD.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(p-A)<=sD.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-P)<=sD.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(_-C)<=sD.EPSILON*Math.max(1,Math.abs(_),Math.abs(C))&&Math.abs(g-I)<=sD.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(y-O)<=sD.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},sS.sub=sS.mul=sS.ortho=sS.perspective=void 0;var sD=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==sk(e)&&"function"!=typeof e)return{default:e};var r=sE(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(sn);function sE(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(sE=function(e){return e?r:i})(e)}function sA(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function sP(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=i[8],f=i[9],p=i[10],m=i[11],_=i[12],g=i[13],y=i[14],v=i[15],x=r[0],b=r[1],w=r[2],M=r[3];return e[0]=x*n+b*l+w*d+M*_,e[1]=x*a+b*u+w*f+M*g,e[2]=x*s+b*h+w*p+M*y,e[3]=x*o+b*c+w*m+M*v,e[4]=(x=r[4])*n+(b=r[5])*l+(w=r[6])*d+(M=r[7])*_,e[5]=x*a+b*u+w*f+M*g,e[6]=x*s+b*h+w*p+M*y,e[7]=x*o+b*c+w*m+M*v,e[8]=(x=r[8])*n+(b=r[9])*l+(w=r[10])*d+(M=r[11])*_,e[9]=x*a+b*u+w*f+M*g,e[10]=x*s+b*h+w*p+M*y,e[11]=x*o+b*c+w*m+M*v,e[12]=(x=r[12])*n+(b=r[13])*l+(w=r[14])*d+(M=r[15])*_,e[13]=x*a+b*u+w*f+M*g,e[14]=x*s+b*h+w*p+M*y,e[15]=x*o+b*c+w*m+M*v,e}function sC(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=n+n,u=a+a,h=s+s,c=n*l,d=n*u,f=n*h,p=a*u,m=a*h,_=s*h,g=o*l,y=o*u,v=o*h;return e[0]=1-(p+_),e[1]=d+v,e[2]=f-y,e[3]=0,e[4]=d-v,e[5]=1-(c+_),e[6]=m+g,e[7]=0,e[8]=f+y,e[9]=m-g,e[10]=1-(c+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function sI(e,i){var r=i[4],n=i[5],a=i[6],s=i[8],o=i[9],l=i[10];return e[0]=Math.hypot(i[0],i[1],i[2]),e[1]=Math.hypot(r,n,a),e[2]=Math.hypot(s,o,l),e}function sO(e,i,r,n,a){var s,o=1/Math.tan(i/2);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(e[10]=(a+n)*(s=1/(n-a)),e[14]=2*a*n*s):(e[10]=-1,e[14]=-2*n),e}function sz(e,i,r,n,a,s,o){var l=1/(i-r),u=1/(n-a),h=1/(s-o);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(i+r)*l,e[13]=(a+n)*u,e[14]=(o+s)*h,e[15]=1,e}function sR(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e[4]=i[4]-r[4],e[5]=i[5]-r[5],e[6]=i[6]-r[6],e[7]=i[7]-r[7],e[8]=i[8]-r[8],e[9]=i[9]-r[9],e[10]=i[10]-r[10],e[11]=i[11]-r[11],e[12]=i[12]-r[12],e[13]=i[13]-r[13],e[14]=i[14]-r[14],e[15]=i[15]-r[15],e}sS.perspective=sO,sS.ortho=sz,sS.mul=sP,sS.sub=sR;var sY={},sF={};function sj(e){return(sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(sF,"__esModule",{value:!0}),sF.create=sH,sF.clone=function(e){var i=new sB.ARRAY_TYPE(3);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i},sF.length=sV,sF.fromValues=function(e,i,r){var n=new sB.ARRAY_TYPE(3);return n[0]=e,n[1]=i,n[2]=r,n},sF.copy=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e},sF.set=function(e,i,r,n){return e[0]=i,e[1]=r,e[2]=n,e},sF.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},sF.subtract=sU,sF.multiply=s$,sF.divide=sW,sF.ceil=function(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e[2]=Math.ceil(i[2]),e},sF.floor=function(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e[2]=Math.floor(i[2]),e},sF.min=function(e,i,r){return e[0]=Math.min(i[0],r[0]),e[1]=Math.min(i[1],r[1]),e[2]=Math.min(i[2],r[2]),e},sF.max=function(e,i,r){return e[0]=Math.max(i[0],r[0]),e[1]=Math.max(i[1],r[1]),e[2]=Math.max(i[2],r[2]),e},sF.round=function(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e[2]=Math.round(i[2]),e},sF.scale=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e},sF.scaleAndAdd=function(e,i,r,n){return e[0]=i[0]+r[0]*n,e[1]=i[1]+r[1]*n,e[2]=i[2]+r[2]*n,e},sF.distance=sG,sF.squaredDistance=sq,sF.squaredLength=sZ,sF.negate=function(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e},sF.inverse=function(e,i){return e[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],e},sF.normalize=function(e,i){var r=i[0],n=i[1],a=i[2],s=r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e},sF.dot=sX,sF.cross=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=r[0],l=r[1],u=r[2];return e[0]=a*u-s*l,e[1]=s*o-n*u,e[2]=n*l-a*o,e},sF.lerp=function(e,i,r,n){var a=i[0],s=i[1],o=i[2];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e},sF.hermite=function(e,i,r,n,a,s){var o=s*s,l=o*(2*s-3)+1,u=o*(s-2)+s,h=o*(s-1),c=o*(3-2*s);return e[0]=i[0]*l+r[0]*u+n[0]*h+a[0]*c,e[1]=i[1]*l+r[1]*u+n[1]*h+a[1]*c,e[2]=i[2]*l+r[2]*u+n[2]*h+a[2]*c,e},sF.bezier=function(e,i,r,n,a,s){var o=1-s,l=o*o,u=s*s,h=l*o,c=3*s*l,d=3*u*o,f=u*s;return e[0]=i[0]*h+r[0]*c+n[0]*d+a[0]*f,e[1]=i[1]*h+r[1]*c+n[1]*d+a[1]*f,e[2]=i[2]*h+r[2]*c+n[2]*d+a[2]*f,e},sF.random=function(e,i){i=i||1;var r=2*sB.RANDOM()*Math.PI,n=2*sB.RANDOM()-1,a=Math.sqrt(1-n*n)*i;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*i,e},sF.transformMat4=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=r[3]*n+r[7]*a+r[11]*s+r[15];return e[0]=(r[0]*n+r[4]*a+r[8]*s+r[12])/(o=o||1),e[1]=(r[1]*n+r[5]*a+r[9]*s+r[13])/o,e[2]=(r[2]*n+r[6]*a+r[10]*s+r[14])/o,e},sF.transformMat3=function(e,i,r){var n=i[0],a=i[1],s=i[2];return e[0]=n*r[0]+a*r[3]+s*r[6],e[1]=n*r[1]+a*r[4]+s*r[7],e[2]=n*r[2]+a*r[5]+s*r[8],e},sF.transformQuat=function(e,i,r){var n=r[0],a=r[1],s=r[2],o=i[0],l=i[1],u=i[2],h=a*u-s*l,c=s*o-n*u,d=n*l-a*o,f=a*d-s*c,p=s*h-n*d,m=n*c-a*h,_=2*r[3];return c*=_,d*=_,p*=2,m*=2,e[0]=o+(h*=_)+(f*=2),e[1]=l+c+p,e[2]=u+d+m,e},sF.rotateX=function(e,i,r,n){var a=[],s=[];return a[0]=i[0]-r[0],a[1]=i[1]-r[1],a[2]=i[2]-r[2],s[0]=a[0],s[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),s[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e},sF.rotateY=function(e,i,r,n){var a=[],s=[];return a[0]=i[0]-r[0],a[1]=i[1]-r[1],a[2]=i[2]-r[2],s[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),s[1]=a[1],s[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e},sF.rotateZ=function(e,i,r,n){var a=[],s=[];return a[0]=i[0]-r[0],a[1]=i[1]-r[1],a[2]=i[2]-r[2],s[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),s[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),s[2]=a[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e},sF.angle=function(e,i){var r=e[0],n=e[1],a=e[2],s=i[0],o=i[1],l=i[2],u=Math.sqrt(r*r+n*n+a*a)*Math.sqrt(s*s+o*o+l*l);return Math.acos(Math.min(Math.max(u&&sX(e,i)/u,-1),1))},sF.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e},sF.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},sF.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]},sF.equals=function(e,i){var r=e[0],n=e[1],a=e[2],s=i[0],o=i[1],l=i[2];return Math.abs(r-s)<=sB.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-o)<=sB.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-l)<=sB.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},sF.forEach=sF.sqrLen=sF.len=sF.sqrDist=sF.dist=sF.div=sF.mul=sF.sub=void 0;var sB=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==sj(e)&&"function"!=typeof e)return{default:e};var r=sN(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(sn);function sN(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(sN=function(e){return e?r:i})(e)}function sH(){var e=new sB.ARRAY_TYPE(3);return sB.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function sV(e){return Math.hypot(e[0],e[1],e[2])}function sU(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e}function s$(e,i,r){return e[0]=i[0]*r[0],e[1]=i[1]*r[1],e[2]=i[2]*r[2],e}function sW(e,i,r){return e[0]=i[0]/r[0],e[1]=i[1]/r[1],e[2]=i[2]/r[2],e}function sG(e,i){return Math.hypot(i[0]-e[0],i[1]-e[1],i[2]-e[2])}function sq(e,i){var r=i[0]-e[0],n=i[1]-e[1],a=i[2]-e[2];return r*r+n*n+a*a}function sZ(e){var i=e[0],r=e[1],n=e[2];return i*i+r*r+n*n}function sX(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]}sF.sub=sU,sF.mul=s$,sF.div=sW,sF.dist=sG,sF.sqrDist=sq,sF.len=sV,sF.sqrLen=sZ;var sJ,sK=(sJ=sH(),function(e,i,r,n,a,s){var o,l;for(i||(i=3),r||(r=0),l=n?Math.min(n*i+r,e.length):e.length,o=r;o<l;o+=i)sJ[0]=e[o],sJ[1]=e[o+1],sJ[2]=e[o+2],a(sJ,sJ,s),e[o]=sJ[0],e[o+1]=sJ[1],e[o+2]=sJ[2];return e});sF.forEach=sK;var sQ={};function s0(e){return(s0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(sQ,"__esModule",{value:!0}),sQ.create=s3,sQ.clone=function(e){var i=new s1.ARRAY_TYPE(4);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i},sQ.fromValues=function(e,i,r,n){var a=new s1.ARRAY_TYPE(4);return a[0]=e,a[1]=i,a[2]=r,a[3]=n,a},sQ.copy=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e},sQ.set=function(e,i,r,n,a){return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e},sQ.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e},sQ.subtract=s4,sQ.multiply=s5,sQ.divide=s6,sQ.ceil=function(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e[2]=Math.ceil(i[2]),e[3]=Math.ceil(i[3]),e},sQ.floor=function(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e[2]=Math.floor(i[2]),e[3]=Math.floor(i[3]),e},sQ.min=function(e,i,r){return e[0]=Math.min(i[0],r[0]),e[1]=Math.min(i[1],r[1]),e[2]=Math.min(i[2],r[2]),e[3]=Math.min(i[3],r[3]),e},sQ.max=function(e,i,r){return e[0]=Math.max(i[0],r[0]),e[1]=Math.max(i[1],r[1]),e[2]=Math.max(i[2],r[2]),e[3]=Math.max(i[3],r[3]),e},sQ.round=function(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e[2]=Math.round(i[2]),e[3]=Math.round(i[3]),e},sQ.scale=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e},sQ.scaleAndAdd=function(e,i,r,n){return e[0]=i[0]+r[0]*n,e[1]=i[1]+r[1]*n,e[2]=i[2]+r[2]*n,e[3]=i[3]+r[3]*n,e},sQ.distance=s8,sQ.squaredDistance=s7,sQ.length=s9,sQ.squaredLength=oe,sQ.negate=function(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=-i[3],e},sQ.inverse=function(e,i){return e[0]=1/i[0],e[1]=1/i[1],e[2]=1/i[2],e[3]=1/i[3],e},sQ.normalize=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=r*r+n*n+a*a+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=a*o,e[3]=s*o,e},sQ.dot=function(e,i){return e[0]*i[0]+e[1]*i[1]+e[2]*i[2]+e[3]*i[3]},sQ.cross=function(e,i,r,n){var a=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],l=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],h=r[2]*n[3]-r[3]*n[2],c=i[0],d=i[1],f=i[2],p=i[3];return e[0]=d*h-f*u+p*l,e[1]=-c*h+f*o-p*s,e[2]=c*u-d*o+p*a,e[3]=-c*l+d*s-f*a,e},sQ.lerp=function(e,i,r,n){var a=i[0],s=i[1],o=i[2],l=i[3];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e[3]=l+n*(r[3]-l),e},sQ.random=function(e,i){i=i||1;do o=(r=2*s1.RANDOM()-1)*r+(n=2*s1.RANDOM()-1)*n;while(o>=1)do l=(a=2*s1.RANDOM()-1)*a+(s=2*s1.RANDOM()-1)*s;while(l>=1)var r,n,a,s,o,l,u=Math.sqrt((1-o)/l);return e[0]=i*r,e[1]=i*n,e[2]=i*a*u,e[3]=i*s*u,e},sQ.transformMat4=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3];return e[0]=r[0]*n+r[4]*a+r[8]*s+r[12]*o,e[1]=r[1]*n+r[5]*a+r[9]*s+r[13]*o,e[2]=r[2]*n+r[6]*a+r[10]*s+r[14]*o,e[3]=r[3]*n+r[7]*a+r[11]*s+r[15]*o,e},sQ.transformQuat=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=r[0],l=r[1],u=r[2],h=r[3],c=h*n+l*s-u*a,d=h*a+u*n-o*s,f=h*s+o*a-l*n,p=-o*n-l*a-u*s;return e[0]=c*h+-(p*o)+-(d*u)- -(f*l),e[1]=d*h+-(p*l)+-(f*o)- -(c*u),e[2]=f*h+-(p*u)+-(c*l)- -(d*o),e[3]=i[3],e},sQ.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},sQ.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sQ.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]},sQ.equals=function(e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=i[0],l=i[1],u=i[2],h=i[3];return Math.abs(r-o)<=s1.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-l)<=s1.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-u)<=s1.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-h)<=s1.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))},sQ.forEach=sQ.sqrLen=sQ.len=sQ.sqrDist=sQ.dist=sQ.div=sQ.mul=sQ.sub=void 0;var s1=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==s0(e)&&"function"!=typeof e)return{default:e};var r=s2(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(sn);function s2(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(s2=function(e){return e?r:i})(e)}function s3(){var e=new s1.ARRAY_TYPE(4);return s1.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function s4(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2],e[3]=i[3]-r[3],e}function s5(e,i,r){return e[0]=i[0]*r[0],e[1]=i[1]*r[1],e[2]=i[2]*r[2],e[3]=i[3]*r[3],e}function s6(e,i,r){return e[0]=i[0]/r[0],e[1]=i[1]/r[1],e[2]=i[2]/r[2],e[3]=i[3]/r[3],e}function s8(e,i){return Math.hypot(i[0]-e[0],i[1]-e[1],i[2]-e[2],i[3]-e[3])}function s7(e,i){var r=i[0]-e[0],n=i[1]-e[1],a=i[2]-e[2],s=i[3]-e[3];return r*r+n*n+a*a+s*s}function s9(e){return Math.hypot(e[0],e[1],e[2],e[3])}function oe(e){var i=e[0],r=e[1],n=e[2],a=e[3];return i*i+r*r+n*n+a*a}sQ.sub=s4,sQ.mul=s5,sQ.div=s6,sQ.dist=s8,sQ.sqrDist=s7,sQ.len=s9,sQ.sqrLen=oe;var ot=(ob=s3(),function(e,i,r,n,a,s){var o,l;for(i||(i=4),r||(r=0),l=n?Math.min(n*i+r,e.length):e.length,o=r;o<l;o+=i)ob[0]=e[o],ob[1]=e[o+1],ob[2]=e[o+2],ob[3]=e[o+3],a(ob,ob,s),e[o]=ob[0],e[o+1]=ob[1],e[o+2]=ob[2],e[o+3]=ob[3];return e});function oi(e){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}sQ.forEach=ot,Object.defineProperty(sY,"__esModule",{value:!0}),sY.create=ou,sY.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},sY.setAxisAngle=oh,sY.getAxisAngle=function(e,i){var r=2*Math.acos(i[3]),n=Math.sin(r/2);return n>or.EPSILON?(e[0]=i[0]/n,e[1]=i[1]/n,e[2]=i[2]/n):(e[0]=1,e[1]=0,e[2]=0),r},sY.getAngle=function(e,i){var r=og(e,i);return Math.acos(2*r*r-1)},sY.multiply=oc,sY.rotateX=function(e,i,r){r*=.5;var n=i[0],a=i[1],s=i[2],o=i[3],l=Math.sin(r),u=Math.cos(r);return e[0]=n*u+o*l,e[1]=a*u+s*l,e[2]=s*u-a*l,e[3]=o*u-n*l,e},sY.rotateY=function(e,i,r){r*=.5;var n=i[0],a=i[1],s=i[2],o=i[3],l=Math.sin(r),u=Math.cos(r);return e[0]=n*u-s*l,e[1]=a*u+o*l,e[2]=s*u+n*l,e[3]=o*u-a*l,e},sY.rotateZ=function(e,i,r){r*=.5;var n=i[0],a=i[1],s=i[2],o=i[3],l=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*l,e[1]=a*u-n*l,e[2]=s*u+o*l,e[3]=o*u-s*l,e},sY.calculateW=function(e,i){var r=i[0],n=i[1],a=i[2];return e[0]=r,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),e},sY.exp=od,sY.ln=of,sY.pow=function(e,i,r){return of(e,i),o_(e,e,r),od(e,e),e},sY.slerp=op,sY.random=function(e){var i=or.RANDOM(),r=or.RANDOM(),n=or.RANDOM(),a=Math.sqrt(1-i),s=Math.sqrt(i);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=s*Math.sin(2*Math.PI*n),e[3]=s*Math.cos(2*Math.PI*n),e},sY.invert=function(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=r*r+n*n+a*a+s*s,l=o?1/o:0;return e[0]=-r*l,e[1]=-n*l,e[2]=-a*l,e[3]=s*l,e},sY.conjugate=function(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=i[3],e},sY.fromMat3=om,sY.fromEuler=function(e,i,r,n){var a=.5*Math.PI/180;i*=a,r*=a,n*=a;var s=Math.sin(i),o=Math.cos(i),l=Math.sin(r),u=Math.cos(r),h=Math.sin(n),c=Math.cos(n);return e[0]=s*u*c-o*l*h,e[1]=o*l*c+s*u*h,e[2]=o*u*h-s*l*c,e[3]=o*u*c+s*l*h,e},sY.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sY.setAxes=sY.sqlerp=sY.rotationTo=sY.equals=sY.exactEquals=sY.normalize=sY.sqrLen=sY.squaredLength=sY.len=sY.length=sY.lerp=sY.dot=sY.scale=sY.mul=sY.add=sY.set=sY.copy=sY.fromValues=sY.clone=void 0;var or=ol(sn),on=ol(sx),oa=ol(sF),os=ol(sQ);function oo(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(oo=function(e){return e?r:i})(e)}function ol(e,i){if(!i&&e&&e.__esModule)return e;if(null===e||"object"!==oi(e)&&"function"!=typeof e)return{default:e};var r=oo(i);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function ou(){var e=new or.ARRAY_TYPE(4);return or.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function oh(e,i,r){var n=Math.sin(r*=.5);return e[0]=n*i[0],e[1]=n*i[1],e[2]=n*i[2],e[3]=Math.cos(r),e}function oc(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=r[0],u=r[1],h=r[2],c=r[3];return e[0]=n*c+o*l+a*h-s*u,e[1]=a*c+o*u+s*l-n*h,e[2]=s*c+o*h+n*u-a*l,e[3]=o*c-n*l-a*u-s*h,e}function od(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=Math.sqrt(r*r+n*n+a*a),l=Math.exp(s),u=o>0?l*Math.sin(o)/o:0;return e[0]=r*u,e[1]=n*u,e[2]=a*u,e[3]=l*Math.cos(o),e}function of(e,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=Math.sqrt(r*r+n*n+a*a),l=o>0?Math.atan2(o,s)/o:0;return e[0]=r*l,e[1]=n*l,e[2]=a*l,e[3]=.5*Math.log(r*r+n*n+a*a+s*s),e}function op(e,i,r,n){var a,s,o,l,u,h=i[0],c=i[1],d=i[2],f=i[3],p=r[0],m=r[1],_=r[2],g=r[3];return(s=h*p+c*m+d*_+f*g)<0&&(s=-s,p=-p,m=-m,_=-_,g=-g),1-s>or.EPSILON?(o=Math.sin(a=Math.acos(s)),l=Math.sin((1-n)*a)/o,u=Math.sin(n*a)/o):(l=1-n,u=n),e[0]=l*h+u*p,e[1]=l*c+u*m,e[2]=l*d+u*_,e[3]=l*f+u*g,e}function om(e,i){var r,n=i[0]+i[4]+i[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,e[0]=(i[5]-i[7])*(r=.5/r),e[1]=(i[6]-i[2])*r,e[2]=(i[1]-i[3])*r;else{var a=0;i[4]>i[0]&&(a=1),i[8]>i[3*a+a]&&(a=2);var s=(a+1)%3,o=(a+2)%3;r=Math.sqrt(i[3*a+a]-i[3*s+s]-i[3*o+o]+1),e[a]=.5*r,e[3]=(i[3*s+o]-i[3*o+s])*(r=.5/r),e[s]=(i[3*s+a]+i[3*a+s])*r,e[o]=(i[3*o+a]+i[3*a+o])*r}return e}sY.clone=os.clone,sY.fromValues=os.fromValues,sY.copy=os.copy,sY.set=os.set,sY.add=os.add,sY.mul=oc;var o_=os.scale;sY.scale=o_;var og=os.dot;sY.dot=og,sY.lerp=os.lerp;var oy=os.length;sY.length=oy,sY.len=oy;var ov=os.squaredLength;sY.squaredLength=ov,sY.sqrLen=ov;var ox=os.normalize;sY.normalize=ox,sY.exactEquals=os.exactEquals,sY.equals=os.equals;var ob,ow,oM,oT,oL=(ow=oa.create(),oM=oa.fromValues(1,0,0),oT=oa.fromValues(0,1,0),function(e,i,r){var n=oa.dot(i,r);return n<-.999999?(oa.cross(ow,oM,i),1e-6>oa.len(ow)&&oa.cross(ow,oT,i),oa.normalize(ow,ow),oh(e,ow,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(oa.cross(ow,i,r),e[0]=ow[0],e[1]=ow[1],e[2]=ow[2],e[3]=1+n,ox(e,e))});sY.rotationTo=oL;var oS,ok,oD=(oS=ou(),ok=ou(),function(e,i,r,n,a,s){return op(oS,i,a,s),op(ok,r,n,s),op(e,oS,ok,2*s*(1-s)),e});sY.sqlerp=oD;var oE,oA=(oE=on.create(),function(e,i,r,n){return oE[0]=r[0],oE[3]=r[1],oE[6]=r[2],oE[1]=n[0],oE[4]=n[1],oE[7]=n[2],oE[2]=-i[0],oE[5]=-i[1],oE[8]=-i[2],ox(e,om(e,oE))});sY.setAxes=oA;var oP={};function oC(e){return(oC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(oP,"__esModule",{value:!0}),oP.create=function(){var e=new oI.ARRAY_TYPE(8);return oI.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},oP.clone=function(e){var i=new oI.ARRAY_TYPE(8);return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i},oP.fromValues=function(e,i,r,n,a,s,o,l){var u=new oI.ARRAY_TYPE(8);return u[0]=e,u[1]=i,u[2]=r,u[3]=n,u[4]=a,u[5]=s,u[6]=o,u[7]=l,u},oP.fromRotationTranslationValues=function(e,i,r,n,a,s,o){var l=new oI.ARRAY_TYPE(8);l[0]=e,l[1]=i,l[2]=r,l[3]=n;var u=.5*a,h=.5*s,c=.5*o;return l[4]=u*n+h*r-c*i,l[5]=h*n+c*e-u*r,l[6]=c*n+u*i-h*e,l[7]=-u*e-h*i-c*r,l},oP.fromRotationTranslation=oF,oP.fromTranslation=function(e,i){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*i[0],e[5]=.5*i[1],e[6]=.5*i[2],e[7]=0,e},oP.fromRotation=function(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},oP.fromMat4=function(e,i){var r=oO.create();oz.getRotation(r,i);var n=new oI.ARRAY_TYPE(3);return oz.getTranslation(n,i),oF(e,r,n),e},oP.copy=oj,oP.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},oP.set=function(e,i,r,n,a,s,o,l,u){return e[0]=i,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=o,e[6]=l,e[7]=u,e},oP.getDual=function(e,i){return e[0]=i[4],e[1]=i[5],e[2]=i[6],e[3]=i[7],e},oP.setDual=function(e,i){return e[4]=i[0],e[5]=i[1],e[6]=i[2],e[7]=i[3],e},oP.getTranslation=function(e,i){var r=i[4],n=i[5],a=i[6],s=i[7],o=-i[0],l=-i[1],u=-i[2],h=i[3];return e[0]=2*(r*h+s*o+n*u-a*l),e[1]=2*(n*h+s*l+a*o-r*u),e[2]=2*(a*h+s*u+r*l-n*o),e},oP.translate=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=.5*r[0],u=.5*r[1],h=.5*r[2],c=i[4],d=i[5],f=i[6],p=i[7];return e[0]=n,e[1]=a,e[2]=s,e[3]=o,e[4]=o*l+a*h-s*u+c,e[5]=o*u+s*l-n*h+d,e[6]=o*h+n*u-a*l+f,e[7]=-n*l-a*u-s*h+p,e},oP.rotateX=function(e,i,r){var n=-i[0],a=-i[1],s=-i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=l*o+c*n+u*s-h*a,f=u*o+c*a+h*n-l*s,p=h*o+c*s+l*a-u*n,m=c*o-l*n-u*a-h*s;return oO.rotateX(e,i,r),e[4]=d*(o=e[3])+m*(n=e[0])+f*(s=e[2])-p*(a=e[1]),e[5]=f*o+m*a+p*n-d*s,e[6]=p*o+m*s+d*a-f*n,e[7]=m*o-d*n-f*a-p*s,e},oP.rotateY=function(e,i,r){var n=-i[0],a=-i[1],s=-i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=l*o+c*n+u*s-h*a,f=u*o+c*a+h*n-l*s,p=h*o+c*s+l*a-u*n,m=c*o-l*n-u*a-h*s;return oO.rotateY(e,i,r),e[4]=d*(o=e[3])+m*(n=e[0])+f*(s=e[2])-p*(a=e[1]),e[5]=f*o+m*a+p*n-d*s,e[6]=p*o+m*s+d*a-f*n,e[7]=m*o-d*n-f*a-p*s,e},oP.rotateZ=function(e,i,r){var n=-i[0],a=-i[1],s=-i[2],o=i[3],l=i[4],u=i[5],h=i[6],c=i[7],d=l*o+c*n+u*s-h*a,f=u*o+c*a+h*n-l*s,p=h*o+c*s+l*a-u*n,m=c*o-l*n-u*a-h*s;return oO.rotateZ(e,i,r),e[4]=d*(o=e[3])+m*(n=e[0])+f*(s=e[2])-p*(a=e[1]),e[5]=f*o+m*a+p*n-d*s,e[6]=p*o+m*s+d*a-f*n,e[7]=m*o-d*n-f*a-p*s,e},oP.rotateByQuatAppend=function(e,i,r){var n=r[0],a=r[1],s=r[2],o=r[3],l=i[0],u=i[1],h=i[2],c=i[3];return e[0]=l*o+c*n+u*s-h*a,e[1]=u*o+c*a+h*n-l*s,e[2]=h*o+c*s+l*a-u*n,e[3]=c*o-l*n-u*a-h*s,e[4]=(l=i[4])*o+(c=i[7])*n+(u=i[5])*s-(h=i[6])*a,e[5]=u*o+c*a+h*n-l*s,e[6]=h*o+c*s+l*a-u*n,e[7]=c*o-l*n-u*a-h*s,e},oP.rotateByQuatPrepend=function(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=r[0],u=r[1],h=r[2],c=r[3];return e[0]=n*c+o*l+a*h-s*u,e[1]=a*c+o*u+s*l-n*h,e[2]=s*c+o*h+n*u-a*l,e[3]=o*c-n*l-a*u-s*h,e[4]=n*(c=r[7])+o*(l=r[4])+a*(h=r[6])-s*(u=r[5]),e[5]=a*c+o*u+s*l-n*h,e[6]=s*c+o*h+n*u-a*l,e[7]=o*c-n*l-a*u-s*h,e},oP.rotateAroundAxis=function(e,i,r,n){if(Math.abs(n)<oI.EPSILON)return oj(e,i);var a=Math.hypot(r[0],r[1],r[2]),s=Math.sin(n*=.5),o=s*r[0]/a,l=s*r[1]/a,u=s*r[2]/a,h=Math.cos(n),c=i[0],d=i[1],f=i[2],p=i[3];e[0]=c*h+p*o+d*u-f*l,e[1]=d*h+p*l+f*o-c*u,e[2]=f*h+p*u+c*l-d*o,e[3]=p*h-c*o-d*l-f*u;var m=i[4],_=i[5],g=i[6],y=i[7];return e[4]=m*h+y*o+_*u-g*l,e[5]=_*h+y*l+g*o-m*u,e[6]=g*h+y*u+m*l-_*o,e[7]=y*h-m*o-_*l-g*u,e},oP.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e[3]=i[3]+r[3],e[4]=i[4]+r[4],e[5]=i[5]+r[5],e[6]=i[6]+r[6],e[7]=i[7]+r[7],e},oP.multiply=oB,oP.scale=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=i[3]*r,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=i[7]*r,e},oP.lerp=function(e,i,r,n){var a=1-n;return 0>oN(i,r)&&(n=-n),e[0]=i[0]*a+r[0]*n,e[1]=i[1]*a+r[1]*n,e[2]=i[2]*a+r[2]*n,e[3]=i[3]*a+r[3]*n,e[4]=i[4]*a+r[4]*n,e[5]=i[5]*a+r[5]*n,e[6]=i[6]*a+r[6]*n,e[7]=i[7]*a+r[7]*n,e},oP.invert=function(e,i){var r=oV(i);return e[0]=-i[0]/r,e[1]=-i[1]/r,e[2]=-i[2]/r,e[3]=i[3]/r,e[4]=-i[4]/r,e[5]=-i[5]/r,e[6]=-i[6]/r,e[7]=i[7]/r,e},oP.conjugate=function(e,i){return e[0]=-i[0],e[1]=-i[1],e[2]=-i[2],e[3]=i[3],e[4]=-i[4],e[5]=-i[5],e[6]=-i[6],e[7]=i[7],e},oP.normalize=function(e,i){var r=oV(i);if(r>0){r=Math.sqrt(r);var n=i[0]/r,a=i[1]/r,s=i[2]/r,o=i[3]/r,l=i[4],u=i[5],h=i[6],c=i[7],d=n*l+a*u+s*h+o*c;e[0]=n,e[1]=a,e[2]=s,e[3]=o,e[4]=(l-n*d)/r,e[5]=(u-a*d)/r,e[6]=(h-s*d)/r,e[7]=(c-o*d)/r}return e},oP.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},oP.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]&&e[3]===i[3]&&e[4]===i[4]&&e[5]===i[5]&&e[6]===i[6]&&e[7]===i[7]},oP.equals=function(e,i){var r=e[0],n=e[1],a=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],c=i[0],d=i[1],f=i[2],p=i[3],m=i[4],_=i[5],g=i[6],y=i[7];return Math.abs(r-c)<=oI.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-d)<=oI.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-f)<=oI.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-p)<=oI.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-m)<=oI.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(l-_)<=oI.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-g)<=oI.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(h-y)<=oI.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))},oP.sqrLen=oP.squaredLength=oP.len=oP.length=oP.dot=oP.mul=oP.setReal=oP.getReal=void 0;var oI=oY(sn),oO=oY(sY),oz=oY(sS);function oR(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(oR=function(e){return e?r:i})(e)}function oY(e,i){if(!i&&e&&e.__esModule)return e;if(null===e||"object"!==oC(e)&&"function"!=typeof e)return{default:e};var r=oR(i);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function oF(e,i,r){var n=.5*r[0],a=.5*r[1],s=.5*r[2],o=i[0],l=i[1],u=i[2],h=i[3];return e[0]=o,e[1]=l,e[2]=u,e[3]=h,e[4]=n*h+a*u-s*l,e[5]=a*h+s*o-n*u,e[6]=s*h+n*l-a*o,e[7]=-n*o-a*l-s*u,e}function oj(e,i){return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e}function oB(e,i,r){var n=i[0],a=i[1],s=i[2],o=i[3],l=r[4],u=r[5],h=r[6],c=r[7],d=i[4],f=i[5],p=i[6],m=i[7],_=r[0],g=r[1],y=r[2],v=r[3];return e[0]=n*v+o*_+a*y-s*g,e[1]=a*v+o*g+s*_-n*y,e[2]=s*v+o*y+n*g-a*_,e[3]=o*v-n*_-a*g-s*y,e[4]=n*c+o*l+a*h-s*u+d*v+m*_+f*y-p*g,e[5]=a*c+o*u+s*l-n*h+f*v+m*g+p*_-d*y,e[6]=s*c+o*h+n*u-a*l+p*v+m*y+d*g-f*_,e[7]=o*c-n*l-a*u-s*h+m*v-d*_-f*g-p*y,e}oP.getReal=oO.copy,oP.setReal=oO.copy,oP.mul=oB;var oN=oO.dot;oP.dot=oN;var oH=oO.length;oP.length=oH,oP.len=oH;var oV=oO.squaredLength;oP.squaredLength=oV,oP.sqrLen=oV;var oU={};function o$(e){return(o$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(oU,"__esModule",{value:!0}),oU.create=oq,oU.clone=function(e){var i=new oW.ARRAY_TYPE(2);return i[0]=e[0],i[1]=e[1],i},oU.fromValues=function(e,i){var r=new oW.ARRAY_TYPE(2);return r[0]=e,r[1]=i,r},oU.copy=function(e,i){return e[0]=i[0],e[1]=i[1],e},oU.set=function(e,i,r){return e[0]=i,e[1]=r,e},oU.add=function(e,i,r){return e[0]=i[0]+r[0],e[1]=i[1]+r[1],e},oU.subtract=oZ,oU.multiply=oX,oU.divide=oJ,oU.ceil=function(e,i){return e[0]=Math.ceil(i[0]),e[1]=Math.ceil(i[1]),e},oU.floor=function(e,i){return e[0]=Math.floor(i[0]),e[1]=Math.floor(i[1]),e},oU.min=function(e,i,r){return e[0]=Math.min(i[0],r[0]),e[1]=Math.min(i[1],r[1]),e},oU.max=function(e,i,r){return e[0]=Math.max(i[0],r[0]),e[1]=Math.max(i[1],r[1]),e},oU.round=function(e,i){return e[0]=Math.round(i[0]),e[1]=Math.round(i[1]),e},oU.scale=function(e,i,r){return e[0]=i[0]*r,e[1]=i[1]*r,e},oU.scaleAndAdd=function(e,i,r,n){return e[0]=i[0]+r[0]*n,e[1]=i[1]+r[1]*n,e},oU.distance=oK,oU.squaredDistance=oQ,oU.length=o0,oU.squaredLength=o1,oU.negate=function(e,i){return e[0]=-i[0],e[1]=-i[1],e},oU.inverse=function(e,i){return e[0]=1/i[0],e[1]=1/i[1],e},oU.normalize=function(e,i){var r=i[0],n=i[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),e[0]=i[0]*a,e[1]=i[1]*a,e},oU.dot=function(e,i){return e[0]*i[0]+e[1]*i[1]},oU.cross=function(e,i,r){var n=i[0]*r[1]-i[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},oU.lerp=function(e,i,r,n){var a=i[0],s=i[1];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e},oU.random=function(e,i){i=i||1;var r=2*oW.RANDOM()*Math.PI;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e},oU.transformMat2=function(e,i,r){var n=i[0],a=i[1];return e[0]=r[0]*n+r[2]*a,e[1]=r[1]*n+r[3]*a,e},oU.transformMat2d=function(e,i,r){var n=i[0],a=i[1];return e[0]=r[0]*n+r[2]*a+r[4],e[1]=r[1]*n+r[3]*a+r[5],e},oU.transformMat3=function(e,i,r){var n=i[0],a=i[1];return e[0]=r[0]*n+r[3]*a+r[6],e[1]=r[1]*n+r[4]*a+r[7],e},oU.transformMat4=function(e,i,r){var n=i[0],a=i[1];return e[0]=r[0]*n+r[4]*a+r[12],e[1]=r[1]*n+r[5]*a+r[13],e},oU.rotate=function(e,i,r,n){var a=i[0]-r[0],s=i[1]-r[1],o=Math.sin(n),l=Math.cos(n);return e[0]=a*l-s*o+r[0],e[1]=a*o+s*l+r[1],e},oU.angle=function(e,i){var r=e[0],n=e[1],a=i[0],s=i[1],o=Math.sqrt(r*r+n*n)*Math.sqrt(a*a+s*s);return Math.acos(Math.min(Math.max(o&&(r*a+n*s)/o,-1),1))},oU.zero=function(e){return e[0]=0,e[1]=0,e},oU.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},oU.exactEquals=function(e,i){return e[0]===i[0]&&e[1]===i[1]},oU.equals=function(e,i){var r=e[0],n=e[1],a=i[0],s=i[1];return Math.abs(r-a)<=oW.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=oW.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))},oU.forEach=oU.sqrLen=oU.sqrDist=oU.dist=oU.div=oU.mul=oU.sub=oU.len=void 0;var oW=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==o$(e)&&"function"!=typeof e)return{default:e};var r=oG(void 0);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(sn);function oG(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(oG=function(e){return e?r:i})(e)}function oq(){var e=new oW.ARRAY_TYPE(2);return oW.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function oZ(e,i,r){return e[0]=i[0]-r[0],e[1]=i[1]-r[1],e}function oX(e,i,r){return e[0]=i[0]*r[0],e[1]=i[1]*r[1],e}function oJ(e,i,r){return e[0]=i[0]/r[0],e[1]=i[1]/r[1],e}function oK(e,i){return Math.hypot(i[0]-e[0],i[1]-e[1])}function oQ(e,i){var r=i[0]-e[0],n=i[1]-e[1];return r*r+n*n}function o0(e){return Math.hypot(e[0],e[1])}function o1(e){var i=e[0],r=e[1];return i*i+r*r}oU.len=o0,oU.sub=oZ,oU.mul=oX,oU.div=oJ,oU.dist=oK,oU.sqrDist=oQ,oU.sqrLen=o1;var o2=(f=oq(),function(e,i,r,n,a,s){var o,l;for(i||(i=2),r||(r=0),l=n?Math.min(n*i+r,e.length):e.length,o=r;o<l;o+=i)f[0]=e[o],f[1]=e[o+1],a(f,f,s),e[o]=f[0],e[o+1]=f[1];return e});function o3(e){return(o3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}oU.forEach=o2,Object.defineProperty(sr,"__esModule",{value:!0}),e.e=sr.vec4=e.v=sr.vec3=sr.vec2=sr.quat2=e.q=sr.quat=e.m=sr.mat4=e.bx=sr.mat3=sr.mat2d=e.h=sr.mat2=sr.glMatrix=void 0;var o4=la(sn);sr.glMatrix=o4;var o5=la(sl);e.h=sr.mat2=o5;var o6=la(sp);sr.mat2d=o6;var o8=la(sx);e.bx=sr.mat3=o8;var o7=la(sS);e.m=sr.mat4=o7;var o9=la(sY);e.q=sr.quat=o9;var le=la(oP);sr.quat2=le;var lt=la(oU);sr.vec2=lt;var li=la(sF);e.v=sr.vec3=li;var lr=la(sQ);function ln(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,r=new WeakMap;return(ln=function(e){return e?r:i})(e)}function la(e,i){if(!i&&e&&e.__esModule)return e;if(null===e||"object"!==o3(e)&&"function"!=typeof e)return{default:e};var r=ln(i);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}e.e=sr.vec4=lr;let{members:ls}=nq([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),lo=nq([{name:"a_pos_3",components:3,type:"Int16"}]);var ll=nq([{name:"a_pos",type:"Int16",components:2}]),lu={};(function(e){function i(e,i,n){var a=r(256*e,256*(i=Math.pow(2,n)-i-1),n),s=r(256*(e+1),256*(i+1),n);return a[0]+","+a[1]+","+s[0]+","+s[1]}function r(e,i,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,i*n-2*Math.PI*6378137/2]}e.getURL=function(e,r,n,a,s,o){return o=o||{},e+"?"+["bbox="+i(n,a,s),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+r].join("&")},e.getTileBBox=i,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})(lu);class lh{constructor(e,i,r){this.z=e,this.x=i,this.y=r,this.key=lf(0,e,e,i,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,i){let r=lu.getTileBBox(this.x,this.y,this.z),n=function(e,i,r){let n,a="";for(let s=e;s>0;s--)a+=(i&(n=1<<s-1)?1:0)+(r&n?2:0);return a}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",r)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lc{constructor(e,i){this.wrap=e,this.canonical=i,this.key=lf(e,i.z,i.z,i.x,i.y)}}class ld{constructor(e,i,r,n,a){this.overscaledZ=e,this.wrap=i,this.canonical=new lh(r,+n,+a),this.key=0===i&&e===r?this.canonical.key:lf(i,e,r,n,a)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){let i=this.canonical.z-e;return e>this.canonical.z?new ld(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ld(e,this.wrap,e,this.canonical.x>>i,this.canonical.y>>i)}calculateScaledKey(e,i=!0){if(this.overscaledZ===e&&i)return this.key;if(e>this.canonical.z)return lf(this.wrap*+i,e,this.canonical.z,this.canonical.x,this.canonical.y);{let r=this.canonical.z-e;return lf(this.wrap*+i,e,e,this.canonical.x>>r,this.canonical.y>>r)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;let i=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>i&&e.canonical.y===this.canonical.y>>i}children(e){if(this.overscaledZ>=e)return[new ld(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let i=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new ld(i,this.wrap,i,r,n),new ld(i,this.wrap,i,r+1,n),new ld(i,this.wrap,i,r,n+1),new ld(i,this.wrap,i,r+1,n+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new ld(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new ld(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function lf(e,i,r,n,a){let s=1<<Math.min(r,22),o=a%s*s+n%s;return e&&r<22&&(o+=s*s*((e<0?-2*e-1:2*e)%(1<<2*(22-r)))),16*(32*o+r)+(i-r)}let lp=[e=>{let i=e.canonical.x-1,r=e.wrap;return i<0&&(i=(1<<e.canonical.z)-1,r--),new ld(e.overscaledZ,r,e.canonical.z,i,e.canonical.y)},e=>{let i=e.canonical.x+1,r=e.wrap;return i===1<<e.canonical.z&&(i=0,r++),new ld(e.overscaledZ,r,e.canonical.z,i,e.canonical.y)},e=>new ld(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new ld(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)];no(lh,"CanonicalTileID"),no(ld,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});class lm{constructor(e,i){this.pos=e,this.dir=i}intersectsPlane(i,r,n){let a=e.v.dot(r,this.dir);if(1e-6>Math.abs(a))return!1;let s=((i[0]-this.pos[0])*r[0]+(i[1]-this.pos[1])*r[1]+(i[2]-this.pos[2])*r[2])/a;return n[0]=this.pos[0]+this.dir[0]*s,n[1]=this.pos[1]+this.dir[1]*s,n[2]=this.pos[2]+this.dir[2]*s,!0}closestPointOnSphere(i,r,n){if(e.v.equals(this.pos,i)||0===r)return n[0]=n[1]=n[2]=0,!1;let[a,s,o]=this.dir,l=this.pos[0]-i[0],u=this.pos[1]-i[1],h=this.pos[2]-i[2],c=a*a+s*s+o*o,d=2*(l*a+u*s+h*o),f=d*d-4*c*(l*l+u*u+h*h-r*r);if(f<0){let e=Math.max(-d/2,0),i=l+a*e,c=u+s*e,f=h+o*e,p=Math.hypot(i,c,f);return n[0]=i*r/p,n[1]=c*r/p,n[2]=f*r/p,!1}{let e=(-d-Math.sqrt(f))/(2*c);if(e<0){let e=Math.hypot(l,u,h);return n[0]=l*r/e,n[1]=u*r/e,n[2]=h*r/e,!1}return n[0]=l+a*e,n[1]=u+s*e,n[2]=h+o*e,!0}}}class l_{constructor(e,i,r,n,a){this.TL=e,this.TR=i,this.BR=r,this.BL=n,this.horizon=a}static fromInvProjectionMatrix(i,r,n){let a=[-1,1,1],s=[1,1,1],o=[1,-1,1],l=[-1,-1,1],u=e.v.transformMat4(a,a,i);return new l_(u,e.v.transformMat4(s,s,i),e.v.transformMat4(o,o,i),e.v.transformMat4(l,l,i),r/n)}}function lg(i,r,n){let a=1/0,s=-1/0,o=[];for(let l of i){e.v.sub(o,l,r);let i=e.v.dot(o,n);a=Math.min(a,i),s=Math.max(s,i)}return[a,s]}function ly(i,r){let n=!0;for(let a=0;a<i.planes.length;a++){let s=i.planes[a],o=0;for(let i=0;i<r.length;i++)o+=e.v.dot(s,r[i])+s[3]>=0;if(0===o)return 0;o!==r.length&&(n=!1)}return n?2:1}function lv(e,i){for(let r of e.projections){let n=lg(i,e.points[0],r.axis);if(r.projection[1]<n[0]||r.projection[0]>n[1])return 0}return 1}function lx(i,r){let n=0,a=[0,0,0,0];for(let s=0;s<i.length;s++)a[0]=i[s][0],a[1]=i[s][1],a[2]=i[s][2],a[3]=1,e.e.dot(a,r)>=0&&n++;return n}class lb{constructor(i,r){for(let n of(this.points=i||Array(8).fill([0,0,0]),this.planes=r||Array(6).fill([0,0,0,0]),this.bounds=lw.fromPoints(this.points),this.projections=[],this.frustumEdges=[e.v.sub([],this.points[2],this.points[3]),e.v.sub([],this.points[0],this.points[3]),e.v.sub([],this.points[4],this.points[0]),e.v.sub([],this.points[5],this.points[1]),e.v.sub([],this.points[6],this.points[2]),e.v.sub([],this.points[7],this.points[3])],this.frustumEdges)){let e=[0,-n[2],n[1]],i=[n[2],0,-n[0]];this.projections.push({axis:e,projection:lg(this.points,this.points[0],e)}),this.projections.push({axis:i,projection:lg(this.points,this.points[0],i)})}}static fromInvProjectionMatrix(i,r,n,a){let s=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(n=>{let o=e.e.transformMat4([],n,i),l=1/o[3]/r*s;return e.e.mul(o,o,[l,l,a?1/o[3]:l,l])}),l=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(i=>{let r=e.v.sub([],o[i[0]],o[i[1]]),n=e.v.sub([],o[i[2]],o[i[1]]),a=e.v.normalize([],e.v.cross([],r,n)),s=-e.v.dot(a,o[i[1]]);return a.concat(s)}),u=[];for(let e=0;e<o.length;e++)u.push([o[e][0],o[e][1],o[e][2]]);return new lb(u,l)}intersectsPrecise(i,r,n){for(let e=0;e<r.length;e++)if(!lx(i,r[e]))return 0;for(let e=0;e<this.planes.length;e++)if(!lx(i,this.planes[e]))return 0;for(let r of n)for(let n of this.frustumEdges){let a=e.v.cross([],r,n),s=e.v.length(a);if(0===s)continue;e.v.scale(a,a,1/s);let o=lg(this.points,this.points[0],a),l=lg(i,this.points[0],a);if(o[0]>l[1]||l[0]>o[1])return 0}return 1}}class lw{static fromPoints(i){let r=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(let a of i)e.v.min(r,r,a),e.v.max(n,n,a);return new lw(r,n)}static fromTileIdAndHeight(e,i,r){let n=1<<e.canonical.z,a=e.canonical.x,s=e.canonical.y;return new lw([a/n,s/n,i],[(a+1)/n,(s+1)/n,r])}static applyTransform(i,r){let n=i.getCorners();for(let i=0;i<n.length;++i)e.v.transformMat4(n[i],n[i],r);return lw.fromPoints(n)}static projectAabbCorners(i,r){let n=i.getCorners();for(let i=0;i<n.length;++i)e.v.transformMat4(n[i],n[i],r);return n}constructor(i,r){this.min=i,this.max=r,this.center=e.v.scale([],e.v.add([],this.min,this.max),.5)}quadrant(i){let r=[i%2==0,i<2],n=e.v.clone(this.min),a=e.v.clone(this.max);for(let e=0;e<r.length;e++)n[e]=r[e]?this.min[e]:this.center[e],a[e]=r[e]?this.center[e]:this.max[e];return a[2]=this.max[2],new lw(n,a)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){let e=this.min,i=this.max;return[[e[0],e[1],e[2]],[i[0],e[1],e[2]],[i[0],i[1],e[2]],[e[0],i[1],e[2]],[e[0],e[1],i[2]],[i[0],e[1],i[2]],[i[0],i[1],i[2]],[e[0],i[1],i[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?ly(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?ly(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,i){return i||this.intersects(e)?lv(e,this.getCorners()):0}intersectsPreciseFlat(e,i){return i||this.intersectsFlat(e)?lv(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let i=0;i<3;++i)if(this.min[i]>e.max[i]||e.min[i]>this.max[i])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let i=0;i<3;i++)this.min[i]=Math.min(this.min[i],e.min[i]),this.max[i]=Math.max(this.max[i],e.max[i])}encapsulatePoint(e){for(let i=0;i<3;i++)this.min[i]=Math.min(this.min[i],e[i]),this.max[i]=Math.max(this.max[i],e[i])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}no(lw,"Aabb");let lM=8192/Math.PI/2,lT=[64,32,16],lL=-lM,lS=[new lw([lL,lL,lL],[lM,lM,lM]),new lw([lL,lL,lL],[0,0,lM]),new lw([0,lL,lL],[lM,0,lM]),new lw([lL,0,lL],[0,lM,lM]),new lw([0,0,lL],[lM,lM,lM])];function lk(e){return e*lM/l0}function lD(i,r,n,a=!0){let s=e.v.scale([],i._camera.position,i.worldSize),o=[r,n,1,1];e.e.transformMat4(o,o,i.pixelMatrixInverse),e.e.scale(o,o,1/o[3]);let l=e.v.sub([],o,s),u=e.v.normalize([],l),h=i.globeMatrix,c=[h[12],h[13],h[14]],d=e.v.sub([],c,s),f=e.v.length(d),p=e.v.normalize([],d),m=i.worldSize/(2*Math.PI),_=e.v.dot(p,u),g=Math.asin(m/f);if(g<Math.acos(_)){if(!a)return null;let i=[],r=[];e.v.scale(i,u,f/_),e.v.normalize(r,e.v.sub(r,i,d)),e.v.normalize(u,e.v.add(u,d,e.v.scale(u,r,Math.tan(g)*f)))}let y=[];new lm(s,u).closestPointOnSphere(c,m,y);let v=e.v.normalize([],en(h,0)),x=e.v.normalize([],en(h,1)),b=e.v.normalize([],en(h,2)),w=e.v.dot(v,y),M=e.v.dot(x,y),T=Math.atan2(w,e.v.dot(b,y))*E;return new un(l5(T=i.center.lng+function(e,i){let r=(i-e+180)%360-180;return r<-180?r+360:r}(i.center.lng,T)),O(l6(Math.asin(-M/m)*E),0,1))}class lE{constructor(i,r,n){this.a=e.v.sub([],i,n),this.b=e.v.sub([],r,n),this.center=n;let a=e.v.normalize([],this.a),s=e.v.normalize([],this.b);this.angle=Math.acos(e.v.dot(a,s))}}function lA(e,i){let r;return 0===e.angle?null:(r=0===e.a[i]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[i]/e.a[i]/Math.sin(e.angle)-1/Math.tan(e.angle)))<0||r>1?null:function(e,i,r,n){let a=Math.sin(r);return Math.sin((1-n)*r)/a*e+Math.sin(n*r)/a*i}(e.a[i],e.b[i],e.angle,O(r,0,1))+e.center[i]}function lP(e){if(e.z<=1)return lS[e.z+2*e.y+e.x];let i=lY(lR(e));return lw.fromPoints(i)}function lC(i,r,n){return e.v.scale(i,i,1-n),e.v.scaleAndAdd(i,i,r,n)}function lI(i,r){let n=lq(r.zoom);if(0===n)return lP(i);let a=lR(i),s=lY(a),o=l5(a.getWest())*r.worldSize,l=l5(a.getEast())*r.worldSize,u=l6(a.getNorth())*r.worldSize,h=l6(a.getSouth())*r.worldSize,c=[o,u,0],d=[l,u,0],f=[o,h,0],p=[l,h,0],m=e.m.invert([],r.globeMatrix);return e.v.transformMat4(c,c,m),e.v.transformMat4(d,d,m),e.v.transformMat4(f,f,m),e.v.transformMat4(p,p,m),s[0]=lC(s[0],f,n),s[1]=lC(s[1],p,n),s[2]=lC(s[2],d,n),s[3]=lC(s[3],c,n),lw.fromPoints(s)}function lO(i,r,n){for(let a of i)e.v.transformMat4(a,a,r),e.v.scale(a,a,n)}function lz(i,r,n,a){let s=r/i.worldSize,o=i.globeMatrix;if(n.z<=1){let e=lP(n).getCorners();return lO(e,o,s),lw.fromPoints(e)}let l=lR(n,a),u=lY(l);lO(u,o,s);let h=Number.MAX_VALUE,c=[-h,-h,-h],d=[h,h,h];if(l.contains(i.center)){for(let i of u)e.v.min(d,d,i),e.v.max(c,c,i);c[2]=0;let r=i.point,n=[r.x*s,r.y*s,0];return e.v.min(d,d,n),e.v.max(c,c,n),new lw(d,c)}let f=[o[12]*s,o[13]*s,o[14]*s],p=l.getCenter(),m=O(i.center.lat,-l9,l9),_=O(p.lat,-l9,l9),g=l5(i.center.lng),y=l6(m),v=g-l5(p.lng),x=y-l6(_);v>.5?v-=1:v<-.5&&(v+=1);let b=0;if(Math.abs(v)>Math.abs(x))b=v>=0?1:3;else{b=x>=0?0:2;let i=[o[4]*s,o[5]*s,o[6]*s],r=-Math.sin((x>=0?l.getSouth():l.getNorth())*D)*lM;e.v.scaleAndAdd(f,f,i,r)}let w=u[b],M=u[(b+1)%4],T=new lE(w,M,f),L=[lA(T,0)||w[0],lA(T,1)||w[1],lA(T,2)||w[2]],S=lq(i.zoom);if(S>0){let a=function({x:e,y:i,z:r},n,a,s,o){let l=1/(1<<r),u=e*l,h=u+l,c=i*l,d=c+l,f=0,p=(u+h)/2-s;return p>.5?f=-1:p<-.5&&(f=1),u=((u+f)*n-(s*=n))*a+s,h=((h+f)*n-s)*a+s,c=(c*n-(o*=n))*a+o,[[u,d=(d*n-o)*a+o,0],[h,d,0],[h,c,0],[u,c,0]]}(n,r,i._pixelsPerMercatorPixel,g,y);for(let e=0;e<u.length;e++)lC(u[e],a[e],S);let s=e.v.add([],a[b],a[(b+1)%4]);e.v.scale(s,s,.5),lC(L,s,S)}for(let i of u)e.v.min(d,d,i),e.v.max(c,c,i);return d[2]=Math.min(w[2],M[2]),e.v.min(d,d,L),e.v.max(c,c,L),new lw(d,c)}function lR({x:e,y:i,z:r},n=!1){let a=1/(1<<r);return new si(new l3(l8(e*a),i===(1<<r)-1&&n?-90:l7((i+1)*a)),new l3(l8((e+1)*a),0===i&&n?90:l7(i*a)))}function lY(e){let i=e.getNorth()*D,r=e.getSouth()*D,n=Math.cos(i),a=Math.cos(r),s=Math.sin(i),o=Math.sin(r),l=e.getWest(),u=e.getEast();return[lF(a,o,l),lF(a,o,u),lF(n,s,u),lF(n,s,l)]}function lF(e,i,r,n=lM){return[e*Math.sin(r*=D)*n,-i*n,e*Math.cos(r)*n]}function lj(e,i,r){return lF(Math.cos(e*D),Math.sin(e*D),i,r)}function lB(e,i,r,n){let a=1<<r.z,s=(e/8192+r.x)/a;return lj(l7((i/8192+r.y)/a),l8(s),n)}function lN({min:e,max:i}){return 16383/Math.max(i[0]-e[0],i[1]-e[1],i[2]-e[2])}let lH=new Float64Array(16);function lV(i){let r=lN(i),n=e.m.fromScaling(lH,[r,r,r]);return e.m.translate(n,n,e.v.negate([],i.min))}function lU(i){let r=e.m.fromTranslation(lH,i.min),n=1/lN(i);return e.m.scale(r,r,[n,n,n])}function l$(e){return e/(2*Math.PI)/(8192/(2*Math.PI))}function lW(e,i){return 8192/(512*Math.pow(2,e))*lN(lP(i))}function lG(i,r,n,a,s){let o=l$(n),l=[i,r,-n/(2*Math.PI)],u=e.m.identity(new Float64Array(16));return e.m.translate(u,u,l),e.m.scale(u,u,[o,o,o]),e.m.rotateX(u,u,-s*D),e.m.rotateY(u,u,-a*D),u}function lq(e){return z(5,6,e)}function lZ(i,r){let n=lj(r.lat,r.lng),a=function(i){let r=lj(i._center.lat,i._center.lng),n=e.v.fromValues(0,1,0),a=e.v.cross([],n,r),s=e.m.fromRotation([],-i.angle,r);a=e.v.transformMat4(a,a,s),e.m.fromRotation(s,-i._pitch,a);let o=e.v.normalize([],r);return e.v.scale(o,o,lk(i.cameraToCenterDistance/i.pixelsPerMeter)),e.v.transformMat4(o,o,s),e.v.add([],r,o)}(i),s=e.v.subtract([],a,n);return e.v.angle(s,n)}function lX(e,i){return lZ(e,i)>Math.PI/2*1.01}let lJ=85*D,lK=Math.cos(lJ),lQ=Math.sin(lJ),l0=6371008.8,l1=2*Math.PI*6371008.8;class l2{constructor(e,i){if(isNaN(e)||isNaN(i))throw Error(`Invalid LngLat object: (${e}, ${i})`);if(this.lng=+e,this.lat=+i,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new l2(R(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){let i=Math.PI/180,r=this.lat*i,n=e.lat*i;return l0*Math.acos(Math.min(Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*i),1))}toBounds(e=0){let i=360*e/40075017,r=i/Math.cos(Math.PI/180*this.lat);return new si(new l2(this.lng-r,this.lat-i),new l2(this.lng+r,this.lat+i))}toEcef(e){let i=lk(e);return lj(this.lat,this.lng,lM+i)}static convert(e){if(e instanceof l2)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new l2(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new l2(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var l3=l2;function l4(e){return l1*Math.cos(e*Math.PI/180)}function l5(e){return(180+e)/360}function l6(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function l8(e){return 360*e-180}function l7(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}let l9=85.051129;function ue(e){return Math.cos(O(e,-l9,l9)*D)}function ut(e,i){let r=Math.pow(2,O(i,0,25.5));return ue(e)*l1/(512*r)}function ui(e){return 1/Math.cos(e*Math.PI/180)}function ur(e,i=0){let r=Math.exp(Math.PI*(1-(e.y+i/8192)/(1<<e.z)*2));return 80150034*r/(r*r+1)/8192/(1<<e.z)}class un{constructor(e,i,r=0){this.x=+e,this.y=+i,this.z=+r}static fromLngLat(e,i=0){let r=l3.convert(e);return new un(l5(r.lng),l6(r.lat),i/l4(r.lat))}toLngLat(){return new l3(l8(this.x),l7(this.y))}toAltitude(){return this.z*l4(l7(this.y))}meterInMercatorCoordinateUnits(){return 1/l1*ui(l7(this.y))}}function ua(e,i,r){let n=e[0],a=n.x,s=n.y;i(n);let o=[n];for(let l=1;l<e.length;l++){let u=e[l],{x:h,y:c}=u;i(u),function e(i,r,n,a,s,o,l,u,h){let c=(r+a)/2,d=(n+s)/2,f=new k(c,d);u(f),function(e,i,r,n,a,s){let o=r-a,l=n-s;return Math.abs((n-i)*o-(r-e)*l)/Math.hypot(o,l)}(f.x,f.y,o.x,o.y,l.x,l.y)>=h?(e(i,r,n,c,d,o,f,u,h),e(i,c,d,a,s,f,l,u,h)):i.push(l)}(o,a,s,h,c,n,u,i,r),a=h,s=c,n=u}return o}let us=-16383-1;function uo(e,i,r){let n=e.loadGeometry(),a=e.extent,s=8192/a;if(i&&r&&r.projection.isReprojectedInTileSpace){let s=1<<i.z,{scale:o,x:l,y:u,projection:h}=r,c=e=>{let r=l8((i.x+e.x/a)/s),n=l7((i.y+e.y/a)/s),c=h.project(r,n);e.x=(c.x*o-l)*a,e.y=(c.y*o-u)*a};for(let i=0;i<n.length;i++)if(1!==e.type)n[i]=ua(n[i],c,1);else{let e=[];for(let r of n[i])r.x<0||r.x>=a||r.y<0||r.y>=a||(c(r),e.push(r));n[i]=e}}for(let e of n)for(let i of e)!function(e,i){let r=Math.round(e.x*i),n=Math.round(e.y*i);e.x=O(r,us,16383),e.y=O(n,us,16383),(r<e.x||r>e.x+1||n<e.y||n>e.y+1)&&J("Geometry exceeds allowed extent, reduce your vector tile buffer size")}(i,s);return n}function ul(e,i){return{type:e.type,id:e.id,properties:e.properties,geometry:i?uo(e):[]}}function uu(e,i,r,n,a){e.emplaceBack(2*i+(n+1)/2,2*r+(a+1)/2)}function uh(e,i,r){e.emplaceBack(i.x,i.y,i.z,16384*r[0],16384*r[1],16384*r[2])}class uc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new nX,this.indexArray=new ar,this.segments=new aE,this.programConfigurations=new a8(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,i,r,n){let a=this.layers[0],s=[],o=null;for(let{feature:i,id:l,index:u,sourceLayerIndex:h}of("circle"===a.type&&(o=a.layout.get("circle-sort-key")),e)){let e=this.layers[0]._featureFilter.needGeometry,a=ul(i,e);if(!this.layers[0]._featureFilter.filter(new nE(this.zoom),a,r))continue;let c=o?o.evaluate(a,{},r):void 0,d={id:l,properties:i.properties,type:i.type,sourceLayerIndex:h,index:u,geometry:e?a.geometry:uo(i,r,n),patterns:{},sortKey:c};s.push(d)}o&&s.sort((e,i)=>e.sortKey-i.sortKey);let l=null;for(let a of("globe"===n.projection.name&&(this.globeExtVertexArray=new n4,l=n.projection),s)){let{geometry:n,index:s,sourceLayerIndex:o}=a,u=e[s].feature;this.addFeature(a,n,s,i.availableImages,r,l,i.brightness),i.featureIndex.insert(u,n,s,o,this.index)}}update(e,i,r,n,a){let s=0!==Object.keys(e).length;s&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,i,s?this.stateDependentLayers:this.layers,r,n,a)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ak.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,aD.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,i,r,n,a,s,o){for(let r of i)for(let i of r){let r=i.x,n=i.y;if(r<0||r>=8192||n<0||n>=8192)continue;if(s){let e=s.projectTilePoint(r,n,a),i=s.upVector(a,r,n),o=this.globeExtVertexArray;uh(o,e,i),uh(o,e,i),uh(o,e,i),uh(o,e,i)}let o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),l=o.vertexLength;uu(this.layoutVertexArray,r,n,-1,-1),uu(this.layoutVertexArray,r,n,1,-1),uu(this.layoutVertexArray,r,n,1,1),uu(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(l,l+1,l+2),this.indexArray.emplaceBack(l,l+2,l+3),o.vertexLength+=4,o.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n,a,o)}}function ud(e,i){for(let r=0;r<e.length;r++)if(uy(i,e[r]))return!0;for(let r=0;r<i.length;r++)if(uy(e,i[r]))return!0;return!!up(e,i)}function uf(e,i){if(1===e.length)return ug(i,e[0]);for(let r=0;r<i.length;r++){let n=i[r];for(let i=0;i<n.length;i++)if(uy(e,n[i]))return!0}for(let r=0;r<e.length;r++)if(ug(i,e[r]))return!0;for(let r=0;r<i.length;r++)if(up(e,i[r]))return!0;return!1}function up(e,i){if(0===e.length||0===i.length)return!1;for(let a=0;a<e.length-1;a++){let s=e[a],o=e[a+1];for(let e=0;e<i.length-1;e++){var r,n;if(K(s,r=i[e],n=i[e+1])!==K(o,r,n)&&K(s,o,r)!==K(s,o,n))return!0}}return!1}function um(e,i,r){let n=r*r;if(1===i.length)return e.distSqr(i[0])<n;for(let r=1;r<i.length;r++)if(u_(e,i[r-1],i[r])<n)return!0;return!1}function u_(e,i,r){let n=i.distSqr(r);if(0===n)return e.distSqr(i);let a=((e.x-i.x)*(r.x-i.x)+(e.y-i.y)*(r.y-i.y))/n;return e.distSqr(a<0?i:a>1?r:r.sub(i)._mult(a)._add(i))}function ug(e,i){let r,n,a,s=!1;for(let o=0;o<e.length;o++){r=e[o];for(let e=0,o=r.length-1;e<r.length;o=e++)n=r[e],a=r[o],n.y>i.y!=a.y>i.y&&i.x<(a.x-n.x)*(i.y-n.y)/(a.y-n.y)+n.x&&(s=!s)}return s}function uy(e,i){let r=!1;for(let n=0,a=e.length-1;n<e.length;a=n++){let s=e[n],o=e[a];s.y>i.y!=o.y>i.y&&i.x<(o.x-s.x)*(i.y-s.y)/(o.y-s.y)+s.x&&(r=!r)}return r}function uv(e,i,r,n,a){for(let s of e)if(i<=s.x&&r<=s.y&&n>=s.x&&a>=s.y)return!0;let s=[new k(i,r),new k(i,a),new k(n,a),new k(n,r)];if(e.length>2){for(let i of s)if(uy(e,i))return!0}for(let i=0;i<e.length-1;i++)if(function(e,i,r){let n=r[0],a=r[2];if(e.x<n.x&&i.x<n.x||e.x>a.x&&i.x>a.x||e.y<n.y&&i.y<n.y||e.y>a.y&&i.y>a.y)return!1;let s=K(e,i,r[0]);return s!==K(e,i,r[1])||s!==K(e,i,r[2])||s!==K(e,i,r[3])}(e[i],e[i+1],s))return!0;return!1}function ux(e,i,r,n,a,s){let o=i.y-e.y,l=e.x-i.x;if(s=s||0){let e=o*o+l*l;if(0===e)return!0;let i=Math.sqrt(e);o/=i,l/=i}return!((r.x-e.x)*o+(r.y-e.y)*l-s<0||(n.x-e.x)*o+(n.y-e.y)*l-s<0||(a.x-e.x)*o+(a.y-e.y)*l-s<0)}function ub(e,i,r,n,a,s,o){return!(ux(e,i,n,a,s,o)||ux(i,r,n,a,s,o)||ux(r,e,n,a,s,o)||ux(n,a,e,i,r,o)||ux(a,s,e,i,r,o)||ux(s,n,e,i,r,o))}function uw(e,i,r){let n=i.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(i.id).getMaxValue(e)}function uM(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function uT(e,i,r,n,a){if(!i[0]&&!i[1])return e;let s=k.convert(i)._mult(a);"viewport"===r&&s._rotate(-n);let o=[];for(let i=0;i<e.length;i++)o.push(e[i].sub(s));return o}function uL(e,i,r,n){let a=k.convert(e)._mult(n);return"viewport"===i&&a._rotate(-r),a}no(uc,"CircleBucket",{omit:["layers"]});let uS=new nN({"circle-sort-key":new nj(eK.layout_circle["circle-sort-key"]),visibility:new nF(eK.layout_circle.visibility)});var uk={paint:new nN({"circle-radius":new nj(eK.paint_circle["circle-radius"]),"circle-color":new nj(eK.paint_circle["circle-color"]),"circle-blur":new nj(eK.paint_circle["circle-blur"]),"circle-opacity":new nj(eK.paint_circle["circle-opacity"]),"circle-translate":new nF(eK.paint_circle["circle-translate"]),"circle-translate-anchor":new nF(eK.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nF(eK.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nF(eK.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nj(eK.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nj(eK.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nj(eK.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new nF(eK.paint_circle["circle-emissive-strength"])}),layout:uS};let uD=e.m.create(),uE=e=>{let i=[];return"map"===e.paint.get("circle-pitch-alignment")&&i.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&i.push("SCALE_WITH_MAP"),i};function uA(i,r,n,a,s,o,l,u,h){if(o&&i.queryGeometry.isAboveHorizon)return!1;o&&(h*=i.pixelToTileUnitsFactor);let c=i.tileID.canonical,d=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(let p of r)for(let r of p){var f;let p=r.add(u),m=s&&n.elevation?n.elevation.exaggeration()*s.getElevationAt(p.x,p.y,!0):0,_=n.projection.projectTilePoint(p.x,p.y,c);if(m>0){let e=n.projection.upVector(c,p.x,p.y);_.x+=e[0]*d*m,_.y+=e[1]*d*m,_.z+=e[2]*d*m}let g=o?p:function(i,r,n,a){let s=e.e.transformMat4([],[i,r,n,1],a);return new k(s[0]/s[3],s[1]/s[3])}(_.x,_.y,_.z,a),y=o?i.tilespaceRays.map(i=>(function(i,r){let n=e.v.create();return uP[2]=r,i.intersectsPlane(uP,uC,n),new k(n[0],n[1])})(i,m)):i.queryGeometry.screenGeometry,v=e.e.transformMat4([],[_.x,_.y,_.z,1],a);if(!l&&o?h*=v[3]/n.cameraToCenterDistance:l&&!o&&(h*=n.cameraToCenterDistance/v[3]),o){let e=l7((r.y/8192+c.y)/(1<<c.z));h/=n.projection.pixelsPerMeter(e,1)/(1/l4(e))}if(f=h,uy(y,g)||um(g,y,f))return!0}return!1}let uP=e.v.fromValues(0,0,0),uC=e.v.fromValues(0,0,1);class uI extends uc{}function uO(e,{width:i,height:r},n,a){if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==i*r*n)throw RangeError("mismatched image size")}else a=new Uint8Array(i*r*n);return e.width=i,e.height=r,e.data=a,e}function uz(e,i,r){let{width:n,height:a}=i;n===e.width&&a===e.height||(uR(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,a)},r),e.width=n,e.height=a,e.data=i.data)}function uR(e,i,r,n,a,s,o){if(0===a.width||0===a.height)return i;if(a.width>e.width||a.height>e.height||r.x>e.width-a.width||r.y>e.height-a.height)throw RangeError("out of range source coordinates for image copy");if(a.width>i.width||a.height>i.height||n.x>i.width-a.width||n.y>i.height-a.height)throw RangeError("out of range destination coordinates for image copy");let l=e.data,u=i.data,h=4===s&&o;for(let o=0;o<a.height;o++){let c=((r.y+o)*e.width+r.x)*s,d=((n.y+o)*i.width+n.x)*s;if(h)for(let e=0;e<a.width;e++){let i=c+e*s+3,r=d+e*s;u[r+0]=255,u[r+1]=255,u[r+2]=255,u[r+3]=l[i]}else for(let e=0;e<a.width*s;e++)u[d+e]=l[c+e]}return i}no(uI,"HeatmapBucket",{omit:["layers"]});class uY{constructor(e,i){uO(this,e,1,i)}resize(e){uz(this,new uY(e),1)}clone(){return new uY({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,r,n,a){uR(e,i,r,n,a,1)}}class uF{constructor(e,i){uO(this,e,4,i)}resize(e){uz(this,new uF(e),4)}replace(e,i){i?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new uF({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,i,r,n,a,s){uR(e,i,r,n,a,4,s)}}class uj{constructor(e,i){this.width=e.width,this.height=e.height,this.data=i instanceof Uint8Array?new Float32Array(i.buffer):i}}no(uY,"AlphaImage"),no(uF,"RGBAImage");let uB=new nN({visibility:new nF(eK.layout_heatmap.visibility)});var uN={paint:new nN({"heatmap-radius":new nj(eK.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nj(eK.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nF(eK.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nB(eK.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nF(eK.paint_heatmap["heatmap-opacity"])}),layout:uB};function uH(e){let i={},r=e.resolution||256,n=e.clips?e.clips.length:1,a=e.image||new uF({width:r,height:n}),s=(r,n,s)=>{i[e.evaluationKey]=s;let o=e.expression.evaluate(i);o&&(a.data[r+n+0]=Math.floor(255*o.r/o.a),a.data[r+n+1]=Math.floor(255*o.g/o.a),a.data[r+n+2]=Math.floor(255*o.b/o.a),a.data[r+n+3]=Math.floor(255*o.a))};if(e.clips)for(let i=0,a=0;i<n;++i,a+=4*r)for(let n=0,o=0;n<r;n++,o+=4){let l=n/(r-1),{start:u,end:h}=e.clips[i];s(a,o,u*(1-l)+h*l)}else for(let e=0,i=0;e<r;e++,i+=4)s(0,i,e/(r-1));return a}let uV=new nN({visibility:new nF(eK.layout_hillshade.visibility)});var uU={paint:new nN({"hillshade-illumination-direction":new nF(eK.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nF(eK.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nF(eK.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nF(eK.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nF(eK.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nF(eK.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new nF(eK.paint_hillshade["hillshade-emissive-strength"])}),layout:uV};let{members:u$}=nq([{name:"a_pos",components:2,type:"Int16"}],4);var uW={exports:{}};function uG(e,i,r){r=r||2;var n,a,s,o,l,u,h,c=i&&i.length,d=c?i[0]*r:e.length,f=uq(e,0,d,r,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(e,i,r,n){var a,s,o,l=[];for(a=0,s=i.length;a<s;a++)(o=uq(e,i[a]*n,a<s-1?i[a+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),l.push(function(e){var i=e,r=e;do(i.x<r.x||i.x===r.x&&i.y<r.y)&&(r=i),i=i.next;while(i!==e)return r}(o));for(l.sort(uX),a=0;a<l.length;a++)r=function(e,i){var r=function(e,i){var r,n,a,s=i,o=e.x,l=e.y,u=-1/0;do{if(l<=s.y&&l>=s.next.y&&s.next.y!==s.y){var h=s.x+(l-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(h<=o&&h>u&&(u=h,a=s.x<s.next.x?s:s.next,h===o))return a}s=s.next}while(s!==i)if(!a)return null;var c,d=a,f=a.x,p=a.y,m=1/0;s=a;do o>=s.x&&s.x>=f&&o!==s.x&&uK(l<p?o:u,l,f,p,l<p?u:o,l,s.x,s.y)&&(c=Math.abs(l-s.y)/(o-s.x),u4(s,e)&&(c<m||c===m&&(s.x>a.x||s.x===a.x&&(r=a,n=s,0>uQ(r.prev,r,n.prev)&&0>uQ(n.next,r,r.next))))&&(a=s,m=c)),s=s.next;while(s!==d)return a}(e,i);if(!r)return i;var n=u5(r,e);return uZ(n,n.next),uZ(r,r.next)}(l[a],r);return r}(e,i,f,r)),e.length>80*r){n=s=e[0],a=o=e[1];for(var m=r;m<d;m+=r)(l=e[m])<n&&(n=l),(u=e[m+1])<a&&(a=u),l>s&&(s=l),u>o&&(o=u);h=0!==(h=Math.max(s-n,o-a))?32767/h:0}return function e(i,r,n,a,s,o,l){if(i){!l&&o&&function(e,i,r,n){var a=e;do 0===a.z&&(a.z=uJ(a.x,a.y,i,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e)a.prevZ.nextZ=null,a.prevZ=null,function(e){var i,r,n,a,s,o,l,u,h=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,l=0,i=0;i<h&&(l++,n=n.nextZ);i++);for(u=h;l>0||u>0&&n;)0!==l&&(0===u||!n||r.z<=n.z)?(a=r,r=r.nextZ,l--):(a=n,n=n.nextZ,u--),s?s.nextZ=a:e=a,a.prevZ=s,s=a;r=n}s.nextZ=null,h*=2}while(o>1)}(a)}(i,a,s,o);for(var u,h,c=i;i.prev!==i.next;)if(u=i.prev,h=i.next,o?function(e,i,r,n){var a=e.prev,s=e.next;if(uQ(a,e,s)>=0)return!1;for(var o=a.x,l=e.x,u=s.x,h=a.y,c=e.y,d=s.y,f=o<l?o<u?o:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,m=o>l?o>u?o:u:l>u?l:u,_=h>c?h>d?h:d:c>d?c:d,g=uJ(f,p,i,r,n),y=uJ(m,_,i,r,n),v=e.prevZ,x=e.nextZ;v&&v.z>=g&&x&&x.z<=y;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=_&&v!==a&&v!==s&&uK(o,h,l,c,u,d,v.x,v.y)&&uQ(v.prev,v,v.next)>=0||(v=v.prevZ,x.x>=f&&x.x<=m&&x.y>=p&&x.y<=_&&x!==a&&x!==s&&uK(o,h,l,c,u,d,x.x,x.y)&&uQ(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;v&&v.z>=g;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=_&&v!==a&&v!==s&&uK(o,h,l,c,u,d,v.x,v.y)&&uQ(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=_&&x!==a&&x!==s&&uK(o,h,l,c,u,d,x.x,x.y)&&uQ(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}(i,a,s,o):function(e){var i=e.prev,r=e.next;if(uQ(i,e,r)>=0)return!1;for(var n=i.x,a=e.x,s=r.x,o=i.y,l=e.y,u=r.y,h=n<a?n<s?n:s:a<s?a:s,c=o<l?o<u?o:u:l<u?l:u,d=n>a?n>s?n:s:a>s?a:s,f=o>l?o>u?o:u:l>u?l:u,p=r.next;p!==i;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&uK(n,o,a,l,s,u,p.x,p.y)&&uQ(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}(i))r.push(u.i/n|0),r.push(i.i/n|0),r.push(h.i/n|0),u8(i),i=h.next,c=h.next;else if((i=h)===c){l?1===l?e(i=function(e,i,r){var n=e;do{var a=n.prev,s=n.next.next;!u0(a,s)&&u1(a,n,n.next,s)&&u4(a,s)&&u4(s,a)&&(i.push(a.i/r|0),i.push(n.i/r|0),i.push(s.i/r|0),u8(n),u8(n.next),n=e=s),n=n.next}while(n!==e)return uZ(n)}(uZ(i),r,n),r,n,a,s,o,2):2===l&&function(i,r,n,a,s,o){var l=i;do{for(var u,h,c=l.next.next;c!==l.prev;){if(l.i!==c.i&&(u=l,h=c,u.next.i!==h.i&&u.prev.i!==h.i&&!function(e,i){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==i.i&&r.next.i!==i.i&&u1(r,r.next,e,i))return!0;r=r.next}while(r!==e)return!1}(u,h)&&(u4(u,h)&&u4(h,u)&&function(e,i){var r=e,n=!1,a=(e.x+i.x)/2,s=(e.y+i.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&a<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e)return n}(u,h)&&(uQ(u.prev,u,h.prev)||uQ(u,h.prev,h))||u0(u,h)&&uQ(u.prev,u,u.next)>0&&uQ(h.prev,h,h.next)>0))){var d=u5(l,c);return l=uZ(l,l.next),d=uZ(d,d.next),e(l,r,n,a,s,o,0),void e(d,r,n,a,s,o,0)}c=c.next}l=l.next}while(l!==i)}(i,r,n,a,s,o):e(uZ(i),r,n,a,s,o,1);break}}}(f,p,r,n,a,h,0),p}function uq(e,i,r,n,a){var s,o;if(a===u9(e,i,r,n)>0)for(s=i;s<r;s+=n)o=u6(s,e[s],e[s+1],o);else for(s=r-n;s>=i;s-=n)o=u6(s,e[s],e[s+1],o);return o&&u0(o,o.next)&&(u8(o),o=o.next),o}function uZ(e,i){if(!e)return e;i||(i=e);var r,n=e;do if(r=!1,n.steiner||!u0(n,n.next)&&0!==uQ(n.prev,n,n.next))n=n.next;else{if(u8(n),(n=i=n.prev)===n.next)break;r=!0}while(r||n!==i)return i}function uX(e,i){return e.x-i.x}function uJ(e,i,r,n,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*a|0)|e<<8))|e<<4))|e<<2))|e<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-n)*a|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function uK(e,i,r,n,a,s,o,l){return(a-o)*(i-l)>=(e-o)*(s-l)&&(e-o)*(n-l)>=(r-o)*(i-l)&&(r-o)*(s-l)>=(a-o)*(n-l)}function uQ(e,i,r){return(i.y-e.y)*(r.x-i.x)-(i.x-e.x)*(r.y-i.y)}function u0(e,i){return e.x===i.x&&e.y===i.y}function u1(e,i,r,n){var a=u3(uQ(e,i,r)),s=u3(uQ(e,i,n)),o=u3(uQ(r,n,e)),l=u3(uQ(r,n,i));return a!==s&&o!==l||!(0!==a||!u2(e,r,i))||!(0!==s||!u2(e,n,i))||!(0!==o||!u2(r,e,n))||!(0!==l||!u2(r,i,n))}function u2(e,i,r){return i.x<=Math.max(e.x,r.x)&&i.x>=Math.min(e.x,r.x)&&i.y<=Math.max(e.y,r.y)&&i.y>=Math.min(e.y,r.y)}function u3(e){return e>0?1:e<0?-1:0}function u4(e,i){return 0>uQ(e.prev,e,e.next)?uQ(e,i,e.next)>=0&&uQ(e,e.prev,i)>=0:0>uQ(e,i,e.prev)||0>uQ(e,e.next,i)}function u5(e,i){var r=new u7(e.i,e.x,e.y),n=new u7(i.i,i.x,i.y),a=e.next,s=i.prev;return e.next=i,i.prev=e,r.next=a,a.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function u6(e,i,r,n){var a=new u7(e,i,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function u8(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function u7(e,i,r){this.i=e,this.x=i,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u9(e,i,r,n){for(var a=0,s=i,o=r-n;s<r;s+=n)a+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return a}uW.exports=uG,uW.exports.default=uG,uG.deviation=function(e,i,r,n){var a=i&&i.length,s=Math.abs(u9(e,0,a?i[0]*r:e.length,r));if(a)for(var o=0,l=i.length;o<l;o++)s-=Math.abs(u9(e,i[o]*r,o<l-1?i[o+1]*r:e.length,r));var u=0;for(o=0;o<n.length;o+=3){var h=n[o]*r,c=n[o+1]*r,d=n[o+2]*r;u+=Math.abs((e[h]-e[d])*(e[c+1]-e[h+1])-(e[h]-e[c])*(e[d+1]-e[h+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},uG.flatten=function(e){for(var i=e[0][0].length,r={vertices:[],holes:[],dimensions:i},n=0,a=0;a<e.length;a++){for(var s=0;s<e[a].length;s++)for(var o=0;o<i;o++)r.vertices.push(e[a][s][o]);a>0&&r.holes.push(n+=e[a-1].length)}return r};var he=M(uW.exports);function ht(e,i){let r,n;let a=e.length;if(a<=1)return[e];let s=[];for(let i=0;i<a;i++){let a=function(e){let i=0;for(let r,n,a=0,s=e.length,o=s-1;a<s;o=a++)r=e[a],i+=((n=e[o]).x-r.x)*(r.y+n.y);return i}(e[i]);0!==a&&(e[i].area=Math.abs(a),void 0===n&&(n=a<0),n===a<0?(r&&s.push(r),r=[e[i]]):r.push(e[i]))}if(r&&s.push(r),i>1)for(let e=0;e<s.length;e++)s[e].length<=i||(tV(s[e],i,1,s[e].length-1,hi),s[e]=s[e].slice(0,i));return s}function hi(e,i){return i.area-e.area}function hr(e,i,r){let n=r.patternDependencies,a=!1;for(let r of i){let i=r.paint.get(`${e}-pattern`);i.isConstant()||(a=!0);let s=i.constantOr(null);s&&(a=!0,n[s]=!0)}return a}function hn(e,i,r,n,a){let s=a.patternDependencies;for(let o of i){let i=o.paint.get(`${e}-pattern`).value;if("constant"!==i.kind){let e=i.evaluate({zoom:n},r,{},a.availableImages);s[e=e&&e.name?e.name:e]=!0,r.patterns[o.id]=e}}return r}class ha{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nX,this.indexArray=new ar,this.indexArray2=new n7,this.programConfigurations=new a8(e.layers,e.zoom),this.segments=new aE,this.segments2=new aE,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.projection=e.projection}populate(e,i,r,n){this.hasPattern=hr("fill",this.layers,i);let a=this.layers[0].layout.get("fill-sort-key"),s=[];for(let{feature:o,id:l,index:u,sourceLayerIndex:h}of e){let e=this.layers[0]._featureFilter.needGeometry,c=ul(o,e);if(!this.layers[0]._featureFilter.filter(new nE(this.zoom),c,r))continue;let d=a?a.evaluate(c,{},r,i.availableImages):void 0,f={id:l,properties:o.properties,type:o.type,sourceLayerIndex:h,index:u,geometry:e?c.geometry:uo(o,r,n),patterns:{},sortKey:d};s.push(f)}for(let n of(a&&s.sort((e,i)=>e.sortKey-i.sortKey),s)){let{geometry:a,index:s,sourceLayerIndex:o}=n;if(this.hasPattern){let e=hn("fill",this.layers,n,this.zoom,i);this.patternFeatures.push(e)}else this.addFeature(n,a,s,r,{},i.availableImages,i.brightness);i.featureIndex.insert(e[s].feature,a,s,o,this.index)}}update(e,i,r,n,a){let s=0!==Object.keys(e).length;s&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,i,s?this.stateDependentLayers:this.layers,r,n,a)}addFeatures(e,i,r,n,a,s){for(let e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,i,r,n,s)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,u$),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,i,r,n,a,s=[],o){for(let e of ht(i,500)){let i=0;for(let r of e)i+=r.length;let r=this.segments.prepareSegment(i,this.layoutVertexArray,this.indexArray),n=r.vertexLength,a=[],s=[];for(let i of e){if(0===i.length)continue;i!==e[0]&&s.push(a.length/2);let r=this.segments2.prepareSegment(i.length,this.layoutVertexArray,this.indexArray2),n=r.vertexLength;this.layoutVertexArray.emplaceBack(i[0].x,i[0].y),this.indexArray2.emplaceBack(n+i.length-1,n),a.push(i[0].x),a.push(i[0].y);for(let e=1;e<i.length;e++)this.layoutVertexArray.emplaceBack(i[e].x,i[e].y),this.indexArray2.emplaceBack(n+e-1,n+e),a.push(i[e].x),a.push(i[e].y);r.vertexLength+=i.length,r.primitiveLength+=i.length}let o=he(a,s);for(let e=0;e<o.length;e+=3)this.indexArray.emplaceBack(n+o[e],n+o[e+1],n+o[e+2]);r.vertexLength+=i,r.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a,s,n,o)}}no(ha,"FillBucket",{omit:["layers","patternFeatures"]});let hs=new nN({"fill-sort-key":new nj(eK.layout_fill["fill-sort-key"]),visibility:new nF(eK.layout_fill.visibility)});var ho={paint:new nN({"fill-antialias":new nF(eK.paint_fill["fill-antialias"]),"fill-opacity":new nj(eK.paint_fill["fill-opacity"]),"fill-color":new nj(eK.paint_fill["fill-color"]),"fill-outline-color":new nj(eK.paint_fill["fill-outline-color"]),"fill-translate":new nF(eK.paint_fill["fill-translate"]),"fill-translate-anchor":new nF(eK.paint_fill["fill-translate-anchor"]),"fill-pattern":new nj(eK.paint_fill["fill-pattern"]),"fill-emissive-strength":new nF(eK.paint_fill["fill-emissive-strength"])}),layout:hs};let hl=nq([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),hu=nq([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),hh=nq([{name:"a_centroid_pos",components:2,type:"Uint16"}]),hc=nq([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),hd=nq([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:hf}=hl;var hp={};function hm(e,i,r,n,a){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=a,e.readFields(h_,this,i)}function h_(e,i,r){1==e?i.id=r.readVarint():2==e?function(e,i){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=i._keys[e.readVarint()],a=i._values[e.readVarint()];i.properties[n]=a}}(r,i):3==e?i.type=r.readVarint():4==e&&(i._geometry=r.pos)}function hg(e,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(hy,this,i),this.length=this._features.length}function hy(e,i,r){15===e?i.version=r.readVarint():1===e?i.name=r.readString():5===e?i.extent=r.readVarint():2===e?i._features.push(r.pos):3===e?i._keys.push(r.readString()):4===e&&i._values.push(function(e){for(var i=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;i=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return i}(r))}function hv(e,i,r){if(3===e){var n=new hg(r,r.readVarint()+r.pos);n.length&&(i[n.name]=n)}}hm.types=["Unknown","Point","LineString","Polygon"],hm.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var i,r=e.readVarint()+e.pos,n=1,a=0,s=0,o=0,l=[];e.pos<r;){if(a<=0){var u=e.readVarint();n=7&u,a=u>>3}if(a--,1===n||2===n)s+=e.readSVarint(),o+=e.readSVarint(),1===n&&(i&&l.push(i),i=[]),i.push(new S(s,o));else{if(7!==n)throw Error("unknown command "+n);i&&i.push(i[0].clone())}}return i&&l.push(i),l},hm.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var i=e.readVarint()+e.pos,r=1,n=0,a=0,s=0,o=1/0,l=-1/0,u=1/0,h=-1/0;e.pos<i;){if(n<=0){var c=e.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(a+=e.readSVarint())<o&&(o=a),a>l&&(l=a),(s+=e.readSVarint())<u&&(u=s),s>h&&(h=s);else if(7!==r)throw Error("unknown command "+r)}return[o,u,l,h]},hm.prototype.toGeoJSON=function(e,i,r){var n,a,s=this.extent*Math.pow(2,r),o=this.extent*e,l=this.extent*i,u=this.loadGeometry(),h=hm.types[this.type];function c(e){for(var i=0;i<e.length;i++){var r=e[i];e[i]=[360*(r.x+o)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+l)/s)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(n=0;n<u.length;n++)d[n]=u[n][0];c(u=d);break;case 2:for(n=0;n<u.length;n++)c(u[n]);break;case 3:for(u=function(e){var i=e.length;if(i<=1)return[e];for(var r,n,a=[],s=0;s<i;s++){var o=function(e){for(var i,r,n=0,a=0,s=e.length,o=s-1;a<s;o=a++)n+=((r=e[o]).x-(i=e[a]).x)*(i.y+r.y);return n}(e[s]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(r&&a.push(r),r=[e[s]]):r.push(e[s]))}return r&&a.push(r),a}(u),n=0;n<u.length;n++)for(a=0;a<u[n].length;a++)c(u[n][a])}1===u.length?u=u[0]:h="Multi"+h;var f={type:"Feature",geometry:{type:h,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f},hg.prototype.feature=function(e){if(e<0||e>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[e];var i=this._pbf.readVarint()+this._pbf.pos;return new hm(this._pbf,i,this.extent,this._keys,this._values)};var hx=hp.VectorTile=function(e,i){this.layers=e.readFields(hv,{},i)},hb=hp.VectorTileFeature=hm;function hw(e,i,r,n){let a=[],s=0===n?(e,i,r,n,a,s)=>{e.push(new k(s,r+(s-i)/(n-i)*(a-r)))}:(e,i,r,n,a,s)=>{e.push(new k(i+(s-r)/(a-r)*(n-i),s))};for(let o of e){let e=[];for(let a of o){if(a.length<=2)continue;let o=[];for(let e=0;e<a.length-1;e++){let l=a[e].x,u=a[e].y,h=a[e+1].x,c=a[e+1].y,d=0===n?l:u,f=0===n?h:c;d<i?f>i&&s(o,l,u,h,c,i):d>r?f<r&&s(o,l,u,h,c,r):o.push(a[e]),f<i&&d>=i&&s(o,l,u,h,c,i),f>r&&d<=r&&s(o,l,u,h,c,r)}let l=a[a.length-1],u=0===n?l.x:l.y;u>=i&&u<=r&&o.push(l),o.length&&(l=o[o.length-1],o[0].x===l.x&&o[0].y===l.y||o.push(o[0]),e.push(o))}e.length&&a.push(e)}return a}hp.VectorTileLayer=hg;class hM{constructor(e){this._stringToNumber={},this._numberToString=[];for(let i=0;i<e.length;i++){let r=e[i];this._stringToNumber[r]=i,this._numberToString[i]=r}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}var hT={read:function(e,i,r,n,a){var s,o,l=8*a-n-1,u=(1<<l)-1,h=u>>1,c=-7,d=r?a-1:0,f=r?-1:1,p=e[i+d];for(d+=f,s=p&(1<<-c)-1,p>>=-c,c+=l;c>0;s=256*s+e[i+d],d+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+e[i+d],d+=f,c-=8);if(0===s)s=1-h;else{if(s===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=h}return(p?-1:1)*o*Math.pow(2,s-n)},write:function(e,i,r,n,a,s){var o,l,u,h=8*s-a-1,c=(1<<h)-1,d=c>>1,f=23===a?5960464477539062e-23:0,p=n?0:s-1,m=n?1:-1,_=i<0||0===i&&1/i<0?1:0;for(isNaN(i=Math.abs(i))||i===1/0?(l=isNaN(i)?1:0,o=c):(o=Math.floor(Math.log(i)/Math.LN2),i*(u=Math.pow(2,-o))<1&&(o--,u*=2),(i+=o+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=c?(l=0,o=c):o+d>=1?(l=(i*u-1)*Math.pow(2,a),o+=d):(l=i*Math.pow(2,d-1)*Math.pow(2,a),o=0));a>=8;e[r+p]=255&l,p+=m,l/=256,a-=8);for(o=o<<a|l,h+=a;h>0;e[r+p]=255&o,p+=m,o/=256,h-=8);e[r+p-m]|=128*_}};function hL(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}hL.Varint=0,hL.Fixed64=1,hL.Bytes=2,hL.Fixed32=5;var hS="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function hk(e){return e.type===hL.Bytes?e.readVarint()+e.pos:e.pos+1}function hD(e,i,r){var n=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));r.realloc(n);for(var a=r.pos-1;a>=e;a--)r.buf[a+n]=r.buf[a]}function hE(e,i){for(var r=0;r<e.length;r++)i.writeVarint(e[r])}function hA(e,i){for(var r=0;r<e.length;r++)i.writeSVarint(e[r])}function hP(e,i){for(var r=0;r<e.length;r++)i.writeFloat(e[r])}function hC(e,i){for(var r=0;r<e.length;r++)i.writeDouble(e[r])}function hI(e,i){for(var r=0;r<e.length;r++)i.writeBoolean(e[r])}function hO(e,i){for(var r=0;r<e.length;r++)i.writeFixed32(e[r])}function hz(e,i){for(var r=0;r<e.length;r++)i.writeSFixed32(e[r])}function hR(e,i){for(var r=0;r<e.length;r++)i.writeFixed64(e[r])}function hY(e,i){for(var r=0;r<e.length;r++)i.writeSFixed64(e[r])}function hF(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+16777216*e[i+3]}function hj(e,i,r){e[r]=i,e[r+1]=i>>>8,e[r+2]=i>>>16,e[r+3]=i>>>24}function hB(e,i){return(e[i]|e[i+1]<<8|e[i+2]<<16)+(e[i+3]<<24)}hL.prototype={destroy:function(){this.buf=null},readFields:function(e,i,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),a=n>>3,s=this.pos;this.type=7&n,e(a,i,this),this.pos===s&&this.skip(n)}return i},readMessage:function(e,i){return this.readFields(e,i,this.readVarint()+this.pos)},readFixed32:function(){var e=hF(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=hB(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=hF(this.buf,this.pos)+4294967296*hF(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=hF(this.buf,this.pos)+4294967296*hB(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=hT.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=hT.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var i,r,n=this.buf;return i=127&(r=n[this.pos++]),r<128?i:(i|=(127&(r=n[this.pos++]))<<7,r<128?i:(i|=(127&(r=n[this.pos++]))<<14,r<128?i:(i|=(127&(r=n[this.pos++]))<<21,r<128?i:function(e,i,r){var n,a,s,o=r.buf;if(a=(112&(s=o[r.pos++]))>>4,s<128||(a|=(127&(s=o[r.pos++]))<<3,s<128)||(a|=(127&(s=o[r.pos++]))<<10,s<128)||(a|=(127&(s=o[r.pos++]))<<17,s<128)||(a|=(127&(s=o[r.pos++]))<<24,s<128)||(a|=(1&(s=o[r.pos++]))<<31,s<128))return n=a,i?4294967296*n+(e>>>0):4294967296*(n>>>0)+(e>>>0);throw Error("Expected varint not more than 10 bytes")}(i|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?-((e+1)/2):e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e,i=this.readVarint()+this.pos,r=this.pos;return this.pos=i,i-r>=12&&hS?(e=this.buf,hS.decode(e.subarray(r,i))):function(e,i,r){for(var n="",a=i;a<r;){var s,o,l,u=e[a],h=null,c=u>239?4:u>223?3:u>191?2:1;if(a+c>r)break;1===c?u<128&&(h=u):2===c?128==(192&(s=e[a+1]))&&(h=(31&u)<<6|63&s)<=127&&(h=null):3===c?(o=e[a+2],128==(192&(s=e[a+1]))&&128==(192&o)&&((h=(15&u)<<12|(63&s)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===c&&(o=e[a+2],l=e[a+3],128==(192&(s=e[a+1]))&&128==(192&o)&&128==(192&l)&&((h=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&l)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,c=1):h>65535&&(h-=65536,n+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),n+=String.fromCharCode(h),a+=c}return n}(this.buf,r,i)},readBytes:function(){var e=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,e);return this.pos=e,i},readPackedVarint:function(e,i){if(this.type!==hL.Bytes)return e.push(this.readVarint(i));var r=hk(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(i));return e},readPackedSVarint:function(e){if(this.type!==hL.Bytes)return e.push(this.readSVarint());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==hL.Bytes)return e.push(this.readBoolean());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==hL.Bytes)return e.push(this.readFloat());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==hL.Bytes)return e.push(this.readDouble());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==hL.Bytes)return e.push(this.readFixed32());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==hL.Bytes)return e.push(this.readSFixed32());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==hL.Bytes)return e.push(this.readFixed64());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==hL.Bytes)return e.push(this.readSFixed64());var i=hk(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed64());return e},skip:function(e){var i=7&e;if(i===hL.Varint)for(;this.buf[this.pos++]>127;);else if(i===hL.Bytes)this.pos=this.readVarint()+this.pos;else if(i===hL.Fixed32)this.pos+=4;else{if(i!==hL.Fixed64)throw Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(e,i){this.writeVarint(e<<3|i)},realloc:function(e){for(var i=this.length||16;i<this.pos+e;)i*=2;if(i!==this.length){var r=new Uint8Array(i);r.set(this.buf),this.buf=r,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),hj(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),hj(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),hj(this.buf,-1&e,this.pos),hj(this.buf,Math.floor(23283064365386963e-26*e),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),hj(this.buf,-1&e,this.pos),hj(this.buf,Math.floor(23283064365386963e-26*e),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,i){var r,n,a,s,o;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");i.realloc(10),a=r,i.buf[i.pos++]=127&a|128,a>>>=7,i.buf[i.pos++]=127&a|128,a>>>=7,i.buf[i.pos++]=127&a|128,a>>>=7,i.buf[i.pos++]=127&a|128,i.buf[i.pos]=127&(a>>>=7),o=(7&(s=n))<<4,i.buf[i.pos++]|=o|((s>>>=3)?128:0),s&&(i.buf[i.pos++]=127&s|((s>>>=7)?128:0),s&&(i.buf[i.pos++]=127&s|((s>>>=7)?128:0),s&&(i.buf[i.pos++]=127&s|((s>>>=7)?128:0),s&&(i.buf[i.pos++]=127&s|((s>>>=7)?128:0),s&&(i.buf[i.pos++]=127&s)))))}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?-(2*e)-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var i=this.pos;this.pos=function(e,i,r){for(var n,a,s=0;s<i.length;s++){if((n=i.charCodeAt(s))>55295&&n<57344){if(!a){n>56319||s+1===i.length?(e[r++]=239,e[r++]=191,e[r++]=189):a=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(e[r++]=239,e[r++]=191,e[r++]=189,a=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-i;r>=128&&hD(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),hT.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),hT.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var i=e.length;this.writeVarint(i),this.realloc(i);for(var r=0;r<i;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,i){this.pos++;var r=this.pos;e(i,this);var n=this.pos-r;n>=128&&hD(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,i,r){this.writeTag(e,hL.Bytes),this.writeRawMessage(i,r)},writePackedVarint:function(e,i){i.length&&this.writeMessage(e,hE,i)},writePackedSVarint:function(e,i){i.length&&this.writeMessage(e,hA,i)},writePackedBoolean:function(e,i){i.length&&this.writeMessage(e,hI,i)},writePackedFloat:function(e,i){i.length&&this.writeMessage(e,hP,i)},writePackedDouble:function(e,i){i.length&&this.writeMessage(e,hC,i)},writePackedFixed32:function(e,i){i.length&&this.writeMessage(e,hO,i)},writePackedSFixed32:function(e,i){i.length&&this.writeMessage(e,hz,i)},writePackedFixed64:function(e,i){i.length&&this.writeMessage(e,hR,i)},writePackedSFixed64:function(e,i){i.length&&this.writeMessage(e,hY,i)},writeBytesField:function(e,i){this.writeTag(e,hL.Bytes),this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,hL.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,hL.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,hL.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,hL.Fixed64),this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,hL.Varint),this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,hL.Varint),this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,hL.Bytes),this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,hL.Fixed32),this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,hL.Fixed64),this.writeDouble(i)},writeBooleanField:function(e,i){this.writeVarintField(e,!!i)}};var hN=M(hL);let hH=["tile","layer","source","sourceLayer","state"];class hV{constructor(e,i,r,n,a){this.type="Feature",this._vectorTileFeature=e,this._z=i,this._x=r,this._y=n,this.properties=e.properties,this.id=a}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){let e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(let i of(void 0!==this.id&&(e.id=this.id),hH))void 0!==this[i]&&(e[i]=this[i]);return e}}class hU{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,i,r){let n=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},j(this.stateChanges[e][n],r),null===this.deletedStates[e])for(let i in this.deletedStates[e]={},this.state[e])i!==n&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][n])for(let i in this.deletedStates[e][n]={},this.state[e][n])r[i]||(this.deletedStates[e][n][i]=null);else for(let i in r)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][i]&&delete this.deletedStates[e][n][i]}removeFeatureState(e,i,r){if(null===this.deletedStates[e])return;let n=String(i);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==i)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==i){if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null}else this.deletedStates[e]=null}getState(e,i){let r=String(i),n=j({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){let r=this.deletedStates[e][i];if(null===r)return{};for(let e in r)delete n[e]}return n}initializeTileState(e,i){e.setFeatureState(this.state,i)}coalesceChanges(e,i){let r={};for(let e in this.stateChanges){this.state[e]=this.state[e]||{};let i={};for(let r in this.stateChanges[e])this.state[e][r]||(this.state[e][r]={}),j(this.state[e][r],this.stateChanges[e][r]),i[r]=this.state[e][r];r[e]=i}for(let e in this.deletedStates){this.state[e]=this.state[e]||{};let i={};if(null===this.deletedStates[e])for(let r in this.state[e])i[r]={},this.state[e][r]={};else for(let r in this.deletedStates[e]){if(null===this.deletedStates[e][r])this.state[e][r]={};else if(this.state[e][r])for(let i of Object.keys(this.deletedStates[e][r]))delete this.state[e][r][i];i[r]=this.state[e][r]}r[e]=r[e]||{},j(r[e],i)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(let n in e)e[n].setFeatureState(r,i)}}class h${constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,i){let r=this.toIdx(e,i);return{min:this.minimums[r],max:this.maximums[r]}}isLeaf(e,i){return this.leaves[this.toIdx(e,i)]}toIdx(e,i){return i*this.size+e}}function hW(e,i,r,n){let a=0,s=Number.MAX_VALUE;for(let o=0;o<3;o++)if(1e-15>Math.abs(n[o])){if(r[o]<e[o]||r[o]>i[o])return null}else{let l=1/n[o],u=(e[o]-r[o])*l,h=(i[o]-r[o])*l;if(u>h){let e=u;u=h,h=e}if(u>a&&(a=u),h<s&&(s=h),a>s)return null}return a}function hG(e,i,r,n,a,s,o,l,u,h,c){let d=n-e,f=a-i,p=s-r,m=o-e,_=l-i,g=u-r,y=c[1]*g-c[2]*_,v=c[2]*m-c[0]*g,x=c[0]*_-c[1]*m,b=d*y+f*v+p*x;if(1e-15>Math.abs(b))return null;let w=1/b,M=h[0]-e,T=h[1]-i,L=h[2]-r,S=(M*y+T*v+L*x)*w;if(S<0||S>1)return null;let k=T*p-L*f,D=L*d-M*p,E=M*f-T*d,A=(c[0]*k+c[1]*D+c[2]*E)*w;return A<0||S+A>1?null:(m*k+_*D+g*E)*w}function hq(e,i,r,n,a,s,o,l,u){let h=1<<r,c=s-n,d=o-a;l[0]=(e+0)/h*c+n,l[1]=(i+0)/h*d+a,u[0]=(e+1)/h*c+n,u[1]=(i+1)/h*d+a}class hZ{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;let i=function(e){let i=Math.ceil(Math.log2(e.dim/8)),r=[],n=Math.ceil(Math.pow(2,i)),a=1/n,s=(e,i,r,n,a)=>{let s=n?1:0;a[0]=e*r,a[1]=i*r,a[2]=(e+1)*r-s,a[3]=(i+1)*r-s},o=new h$(n),l=[];for(let i=0;i<n*n;i++){s(i%n,Math.floor(i/n),a,!1,l);let r=hJ(l[0],l[1],e),u=hJ(l[2],l[1],e),h=hJ(l[2],l[3],e),c=hJ(l[0],l[3],e);o.minimums.push(Math.min(r,u,h,c)),o.maximums.push(Math.max(r,u,h,c)),o.leaves.push(1)}for(r.push(o),n/=2;n>=1;n/=2){let e=r[r.length-1];o=new h$(n);for(let i=0;i<n*n;i++){s(i%n,Math.floor(i/n),2,!0,l);let r=e.getElevation(l[0],l[1]),a=e.getElevation(l[2],l[1]),u=e.getElevation(l[2],l[3]),h=e.getElevation(l[0],l[3]),c=e.isLeaf(l[0],l[1]),d=e.isLeaf(l[2],l[1]),f=e.isLeaf(l[2],l[3]),p=e.isLeaf(l[0],l[3]),m=Math.min(r.min,a.min,u.min,h.min),_=Math.max(r.max,a.max,u.max,h.max),g=c&&d&&f&&p;o.maximums.push(_),o.minimums.push(m),o.leaves.push(_-m<=5&&g?1:0)}r.push(o)}return r}(this.dem),r=i.length-1,n=i[r];this._addNode(n.minimums[0],n.maximums[0],n.leaves[0]),this._construct(i,0,0,r,0)}raycastRoot(e,i,r,n,a,s,o=1){return hW([e,i,-100],[r,n,this.maximums[0]*o],a,s)}raycast(i,r,n,a,s,o,l=1){if(!this.nodeCount)return null;let u=this.raycastRoot(i,r,n,a,s,o,l);if(null==u)return null;let h=[],c=[],d=[],f=[],p=[{idx:0,t:u,nodex:0,nodey:0,depth:0}];for(;p.length>0;){let{idx:u,t:g,nodex:y,nodey:v,depth:x}=p.pop();if(this.leaves[u]){hq(y,v,x,i,r,n,a,d,f);let u=1<<x,h=(y+0)/u,c=(y+1)/u,p=(v+0)/u,b=(v+1)/u,w=hJ(h,p,this.dem)*l,M=hJ(c,p,this.dem)*l,T=hJ(c,b,this.dem)*l,L=hJ(h,b,this.dem)*l,S=hG(d[0],d[1],w,f[0],d[1],M,f[0],f[1],T,s,o),k=hG(f[0],f[1],T,d[0],f[1],L,d[0],d[1],w,s,o),D=Math.min(null!==S?S:Number.MAX_VALUE,null!==k?k:Number.MAX_VALUE);if(D!==Number.MAX_VALUE)return D;{var m,_;let i=e.v.scaleAndAdd([],s,o,g);if(hX(w,M,L,T,(i[0]-(m=d[0]))/(f[0]-m),(i[1]-(_=d[1]))/(f[1]-_))>=i[2])return g}continue}let b=0;for(let e=0;e<this._siblingOffset.length;e++){hq((y<<1)+this._siblingOffset[e][0],(v<<1)+this._siblingOffset[e][1],x+1,i,r,n,a,d,f),d[2]=-100,f[2]=this.maximums[this.childOffsets[u]+e]*l;let p=hW(d,f,s,o);if(null!=p){h[e]=p;let i=!1;for(let r=0;r<b&&!i;r++)p>=h[c[r]]&&(c.splice(r,0,e),i=!0);i||(c[b]=e),b++}}for(let e=0;e<b;e++){let i=c[e];p.push({idx:this.childOffsets[u]+i,t:h[i],nodex:(y<<1)+this._siblingOffset[i][0],nodey:(v<<1)+this._siblingOffset[i][1],depth:x+1})}}return null}_addNode(e,i,r){return this.minimums.push(e),this.maximums.push(i),this.leaves.push(r),this.childOffsets.push(0),this.nodeCount++}_construct(e,i,r,n,a){if(1===e[n].isLeaf(i,r))return;this.childOffsets[a]||(this.childOffsets[a]=this.nodeCount);let s=n-1,o=e[s],l=0,u=0;for(let e=0;e<this._siblingOffset.length;e++){let n=2*i+this._siblingOffset[e][0],a=2*r+this._siblingOffset[e][1],s=o.getElevation(n,a),h=o.isLeaf(n,a),c=this._addNode(s.min,s.max,h);h&&(l|=1<<e),u||(u=c)}for(let n=0;n<this._siblingOffset.length;n++)l&1<<n||this._construct(e,2*i+this._siblingOffset[n][0],2*r+this._siblingOffset[n][1],s,u+n)}}function hX(e,i,r,n,a,s){return iS(iS(e,r,s),iS(i,n,s),a)}function hJ(e,i,r){let n=r.dim,a=O(e*n-.5,0,n-1),s=O(i*n-.5,0,n-1),o=Math.floor(a),l=Math.floor(s),u=Math.min(o+1,n-1),h=Math.min(l+1,n-1);return hX(r.get(o,l),r.get(u,l),r.get(o,h),r.get(u,h),a-o,s-l)}let hK={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function hQ(e,i,r){return(256*e*256+256*i+r)/10-1e4}function h0(e,i,r){return 256*e+i+r/256-32768}class h1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,i,r,n=!1){if(this.uid=e,i.height!==i.width)throw RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return J(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=i.height;let a=this.dim=i.height-2,s=new Uint32Array(i.data.buffer);if(this.pixels=new Uint8Array(i.data.buffer),this.floatView=new Float32Array(i.data.buffer),this.borderReady=n,this._modifiedForSources={},!n){for(let e=0;e<a;e++)s[this._idx(-1,e)]=s[this._idx(0,e)],s[this._idx(a,e)]=s[this._idx(a-1,e)],s[this._idx(e,-1)]=s[this._idx(e,0)],s[this._idx(e,a)]=s[this._idx(e,a-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(a,-1)]=s[this._idx(a-1,0)],s[this._idx(-1,a)]=s[this._idx(0,a-1)],s[this._idx(a,a)]=s[this._idx(a-1,a-1)]}let o="terrarium"===r?h0:hQ;for(let e=0;e<s.length;++e){let i=4*e;this.floatView[e]=o(this.pixels[i],this.pixels[i+1],this.pixels[i+2])}this._timestamp=eW.now()}_buildQuadTree(){this._tree=new hZ(this)}get(e,i,r=!1){r&&(e=O(e,-1,this.dim),i=O(i,-1,this.dim));let n=this._idx(e,i);return this.floatView[n]}set(e,i,r){let n=this._idx(e,i),a=this.floatView[n];return this.floatView[n]=r,r-a}static getUnpackVector(e){return hK[e]}_idx(e,i){if(e<-1||e>=this.dim+1||i<-1||i>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(e+1)}static pack(e,i){let r=[0,0,0,0],n=h1.getUnpackVector(i),a=Math.floor((e+n[3])/n[2]);return r[2]=a%256,a=Math.floor(a/256),r[1]=a%256,a=Math.floor(a/256),r[0]=a,r}getPixels(){return new uj({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,i,r){if(this.dim!==e.dim)throw Error("dem dimension mismatch");let n=i*this.dim,a=i*this.dim+this.dim,s=r*this.dim,o=r*this.dim+this.dim;switch(i){case -1:n=a-1;break;case 1:a=n+1}switch(r){case -1:s=o-1;break;case 1:o=s+1}let l=-i*this.dim,u=-r*this.dim;for(let i=s;i<o;i++)for(let r=n;r<a;r++){let n=4*this._idx(r,i),a=4*this._idx(r+l,i+u);this.pixels[n+0]=e.pixels[a+0],this.pixels[n+1]=e.pixels[a+1],this.pixels[n+2]=e.pixels[a+2],this.pixels[n+3]=e.pixels[a+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}no(h1,"DEMData"),no(hZ,"DemMinMaxQuadTree",{omit:["dem"]});class h2{constructor(e,i,r){this._demTile=e,this._dem=this._demTile.dem,this._scale=i,this._offset=r}static create(e,i,r){let n=r||e.findDEMTileFor(i);if(!n||!n.dem)return;let a=n.dem,s=n.tileID,o=1<<i.canonical.z-s.canonical.z;return new h2(n,a.dim/8192/o,[(i.canonical.x/o-s.canonical.x)*a.dim,(i.canonical.y/o-s.canonical.y)*a.dim])}tileCoordToPixel(e,i){let r=i*this._scale+this._offset[1];return new k(Math.floor(e*this._scale+this._offset[0]),Math.floor(r))}getElevationAt(e,i,r,n){let a=e*this._scale+this._offset[0],s=i*this._scale+this._offset[1],o=Math.floor(a),l=Math.floor(s),u=this._dem;return n=!!n,r?iS(iS(u.get(o,l,n),u.get(o,l+1,n),s-l),iS(u.get(o+1,l,n),u.get(o+1,l+1,n),s-l),a-o):u.get(o,l,n)}getElevationAtPixel(e,i,r){return this._dem.get(e,i,!!r)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*(1/l4(e))*this._dem.stride}}class h3{constructor(e,i){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new na(8192,16,0),this.featureIndexArray=new aL,this.promoteId=i}insert(e,i,r,n,a,s=0){let o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,a,s);let l=this.grid;for(let e=0;e<i.length;e++){let r=i[e],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<r.length;e++){let i=r[e];n[0]=Math.min(n[0],i.x),n[1]=Math.min(n[1],i.y),n[2]=Math.max(n[2],i.x),n[3]=Math.max(n[3],i.y)}n[0]<8192&&n[1]<8192&&n[2]>=0&&n[3]>=0&&l.insert(o,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers)for(let e in this.vtLayers=new hx(new hN(this.rawTileData)).layers,this.sourceLayerCoder=new hM(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}query(e,i,r,n){let a;this.loadVTLayers();let s=e.params||{},o=rF(s.filter),l=e.tileResult,u=e.transform,h=l.bufferedTilespaceBounds,c=this.grid.query(h.min.x,h.min.y,h.max.x,h.max.y,(e,i,r,n)=>uv(l.bufferedTilespaceGeometry,e,i,r,n));c.sort(h5);let d=null;u.elevation&&c.length>0&&(d=h2.create(u.elevation,this.tileID));let f={};for(let u=0;u<c.length;u++){let h=c[u];if(h===a)continue;a=h;let p=this.featureIndexArray.get(h),m=null;this.loadMatchingFeature(f,p,o,s.layers,s.availableImages,i,r,n,(i,r,n,a=0)=>(m||(m=uo(i,this.tileID.canonical,e.tileTransform)),r.queryIntersectsFeature(l,i,n,m,this.z,e.transform,e.pixelPosMatrix,d,a)))}return f}loadMatchingFeature(e,i,r,n,a,s,o,l,u){let{featureIndex:h,bucketIndex:c,sourceLayerIndex:d,layoutVertexArrayOffset:f}=i,p=this.bucketLayerIDs[c];if(n&&!function(e,i){for(let r=0;r<e.length;r++)if(i.indexOf(e[r])>=0)return!0;return!1}(n,p))return;let m=this.sourceLayerCoder.decode(d),_=this.vtLayers[m].feature(h);if(r.needGeometry){let e=ul(_,!0);if(!r.filter(new nE(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!r.filter(new nE(this.tileID.overscaledZ),_))return;let g=this.getId(_,m);for(let i=0;i<p.length;i++){let r=p[i];if(n&&0>n.indexOf(r))continue;let c=s[r];if(!c)continue;let d={};void 0!==g&&l&&(d=l.getState(c.sourceLayer||"_geojsonTileLayer",g));let m=j({},o[r]);m.paint=h4(m.paint,c.paint,_,d,a),m.layout=h4(m.layout,c.layout,_,d,a);let y=!u||u(_,c,d,f);if(!y)continue;let v=new hV(_,this.z,this.x,this.y,g);v.layer=m;let x=e[r];void 0===x&&(x=e[r]=[]),x.push({featureIndex:h,feature:v,intersectionZ:y})}}lookupSymbolFeatures(e,i,r,n,a,s,o,l){let u={};this.loadVTLayers();let h=rF(a);for(let a of e)this.loadMatchingFeature(u,{bucketIndex:r,sourceLayerIndex:n,featureIndex:a,layoutVertexArrayOffset:0},h,s,o,l,i);return u}loadFeature(e){let{featureIndex:i,sourceLayerIndex:r}=e;this.loadVTLayers();let n=this.sourceLayerCoder.decode(r),a=this.vtFeatures[n];if(a[i])return a[i];let s=this.vtLayers[n].feature(i);return a[i]=s,s}hasLayer(e){for(let i of this.bucketLayerIDs)for(let r of i)if(e===r)return!0;return!1}getId(e,i){let r=e.id;if(this.promoteId){let n="string"==typeof this.promoteId?this.promoteId:this.promoteId[i];null!=n&&(r=e.properties[n]),"boolean"==typeof r&&(r=Number(r))}return r}}function h4(e,i,r,n,a){return G(e,(e,s)=>{let o=i instanceof nY?i.get(s):null;return o&&o.evaluate?o.evaluate(r,n,a):o})}function h5(e,i){return i-e}no(h3,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});let h6=nq([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),h8=nq([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),h7=nq([{name:"a_projected_pos",components:4,type:"Float32"}],4);nq([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let h9=nq([{name:"a_z_offset",components:1,type:"Float32"}],4),ce=nq([{name:"a_texb",components:2,type:"Uint16"}]),ct=nq([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ci=nq([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);nq([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let cr=nq([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cn=nq([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ca(e,i){let{expression:r}=i;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new nE(e+1))};if("source"===r.kind)return{kind:"source"};{let{zoomStops:i,interpolationType:n}=r,a=0;for(;a<i.length&&i[a]<=e;)a++;let s=a=Math.max(0,a-1);for(;s<i.length&&i[s]<e+1;)s++;s=Math.min(i.length-1,s);let o=i[a],l=i[s];return"composite"===r.kind?{kind:"composite",minZoom:o,maxZoom:l,interpolationType:n}:{kind:"camera",minZoom:o,maxZoom:l,minSize:r.evaluate(new nE(o)),maxSize:r.evaluate(new nE(l)),interpolationType:n}}}function cs(e,{uSize:i,uSizeT:r},{lowerSize:n,upperSize:a}){return"source"===e.kind?n/128:"composite"===e.kind?iS(n/128,a/128,r):i}function co(e,i){let r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){let{interpolationType:a,minZoom:s,maxZoom:o}=e,l=a?O(iU.interpolationFactor(a,i,s,o),0,1):0;"camera"===e.kind?n=iS(e.minSize,e.maxSize,l):r=l}return{uSizeT:r,uSize:n}}nq([{name:"triangle",components:3,type:"Uint16"}]),nq([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),nq([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),nq([{type:"Float32",name:"offsetX"}]),nq([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var cl=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:128,evaluateSizeForFeature:cs,evaluateSizeForZoom:co,getSizeData:ca});let cu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function ch(e,i,r){i.glyphs=[],1===e&&r.readMessage(cc,i)}function cc(e,i,r){if(3===e){let{id:e,bitmap:n,width:a,height:s,left:o,top:l,advance:u}=r.readMessage(cd,{});i.glyphs.push({id:e,bitmap:new uY({width:a+6,height:s+6},n),metrics:{width:a,height:s,left:o,top:l,advance:u}})}else 4===e?i.ascender=r.readSVarint():5===e&&(i.descender=r.readSVarint())}function cd(e,i,r){1===e?i.id=r.readVarint():2===e?i.bitmap=r.readBytes():3===e?i.width=r.readVarint():4===e?i.height=r.readVarint():5===e?i.left=r.readSVarint():6===e?i.top=r.readSVarint():7===e&&(i.advance=r.readVarint())}let cf={horizontal:1,vertical:2,horizontalOnly:3};class cp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,i){let r=new cp;return r.scale=e||1,r.fontStack=i,r}static forImage(e){let i=new cp;return i.imageName=e,i}}class cm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,i){let r=new cm;for(let n=0;n<e.sections.length;n++){let a=e.sections[n];a.image?r.addImageSection(a):r.addTextSection(a,i)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(e,i){let r="";for(let n=0;n<e.length;n++){let a=e.charCodeAt(n+1)||null,s=e.charCodeAt(n-1)||null;r+=!i&&(a&&nm(a)&&!cu[e[n+1]]||s&&nm(s)&&!cu[e[n-1]])||!cu[e[n]]?e[n]:cu[e[n]]}return r}(this.text,e)}trim(){let e=0;for(let i=0;i<this.text.length&&cg[this.text.charCodeAt(i)];i++)e++;let i=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&cg[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)}substring(e,i){let r=new cm;return r.text=this.text.substring(e,i),r.sectionIndex=this.sectionIndex.slice(e,i),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,i)=>Math.max(e,this.sections[i].scale),0)}addTextSection(e,i){this.text+=e.text,this.sections.push(cp.forText(e.scale,e.fontStack||i));let r=this.sections.length-1;for(let i=0;i<e.text.length;++i)this.sectionIndex.push(r)}addImageSection(e){let i=e.image?e.image.namePrimary:"";if(0===i.length)return void J("Can't add FormattedSection with an empty image.");let r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCodePoint(r),this.sections.push(cp.forImage(i)),this.sectionIndex.push(this.sections.length-1)):J("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function c_(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m){let _=cm.fromFeature(e,a);d===cf.vertical&&_.verticalizePunctuation(f);let g=[],y=function(e,i,r,n,a,s){if(!e)return[];let o=[],l=function(e,i,r,n,a,s){let o=0;for(let r=0;r<e.length();r++){let l=e.getSection(r);o+=cv(e.getCodePoint(r),l,n,a,i,s)}return o/Math.max(1,Math.ceil(o/r))}(e,i,r,n,a,s),u=e.text.indexOf("")>=0,h=0;for(let r=0;r<e.length();r++){let c=e.getSection(r),d=e.getCodePoint(r);if(cg[d]||(h+=cv(d,c,n,a,i,s)),r<e.length()-1){let i=!(d<11904||!(nd["Bopomofo Extended"](d)||nd.Bopomofo(d)||nd["CJK Compatibility Forms"](d)||nd["CJK Compatibility Ideographs"](d)||nd["CJK Compatibility"](d)||nd["CJK Radicals Supplement"](d)||nd["CJK Strokes"](d)||nd["CJK Symbols and Punctuation"](d)||nd["CJK Unified Ideographs Extension A"](d)||nd["CJK Unified Ideographs"](d)||nd["Enclosed CJK Letters and Months"](d)||nd["Halfwidth and Fullwidth Forms"](d)||nd.Hiragana(d)||nd["Ideographic Description Characters"](d)||nd["Kangxi Radicals"](d)||nd["Katakana Phonetic Extensions"](d)||nd.Katakana(d)||nd["Vertical Forms"](d)||nd["Yi Radicals"](d)||nd["Yi Syllables"](d)));(cy[d]||i||c.imageName)&&o.push(cb(r+1,h,l,o,function(e,i,r){let n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==i&&65289!==i||(n+=50),n}(d,e.getCodePoint(r+1),i&&u),!1))}}return function e(i){return i?e(i.priorBreak).concat(i.index):[]}(cb(e.length(),h,l,o,0,!0))}(_,h,s,i,n,p),{processBidirectionalText:v,processStyledBidirectionalText:x}=nD;if(v&&1===_.sections.length)for(let e of v(_.toString(),y)){let i=new cm;i.text=e,i.sections=_.sections;for(let r=0;r<e.length;r++)i.sectionIndex.push(0);g.push(i)}else if(x)for(let e of x(_.text,_.sectionIndex,y)){let i=new cm;i.text=e[0],i.sectionIndex=e[1],i.sections=_.sections,g.push(i)}else g=function(e,i){let r=[],n=e.text,a=0;for(let n of i)r.push(e.substring(a,n)),a=n;return a<n.length&&r.push(e.substring(a,n.length)),r}(_,y);let b=[],w={positionedLines:b,text:_.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,i,r,n,a,s,o,l,u,h,c,d){let f=0,p=0,m=0,_="right"===l?1:"left"===l?0:.5,g=!1;for(let e of a){for(let r of e.getSections()){if(r.imageName)continue;let e=i[r.fontStack];if(e&&!(g=void 0!==e.ascender&&void 0!==e.descender))break}if(!g)break}let y=0;for(let o of a){o.trim();let a=o.getMaxScale(),l=(a-1)*24,v={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=v;let x=v.positionedGlyphs,b=0;if(!o.length()){p+=s,++y;continue}let w=0,M=0;for(let s=0;s<o.length();s++){let l=o.getSection(s),m=o.getSectionIndex(s),_=o.getCodePoint(s),y=l.scale,v=null,T=null,L=null,S=24,k=0,D=!(u===cf.horizontal||!c&&!np(_)||c&&(cg[_]||nd.Arabic(_)||nd["Arabic Supplement"](_)||nd["Arabic Extended-A"](_)||nd["Arabic Presentation Forms-A"](_)||nd["Arabic Presentation Forms-B"](_)));if(l.imageName){let i=n[l.imageName];if(!i)continue;L=l.imageName,e.iconsInText=e.iconsInText||!0,T=i.paddedRect;let r=i.displaySize;y=24*y/d,v={width:r[0],height:r[1],left:0,top:-3,advance:D?r[1]:r[0],localGlyph:!1},k=g?-v.height*y:-17+24*a-r[1]*y,S=v.advance;let s=(D?r[0]:r[1])*y-24*a;s>0&&s>b&&(b=s)}else{let e=r[l.fontStack];if(!e)continue;e[_]&&(T=e[_]);let n=i[l.fontStack];if(!n)continue;let s=n.glyphs[_];if(!s)continue;if(v=s.metrics,S=8203!==_?24:0,g){let e=void 0!==n.ascender?Math.abs(n.ascender):0,i=void 0!==n.descender?Math.abs(n.descender):0,r=(e+i)*y;w<r&&(w=r,M=(e-i)/2*y),k=-e*y}else k=-17+(a-y)*24}D?(e.verticalizable=!0,x.push({glyph:_,imageName:L,x:f,y:p+k,vertical:D,scale:y,localGlyph:v.localGlyph,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:T}),f+=S*y+h):(x.push({glyph:_,imageName:L,x:f,y:p+k,vertical:D,scale:y,localGlyph:v.localGlyph,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:T}),f+=v.advance*y+h)}0!==x.length&&(m=Math.max(f-h,m),g?cM(x,_,b,M,s*a/2):cM(x,_,b,0,s/2)),f=0;let T=s*a+b;v.lineOffset=Math.max(b,l),p+=T,++y}let v=p,{horizontalAlign:x,verticalAlign:b}=cw(o);(function(e,i,r,n,a,s){let o=(i-r)*a,l=-s*n;for(let i of e)for(let e of i.positionedGlyphs)e.x+=o,e.y+=l})(e.positionedLines,_,x,b,m,v),e.top+=-b*v,e.bottom=e.top+v,e.left+=-x*m,e.right=e.left+m,e.hasBaseline=g}(w,i,r,n,g,o,l,u,d,h,f,m),!function(e){for(let i of e)if(0!==i.positionedGlyphs.length)return!1;return!0}(b)&&w}let cg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cy={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function cv(e,i,r,n,a,s){if(i.imageName){let e=n[i.imageName];return e?e.displaySize[0]*i.scale*24/s+a:0}{let n=r[i.fontStack],s=n&&n.glyphs[e];return s?s.metrics.advance*i.scale+a:0}}function cx(e,i,r,n){let a=Math.pow(e-i,2);return n?e<i?a/2:2*a:a+Math.abs(r)*r}function cb(e,i,r,n,a,s){let o=null,l=cx(i,r,a,s);for(let e of n){let n=cx(i-e.x,r,a,s)+e.badness;n<=l&&(o=e,l=n)}return{index:e,x:i,priorBreak:o,badness:l}}function cw(e){let i=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:i,verticalAlign:r}}function cM(e,i,r,n,a){if(!(i||r||n||a))return;let s=e.length-1,o=e[s],l=(o.x+o.metrics.advance*o.scale)*i;for(let i=0;i<=s;i++)e[i].x-=l,e[i].y+=r+n+a}function cT(e,i,r,n,a,s){let o,l,u,h,c;let d=e.imagePrimary;if(d.content){let e=d.content,i=d.pixelRatio||1;o=[e[0]/i,e[1]/i,d.displaySize[0]-e[2]/i,d.displaySize[1]-e[3]/i]}let f=i.left*s,p=i.right*s;"width"===r||"both"===r?(c=a[0]+f-n[3],u=a[0]+p+n[1]):u=(c=a[0]+(f+p-d.displaySize[0])/2)+d.displaySize[0];let m=i.top*s,_=i.bottom*s;return"height"===r||"both"===r?(l=a[1]+m-n[0],h=a[1]+_+n[2]):h=(l=a[1]+(m+_-d.displaySize[1])/2)+d.displaySize[1],{imagePrimary:d,imageSecondary:void 0,top:l,right:u,bottom:h,left:c,collisionPadding:o}}class cL extends k{constructor(e,i,r,n,a){super(e,i),this.angle=n,this.z=r,void 0!==a&&(this.segment=a)}clone(){return new cL(this.x,this.y,this.z,this.angle,this.segment)}}function cS(e,i,r,n,a){if(void 0===i.segment)return!0;let s=i,o=i.segment+1,l=0;for(;l>-r/2;){if(--o<0)return!1;l-=e[o].dist(s),s=e[o]}l+=e[o].dist(e[o+1]),o++;let u=[],h=0;for(;l<r/2;){let i=e[o],r=e[o+1];if(!r)return!1;let s=e[o-1].angleTo(i)-i.angleTo(r);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:l,angleDelta:s}),h+=s;l-u[0].distance>n;)h-=u.shift().angleDelta;if(h>a)return!1;o++,l+=i.dist(r)}return!0}function ck(e){let i=0;for(let r=0;r<e.length-1;r++)i+=e[r].dist(e[r+1]);return i}function cD(e,i){return Math.max(e?e.right-e.left:0,i?i.right-i.left:0)}function cE(e,i,r,n,a){let s=[];for(let o=0;o<e.length;o++){let l;let u=e[o];for(let e=0;e<u.length-1;e++){let o=u[e],h=u[e+1];o.x<i&&h.x<i||(o.x<i?o=new k(i,o.y+(i-o.x)/(h.x-o.x)*(h.y-o.y))._round():h.x<i&&(h=new k(i,o.y+(i-o.x)/(h.x-o.x)*(h.y-o.y))._round()),o.y<r&&h.y<r||(o.y<r?o=new k(o.x+(r-o.y)/(h.y-o.y)*(h.x-o.x),r)._round():h.y<r&&(h=new k(o.x+(r-o.y)/(h.y-o.y)*(h.x-o.x),r)._round()),o.x>=n&&h.x>=n||(o.x>=n?o=new k(n,o.y+(n-o.x)/(h.x-o.x)*(h.y-o.y))._round():h.x>=n&&(h=new k(n,o.y+(n-o.x)/(h.x-o.x)*(h.y-o.y))._round()),o.y>=a&&h.y>=a||(o.y>=a?o=new k(o.x+(a-o.y)/(h.y-o.y)*(h.x-o.x),a)._round():h.y>=a&&(h=new k(o.x+(a-o.y)/(h.y-o.y)*(h.x-o.x),a)._round()),l&&o.equals(l[l.length-1])||(l=[o],s.push(l)),l.push(h)))))}}return s}function cA(e){let i=0,r=0;for(let n of e)i+=n.w*n.h,r=Math.max(r,n.w);e.sort((e,i)=>i.h-e.h);let n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),r),h:1/0}],a=0,s=0;for(let i of e)for(let e=n.length-1;e>=0;e--){let r=n[e];if(!(i.w>r.w||i.h>r.h)){if(i.x=r.x,i.y=r.y,s=Math.max(s,i.y+i.h),a=Math.max(a,i.x+i.w),i.w===r.w&&i.h===r.h){let i=n.pop();e<n.length&&(n[e]=i)}else i.h===r.h?(r.x+=i.w,r.w-=i.w):(i.w===r.w||n.push({x:r.x+i.w,y:r.y,w:r.w-i.w,h:i.h}),r.y+=i.h,r.h-=i.h);break}}return{w:a,h:s,fill:i/(a*s)||0}}no(cL,"Anchor");class cP{constructor(e,{pixelRatio:i,version:r,stretchX:n,stretchY:a,content:s}){this.paddedRect=e,this.pixelRatio=i,this.stretchX=n,this.stretchY=a,this.content=s,this.version=r}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class cC{constructor(e,i){let r={},n={};this.haveRenderCallbacks=[];let a=[];this.addImages(e,r,a),this.addImages(i,n,a);let{w:s,h:o}=cA(a),l=new uF({width:s||1,height:o||1});for(let i in e){let n=e[i],a=r[i].paddedRect;uF.copy(n.data,l,{x:0,y:0},{x:a.x+1,y:a.y+1},n.data,n.sdf)}for(let e in i){let r=i[e],a=n[e].paddedRect,s=a.x+1,o=a.y+1,u=r.data.width,h=r.data.height;uF.copy(r.data,l,{x:0,y:0},{x:s,y:o},r.data),uF.copy(r.data,l,{x:0,y:h-1},{x:s,y:o-1},{width:u,height:1}),uF.copy(r.data,l,{x:0,y:0},{x:s,y:o+h},{width:u,height:1}),uF.copy(r.data,l,{x:u-1,y:0},{x:s-1,y:o},{width:1,height:h}),uF.copy(r.data,l,{x:0,y:0},{x:s+u,y:o},{width:1,height:h})}this.image=l,this.iconPositions=r,this.patternPositions=n}addImages(e,i,r){for(let n in e){let a=e[n],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};r.push(s),i[n]=new cP(s,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,i,r){for(let n in this.haveRenderCallbacks=this.haveRenderCallbacks.filter(i=>e.hasImage(i,r)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,r),e.getUpdatedImages(r))this.patchUpdatedImage(this.iconPositions[n],e.getImage(n,r),i),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n,r),i)}patchUpdatedImage(e,i,r){if(!e||!i||e.version===i.version)return;e.version=i.version;let[n,a]=e.tl,s=!!Object.keys(this.patternPositions).length;r.update(i.data,{useMipmap:s},{x:n,y:a})}}function cI(e,i,r,n,a,s,o,l,u){for(let h=i;h<i+n;h++)cO(e,r*s+h,s,a,o,l,u);for(let h=r;h<r+a;h++)cO(e,h*s+i,1,n,o,l,u)}function cO(e,i,r,n,a,s,o){s[0]=0,o[0]=-1e20,o[1]=1e20,a[0]=e[i];for(let l=1,u=0,h=0;l<n;l++){a[l]=e[i+l*r];let n=l*l;do{let e=s[u];h=(a[l]-a[e]+n-e*e)/(l-e)/2}while(h<=o[u]&&--u>-1)s[++u]=l,o[u]=h,o[u+1]=1e20}for(let l=0,u=0;l<n;l++){for(;o[u+1]<l;)u++;let n=s[u],h=l-n;e[i+l*r]=a[n]+h*h}}no(cP,"ImagePosition"),no(cC,"ImageAtlas");let cz={none:0,ideographs:1,all:2};class cR{constructor(e,i,r){this.requestManager=e,this.localGlyphMode=i,this.localFontFamily=r,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,i){this.urls[i]=e}getGlyphs(e,i,r){let n=[],a=this.urls[i]||m.GLYPHS_URL;for(let i in e)for(let r of e[i])n.push({stack:i,id:r});Y(n,({stack:e,id:i},r)=>{let n=this.entries[e];n||(n=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let s=n.glyphs[i];if(void 0!==s)return void r(null,{stack:e,id:i,glyph:s});if(s=this._tinySDF(n,e,i))return n.glyphs[i]=s,void r(null,{stack:e,id:i,glyph:s});let o=Math.floor(i/256);if(256*o>65535)return void r(Error("glyphs > 65535 not supported"));if(n.ranges[o])return void r(null,{stack:e,id:i,glyph:s});let l=n.requests[o];l||(l=n.requests[o]=[],cR.loadGlyphRange(e,o,a,this.requestManager,(e,i)=>{if(i){for(let e in n.ascender=i.ascender,n.descender=i.descender,i.glyphs)this._doesCharSupportLocalGlyph(+e)||(n.glyphs[+e]=i.glyphs[+e]);n.ranges[o]=!0}for(let r of l)r(e,i);delete n.requests[o]})),l.push((n,a)=>{n?r(n):a&&r(null,{stack:e,id:i,glyph:a.glyphs[i]||null})})},(e,i)=>{if(e)r(e);else if(i){let e={};for(let{stack:r,id:n,glyph:a}of i)void 0===e[r]&&(e[r]={}),void 0===e[r].glyphs&&(e[r].glyphs={}),e[r].glyphs[n]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics},e[r].ascender=this.entries[r].ascender,e[r].descender=this.entries[r].descender;r(null,e)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==cz.none&&(this.localGlyphMode===cz.all?!!this.localFontFamily:!!this.localFontFamily&&(nd["CJK Unified Ideographs"](e)||nd["Hangul Syllables"](e)||nd.Hiragana(e)||nd.Katakana(e)||nd["CJK Symbols and Punctuation"](e)||nd["CJK Unified Ideographs Extension A"](e)||nd["CJK Unified Ideographs Extension B"](e)))}_tinySDF(e,i,r){let n=this.localFontFamily;if(!n||!this._doesCharSupportLocalGlyph(r))return;let a=e.tinySDF;if(!a){let r="400";/bold/i.test(i)?r="900":/medium/i.test(i)?r="500":/light/i.test(i)&&(r="200"),(a=e.tinySDF=new cR.TinySDF({fontFamily:n,fontWeight:r,fontSize:48,buffer:6,radius:16})).fontWeight=r}if(this.localGlyphs[a.fontWeight][r])return this.localGlyphs[a.fontWeight][r];let s=String.fromCodePoint(r),{data:o,width:l,height:u,glyphWidth:h,glyphHeight:c,glyphLeft:d,glyphTop:f,glyphAdvance:p}=a.draw(s);return this.localGlyphs[a.fontWeight][r]={id:r,bitmap:new uY({width:l,height:u},o),metrics:{width:h/2,height:c/2,left:d/2,top:f/2-27,advance:p/2,localGlyph:!0}}}}function cY(e,i,r,n){let a=[],s=e.imagePrimary,o=s.pixelRatio,l=s.paddedRect.w-2,u=s.paddedRect.h-2,h=e.right-e.left,c=e.bottom-e.top,d=s.stretchX||[[0,l]],f=s.stretchY||[[0,u]],p=(e,i)=>e+i[1]-i[0],m=d.reduce(p,0),_=f.reduce(p,0),g=l-m,y=u-_,v=0,x=m,b=0,w=_,M=0,T=g,L=0,S=y;if(s.content&&n){let e=s.content;v=cF(d,0,e[0]),b=cF(f,0,e[1]),x=cF(d,e[0],e[2]),w=cF(f,e[1],e[3]),M=e[0]-v,L=e[1]-b,T=e[2]-e[0]-x,S=e[3]-e[1]-w}let D=(n,a,l,u)=>{var d,f,p,g;let y=(n.stretch-v)/x*h+e.left,D=(d=n.fixed-M,d-T*n.stretch/m),E=(a.stretch-b)/w*c+e.top,A=(f=a.fixed-L,f-S*a.stretch/_),P=(l.stretch-v)/x*h+e.left,C=(p=l.fixed-M,p-T*l.stretch/m),I=(u.stretch-b)/w*c+e.top,O=(g=u.fixed-L,g-S*u.stretch/_),z=new k(y,E),R=new k(P,E),Y=new k(P,I),F=new k(y,I),j=new k(D/o,A/o),B=new k(C/o,O/o),N=i*Math.PI/180;if(N){let e=Math.sin(N),i=Math.cos(N),r=[i,-e,e,i];z._matMult(r),R._matMult(r),F._matMult(r),Y._matMult(r)}let H=n.stretch+n.fixed,V=l.stretch+l.fixed,U=a.stretch+a.fixed,$=u.stretch+u.fixed,W=e.imageSecondary;return{tl:z,tr:R,bl:F,br:Y,texPrimary:{x:s.paddedRect.x+1+H,y:s.paddedRect.y+1+U,w:V-H,h:$-U},texSecondary:W?{x:W.paddedRect.x+1+H,y:W.paddedRect.y+1+U,w:V-H,h:$-U}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:j,pixelOffsetBR:B,minFontScaleX:T/o/h,minFontScaleY:S/o/c,isSDF:r}};if(n&&(s.stretchX||s.stretchY)){let e=cj(d,g,m),i=cj(f,y,_);for(let r=0;r<e.length-1;r++){let n=e[r],s=e[r+1];for(let e=0;e<i.length-1;e++)a.push(D(n,i[e],s,i[e+1]))}}else a.push(D({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return a}function cF(e,i,r){let n=0;for(let a of e)n+=Math.max(i,Math.min(r,a[1]))-Math.max(i,Math.min(r,a[0]));return n}function cj(e,i,r){let n=[{fixed:-1,stretch:0}];for(let[i,r]of e){let e=n[n.length-1];n.push({fixed:i-e.stretch,stretch:e.stretch}),n.push({fixed:i-e.stretch,stretch:e.stretch+(r-i)})}return n.push({fixed:i+1,stretch:r}),n}function cB(e,i){return i.max-e.max}cR.loadGlyphRange=function(e,i,r,n,a){let s=256*i;ey(n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",`${s}-${s+255}`),ep.Glyphs),(e,i)=>{if(e)a(e);else if(i){let e={},r=new hN(i).readFields(ch,{});for(let i of r.glyphs)e[i.id]=i;a(null,{glyphs:e,ascender:r.ascender,descender:r.descender})}})},cR.TinySDF=class{constructor({fontSize:e=24,buffer:i=3,radius:r=8,cutoff:n=.25,fontFamily:a="sans-serif",fontWeight:s="normal",fontStyle:o="normal"}={}){this.buffer=i,this.cutoff=n,this.radius=r;let l=this.size=e+4*i,u=this._createCanvas(l),h=this.ctx=u.getContext("2d",{willReadFrequently:!0});h.font=`${o} ${s} ${e}px ${a}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){let i=document.createElement("canvas");return i.width=i.height=e,i}draw(e){let{width:i,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:a,actualBoundingBoxRight:s}=this.ctx.measureText(e),o=Math.ceil(r),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(s-a))),u=Math.min(this.size-this.buffer,o+Math.ceil(n)),h=l+2*this.buffer,c=u+2*this.buffer,d=Math.max(h*c,0),f=new Uint8ClampedArray(d),p={data:f,width:h,height:c,glyphWidth:l,glyphHeight:u,glyphTop:o,glyphLeft:0,glyphAdvance:i};if(0===l||0===u)return p;let{ctx:m,buffer:_,gridInner:g,gridOuter:y}=this;m.clearRect(_,_,l,u),m.fillText(e,_,_+o);let v=m.getImageData(_,_,l,u);y.fill(1e20,0,d),g.fill(0,0,d);for(let e=0;e<u;e++)for(let i=0;i<l;i++){let r=v.data[4*(e*l+i)+3]/255;if(0===r)continue;let n=(e+_)*h+i+_;if(1===r)y[n]=0,g[n]=1e20;else{let e=.5-r;y[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}cI(y,0,0,h,c,h,this.f,this.v,this.z),cI(g,_,_,l,u,h,this.f,this.v,this.z);for(let e=0;e<d;e++){let i=Math.sqrt(y[e])-Math.sqrt(g[e]);f[e]=Math.round(255-255*(i/this.radius+this.cutoff))}return p}};class cN{constructor(e,i,r,n){this.p=new k(e,i),this.h=r,this.d=function(e,i){let r=!1,n=1/0;for(let a=0;a<i.length;a++){let s=i[a];for(let i=0,a=s.length,o=a-1;i<a;o=i++){let a=s[i],l=s[o];a.y>e.y!=l.y>e.y&&e.x<(l.x-a.x)*(e.y-a.y)/(l.y-a.y)+a.x&&(r=!r),n=Math.min(n,u_(e,a,l))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}}let cH=Number.POSITIVE_INFINITY,cV=Math.sqrt(2);function cU(e,[i,r]){let n=0,a=0;if(r===cH){i<0&&(i=0);let r=i/cV;switch(e){case"top-right":case"top-left":a=r-7;break;case"bottom-right":case"bottom-left":a=-r+7;break;case"bottom":a=-i+7;break;case"top":a=i-7}switch(e){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=i;break;case"right":n=-i}}else{switch(i=Math.abs(i),r=Math.abs(r),e){case"top-right":case"top-left":case"top":a=r-7;break;case"bottom-right":case"bottom-left":case"bottom":a=-r+7}switch(e){case"top-right":case"bottom-right":case"right":n=-i;break;case"top-left":case"bottom-left":case"left":n=i}}return[n,a]}function c$(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cW(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y){let v=function(e,i,r,n,a,s,o,l){let u=[];if(0===i.positionedLines.length)return u;let h=n.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,c=function(e){let i=e[0],r=e[1],n=i*r;return n>0?[i,-r]:n<0?[-i,r]:0===i?[r,i]:[r,-i]}(r),d=Math.abs(i.top-i.bottom);for(let e of i.positionedLines)d-=e.lineOffset;let f=i.positionedLines.length,p=d/f,m=i.top-r[1];for(let e=0;e<f;++e){let n=i.positionedLines[e];for(let s of(m=function(e,i,r,n){let a=i+e.positionedLines[n].lineOffset;return 0===n?r+a/2:r+(a+(i+e.positionedLines[n-1].lineOffset))/2}(i,p,m,e),n.positionedGlyphs)){let e,n,d,f;if(!s.rect)continue;let p=s.rect||{},_=4,g=!0,y=1,v=0;if(s.imageName){let e=o[s.imageName];if(!e)continue;if(e.sdf){J("SDF images are not supported in formatted text and will be ignored.");continue}g=!1,_=1/(y=e.pixelRatio)}let x=(a||l)&&s.vertical,b=s.metrics.advance*s.scale/2,w=s.metrics,M=s.rect;if(null===M)continue;l&&i.verticalizable&&(v=s.imageName?b-s.metrics.width*s.scale/2:0);let T=a?[s.x+b,s.y]:[0,0],L=[0,0],S=[0,0],D=!1;a||(x?(S=[s.x+b+c[0],s.y+c[1]-v],D=!0):L=[s.x+b+r[0],s.y+r[1]-v]);let E=M.w*s.scale/(y*(s.localGlyph?2:1)),A=M.h*s.scale/(y*(s.localGlyph?2:1));if(x){let i=s.y-m,r=new k(-b,b-i),a=-Math.PI/2,o=new k(...S);(e=new k(-b+L[0],L[1]))._rotateAround(a,r)._add(o),e.x+=-i+b,e.y-=(w.left-_)*s.scale;let l=s.imageName?w.advance*s.scale:24*s.scale,u=String.fromCodePoint(s.glyph);""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u?e.x+=(1-_)*s.scale:""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u||""===u?e.x+=l-w.height*s.scale+(-_-1)*s.scale:e.x+=s.imageName||w.width+2*_===M.w&&w.height+2*_===M.h?(l-A)/2:(l-(w.height+2*_)*s.scale)/2,n=new k(e.x,e.y-E),d=new k(e.x+A,e.y),f=new k(e.x+A,e.y-E)}else{let i=(w.left-_)*s.scale-b+L[0],r=(-w.top-_)*s.scale+L[1],a=i+E,o=r+A;e=new k(i,r),n=new k(a,r),d=new k(i,o),f=new k(a,o)}if(h){let i;i=a?new k(0,0):D?new k(c[0],c[1]):new k(r[0],r[1]),e._rotateAround(h,i),n._rotateAround(h,i),d._rotateAround(h,i),f._rotateAround(h,i)}let P=new k(0,0),C=new k(0,0);u.push({tl:e,tr:n,bl:d,br:f,texPrimary:p,texSecondary:void 0,writingMode:i.writingMode,glyphOffset:T,sectionIndex:s.sectionIndex,isSDF:g,pixelOffsetTL:P,pixelOffsetBR:C,minFontScaleX:0,minFontScaleY:0})}}return u}(0,n,u,s,o,l,a,e.allowVerticalPlacement),x=e.textSizeData,b=null;for(let n of("source"===x.kind?(b=[128*s.layout.get("text-size").evaluate(l,{},g)])[0]>32640&&J(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`):"composite"===x.kind&&((b=[128*m.compositeTextSizes[0].evaluate(l,{},g),128*m.compositeTextSizes[1].evaluate(l,{},g)])[0]>32640||b[1]>32640)&&J(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`),e.addSymbols(e.text,v,b,u,o,l,c,i,r,h.lineStartIndex,h.lineLength,p,_,g,y,!1),d))f[n]=e.text.placedSymbolArray.length-1;return 4*v.length}function cG(e){for(let i in e)return e[i];return null}function cq(e,i,r,n,a,s,o,l,u,h){let c=o.top,d=o.bottom,f=o.left,p=o.right,m=o.collisionPadding;if(m&&(f-=m[0],c-=m[1],p+=m[2],d+=m[3]),u){let e=new k(f,c),i=new k(p,c),r=new k(f,d),n=new k(p,d),a=u*D,s=new k(0,0);h&&(s=new k(h[0],h[1])),e._rotateAround(a,s),i._rotateAround(a,s),r._rotateAround(a,s),n._rotateAround(a,s),f=Math.min(e.x,i.x,r.x,n.x),p=Math.max(e.x,i.x,r.x,n.x),c=Math.min(e.y,i.y,r.y,n.y),d=Math.max(e.y,i.y,r.y,n.y)}return e.emplaceBack(i.x,i.y,i.z,r.x,r.y,f,c,p,d,l,n,a,s),e.length-1}function cZ(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);let i=e.bottom-e.top;return i>0?Math.max(10,i):null}function cX(e,i){let r=e.fovAboveCenter,n=e.elevation?e.elevation.getMinElevationBelowMSL()*i:0,a=(e._camera.position[2]*e.worldSize-n)/Math.cos(e._pitch),s=Math.sin(r)*a/Math.sin(Math.max(Math.PI/2-e._pitch-r,.01));return Math.min(1.01*(Math.sin(e._pitch)*s+a),1/e._horizonShift*a)}function cJ(e,i){if(!i.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:i};let r=Math.pow(2,-e.z),n=e.x*r,a=(e.x+1)*r,s=e.y*r,o=(e.y+1)*r,l=l8(n),u=l8(a),h=l7(s),c=l7(o),d=i.project(l,h),f=i.project(u,h),p=i.project(u,c),m=i.project(l,c),_=Math.min(d.x,f.x,p.x,m.x),g=Math.min(d.y,f.y,p.y,m.y),y=Math.max(d.x,f.x,p.x,m.x),v=Math.max(d.y,f.y,p.y,m.y),x=r/16;function b(e,r,n,a,s,o){let l=(n+s)/2,u=(a+o)/2,h=i.project(l8(l),l7(u)),c=Math.max(0,_-h.x,g-h.y,h.x-y,h.y-v);_=Math.min(_,h.x),y=Math.max(y,h.x),g=Math.min(g,h.y),v=Math.max(v,h.y),c>x&&(b(e,h,n,a,l,u),b(h,r,l,u,s,o))}b(d,f,n,s,a,s),b(f,p,a,s,a,o),b(p,m,a,o,n,o),b(m,d,n,o,n,s),_-=x,g-=x,y+=x,v+=x;let w=1/Math.max(y-_,v-g);return{scale:w,x:_*w,y:g*w,x2:y*w,y2:v*w,projection:i}}function cK(e,{x:i,y:r},n=0){return new k(((i-n)*e.scale-e.x)*8192,(r*e.scale-e.y)*8192)}let cQ=e.m.identity(new Float32Array(16));class c0{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,i){return{x:0,y:0,z:0}}unproject(e,i){return new l3(0,0)}projectTilePoint(e,i,r){return{x:e,y:i,z:0}}locationPoint(e,i,r=!0){return e._coordinatePoint(e.locationCoordinate(i),r)}pixelsPerMeter(e,i){return 1/l4(e)*i}pixelSpaceConversion(e,i,r){return 1}farthestPixelDistance(e){return cX(e,e.pixelsPerMeter)}pointCoordinate(e,i,r,n){let a=new k(i,Math.max(e.horizonLineFromTop(!1),r));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,n))}pointCoordinate3D(e,i,r){let n=new k(i,r);if(e.elevation)return e.elevation.pointCoordinate(n);{let i=this.pointCoordinate(e,n.x,n.y,0);return[i.x,i.y,i.z]}}isPointAboveHorizon(e,i){if(e.elevation)return!this.pointCoordinate3D(e,i.x,i.y);let r=e.horizonLineFromTop();return i.y<r}createInversionMatrix(e,i){return cQ}createTileMatrix(i,r,n){let a,s,o;let l=n.canonical,u=e.m.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){let h=cJ(l,this);a=1,s=h.x+n.wrap*h.scale,o=h.y,e.m.scale(u,u,[a/h.scale,a/h.scale,i.pixelsPerMeter/r])}else a=r/i.zoomScale(l.z),s=(l.x+Math.pow(2,l.z)*n.wrap)*a,o=l.y*a;return e.m.translate(u,u,[s,o,0]),e.m.scale(u,u,[a/8192,a/8192,1]),u}upVector(e,i,r){return[0,0,1]}upVectorScale(e,i,r){return{metersToTile:1}}}class c1 extends c0{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];let[i,r]=this.parallels=e.parallels||[29.5,45.5],n=Math.sin(i*D);this.n=(n+Math.sin(r*D))/2,this.c=1+n*(2*this.n-n),this.r0=Math.sqrt(this.c)/this.n}project(e,i){let{n:r,c:n,r0:a}=this,s=(e-this.center[0])*D,o=Math.sqrt(n-2*r*Math.sin(i*D))/r;return{x:o*Math.sin(s*r),y:o*Math.cos(s*r)-a,z:0}}unproject(e,i){let{n:r,c:n,r0:a}=this,s=a+i,o=Math.atan2(e,Math.abs(s))*Math.sign(s);s*r<0&&(o-=Math.PI*Math.sign(e)*Math.sign(s));let l=this.center[0]*D*r,u=O((o=R(o,-Math.PI-l,Math.PI-l))/r*E+this.center[0],-180,180),h=Math.asin(O((n-(e*e+s*s)*r*r)/(2*r),-1,1));return new l3(u,O(h*E,-l9,l9))}}let c2=Math.sqrt(3)/2;class c3 extends c0{project(e,i){i=i/180*Math.PI,e=e/180*Math.PI;let r=Math.asin(c2*Math.sin(i)),n=r*r,a=n*n*n;return{x:.5*(e*Math.cos(r)/(c2*(1.340264+-.24331799999999998*n+a*(.0062510000000000005+.034164*n)))/Math.PI+.5),y:1-.5*(r*(1.340264+-.081106*n+a*(893e-6+.003796*n))/Math.PI+1),z:0}}unproject(e,i){e=(2*e-.5)*Math.PI;let r=i=(2*(1-i)-1)*Math.PI,n=r*r,a=n*n*n;for(let e,s,o=0;o<12&&(s=r*(1.340264+-.081106*n+a*(893e-6+.003796*n))-i,a=(n=(r=O(r-(e=s/(1.340264+-.24331799999999998*n+a*(.0062510000000000005+.034164*n))),-Math.PI/3,Math.PI/3))*r)*n*n,!(1e-12>Math.abs(e)));++o);let s=c2*e*(1.340264+-.24331799999999998*n+a*(.0062510000000000005+.034164*n))/Math.cos(r),o=Math.asin(Math.sin(r)/c2);return new l3(O(180*s/Math.PI,-180,180),O(180*o/Math.PI,-l9,l9))}}class c4 extends c0{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,i){return{x:.5+e/360,y:.5-i/360,z:0}}unproject(e,i){return new l3(360*(e-.5),O(360*(.5-i),-l9,l9))}}let c5=Math.PI/2;function c6(e){return Math.tan((c5+e)/2)}class c8 extends c0{constructor(e){super(e),this.center=e.center||[0,30];let[i,r]=this.parallels=e.parallels||[30,30],n=i*D,a=r*D;this.southernCenter=n+a<0,this.southernCenter&&(n=-n,a=-a);let s=Math.cos(n),o=c6(n);this.n=n===a?Math.sin(n):Math.log(s/Math.cos(a))/Math.log(c6(a)/o),this.f=s*Math.pow(c6(n),this.n)/this.n}project(e,i){i*=D,this.southernCenter&&(i=-i),e=(e-this.center[0])*D;let{n:r,f:n}=this;n>0?i<-c5+1e-6&&(i=-c5+1e-6):i>c5-1e-6&&(i=c5-1e-6);let a=n/Math.pow(c6(i),r),s=a*Math.sin(r*e),o=n-a*Math.cos(r*e);return s=.5*(s/Math.PI+.5),o=.5*(o/Math.PI+.5),{x:s,y:this.southernCenter?o:1-o,z:0}}unproject(e,i){e=(2*e-.5)*Math.PI,this.southernCenter&&(i=1-i);let{n:r,f:n}=this,a=n-(i=(2*(1-i)-.5)*Math.PI),s=Math.sign(a),o=Math.sign(r)*Math.sqrt(e*e+a*a),l=Math.atan2(e,Math.abs(a))*s;a*r<0&&(l-=Math.PI*Math.sign(e)*s);let u=O(l/r*E+this.center[0],-180,180),h=O((2*Math.atan(Math.pow(n/o,1/r))-c5)*E,-l9,l9);return new l3(u,this.southernCenter?-h:h)}}class c7 extends c0{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,i){return{x:l5(e),y:l6(i),z:0}}unproject(e,i){return new l3(l8(e),l7(i))}}let c9=l9*D;class de extends c0{project(e,i){let r=(i*=D)*i,n=r*r;return{x:.5*((e*=D)*(.8707-.131979*r+n*(n*(.003971*r-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(i*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))/Math.PI+1),z:0}}unproject(e,i){e=(2*e-.5)*Math.PI;let r=i=(2*(1-i)-1)*Math.PI,n=25,a=0,s=r*r;do{let e=(s=r*r)*s;a=(r*(1.007226+s*(.015085+e*(.028874*s-.044475-.005916*e)))-i)/(1.007226+s*(.045255+e*(.259866*s-.311325-.005916*11*e))),r=O(r-a,-c9,c9)}while(Math.abs(a)>1e-6&&--n>0)return new l3(O(e/(.8707+(s=r*r)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979))*E,-180,180),r*E)}}let dt=l9*D;class di extends c0{project(e,i){i*=D,e*=D;let r=Math.cos(i),n=Math.acos(r*Math.cos(e/2)),a=Math.sin(n)/n;return{x:.5*((.5*(2/Math.PI*e+2*r*Math.sin(e/2)/a)||0)/Math.PI+.5),y:1-.5*((.5*(i+Math.sin(i)/a)||0)/Math.PI+1),z:0}}unproject(e,i){let r=e=(2*e-.5)*Math.PI,n=i=(2*(1-i)-1)*Math.PI,a=25,s=0,o=0;do{let a=Math.cos(n),l=Math.sin(n),u=2*l*a,h=l*l,c=a*a,d=Math.cos(r/2),f=Math.sin(r/2),p=2*d*f,m=f*f,_=1-c*d*d,g=_?1/_:0,y=_?Math.acos(a*d)*Math.sqrt(1/_):0,v=.5*(2*y*a*f+2*r/Math.PI)-e,x=.5*(y*l+n)-i,b=.5*g*(c*m+y*a*d*h)+1/Math.PI,w=g*(p*u/4-y*l*f),M=.125*g*(u*f-y*l*c*p),T=.5*g*(h*d+y*m*a)+.5,L=w*M-T*b;s=(x*w-v*T)/L,o=(v*M-x*b)/L,r=O(r-s,-Math.PI,Math.PI),n=O(n-o,-dt,dt)}while((Math.abs(s)>1e-6||Math.abs(o)>1e-6)&&--a>0)return new l3(r*E,n*E)}}class dr extends c0{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(this.parallels[0]*D)),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,i){let{scale:r,cosPhi:n}=this;return{x:e*D*n*r+.5,y:-Math.sin(i*D)/n*r+.5,z:0}}unproject(e,i){let{scale:r,cosPhi:n}=this,a=O((e-.5)/r*E/n,-180,180),s=Math.asin(O(-(i-.5)/r*n,-1,1));return new l3(a,O(s*E,-l9,l9))}}class dn extends c7{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,r,n){let a=lB(i,r,n),s=lV(lP(n));return e.v.transformMat4(a,a,s),{x:a[0],y:a[1],z:a[2]}}locationPoint(i,r){let n=lj(r.lat,r.lng),a=e.v.normalize([],n),s=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(r),i._centerAltitude):i._centerAltitude,o=1/l4(0)*8192*s;e.v.scaleAndAdd(n,n,a,o);let l=e.m.identity(new Float64Array(16));return e.m.multiply(l,i.pixelMatrix,i.globeMatrix),e.v.transformMat4(n,n,l),new k(n[0],n[1])}pixelsPerMeter(e,i){return 1/l4(0)*i}pixelSpaceConversion(e,i,r){let n=1/l4(e)*i,a=iS(1/l4(45)*i,n,r);return this.pixelsPerMeter(e,i)/a}createTileMatrix(i,r,n){let a=lU(lP(n.canonical));return e.m.multiply(new Float64Array(16),i.globeMatrix,a)}createInversionMatrix(i,r){let{center:n}=i,a=lV(lP(r));return e.m.rotateY(a,a,n.lng*D),e.m.rotateX(a,a,n.lat*D),e.m.scale(a,a,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(a)}pointCoordinate(e,i,r,n){return lD(e,i,r,!0)||new un(0,0)}pointCoordinate3D(e,i,r){let n=this.pointCoordinate(e,i,r,0);return[n.x,n.y,n.z]}isPointAboveHorizon(e,i){return!lD(e,i.x,i.y,!1)}farthestPixelDistance(i){let r=function(i,r){let n;let a=i.cameraToCenterDistance,s=i._centerAltitude*r,o=i._camera,l=i._camera.forward(),u=e.v.add([],e.v.scale([],l,-a),[0,0,s]),h=i.worldSize/(2*Math.PI),c=[0,0,-h],d=i.width/i.height,f=Math.tan(i.fovAboveCenter),p=e.v.scale([],o.up(),f),m=e.v.scale([],o.right(),f*d),_=e.v.normalize([],e.v.add([],e.v.add([],l,p),m)),g=[];if(new lm(u,_).closestPointOnSphere(c,h,g)){let r=e.v.add([],g,c),a=e.v.sub([],r,u);n=Math.cos(i.fovAboveCenter)*e.v.length(a)}else{let i=e.v.sub([],u,c),r=e.v.sub([],c,u);e.v.normalize(r,r);let a=e.v.length(i)-h,s=Math.acos((n=Math.sqrt(a*(a+2*h)))/(h+a))-Math.acos(e.v.dot(l,r));n*=Math.cos(s)}return 1.01*n}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),n=lq(i.zoom);return n>0?iS(r,cX(i,1/l4(i.center.lat)*i.worldSize)+i.worldSize/(2*Math.PI)*(1-Math.cos(Math.max(i.width,i.height)/i.worldSize*Math.PI)),Math.pow(n,10)):r}upVector(e,i,r){return lB(i,r,e,1)}upVectorScale(e){return{metersToTile:lk(lN(lP(e)))}}}function da(e){let i=e.parallels,r=!!i&&.01>Math.abs(i[0]+i[1]);switch(e.name){case"mercator":return new c7(e);case"equirectangular":return new c4(e);case"naturalEarth":return new de(e);case"equalEarth":return new c3(e);case"winkelTripel":return new di(e);case"albers":return r?new dr(e):new c1(e);case"lambertConformalConic":return r?new dr(e):new c8(e);case"globe":return new dn(e)}throw Error(`Invalid projection name: ${e.name}`)}let ds=new nN({"symbol-placement":new nF(eK.layout_symbol["symbol-placement"]),"symbol-spacing":new nF(eK.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nF(eK.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nj(eK.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nF(eK.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new nF(eK.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new nF(eK.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new nF(eK.layout_symbol["icon-ignore-placement"]),"icon-optional":new nF(eK.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nF(eK.layout_symbol["icon-rotation-alignment"]),"icon-size":new nj(eK.layout_symbol["icon-size"]),"icon-text-fit":new nj(eK.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nj(eK.layout_symbol["icon-text-fit-padding"]),"icon-image":new nj(eK.layout_symbol["icon-image"]),"icon-rotate":new nj(eK.layout_symbol["icon-rotate"]),"icon-padding":new nF(eK.layout_symbol["icon-padding"]),"icon-keep-upright":new nF(eK.layout_symbol["icon-keep-upright"]),"icon-offset":new nj(eK.layout_symbol["icon-offset"]),"icon-anchor":new nj(eK.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nF(eK.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nF(eK.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nF(eK.layout_symbol["text-rotation-alignment"]),"text-field":new nj(eK.layout_symbol["text-field"]),"text-font":new nj(eK.layout_symbol["text-font"]),"text-size":new nj(eK.layout_symbol["text-size"]),"text-max-width":new nj(eK.layout_symbol["text-max-width"]),"text-line-height":new nj(eK.layout_symbol["text-line-height"]),"text-letter-spacing":new nj(eK.layout_symbol["text-letter-spacing"]),"text-justify":new nj(eK.layout_symbol["text-justify"]),"text-radial-offset":new nj(eK.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nF(eK.layout_symbol["text-variable-anchor"]),"text-anchor":new nj(eK.layout_symbol["text-anchor"]),"text-max-angle":new nF(eK.layout_symbol["text-max-angle"]),"text-writing-mode":new nF(eK.layout_symbol["text-writing-mode"]),"text-rotate":new nj(eK.layout_symbol["text-rotate"]),"text-padding":new nF(eK.layout_symbol["text-padding"]),"text-keep-upright":new nF(eK.layout_symbol["text-keep-upright"]),"text-transform":new nj(eK.layout_symbol["text-transform"]),"text-offset":new nj(eK.layout_symbol["text-offset"]),"text-allow-overlap":new nF(eK.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new nF(eK.layout_symbol["text-ignore-placement"]),"text-optional":new nF(eK.layout_symbol["text-optional"]),visibility:new nF(eK.layout_symbol.visibility)});var dl={paint:new nN({"icon-opacity":new nj(eK.paint_symbol["icon-opacity"]),"icon-emissive-strength":new nj(eK.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new nj(eK.paint_symbol["text-emissive-strength"]),"icon-color":new nj(eK.paint_symbol["icon-color"]),"icon-halo-color":new nj(eK.paint_symbol["icon-halo-color"]),"icon-halo-width":new nj(eK.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nj(eK.paint_symbol["icon-halo-blur"]),"icon-translate":new nF(eK.paint_symbol["icon-translate"]),"icon-translate-anchor":new nF(eK.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new nj(eK.paint_symbol["icon-image-cross-fade"]),"text-opacity":new nj(eK.paint_symbol["text-opacity"]),"text-color":new nj(eK.paint_symbol["text-color"],{runtimeType:te,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new nj(eK.paint_symbol["text-halo-color"]),"text-halo-width":new nj(eK.paint_symbol["text-halo-width"]),"text-halo-blur":new nj(eK.paint_symbol["text-halo-blur"]),"text-translate":new nF(eK.paint_symbol["text-translate"]),"text-translate-anchor":new nF(eK.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new nF(eK.paint_symbol["icon-color-saturation"])}),layout:ds};class du{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:e6,this.defaultValue=e}evaluate(e){if(e.formattedSection){let i=this.defaultValue.property.overrides;if(i&&i.hasOverride(e.formattedSection))return i.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}no(du,"FormatSectionOverride",{omit:["defaultValue"]});class dh extends nU{constructor(e,i,r){super(e,dl,i,r)}recalculate(e,i){super.recalculate(e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));let r=this.layout.get("text-writing-mode");if(r){let e=[];for(let i of r)0>e.indexOf(i)&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,i,r,n){var a;let s=this.layout.get(e).evaluate(i,{},r,n),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||rL(o.value)||!s?s:(a=i.properties,s.replace(/{([^{}]+)}/g,(e,i)=>i in a?String(a[i]):""))}createBucket(e){return new dx(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(let e of dl.paint.overridableProperties){if(!dh.hasPaintOverride(this.layout,e))continue;let i=this.paint.get(e),r=new rT(new du(i),i.property.specification,this.scope,this.options),n=null;n="constant"===i.value.kind||"source"===i.value.kind?new rk("source",r):new rD("composite",r,i.value.zoomStops,i.value._interpolationType),this.paint._values[e]=new nR(i.property,n,i.parameters)}}_handleOverridablePaintPropertyUpdate(e,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven())&&dh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,i){let r=e.get("text-field"),n=dl.paint.properties[i],a=!1,s=e=>{for(let i of e)if(n.overrides&&n.overrides.hasOverride(i))return void(a=!0)};if("constant"===r.value.kind&&r.value.value instanceof tw)s(r.value.value.sections);else if("source"===r.value.kind){let e=i=>{a||(i instanceof tD&&tS(i.value)===tn?s(i.value.sections):i instanceof tC?s(i.sections):i.eachChild(e))},i=r.value;i._styleExpression&&e(i._styleExpression.expression)}return a}getProgramIds(){let e=0!==this.paint.get("icon-opacity").constantOr(1),i=0!==this.paint.get("text-opacity").constantOr(1),r=[];return e&&r.push("symbolIcon"),i&&r.push("symbolSDF"),r}getDefaultProgramParams(e,i){return{config:new a6(this,i),overrideFog:!1}}}let dc=hb.types,dd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function df(e,i,r,n,a,s,o,l,u,h,c,d,f){let p=l?Math.min(32640,Math.round(l[0])):0,m=l?Math.min(32640,Math.round(l[1])):0;e.emplaceBack(i,r,Math.round(32*n),Math.round(32*a),s,o,(p<<1)+(u?1:0),m,16*h,16*c,256*d,256*f)}function dp(e,i,r){e.emplaceBack(i,r)}function dm(e,i,r,n,a,s,o){e.emplaceBack(i,r,n,a,s,o)}function d_(e,i,r,n,a){e.emplaceBack(i,r,n,a),e.emplaceBack(i,r,n,a),e.emplaceBack(i,r,n,a),e.emplaceBack(i,r,n,a)}class dg{constructor(e){this.layoutVertexArray=new n5,this.indexArray=new ar,this.programConfigurations=e,this.segments=new aE,this.dynamicLayoutVertexArray=new n1,this.opacityVertexArray=new n8,this.placedSymbolArray=new av,this.iconTransitioningVertexArray=new n7,this.globeExtVertexArray=new n6,this.zOffsetVertexArray=new as}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length&&0===this.iconTransitioningVertexArray.length}upload(e,i,r,n,a){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,h6.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,h7.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,dd,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,ce.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,h8.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||a)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,h9.members,!0)),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}no(dg,"SymbolBuffers");class dy{constructor(e,i,r){this.layoutVertexArray=new e,this.layoutAttributes=i,this.indexArray=new r,this.segments=new aE,this.collisionVertexArray=new ai,this.collisionVertexArrayExt=new n1}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ct.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,ci.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}no(dy,"CollisionBuffers");class dv{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=e.m.identity([]),this.placementViewportMatrix=e.m.identity([]);let r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ca(this.zoom,r["text-size"]),this.iconSizeData=ca(this.zoom,r["icon-size"]);let n=this.layers[0].layout,a=n.get("symbol-sort-key"),s=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==s&&void 0!==a.constantOr(1),this.sortFeaturesByY=("viewport-y"===s||"auto"===s&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map(e=>cf[e]),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=i.sourceID,this.projection=i.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=n.get("symbol-z-elevate")}createArrays(){this.text=new dg(new a8(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new dg(new a8(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new aw,this.lineVertexArray=new aM,this.symbolInstances=new ab}calculateGlyphDependencies(e,i,r,n,a){for(let r=0;r<e.length;r++){let s=e.codePointAt(r);if(void 0===s)break;if(i[s]=!0,n&&a&&s<=65535){let n=cu[e.charAt(r)];n&&(i[n.charCodeAt(0)]=!0)}}}populate(i,r,n,a){let s=this.layers[0],o=s.layout,l="globe"===this.projection.name,u=o.get("text-font"),h=o.get("text-field"),c=o.get("icon-image"),d=("constant"!==h.value.kind||h.value.value instanceof tw&&!h.value.value.isEmpty()||h.value.value.toString().length>0)&&("constant"!==u.value.kind||u.value.value.length>0),f="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],!d&&!f)return;let m=r.iconDependencies,_=r.glyphDependencies,g=r.availableImages,y=new nE(this.zoom);for(let{feature:r,id:h,index:c,sourceLayerIndex:v}of i){let i,x;let b=s._featureFilter.needGeometry,w=ul(r,b);if(!s._featureFilter.filter(y,w,n))continue;if(b||(w.geometry=uo(r,n,a)),l&&1!==r.type&&n.z<=5){let i=w.geometry,r=(i,r)=>{let a=lB(i.x,i.y,n,1),s=lB(r.x,r.y,n,1);return .98078528056>e.v.dot(a,s)};for(let e=0;e<i.length;e++)i[e]=function(e,i){let r=e[0],n=[r];for(let a=1;a<e.length;a++){let s=e[a];(function e(i,r,n,a){if(a(r,n)){let s=r.add(n)._mult(.5);e(i,r,s,a),e(i,s,n,a)}else i.push(n)})(n,r,s,i),r=s}return n}(i[e],r)}if(d){let e=s.getValueAndResolveTokens("text-field",w,n,g),r=tw.factory(e);(function(e){for(let i of e.sections)if(function(e){for(let i of e)if(n_(i.charCodeAt(0)))return!0;return!1}(i.text))return!0;return!1})(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===nS()||this.hasRTLText&&nD.isParsed())&&(i=function(e,i,r){return e.sections.forEach(e=>{e.text=function(e,i,r){let n=i.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),nD.applyArabicShaping&&(e=nD.applyArabicShaping(e)),e}(e.text,i,r)}),e}(r,s,w))}if(f){let e=s.getValueAndResolveTokens("icon-image",w,n,g);x=e instanceof tM?e:tM.fromString(e)}if(!i&&!x)continue;let M=this.sortFeaturesByKey?p.evaluate(w,{},n):void 0;if(this.features.push({id:h,text:i,icon:x,index:c,sourceLayerIndex:v,geometry:w.geometry,properties:r.properties,type:dc[r.type],sortKey:M}),x&&(m[x.namePrimary]=!0,x.nameSecondary&&(m[x.nameSecondary]=!0)),i){let e=u.evaluate(w,{},n).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");for(let n of(this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(cf.vertical)>=0,i.sections))if(n.image)m[n.image.namePrimary]=!0;else{let a=nf(i.toString()),s=n.fontStack||e,o=_[s]=_[s]||{};this.calculateGlyphDependencies(n.text,o,r,this.allowVerticalPlacement,a)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){let i={},r={},n=[],a=0;function s(i){n.push(e[i]),a++}function o(e,i,a){let s=r[e];return delete r[e],r[i]=s,n[s].geometry[0].pop(),n[s].geometry[0]=n[s].geometry[0].concat(a[0]),s}function l(e,r,a){let s=i[r];return delete i[r],i[e]=s,n[s].geometry[0].shift(),n[s].geometry[0]=a[0].concat(n[s].geometry[0]),s}function u(e,i,r){let n=r?i[0][i[0].length-1]:i[0][0];return`${e}:${n.x}:${n.y}`}for(let h=0;h<e.length;h++){let c=e[h],d=c.geometry,f=c.text?c.text.toString():null;if(!f){s(h);continue}let p=u(f,d),m=u(f,d,!0);if(p in r&&m in i&&r[p]!==i[m]){let e=l(p,m,d),a=o(p,m,n[e].geometry);delete i[p],delete r[m],r[u(f,n[a].geometry,!0)]=a,n[e].geometry=null}else p in r?o(p,m,d):m in i?l(p,m,d):(s(h),i[p]=a-1,r[m]=a-1)}return n.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,i)=>e.sortKey-i.sortKey)}update(e,i,r,n,a){let s=0!==Object.keys(e).length;if(s&&!this.stateDependentLayers.length)return;let o=s?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(e,i,o,r,n,a),this.icon.programConfigurations.updatePaintArrays(e,i,o,r,n,a)}updateZOffset(){let e=(e,i,n)=>{(r+=i)>e.length&&e.resize(r);for(let a=-i;a<0;a++)e.emplace(a+r,n)},i=(e,i,r)=>{(n+=i)>e.length&&e.resize(n);for(let a=-i;a<0;a++)e.emplace(a+n,r)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let r=0,n=0;for(let r=0;r<this.symbolInstances.length;r++){let n=this.symbolInstances.get(r),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:s,numIconVertices:o}=n,l=n.zOffset,u=o>0;if((a>0||s>0)&&(e(this.text.zOffsetVertexArray,a,l),e(this.text.zOffsetVertexArray,s,l)),u){let{placedIconSymbolIndex:e,verticalPlacedIconSymbolIndex:r}=n;e>=0&&i(this.icon.zOffsetVertexArray,o,l),r>=0&&i(this.icon.zOffsetVertexArray,n.numVerticalIconVertices,l)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=da(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,i){let r=this.lineVertexArray.length;if(void 0!==e.segment)for(let{x:e,y:r}of i)this.lineVertexArray.emplaceBack(e,r);return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_){let g=e.indexArray,y=e.layoutVertexArray,v=e.globeExtVertexArray,x=e.segments.prepareSegment(4*i.length,y,g,this.canOverlap?s.sortKey:void 0),b=this.glyphOffsetArray.length,w=x.vertexLength,M=this.allowVerticalPlacement&&o===cf.vertical?Math.PI/2:0,T=s.text&&s.text.sections;for(let n=0;n<i.length;n++){let{tl:a,tr:o,bl:h,br:c,texPrimary:d,texSecondary:b,pixelOffsetTL:w,pixelOffsetBR:L,minFontScaleX:S,minFontScaleY:k,glyphOffset:D,isSDF:E,sectionIndex:A}=i[n],P=x.vertexLength,C=D[1];if(df(y,u.x,u.y,a.x,C+a.y,d.x,d.y,r,E,w.x,w.y,S,k),df(y,u.x,u.y,o.x,C+o.y,d.x+d.w,d.y,r,E,L.x,w.y,S,k),df(y,u.x,u.y,h.x,C+h.y,d.x,d.y+d.h,r,E,w.x,L.y,S,k),df(y,u.x,u.y,c.x,C+c.y,d.x+d.w,d.y+d.h,r,E,L.x,L.y,S,k),l){let{x:i,y:r,z:n}=l.anchor,[a,s,o]=l.up;dm(v,i,r,n,a,s,o),dm(v,i,r,n,a,s,o),dm(v,i,r,n,a,s,o),dm(v,i,r,n,a,s,o),d_(e.dynamicLayoutVertexArray,i,r,n,M)}else d_(e.dynamicLayoutVertexArray,u.x,u.y,u.z,M);if(_){let i=b||d;dp(e.iconTransitioningVertexArray,i.x,i.y),dp(e.iconTransitioningVertexArray,i.x+i.w,i.y),dp(e.iconTransitioningVertexArray,i.x,i.y+i.h),dp(e.iconTransitioningVertexArray,i.x+i.w,i.y+i.h)}g.emplaceBack(P,P+1,P+2),g.emplaceBack(P+1,P+2,P+3),x.vertexLength+=4,x.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(D[0]),n!==i.length-1&&A===i[n+1].sectionIndex||e.programConfigurations.populatePaintArrays(y.length,s,s.index,{},f,p,m,T&&T[A])}let L=l?l.anchor:u;e.placedSymbolArray.emplaceBack(L.x,L.y,L.z,u.x,u.y,b,this.glyphOffsetArray.length-b,w,h,c,u.segment,r?r[0]:0,r?r[1]:0,n[0],n[1],o,0,!1,0,d,0)}_commitLayoutVertex(e,i,r,n,a,s,o){e.emplaceBack(i,r,n,a,s,Math.round(o.x),Math.round(o.y))}_addCollisionDebugVertices(e,i,r,n,a,s,o){let l=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),u=l.vertexLength,h=o.tileAnchorX,c=o.tileAnchorY;for(let e=0;e<4;e++)r.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(r.collisionVertexArrayExt,i,e.padding,o.zOffset),this._commitLayoutVertex(r.layoutVertexArray,n,a,s,h,c,new k(e.x1,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,a,s,h,c,new k(e.x2,e.y1)),this._commitLayoutVertex(r.layoutVertexArray,n,a,s,h,c,new k(e.x2,e.y2)),this._commitLayoutVertex(r.layoutVertexArray,n,a,s,h,c,new k(e.x1,e.y2)),l.vertexLength+=4;let d=r.indexArray;d.emplaceBack(u,u+1),d.emplaceBack(u+1,u+2),d.emplaceBack(u+2,u+3),d.emplaceBack(u+3,u),l.primitiveLength+=4}_addTextDebugCollisionBoxes(e,i,r,n,a,s){for(let o=n;o<a;o++){let n=r.get(o),a=this.getSymbolInstanceTextSize(e,s,i,o);this._addCollisionDebugVertices(n,a,this.textCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,s)}}_addIconDebugCollisionBoxes(e,i,r,n,a,s){for(let o=n;o<a;o++){let n=r.get(o),a=this.getSymbolInstanceIconSize(e,i,s.placedIconSymbolIndex);this._addCollisionDebugVertices(n,a,this.iconCollisionBox,n.projectedAnchorX,n.projectedAnchorY,n.projectedAnchorZ,s)}}generateCollisionDebugBuffers(e,i){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dy(ae,cr.members,n7),this.iconCollisionBox=new dy(ae,cr.members,n7);let r=co(this.iconSizeData,e),n=co(this.textSizeData,e);for(let a=0;a<this.symbolInstances.length;a++){let s=this.symbolInstances.get(a);this._addTextDebugCollisionBoxes(n,e,i,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(n,e,i,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,e,i,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(r,e,i,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s)}}getSymbolInstanceTextSize(e,i,r,n){let a=this.text.placedSymbolArray.get(i.rightJustifiedTextSymbolIndex>=0?i.rightJustifiedTextSymbolIndex:i.centerJustifiedTextSymbolIndex>=0?i.centerJustifiedTextSymbolIndex:i.leftJustifiedTextSymbolIndex>=0?i.leftJustifiedTextSymbolIndex:i.verticalPlacedTextSymbolIndex>=0?i.verticalPlacedTextSymbolIndex:n),s=cs(this.textSizeData,e,a)/24;return this.tilePixelRatio*s}getSymbolInstanceIconSize(e,i,r){let n=this.icon.placedSymbolArray.get(r),a=cs(this.iconSizeData,e,n);return this.tilePixelRatio*a}_commitDebugCollisionVertexUpdate(e,i,r,n){e.emplaceBack(i,-r,-r,n),e.emplaceBack(i,r,-r,n),e.emplaceBack(i,r,r,n),e.emplaceBack(i,-r,r,n)}_updateTextDebugCollisionBoxes(e,i,r,n,a,s){for(let o=n;o<a;o++){let n=r.get(o),a=this.getSymbolInstanceTextSize(e,s,i,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,a,n.padding,s.zOffset)}}_updateIconDebugCollisionBoxes(e,i,r,n,a,s){for(let o=n;o<a;o++){let n=r.get(o),a=this.getSymbolInstanceIconSize(e,i,s.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,a,n.padding,s.zOffset)}}updateCollisionDebugBuffers(e,i){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();let r=co(this.iconSizeData,e),n=co(this.textSizeData,e);for(let a=0;a<this.symbolInstances.length;a++){let s=this.symbolInstances.get(a);this._updateTextDebugCollisionBoxes(n,e,i,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(n,e,i,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(r,e,i,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._updateIconDebugCollisionBoxes(r,e,i,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,i,r,n,a,s,o,l,u){let h={};if(i<r){let{x1:r,y1:n,x2:a,y2:s,padding:o,projectedAnchorX:l,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f,featureIndex:p}=e.get(i);h.textBox={x1:r,y1:n,x2:a,y2:s,padding:o,projectedAnchorX:l,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f},h.textFeatureIndex=p}if(n<a){let{x1:i,y1:r,x2:a,y2:s,padding:o,projectedAnchorX:l,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f,featureIndex:p}=e.get(n);h.verticalTextBox={x1:i,y1:r,x2:a,y2:s,padding:o,projectedAnchorX:l,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f},h.verticalTextFeatureIndex=p}if(s<o){let{x1:i,y1:r,x2:n,y2:a,padding:o,projectedAnchorX:l,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f,featureIndex:p}=e.get(s);h.iconBox={x1:i,y1:r,x2:n,y2:a,padding:o,projectedAnchorX:l,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f},h.iconFeatureIndex=p}if(l<u){let{x1:i,y1:r,x2:n,y2:a,padding:s,projectedAnchorX:o,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f,featureIndex:p}=e.get(l);h.verticalIconBox={x1:i,y1:r,x2:n,y2:a,padding:s,projectedAnchorX:o,projectedAnchorY:u,projectedAnchorZ:c,tileAnchorX:d,tileAnchorY:f},h.verticalIconFeatureIndex=p}return h}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){let r=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,i){let r=e.placedSymbolArray.get(i),n=r.vertexStartIndex+4*r.numGlyphs;for(let i=r.vertexStartIndex;i<n;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;let i=Math.sin(e),r=Math.cos(e),n=[],a=[],s=[];for(let e=0;e<this.symbolInstances.length;++e){s.push(e);let o=this.symbolInstances.get(e);n.push(0|Math.round(i*o.tileAnchorX+r*o.tileAnchorY)),a.push(o.featureIndex)}return s.sort((e,i)=>n[e]-n[i]||a[i]-a[e]),s}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,i)=>this.symbolInstances.get(i).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,i){let r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===i?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){for(let i of(this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[],this.symbolInstanceIndexes)){let e=this.symbolInstances.get(i);this.featureSortOrder.push(e.featureIndex);let{rightJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:n,leftJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:s,placedIconSymbolIndex:o,verticalPlacedIconSymbolIndex:l}=e;r>=0&&this.addIndicesForPlacedSymbol(this.text,r),n>=0&&n!==r&&this.addIndicesForPlacedSymbol(this.text,n),a>=0&&a!==n&&a!==r&&this.addIndicesForPlacedSymbol(this.text,a),s>=0&&this.addIndicesForPlacedSymbol(this.text,s),o>=0&&this.addIndicesForPlacedSymbol(this.icon,o),l>=0&&this.addIndicesForPlacedSymbol(this.icon,l)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}no(dv,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),dv.MAX_GLYPHS=65535,dv.addDynamicAttributes=d_;var dx=dv;let{members:db}=nq([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:dw}=nq([{name:"a_packed",components:4,type:"Float32"}]),dM=hb.types,dT=Math.cos(Math.PI/180*37.5);class dL{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new n0,this.layoutVertexArray2=new n1,this.indexArray=new ar,this.programConfigurations=new a8(e.layers,e.zoom),this.segments=new aE,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,i,r,n){this.hasPattern=hr("line",this.layers,i);let a=this.layers[0].layout.get("line-sort-key"),s=[];for(let{feature:i,id:o,index:l,sourceLayerIndex:u}of e){let e=this.layers[0]._featureFilter.needGeometry,h=ul(i,e);if(!this.layers[0]._featureFilter.filter(new nE(this.zoom),h,r))continue;let c=a?a.evaluate(h,{},r):void 0,d={id:o,properties:i.properties,type:i.type,sourceLayerIndex:u,index:l,geometry:e?h.geometry:uo(i,r,n),patterns:{},sortKey:c};s.push(d)}a&&s.sort((e,i)=>e.sortKey-i.sortKey);let{lineAtlas:o,featureIndex:l}=i,u=this.addConstantDashes(o);for(let n of s){let{geometry:a,index:s,sourceLayerIndex:h}=n;if(u&&this.addFeatureDashes(n,o),this.hasPattern){let e=hn("line",this.layers,n,this.zoom,i);this.patternFeatures.push(e)}else this.addFeature(n,a,s,r,o.positions,i.availableImages,i.brightness);l.insert(e[s].feature,a,s,h,this.index)}}addConstantDashes(e){let i=!1;for(let r of this.layers){let n=r.paint.get("line-dasharray").value,a=r.layout.get("line-cap").value;if("constant"!==n.kind||"constant"!==a.kind)i=!0;else{let i=a.value,r=n.value;if(!r)continue;e.addDash(r,i)}}return i}addFeatureDashes(e,i){let r=this.zoom;for(let n of this.layers){let a,s;let o=n.paint.get("line-dasharray").value,l=n.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==l.kind){if("constant"===o.kind){if(!(a=o.value))continue}else a=o.evaluate({zoom:r},e);s="constant"===l.kind?l.value:l.evaluate({zoom:r},e),i.addDash(a,s),e.patterns[n.id]=i.getKey(a,s)}}}update(e,i,r,n,a){let s=0!==Object.keys(e).length;s&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,i,s?this.stateDependentLayers:this.layers,r,n,a)}addFeatures(e,i,r,n,a,s){for(let e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,i,r,n,s)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,dw)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,db),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,i,r,n,a,s,o){let l=this.layers[0].layout,u=l.get("line-join").evaluate(e,{}),h=l.get("line-cap").evaluate(e,{}),c=l.get("line-miter-limit"),d=l.get("line-round-limit");for(let r of(this.lineClips=this.lineFeatureClips(e),i))this.addLine(r,e,u,h,c,d);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a,s,n,o)}addLine(e,i,r,n,a,s){let o,l,u,h,c;if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let i=0;i<e.length-1;i++)this.totalDistance+=e[i].dist(e[i+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let d="Polygon"===dM[i.type],f=e.length;for(;f>=2&&e[f-1].equals(e[f-2]);)f--;let p=0;for(;p<f-1&&e[p].equals(e[p+1]);)p++;if(f<(d?3:2))return;"bevel"===r&&(a=1.05);let m=this.overscaling<=16?122880/(512*this.overscaling):0,_=this.segments.prepareSegment(10*f,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,d&&(o=e[f-2],c=e[p].sub(o)._unit()._perp());for(let i=p;i<f;i++){if((u=i===f-1?d?e[p+1]:void 0:e[i+1])&&e[i].equals(u))continue;c&&(h=c),o&&(l=o),o=e[i],c=u?u.sub(o)._unit()._perp():h;let g=(h=h||c).add(c);0===g.x&&0===g.y||g._unit();let y=h.x*c.x+h.y*c.y,v=g.x*c.x+g.y*c.y,x=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),w=v<dT&&l&&u,M=h.x*c.y-h.y*c.x>0;if(w&&i>p){let e=o.dist(l);if(e>2*m){let i=o.sub(o.sub(l)._mult(m/e)._round());this.updateDistance(l,i),this.addCurrentVertex(i,h,0,0,_),l=i}}let T=l&&u,L=T?r:d?"butt":n;if(T&&"round"===L&&(x<s?L="miter":x<=2&&(L="fakeround")),"miter"===L&&x>a&&(L="bevel"),"bevel"===L&&(x>2&&(L="flipbevel"),x<a&&(L="miter")),l&&this.updateDistance(l,o),"miter"===L)g._mult(x),this.addCurrentVertex(o,g,0,0,_);else if("flipbevel"===L){if(x>100)g=c.mult(-1);else{let e=x*h.add(c).mag()/h.sub(c).mag();g._perp()._mult(e*(M?-1:1))}this.addCurrentVertex(o,g,0,0,_),this.addCurrentVertex(o,g.mult(-1),0,0,_)}else if("bevel"===L||"fakeround"===L){let e=-Math.sqrt(x*x-1),i=M?e:0,r=M?0:e;if(l&&this.addCurrentVertex(o,h,i,r,_),"fakeround"===L){let e=Math.round(180*b/Math.PI/20);for(let i=1;i<e;i++){let r=i/e;if(.5!==r){let e=r-.5;r+=r*e*(r-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}let n=c.sub(h)._mult(r)._add(h)._unit()._mult(M?-1:1);this.addHalfVertex(o,n.x,n.y,!1,M,0,_)}}u&&this.addCurrentVertex(o,c,-i,-r,_)}else if("butt"===L)this.addCurrentVertex(o,g,0,0,_);else if("square"===L){let e=l?1:-1;l||this.addCurrentVertex(o,g,e,e,_),this.addCurrentVertex(o,g,0,0,_),l&&this.addCurrentVertex(o,g,e,e,_)}else"round"===L&&(l&&(this.addCurrentVertex(o,h,0,0,_),this.addCurrentVertex(o,h,1,1,_,!0)),u&&(this.addCurrentVertex(o,c,-1,-1,_,!0),this.addCurrentVertex(o,c,0,0,_)));if(w&&i<f-1){let e=o.dist(u);if(e>2*m){let i=o.add(u.sub(o)._mult(m/e)._round());this.updateDistance(o,i),this.addCurrentVertex(i,c,0,0,_),o=i}}}}addCurrentVertex(e,i,r,n,a,s=!1){let o=i.y*n-i.x,l=-i.y-i.x*n;this.addHalfVertex(e,i.x+i.y*r,i.y-i.x*r,s,!1,r,a),this.addHalfVertex(e,o,l,s,!0,-n,a)}addHalfVertex({x:e,y:i},r,n,a,s,o,l){this.layoutVertexArray.emplaceBack((e<<1)+(a?1:0),(i<<1)+(s?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);let u=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),l.primitiveLength++),s?this.e2=u:this.e1=u}updateScaledDistance(){if(this.lineClips){let e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,i){this.distance+=e.dist(i),this.updateScaledDistance()}}no(dL,"LineBucket",{omit:["layers","patternFeatures"]});class dS{constructor(e,i,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(i,n)}update(e,i,r){let{width:n,height:a}=e,{context:s}=this,{gl:o}=s;if(o.bindTexture(o.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!i||!1!==i.premultiply)),r||this.size&&this.size[0]===n&&this.size[1]===a){let{x:i,y:s}=r||{x:0,y:0};if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap)o.texSubImage2D(o.TEXTURE_2D,0,i,s,o.RGBA,o.UNSIGNED_BYTE,e);else{let r=this.format,l=o.UNSIGNED_BYTE;this.format===o.R32F&&(r=o.RED,l=o.FLOAT),o.texSubImage2D(o.TEXTURE_2D,0,i,s,n,a,r,l,e.data)}}else if(this.size=[n,a],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap){let i=this.format;this.format===o.R8&&(i=o.RED),o.texImage2D(o.TEXTURE_2D,0,this.format,i,o.UNSIGNED_BYTE,e)}else{let i=this.format,r=this.format,s=o.UNSIGNED_BYTE;this.format===o.DEPTH_COMPONENT&&(i=o.DEPTH_COMPONENT16,s=o.UNSIGNED_SHORT),this.format===o.R8&&(r=o.RED),this.format===o.R32F&&(s=o.FLOAT,r=o.RED),o.texImage2D(o.TEXTURE_2D,0,i,n,a,0,r,s,e.data)}this.useMipmap=!!(i&&i.useMipmap),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D)}bind(e,i,r=!1){let{context:n}=this,{gl:a}=n;a.bindTexture(a.TEXTURE_2D,this.texture),e!==this.minFilter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this.useMipmap&&!r?e===a.NEAREST?a.NEAREST_MIPMAP_NEAREST:a.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),i!==this.wrapS&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,i),this.wrapS=i)}bindExtraParam(e,i,r,n){let{context:a}=this,{gl:s}=a;s.bindTexture(s.TEXTURE_2D,this.texture),i!==this.magFilter&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,i),this.magFilter=i),e!==this.minFilter&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,this.useMipmap?e===s.NEAREST?s.NEAREST_MIPMAP_NEAREST:s.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),r!==this.wrapS&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,r),this.wrapS=r),n!==this.wrapT&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,n),this.wrapT=n)}destroy(){let{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class dk{constructor(e,i){this.context=e,this.texture=i}bind(e,i){let{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.minFilter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e),this.minFilter=e),i!==this.wrapS&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,i),this.wrapS=i)}}let dD=new Uint16Array(8184);for(let e=0;e<2046;e++){let i=e+2,r=0,n=0,a=0,s=0,o=0,l=0;for(1&i?a=s=o=32:r=n=l=32;(i>>=1)>1;){let e=r+a>>1,u=n+s>>1;1&i?(a=r,s=n,r=o,n=l):(r=a,n=s,a=o,s=l),o=e,l=u}let u=4*e;dD[u+0]=r,dD[u+1]=n,dD[u+2]=a,dD[u+3]=s}let dE=new Uint16Array(2178),dA=new Uint8Array(1089),dP=new Uint16Array(1089);function dC(e){return 0===e?-.03125:32===e?.03125:0}var dI=nq([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);let dO={type:2,extent:8192,loadGeometry:()=>[[new k(0,0),new k(8193,0),new k(8193,8193),new k(0,8193),new k(0,0)]]};class dz{constructor(e,i,r,n,a){this.tileID=e,this.uid=N(),this.uses=0,this.tileSize=i,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,n&&n.style&&(this._lastUpdatedBrightness=n.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",n&&n.transform&&(this.projection=n.transform.projection)}registerFadeDuration(e){let i=e+this.timeAdded;i<eW.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=cJ(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,i,r){if(this.unloadVectorData(),this.state="loaded",e){for(let n in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,i){let r={};if(!i)return r;for(let n of e){let e=n.layerIds.map(e=>i.getLayer(e)).filter(Boolean);if(0!==e.length)for(let i of(n.layers=e,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map(i=>e.filter(e=>e.id===i)[0])),e))r[i.fqid]=n}return r}(e.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){let e=this.buckets[n];if(e instanceof dx){if(this.hasSymbolBuckets=!0,!r)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let e in this.buckets){let i=this.buckets[e];if(i instanceof dx&&i.hasRTLText){this.hasRTLText=!0,nD.isLoading()||nD.isLoaded()||"deferred"!==nS()||nk();break}}for(let e in this.queryPadding=0,this.buckets){let r=this.buckets[e],n=i.style.getOwnLayer(e);if(!n)continue;let a=n.queryRadius(r);this.queryPadding=Math.max(this.queryPadding,a)}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas),this._lastUpdatedBrightness=e.brightness}else this.collisionBoxArray=new ag}unloadVectorData(){if(this.hasData()){for(let e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.fqid]}upload(e){for(let i in this.buckets){let r=this.buckets[i];r.uploadPending()&&r.upload(e)}let i=e.gl,r=this.imageAtlas;if(r&&!r.uploaded){let n=!!Object.keys(r.patternPositions).length;this.imageAtlasTexture=new dS(e,r.image,i.RGBA,{useMipmap:n}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new dS(e,this.glyphAtlasImage,i.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new dS(e,this.lineAtlas.image,i.R8),this.lineAtlas.uploaded=!0)}prepare(e,i,r){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture,r),!i||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;let n=i.style.getBrightness();(this._lastUpdatedBrightness||n)&&(this._lastUpdatedBrightness&&n&&.001>Math.abs(this._lastUpdatedBrightness-n)||(this._lastUpdatedBrightness=n,this.updateBuckets(void 0,i)))}queryRenderedFeatures(e,i,r,n,a,s,o,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:o,transform:s,params:a,tileTransform:this.tileTransform},e,i,r):{}}querySourceFeatures(e,i){let r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;let n=r.loadVTLayers(),a=i?i.sourceLayer:"",s=n._geojsonTileLayer||n[a];if(!s)return;let o=rF(i&&i.filter),{z:l,x:u,y:h}=this.tileID.canonical,c={z:l,x:u,y:h};for(let i=0;i<s.length;i++){let n=s.feature(i);if(o.needGeometry){let e=ul(n,!0);if(!o.filter(new nE(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!o.filter(new nE(this.tileID.overscaledZ),n))continue;let d=r.getId(n,a),f=new hV(n,l,u,h,d);f.tile=c,e.push(f)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}bucketsLoaded(){for(let e in this.buckets)if(this.buckets[e].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){let i=this.expirationTime;if(e.cacheControl){let i=et(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){let e=Date.now(),r=!1;if(this.expirationTime>e)r=!1;else if(i){if(this.expirationTime<i)r=!0;else{let n=this.expirationTime-i;n?this.expirationTime=e+Math.max(n,3e4):r=!0}}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),2147483647)}setFeatureState(e,i){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&i&&this.updateBuckets(e,i)}updateBuckets(e,i){if(!this.latestFeatureIndex)return;let r=this.latestFeatureIndex.loadVTLayers(),n=i.style.listImages(),a=i.style.getBrightness();for(let s in this.buckets){if(!i.style.hasLayer(s))continue;let o=this.buckets[s],l=o.layers[0].sourceLayer||"_geojsonTileLayer",u=r[l],h={};if(e&&(h=e[l],!u||!h||0===Object.keys(h).length))continue;if(o.update(h,u,n,this.imageAtlas&&this.imageAtlas.patternPositions||{},a),o instanceof dL||o instanceof ha){let e=i.style.getOwnSourceCache(o.layers[0].source);i._terrain&&i._terrain.enabled&&e&&o.programConfigurations.needsUpload&&i._terrain._clearRenderCacheForTile(e.id,this.tileID)}let c=i&&i.style&&i.style.getOwnLayer(s);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<eW.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=eW.now()+e}setTexture(e,i){let r=i.context,n=r.gl;this.texture=this.texture||i.getTileTexture(e.width),this.texture&&this.texture instanceof dS?this.texture.update(e,{useMipmap:!0}):(this.texture=new dS(r,e,n.RGBA,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE))}setDependencies(e,i){let r={};for(let e of i)r[e]=!0;this.dependencies[e]=r}hasDependency(e,i){for(let r of e){let e=this.dependencies[r];if(e){for(let r of i)if(e[r])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,i){if(!i||"mercator"===i.name||this._tileDebugBuffer)return;let r=uo(dO,this.tileID.canonical,this.tileTransform)[0],n=new nX,a=new ah;for(let e=0;e<r.length;e++){let{x:i,y:s}=r[e];n.emplaceBack(i,s),a.emplaceBack(e)}a.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(a),this._tileDebugBuffer=e.createVertexBuffer(n,ll.members),this._tileDebugSegments=aE.simpleSegment(0,0,n.length,a.length)}_makeTileBoundsBuffers(e,i){let r,n;if(this._tileBoundsBuffer||!i||"mercator"===i.name)return;let a=uo(dO,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){let e=function(e,i){let r=cJ(e,i),n=Math.pow(2,e.z);for(let a=0;a<33;a++)for(let s=0;s<33;s++){let o=l8((e.x+(s+dC(s))/32)/n),l=l7((e.y+(a+dC(a))/32)/n),u=i.project(o,l),h=33*a+s;dE[2*h+0]=Math.round((u.x*r.scale-r.x)*8192),dE[2*h+1]=Math.round((u.y*r.scale-r.y)*8192)}dA.fill(0),dP.fill(0);for(let e=2045;e>=0;e--){let i=4*e,r=dD[i+0],n=dD[i+1],a=dD[i+2],s=dD[i+3],o=r+a>>1,l=n+s>>1,u=o+l-n,h=l+r-o,c=33*n+r,d=33*s+a,f=33*l+o,p=Math.hypot((dE[2*c+0]+dE[2*d+0])/2-dE[2*f+0],(dE[2*c+1]+dE[2*d+1])/2-dE[2*f+1])>=16;dA[f]=dA[f]||(p?1:0),e<1022&&(dA[f]=dA[f]||dA[(n+h>>1)*33+(r+u>>1)]||dA[(s+h>>1)*33+(a+u>>1)])}let a=new nK,s=new ar,o=0;function l(e,i){let r=33*i+e;return 0===dP[r]&&(a.emplaceBack(dE[2*r+0],dE[2*r+1],8192*e/32,8192*i/32),dP[r]=++o),dP[r]-1}function u(e,i,r,n,a,o){let h=e+r>>1,c=i+n>>1;if(Math.abs(e-a)+Math.abs(i-o)>1&&dA[33*c+h])u(a,o,e,i,h,c),u(r,n,a,o,h,c);else{let u=l(e,i),h=l(r,n),c=l(a,o);s.emplaceBack(u,h,c)}}return u(0,0,32,32,32,0),u(32,32,0,0,0,32),{vertices:a,indices:s}}(this.tileID.canonical,i);r=e.vertices,n=e.indices}else{for(let{x:e,y:i}of(r=new nK,n=new ar,a))r.emplaceBack(e,i,0,0);let e=he(r.int16,void 0,4);for(let i=0;i<e.length;i+=3)n.emplaceBack(e[i],e[i+1],e[i+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,dI.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(n),this._tileBoundsSegments=aE.simpleSegment(0,0,r.length,n.length)}_makeGlobeTileDebugBuffers(i,r){let n;let a=r.projection;if(!a||"globe"!==a.name||r.freezeTileCoverage)return;let s=this.tileID.canonical,o=lV(lI(s,r)),l=lq(r.zoom);l>0&&(n=e.m.invert(new Float64Array(16),r.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,s,r,o,n,l),this._makeGlobeTileDebugTextBuffer(i,s,r,o,n,l)}_globePoint(i,r,n,a,s,o,l){let u=lB(i,r,n);if(o){let s=1<<n.z,h=l5(a.center.lng),c=l6(a.center.lat),d=(n.x+.5)/s-h,f=0;d>.5?f=-1:d<-.5&&(f=1);let p=(i/8192+n.x)/s+f,m=(r/8192+n.y)/s;p=(p-h)*a._pixelsPerMercatorPixel+h,m=(m-c)*a._pixelsPerMercatorPixel+c;let _=[p*a.worldSize,m*a.worldSize,0];e.v.transformMat4(_,_,o),u=lC(u,_,l)}return e.v.transformMat4(u,u,s)}_makeGlobeTileDebugBorderBuffer(e,i,r,n,a,s){let o=new nX,l=new ah,u=new nJ,h=(e,h,c,d,f)=>{let p=(c-e)/(f-1),m=(d-h)/(f-1),_=o.length;for(let c=0;c<f;c++){let d=e+c*p,f=h+c*m;o.emplaceBack(d,f);let g=this._globePoint(d,f,i,r,n,a,s);u.emplaceBack(g[0],g[1],g[2]),l.emplaceBack(_+c)}};h(0,0,8192,0,16),h(8192,0,8192,8192,16),h(8192,8192,0,8192,16),h(0,8192,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(l),this._tileDebugBuffer=e.createVertexBuffer(o,ll.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(u,lo.members),this._tileDebugSegments=aE.simpleSegment(0,0,o.length,l.length)}_makeGlobeTileDebugTextBuffer(e,i,r,n,a,s){let o=new nX,l=new ar,u=new nJ;l.reserve(32),o.reserve(25),u.reserve(25);let h=(e,i)=>25*e+i;for(let e=0;e<25;e++){let l=2048*e;for(let e=0;e<25;e++){let h=2048*e;o.emplaceBack(h,l);let c=this._globePoint(h,l,i,r,n,a,s);u.emplaceBack(c[0],c[1],c[2])}}for(let e=0;e<4;e++)for(let i=0;i<4;i++){let r=h(e,i),n=h(e,i+1),a=h(e+1,i),s=h(e+1,i+1);l.emplaceBack(r,n,a),l.emplaceBack(a,n,s)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(o,ll.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(u,lo.members),this._tileDebugTextSegments=aE.simpleSegment(0,0,25,32)}destroy(e=!1){for(let e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!e&&this.texture&&this.texture instanceof dS&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.latestFeatureIndex=null,this.state="unloaded"}}class dR{constructor(e,i){this.max=e,this.onRemove=i,this.reset()}reset(){for(let e in this.data)for(let i of this.data[e])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(e,i,r){let n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);let a={value:i,timeout:void 0};if(void 0!==r&&(a.timeout=setTimeout(()=>{this.remove(e,a)},r)),this.data[n].push(a),this.order.push(n),this.order.length>this.max){let e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){let i=this.data[e].shift();return i.timeout&&clearTimeout(i.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),i.value}getByKey(e){let i=this.data[e];return i?i[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,i){if(!this.has(e))return this;let r=e.wrapped().key,n=void 0===i?0:this.data[r].indexOf(i),a=this.data[r][n];return this.data[r].splice(n,1),a.timeout&&clearTimeout(a.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(a.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){let e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){let i=[];for(let r in this.data)for(let n of this.data[r])e(n.value)||i.push(n);for(let e of i)this.remove(e.value.tileID,e)}}class dY{constructor(e,i,r,n){this.id=dY.uniqueIdxCounter,dY.uniqueIdxCounter++,this.context=e;let a=e.gl;this.buffer=a.createBuffer(),this.dynamicDraw=!!r,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n||i.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){this.id=dY.uniqueIdxCounter,dY.uniqueIdxCounter++;let i=this.context.gl;this.context.unbindVAO(),this.bind(),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}dY.uniqueIdxCounter=0;class dF{constructor(e,i,r){this.func=e,this.mask=i,this.range=r}}dF.ReadOnly=!1,dF.ReadWrite=!0,dF.disabled=new dF(519,dF.ReadOnly,[0,1]);class dj{constructor(e,i,r,n,a,s){this.test=e,this.ref=i,this.mask=r,this.fail=n,this.depthFail=a,this.pass=s}}dj.disabled=new dj({func:519,mask:0},0,0,7680,7680,7680);class dB{constructor(e,i,r,n){this.blendFunction=e,this.blendColor=i,this.mask=r,this.blendEquation=n}}dB.Replace=[1,0,1,0],dB.disabled=new dB(dB.Replace,tv.transparent,[!1,!1,!1,!1]),dB.unblended=new dB(dB.Replace,tv.transparent,[!0,!0,!0,!0]),dB.alphaBlended=new dB([1,771,1,771],tv.transparent,[!0,!0,!0,!0]),dB.multiply=new dB([774,0,774,0],tv.transparent,[!0,!0,!0,!0]);class dN{constructor(e,i,r){this.enable=e,this.mode=i,this.frontFace=r}}dN.disabled=new dN(!1,1029,2305),dN.backCCW=new dN(!0,1029,2305),dN.backCW=new dN(!0,1029,2304),dN.frontCW=new dN(!0,1028,2304),dN.frontCCW=new dN(!0,1028,2305);class dH extends eJ{constructor(e,i,r){super(),this.id=e,this._onlySymbols=r,i.on("data",e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),i.on("error",()=>{this._sourceErrored=!0}),this._source=i,this._tiles={},this._cache=new dR(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=i.minTileCacheSize,this._maxTileCacheSize=i.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this._coveredTiles={},this._shadowCasterTiles={},this._state=new hU,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(let e in this._tiles){let i=this._tiles[e];if("errored"!==i.state&&("loaded"!==i.state||!i.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,i){return e.isSymbolTile=this._onlySymbols,e.isExtraShadowCaster=this._shadowCasterTiles[e.tileID.key],this._source.loadTile(e,i)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){for(let i in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){let r=this._tiles[i];r.upload(e),r.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return F(this._tiles).map(e=>e.tileID).sort(dV).map(e=>e.key)}getRenderableIds(e,i){let r=[];for(let n in this._tiles)this._isIdRenderable(+n,e,i)&&r.push(this._tiles[n]);return e?r.sort((e,i)=>{let r=e.tileID,n=i.tileID,a=new k(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),s=new k(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||s.y-a.y||s.x-a.x}).map(e=>e.tileID.key):r.map(e=>e.tileID).sort(dV).map(e=>e.key)}hasRenderableParent(e){let i=this.findLoadedParent(e,0);return!!i&&this._isIdRenderable(i.tileID.key)}_isIdRenderable(e,i,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(i||!this._tiles[e].holdingForFade())&&(r||!this._shadowCasterTiles[e])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else for(let e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}_reloadTile(e,i){let r=this._tiles[e];r&&("loading"!==r.state&&(r.state=i),this._loadTile(r,this._tileLoaded.bind(this,r,e,i)))}_tileLoaded(e,i,r,n){if(n){if(e.state="errored",404!==n.status)this._source.fire(new eX(n,{tile:e}));else{if(!(e.tileID.key in this._loadedParentTiles))return void this._source.fire(new eZ("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){let e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform)}}else e.timeAdded=eW.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new eZ("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){let i=this.getRenderableIds();for(let n=0;n<i.length;n++){let a=i[n];if(e.neighboringTiles&&e.neighboringTiles[a]){let i=this.getTileByID(a);r(e,i),r(i,e)}}function r(e,i){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let r=i.tileID.canonical.x-e.tileID.canonical.x,n=i.tileID.canonical.y-e.tileID.canonical.y,a=Math.pow(2,e.tileID.canonical.z),s=i.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+a)?r+=a:1===Math.abs(r-a)&&(r-=a)),i.dem&&e.dem&&(e.dem.backfillBorder(i.dem,r,n),e.neighboringTiles&&e.neighboringTiles[s]&&(e.neighboringTiles[s].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,i,r,n){for(let a in this._tiles){let s=this._tiles[a];if(n[a]||!s.hasData()||s.tileID.overscaledZ<=i||s.tileID.overscaledZ>r)continue;let o=s.tileID;for(;s&&s.tileID.overscaledZ>i+1;){let e=s.tileID.scaledTo(s.tileID.overscaledZ-1);(s=this._tiles[e.key])&&s.hasData()&&(o=e)}let l=o;for(;l.overscaledZ>i;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){n[o.key]=o;break}}}findLoadedParent(e,i){if(e.key in this._loadedParentTiles){let r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=i?r:null}for(let r=e.overscaledZ-1;r>=i;r--){let i=e.scaledTo(r),n=this._getLoadedTile(i);if(n)return n}}_getLoadedTile(e){let i=this._tiles[e.key];return i&&i.hasData()?i:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,i){i=i||this._source.tileSize;let r=Math.floor((Math.ceil(e.width/i)+1)*(Math.ceil(e.height/i)+1)*5),n="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,r):r,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(a)}handleWrapJump(e){let i=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,i){let e={};for(let r in this._tiles){let n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+i),e[n.tileID.key]=n}for(let i in this._tiles=e,this._timers)clearTimeout(this._timers[i]),delete this._timers[i];for(let e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,i,r,n){let a;if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!r)return;if(this.updateCacheSize(e,i),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new ld(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(a=e.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter(e=>this._source.hasTile(e)))):a=[],a.length>0&&this.castsShadows&&n&&"globe"!==this.transform.projection.name&&!this.usedForTerrain&&!dU(this._source.type)){let s=Math.min(e.coveringZoomLevel({tileSize:i||this._source.tileSize,roundZoom:this._source.roundZoom&&!r}),this._source.maxzoom);for(let i of e.extendTileCoverForShadows(a,n,s))this._shadowCasterTiles[i.key]=!0,a.push(i)}let s=this._updateRetainedTiles(a);if(dU(this._source.type)&&0!==a.length){let e={},i={};for(let r of Object.keys(s)){let n=s[r],a=this._tiles[r];if(!a||a.fadeEndTime&&a.fadeEndTime<=eW.now())continue;let o=this.findLoadedParent(n,Math.max(n.overscaledZ-dH.maxOverzooming,this._source.minzoom));o&&(this._addTile(o.tileID),e[o.tileID.key]=o.tileID),i[r]=n}let r=a[a.length-1].overscaledZ;for(let e in this._tiles){let n=this._tiles[e];if(s[e]||!n.hasData())continue;let a=n.tileID;for(;a.overscaledZ>r;){a=a.scaledTo(a.overscaledZ-1);let r=this._tiles[a.key];if(r&&r.hasData()&&i[a.key]){s[e]=n.tileID;break}}}for(let i in e)s[i]||(this._coveredTiles[i]=!0,s[i]=e[i])}for(let e in s)this._tiles[e].clearFadeHold();for(let e of function(e,i){let r=[];for(let n in e)n in i||r.push(n);return r}(this._tiles,s)){let i=this._tiles[e];i.hasSymbolBuckets&&!i.holdingForFade()?i.setHoldDuration(this.map._fadeDuration):i.hasSymbolBuckets&&!i.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(let e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){let i={};if(0===e.length)return i;let r={},n=e.reduce((e,i)=>Math.min(e,i.overscaledZ),1/0),a=e[0].overscaledZ,s=Math.max(a-dH.maxOverzooming,this._source.minzoom),o=Math.max(a+dH.maxUnderzooming,this._source.minzoom),l={};for(let r of e){let e=this._addTile(r);i[r.key]=r,e.hasData()||n<this._source.maxzoom&&(l[r.key]=r)}for(let a of(this._retainLoadedChildren(l,n,o,i),e)){let e=this._tiles[a.key];if(e.hasData())continue;if(a.canonical.z>=this._source.maxzoom){let e=a.children(this._source.maxzoom)[0],r=this.getTile(e);if(r&&r.hasData()){i[e.key]=e;continue}}else{let e=a.children(this._source.maxzoom);if(i[e[0].key]&&i[e[1].key]&&i[e[2].key]&&i[e[3].key])continue}let n=e.wasRequested();for(let o=a.overscaledZ-1;o>=s;--o){let s=a.scaledTo(o);if(r[s.key]||(r[s.key]=!0,(e=this.getTile(s))||!n||(e=this._addTile(s)),e&&(i[s.key]=s,n=e.wasRequested(),e.hasData())))break}}return i}_updateLoadedParentTileCache(){for(let e in this._loadedParentTiles={},this._tiles){let i=[],r,n=this._tiles[e].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}i.push(n.key);let e=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(e))break;n=e}for(let e of i)this._loadedParentTiles[e]=r}}_addTile(e){let i=this._tiles[e.key];if(i)return!0!==i.isExtraShadowCaster||this._shadowCasterTiles[e.key]||this._reloadTile(e.key,"reloading"),i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));let r=!!i;if(!r){let r=this.map?this.map.painter:null;i=new dz(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))}return i?(i.uses++,this._tiles[e.key]=i,r||this._source.fire(new eZ("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null}_setTileReloadTimer(e,i){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);let r=i.getExpiryTimeout();r&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},r))}_removeTile(e){let i=this._tiles[e];i&&(i.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),i.uses>0||(i.hasData()&&"reloading"!==i.state?this._cache.add(i.tileID,i,i.getExpiryTimeout()):(i.aborted=!0,this._abortTile(i),this._unloadTile(i))))}clearTiles(){for(let e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,i,r){let n=[],a=this.transform;if(!a)return n;let s="globe"===a.projection.name,o=l5(a.center.lng);for(let l in this._tiles){let u;let h=this._tiles[l];if(r&&h.clearQueryDebugViz(),!h.holdingForFade()){if(s){let e=h.tileID.canonical;if(0===e.z){let i=[Math.abs(O(o,...d$(e,-1))-o),Math.abs(O(o,...d$(e,1))-o)];u=[0,2*i.indexOf(Math.min(...i))-1]}else{let i=[Math.abs(O(o,...d$(e,-1))-o),Math.abs(O(o,...d$(e,0))-o),Math.abs(O(o,...d$(e,1))-o)];u=[i.indexOf(Math.min(...i))-1]}}else u=[0];for(let r of u){let s=e.containsTile(h,a,i,r);s&&n.push(s)}}}return n}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(e){return this._getRenderableCoordinates(e)}_getRenderableCoordinates(e,i){let r=this.getRenderableIds(e,i).map(e=>this._tiles[e].tileID),n="globe"===this.transform.projection.name;for(let e of r)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped()),e.expandedProjMatrix=n?this.transform.calculateProjMatrix(e.toUnwrapped(),!1,!0):e.projMatrix;return r}sortCoordinatesByDistance(e){let i=e.slice(),r=this.transform._camera.position,n=this.transform._camera.forward(),a={};for(let e of i){let i=1/(1<<e.canonical.z);a[e.key]=((e.canonical.x+.5)*i+e.wrap-r[0])*n[0]+((e.canonical.y+.5)*i-r[1])*n[1]-r[2]*n[2]}return i.sort((e,i)=>a[e.key]-a[i.key]),i}hasTransition(){if(this._source.hasTransition())return!0;if(dU(this._source.type))for(let e in this._tiles){let i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=eW.now())return!0}return!1}setFeatureState(e,i,r){this._state.updateState(e=e||"_geojsonTileLayer",i,r)}removeFeatureState(e,i,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",i,r)}getFeatureState(e,i){return this._state.getState(e=e||"_geojsonTileLayer",i)}setDependencies(e,i,r){let n=this._tiles[e];n&&n.setDependencies(i,r)}reloadTilesForDependencies(e,i){for(let r in this._tiles)this._tiles[r].hasDependency(e,i)&&this._reloadTile(+r,"reloading");this._cache.filter(r=>!r.hasDependency(e,i))}_preloadTiles(e,i){if(!this._sourceLoaded){let r=()=>{this._sourceLoaded&&(this._source.off("data",r),this._preloadTiles(e,i))};return void this._source.on("data",r)}let r=new Map,n=Array.isArray(e)?e:[e],a=this.map.painter.terrain,s=this.usedForTerrain&&a?a.getScaledDemTileSize():this._source.tileSize;for(let e of n){for(let i of e.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}))r.set(i.key,i);this.usedForTerrain&&e.updateElevation(!1)}Y(Array.from(r.values()),(e,i)=>{let r=new dz(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(r,e=>{"raster-dem"===this._source.type&&r.dem&&this._backfillDEM(r),i(e,r)})},i)}}function dV(e,i){let r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*i.wrap)-+(i.wrap<0);return e.overscaledZ-i.overscaledZ||n-r||i.canonical.y-e.canonical.y||i.canonical.x-e.canonical.x}function dU(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function d$(e,i){let r=1<<e.z;return[e.x/r+i,(e.x+1)/r+i]}dH.maxOverzooming=10,dH.maxUnderzooming=3;let dW=nq([{name:"a_pos_3f",components:3,type:"Float32"}]),dG=nq([{name:"a_color_3f",components:3,type:"Float32"}]),dq=nq([{name:"a_color_4f",components:4,type:"Float32"}]),dZ=nq([{name:"a_uv_2f",components:2,type:"Float32"}]),dX=nq([{name:"a_normal_3f",components:3,type:"Float32"}]),dJ=nq([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),dK=nq([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);function dQ(i,r){let n=d1(i.projection,i.zoom,i.width,i.height),a=function(i,r,n,a,s){let o=new l3(n.lng-180*d2,n.lat),l=new l3(n.lng+180*d2,n.lat),u=i.project(o.lng,o.lat),h=i.project(l.lng,l.lat),c=-Math.atan2(h.y-u.y,h.x-u.x),d=un.fromLngLat(n);d.y=O(d.y,-1+d2,1-d2);let f=d.toLngLat(),p=i.project(f.lng,f.lat),m=un.fromLngLat(f);m.x+=d2;let _=m.toLngLat(),g=i.project(_.lng,_.lat),y=d4(g.x-p.x,g.y-p.y,c),v=un.fromLngLat(f);v.y+=d2;let x=v.toLngLat(),b=i.project(x.lng,x.lat),w=d4(b.x-p.x,b.y-p.y,c),M=Math.abs(y.x)/Math.abs(w.y),T=e.m.identity([]);e.m.rotateZ(T,T,-c*(1-(s?0:a)));let L=e.m.identity([]);return e.m.scale(L,L,[1,1-(1-M)*a,1]),L[4]=-w.x/w.y*a,e.m.rotateZ(L,L,c),e.m.multiply(L,T,L),L}(i.projection,0,i.center,n,r),s=d0(i);return e.m.scale(a,a,[s,s,1]),a}function d0(e){let i=e.projection,r=d1(e.projection,e.zoom,e.width,e.height);return Math.pow(2,d3(i,e.center)*r+(1-r)*d3(i,l3.convert(i.center)))}function d1(e,i,r,n,a=1/0){let s=e.range;if(!s)return 0;let o=Math.log(Math.min(a,Math.max(r,n))/1024)/Math.LN2;return z(s[0]+o,s[1]+o,i)}let d2=1/4e4;function d3(e,i){let r=O(i.lat,-l9,l9),n=new l3(i.lng-180*d2,r),a=new l3(i.lng+180*d2,r),s=e.project(n.lng,r),o=e.project(a.lng,r),l=un.fromLngLat(n),u=un.fromLngLat(a),h=o.x-s.x,c=o.y-s.y,d=u.x-l.x,f=u.y-l.y;return Math.log(Math.sqrt((d*d+f*f)/(h*h+c*c)))/Math.LN2}function d4(e,i,r){let n=Math.cos(r),a=Math.sin(r);return{x:e*n-i*a,y:e*a+i*n}}function d5(e,i,r){return 8192/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ))*i}function d6(i,r,n){e.m.identity(i),e.m.rotateZ(i,i,r[2]*D),e.m.rotateX(i,i,r[0]*D),e.m.rotateY(i,i,r[1]*D),e.m.scale(i,i,n),e.m.multiply(i,i,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function d8(i,r,n,a,s,o,l,u){let h=[n[0]-r[0],n[1]-r[1],0],c=[a[0]-r[0],a[1]-r[1],0];if(1e-12>e.v.length(h)||1e-12>e.v.length(c))return e.q.identity(i);let d=e.v.cross([],h,c);return e.v.normalize(d,d),e.v.subtract(c,a,r),h[2]=(o-s)*u,c[2]=(l-s)*u,e.v.cross(h,h,c),e.v.normalize(h,h),e.q.rotationTo(i,d,h)}function d7(i,r,n=!1){let a=lq(r.zoom),s=function(i,r,n){let a=r.worldSize,s=[i[12],i[13],i[14]],o=l7(s[1]/a),l=l8(s[0]/a),u=e.m.identity([]),h=1/l4(o)*a,c=1/l4(0)*a*ut(o,r.zoom),d=1/l$(a),f=c*d;if(n){let e=d1(r.projection,r.zoom,r.width,r.height,1024);f=d*r.projection.pixelSpaceConversion(r.center.lat,a,e)}let p=lj(o,l);e.v.add(p,p,e.v.scale([],e.v.normalize([],p),h*f*s[2]));let m=function(i){let r=[i[0],i[1],i[2]],n=[0,1,0],a=e.v.cross([],n,r);return e.v.cross(n,r,a),0===e.v.squaredLength(n)&&(n=[0,1,0],e.v.cross(a,r,n)),e.v.normalize(a,a),e.v.normalize(n,n),e.v.normalize(r,r),[a[0],a[1],a[2],0,n[0],n[1],n[2],0,r[0],r[1],r[2],0,i[0],i[1],i[2],1]}(p);e.m.scale(u,u,[f,f,f*h]),e.m.translate(u,u,[-s[0],-s[1],-s[2]]);let _=e.m.multiply([],r.globeMatrix,m);return e.m.multiply(_,_,u),e.m.multiply(_,_,i),_}(i,r,n);return a>0?function(i,r,n){let a=(i,r,n)=>{let a=e.v.length(i),s=e.v.length(r),o=lC(i,r,n);return e.v.scale(o,o,1/e.v.length(o)*iS(a,s,n))},s=a([i[0],i[1],i[2]],[r[0],r[1],r[2]],n),o=a([i[4],i[5],i[6]],[r[4],r[5],r[6]],n),l=a([i[8],i[9],i[10]],[r[8],r[9],r[10]],n),u=lC([i[12],i[13],i[14]],[r[12],r[13],r[14]],n);return[s[0],s[1],s[2],0,o[0],o[1],o[2],0,l[0],l[1],l[2],0,u[0],u[1],u[2],1]}(s,function(i,r){let n=r.worldSize,a=1/l4(0)*n*ut(r.center.lat,r.zoom)/l$(n),s=1/l4(r.center.lat)*n,o=e.m.identity([]);return e.m.rotateY(o,o,r.center.lng*D),e.m.rotateX(o,o,r.center.lat*D),e.m.translate(o,o,[0,0,lM]),e.m.scale(o,o,[a,a,a*s]),e.m.translate(o,o,[r.point.x-.5*n,r.point.y-.5*n,0]),e.m.multiply(o,o,i),e.m.multiply(o,r.globeMatrix,o)}(i,r),a):s}let d9={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4};function fe(e,i,r=!1){e.uploaded||(e.gfxTexture=new dS(i,e.image,r?i.gl.R8:i.gl.RGBA,{useMipmap:e.sampler.minFilter>=i.gl.NEAREST_MIPMAP_NEAREST}),e.uploaded=!0,e.image=null)}function ft(e,i,r){if(e.meshes)for(let n of e.meshes)!function(e,i,r){e.indexBuffer=i.createIndexBuffer(e.indexArray,!1,!0),e.vertexBuffer=i.createVertexBuffer(e.vertexArray,dW.members,!1,!0),e.normalArray&&(e.normalBuffer=i.createVertexBuffer(e.normalArray,dX.members,!1,!0)),e.texcoordArray&&(e.texcoordBuffer=i.createVertexBuffer(e.texcoordArray,dZ.members,!1,!0)),e.colorArray&&(e.colorBuffer=i.createVertexBuffer(e.colorArray,(12===e.colorArray.bytesPerElement?dG:dq).members,!1,!0)),e.featureArray&&(e.pbrBuffer=i.createVertexBuffer(e.featureArray,dK.members,!0)),e.segments=aE.simpleSegment(0,0,e.vertexArray.length,e.indexArray.length);let n=e.material;n.pbrMetallicRoughness.baseColorTexture&&fe(n.pbrMetallicRoughness.baseColorTexture,i),n.pbrMetallicRoughness.metallicRoughnessTexture&&fe(n.pbrMetallicRoughness.metallicRoughnessTexture,i),n.normalTexture&&fe(n.normalTexture,i),n.occlusionTexture&&fe(n.occlusionTexture,i,r),n.emissionTexture&&fe(n.emissionTexture,i)}(n,i,r);if(e.children)for(let n of e.children)ft(n,i,r)}function fi(e){if(e.meshes)for(let i of e.meshes)i.indexArray.destroy(),i.vertexArray.destroy(),i.colorArray&&i.colorArray.destroy(),i.normalArray&&i.normalArray.destroy(),i.texcoordArray&&i.texcoordArray.destroy(),i.featureArray&&i.featureArray.destroy();if(e.children)for(let i of e.children)fi(i)}function fr(e){var i;if(e.meshes)for(let r of e.meshes)r.vertexBuffer&&(r.vertexBuffer.destroy(),r.indexBuffer.destroy(),r.normalBuffer&&r.normalBuffer.destroy(),r.texcoordBuffer&&r.texcoordBuffer.destroy(),r.colorBuffer&&r.colorBuffer.destroy(),r.pbrBuffer&&r.pbrBuffer.destroy(),r.segments.destroy(),r.material&&((i=r.material).pbrMetallicRoughness.baseColorTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),i.pbrMetallicRoughness.metallicRoughnessTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),i.normalTexture&&i.normalTexture.gfxTexture&&i.normalTexture.gfxTexture.destroy(),i.emissionTexture&&i.emissionTexture.gfxTexture&&i.emissionTexture.gfxTexture.destroy(),i.occlusionTexture&&i.occlusionTexture.gfxTexture&&i.occlusionTexture.gfxTexture.destroy()));if(e.children)for(let i of e.children)fr(i)}class fn{constructor(e,i){this.feature=e,this.instancedDataOffset=i,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class fa{constructor(){this.instancedDataArray=new af,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class fs{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.projection=e.projection,this.index=e.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(e,i,r,n){this.tileToMeter=ur(r);let a=this.layers[0]._featureFilter.needGeometry;for(let{feature:s,id:o,index:l,sourceLayerIndex:u}of(this.lookup=new Uint8Array(this.lookupDim*this.lookupDim),e)){let e=ul(s,a);if(!this.layers[0]._featureFilter.filter(new nE(this.zoom),e,r))continue;let h={id:o,sourceLayerIndex:u,index:l,geometry:a?e.geometry:uo(s,r,n),properties:s.properties,type:s.type,patterns:{}},c=this.addFeature(h,h.geometry,e);c&&i.featureIndex.insert(s,h.geometry,l,u,this.index,this.instancesPerModel[c].instancedDataArray.length)}this.lookup=null}update(e,i,r,n){for(let i in this.instancesPerModel){let r=this.instancesPerModel[i];for(let i in e)r.idToFeaturesIndex.hasOwnProperty(i)&&this.evaluate(r.features[r.idToFeaturesIndex[i]],e[i],r,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let i=!1;for(let r in this.instancesPerModel){let n=this.instancesPerModel[r];for(let r of n.features){let a=this.layers[0],s=r.feature,o=this.canonical,l=a.paint.get("model-rotation").evaluate(s,{},o),u=a.paint.get("model-scale").evaluate(s,{},o),h=a.paint.get("model-translation").evaluate(s,{},o);e.v.exactEquals(r.rotation,l)&&e.v.exactEquals(r.scale,u)&&e.v.exactEquals(r.translation,h)||(this.evaluate(r,r.featureStates,n,!0),i=!0)}}return i}isEmpty(){for(let e in this.instancesPerModel)if(0!==this.instancesPerModel[e].instancedDataArray.length)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(let i in this.instancesPerModel){let r=this.instancesPerModel[i];r.instancedDataArray.length<0||0===r.instancedDataArray.length||(r.instancedDataBuffer?r.instancedDataBuffer.updateData(r.instancedDataArray):r.instancedDataBuffer=e.createVertexBuffer(r.instancedDataArray,dJ.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(let e in this.instancesPerModel){let i=this.instancesPerModel[e];0!==i.instancedDataArray.length&&i.instancedDataBuffer&&i.instancedDataBuffer.destroy()}}addFeature(e,i,r){let n=this.layers[0],a=n.layout.get("model-id").evaluate(r,{},this.canonical);if(!a)return J(`modelId is not evaluated for layer ${n.id} and it is not going to get rendered.`),a;this.instancesPerModel[a]||(this.instancesPerModel[a]=new fa);let s=this.instancesPerModel[a],o=s.instancedDataArray,l=new fn(r,o.length);for(let e of i)for(let i of e){if(i.x<0||i.x>=8192||i.y<0||i.y>=8192)continue;let e=(this.lookupDim-1)/8192,r=this.lookupDim*(i.y*e|0)+i.x*e|0;if(this.lookup){if(0!==this.lookup[r])continue;this.lookup[r]=1}this.instanceCount++;let n=o.length;o.resize(n+1),s.instancesEvaluatedElevation.push(0),o.float32[16*n]=i.x,o.float32[16*n+1]=i.y}return l.instancedDataCount=s.instancedDataArray.length-l.instancedDataOffset,l.instancedDataCount>0&&(e.id&&(s.idToFeaturesIndex[e.id]=s.features.length),s.features.push(l),this.evaluate(l,{},s,!1)),a}evaluate(e,i,r,n){let a=this.layers[0],s=e.feature,o=this.canonical,l=e.rotation=a.paint.get("model-rotation").evaluate(s,i,o),u=e.scale=a.paint.get("model-scale").evaluate(s,i,o),h=e.translation=a.paint.get("model-translation").evaluate(s,i,o),c=a.paint.get("model-color").evaluate(s,i,o);c.a=a.paint.get("model-color-mix-intensity").evaluate(s,i,o);let d=[];this.maxVerticalOffset<h[2]&&(this.maxVerticalOffset=h[2]),this.maxScale=Math.max(Math.max(this.maxScale,u[0]),Math.max(u[1],u[2])),d6(d,l,u);let f=Math.round(100*c.a)+c.b/1.05;for(let i=0;i<e.instancedDataCount;++i){let a=e.instancedDataOffset+i,s=16*a,l=r.instancedDataArray.float32,u=0;n&&(u=l[s+6]-r.instancesEvaluatedElevation[a]);let p=0|l[s+1];l[s]=(0|l[s])+c.r/1.05,l[s+1]=p+c.g/1.05,l[s+2]=f,l[s+3]=1/(o.z>10?this.tileToMeter:ur(o,p)),l[s+4]=h[0],l[s+5]=h[1],l[s+6]=h[2]+u,l[s+7]=d[0],l[s+8]=d[1],l[s+9]=d[2],l[s+10]=d[4],l[s+11]=d[5],l[s+12]=d[6],l[s+13]=d[8],l[s+14]=d[9],l[s+15]=d[10],r.instancesEvaluatedElevation[a]=h[2]}}}no(fs,"ModelBucket",{omit:["layers"]}),no(fa,"PerModelAttributes"),no(fn,"ModelFeature");let fo=new nN({visibility:new nF(eK.layout_model.visibility),"model-id":new nj(eK.layout_model["model-id"])});var fl={paint:new nN({"model-opacity":new nF(eK.paint_model["model-opacity"]),"model-rotation":new nj(eK.paint_model["model-rotation"]),"model-scale":new nj(eK.paint_model["model-scale"]),"model-translation":new nj(eK.paint_model["model-translation"]),"model-color":new nj(eK.paint_model["model-color"]),"model-color-mix-intensity":new nj(eK.paint_model["model-color-mix-intensity"]),"model-type":new nF(eK.paint_model["model-type"]),"model-cast-shadows":new nF(eK.paint_model["model-cast-shadows"]),"model-receive-shadows":new nF(eK.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new nF(eK.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new nj(eK.paint_model["model-emissive-strength"]),"model-roughness":new nj(eK.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new nj(eK.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new nF(eK.paint_model["model-cutoff-fade-range"])}),layout:fo};let fu=new Float32Array(262144),fh=new Uint8Array(262144),fc=["","wall","door","roof","window","lamp","logo"];class fd{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:e.id,geometry:[],properties:{height:function e(i){let r=0;if(i.meshes)for(let e of i.meshes)r=Math.max(r,e.aabb.max[2]);if(i.children)for(let n of i.children)r=Math.max(r,e(n));return r}(e)}}}}class ff{constructor(e,i,r,n){this.nodes=e,this.id=i,this.modelTraits|=d9.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,r&&(this.modelTraits|=d9.HasMapboxMeshFeatures),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=n,this.dirty=!0,this.needsUpload=!1}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;let i=this.getNodesInfo();for(let r of i){let i=r.node;this.uploaded?this.updatePbrBuffer(i):ft(i,e,!0)}for(let e of i)fi(e.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let i=!1;if(!e.meshes)return i;for(let r of e.meshes)r.pbrBuffer&&(r.pbrBuffer.updateData(r.featureArray),i=!0);return i}needsReEvaluation(e,i,r){let n=e.transform.projectionOptions,a=e.style.getBrightness(),s=this.brightness!==a;return!!(!this.uploaded||this.dirty||n.name!==this.projection.name||fp(r.paint.get("model-color").value,s)||fp(r.paint.get("model-color-mix-intensity").value,s)||fp(r.paint.get("model-roughness").value,s)||fp(r.paint.get("model-emissive-strength").value,s)||fp(r.paint.get("model-height-based-emissive-strength-multiplier").value,s))&&(this.projection=n,this.brightness=a,!0)}evaluateScale(e,i){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;let r=this.getNodesInfo(),n=this.id.canonical;for(let e of r){let r=e.feature;e.evaluatedScale=i.paint.get("model-scale").evaluate(r,{},n)}}evaluate(e){for(let i of this.getNodesInfo()){if(!i.node.meshes)continue;let r=i.feature,n=i.node.meshes&&i.node.meshes[0].featureData,a=i.evaluatedColor[2],s=i.evaluatedRMEA[2],o=this.id.canonical;if(i.hasTranslucentParts=!1,n){for(let n=0;n<fc.length;n++){let a=fc[n];a.length&&(r.properties.part=a);let s=e.paint.get("model-color").evaluate(r,{},o),l=e.paint.get("model-color-mix-intensity").evaluate(r,{},o);i.evaluatedColor[n]=[s.r,s.g,s.b,l],i.evaluatedRMEA[n][0]=e.paint.get("model-roughness").evaluate(r,{},o),i.evaluatedRMEA[n][2]=e.paint.get("model-emissive-strength").evaluate(r,{},o),i.evaluatedRMEA[n][3]=s.a,i.emissionHeightBasedParams[n]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(r,{},o),!i.hasTranslucentParts&&s.a<1&&(i.hasTranslucentParts=!0)}delete r.properties.part,function(e,i){let r=e.node,n=0;for(let a of r.meshes){if(r.lights&&r.lightMeshIndex===n||!a.featureData)continue;a.featureArray=new ap,a.featureArray.reserve(a.featureData.length);let s=i;for(let i of a.featureData){let n;let o=65535&i,l=(15&o)<8?15&o:0,u=i>>16&65535,h=e.evaluatedRMEA[l],c=e.evaluatedColor[l],d=e.emissionHeightBasedParams[l];if(s&&2===l&&r.lights&&(n=new ap).resize(10*r.lights.length),function(e,i,r,n,a,s,o,l){let u,h,c,d,f=(61440&i|(61440&i)>>4)>>8,p=(3840&i|(3840&i)>>4)>>4,m=240&i|(240&i)>>4;r[3]>0&&(f=iS(f,255*r[0],r[3]),p=iS(p,255*r[1],r[3]),m=iS(m,255*r[2],r[3]));let _=f<<8|p,g=m<<8|Math.floor(255*n[3]),y=Math.min(Math.round(.5*O(n[2],0,2)*255),255)<<8|15*n[0]<<4|15*n[1],v=O(a[0],0,1),x=O(a[1],0,1),b=O(a[2],0,1),w=O(a[3],0,1);if(v!==x&&o!==s&&x!==v){let e=o-s;h=1/(e*(x-v)),c=-(s+e*v)/(e*(x-v)),d=Math.pow(10,O(a[4],-1,1)),u=255*b<<8|255*w}else u=65535,h=0,c=1,d=1;if(e.emplaceBack(_,g,y,u,h,c,d),l){let e=l.length;l.clear();for(let i=0;i<e;i++)l.emplaceBack(_,g,y,u,h,c,d)}}(a.featureArray,u,c,h,d,a.aabb.min[2],a.aabb.max[2],n),n&&s){s=!1;let e=r.meshes[r.lightMeshIndex];e.featureArray=n,e.featureArray._trim()}}a.featureArray._trim(),n++}}(i,a!==i.evaluatedColor[2]||s!==i.evaluatedRMEA[2])}else i.evaluatedRMEA[0][2]=e.paint.get("model-emissive-strength").evaluate(r,{},o);i.evaluatedScale=e.paint.get("model-scale").evaluate(r,{},o),this.updatePbrBuffer(i.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,i,r,n){let a=e.findDEMTileFor(r);if(a&&(a.tileID.canonical!==this.terrainTile||i!==this.terrainExaggeration)){if(a.dem&&a.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=a.tileID.overscaledZ;let i=h2.create(e,r,a);if(!i)return;for(let a of(this.modelTraits&d9.HasMapboxMeshFeatures&&this.updateDEM(e,i,r,n),this.getNodesInfo())){let e=a.node;if(!e.footprint||!e.footprint.vertices||!e.footprint.vertices.length)continue;let r=e.footprint.vertices,n=i.getElevationAt(r[0].x,r[0].y,!0,!0);for(let e=1;e<r.length;e++)n=Math.min(n,i.getElevationAt(r[e].x,r[e].y,!0,!0));e.elevation=n}}this.terrainTile=a.tileID.canonical,this.terrainExaggeration=i}}updateDEM(e,i,r,n){let a=i._dem._modifiedForSources[n];if(void 0===a&&(i._dem._modifiedForSources[n]=[],a=i._dem._modifiedForSources[n]),a.includes(r.canonical))return;let s=i._dem.dim;a.push(r.canonical);let o=!1;for(let e of this.getNodesInfo()){let r=e.node;if(!r.footprint||!r.footprint.grid)continue;let n=r.footprint.grid,a=i.tileCoordToPixel(n.min.x,n.min.y),l=i.tileCoordToPixel(n.max.x,n.max.y),u=Math.min(Math.min(s-l.y,a.x),Math.min(a.y,s-l.x));if(u<0)continue;let h=O(u,2,5),c=Math.max(0,a.x-h),d=Math.max(0,a.y-h),f=Math.min(l.x+h,s-1),p=Math.min(l.y+h,s-1);for(let e=d;e<=p;++e)for(let i=c;i<=f;++i)fh[e*s+i]=255;let m=0,_=0;for(let e=0;e<n.cellsY;++e)for(let r=0;r<n.cellsX;++r){if(!n.cells[e*n.cellsX+r])continue;let a=i.tileCoordToPixel(n.min.x+r/n.xScale,n.min.y+e/n.yScale),o=i.tileCoordToPixel(n.min.x+(r+1)/n.xScale,n.min.y+(e+1)/n.yScale);for(let e=a.y;e<=Math.min(o.y+1,s-1);++e)for(let r=a.x;r<=Math.min(o.x+1,s-1);++r)255===fh[e*s+r]&&(fh[e*s+r]=0,m+=i.getElevationAtPixel(r,e),_++)}let g=m/_;c=Math.max(1,a.x-h),d=Math.max(1,a.y-h),f=Math.min(l.x+h,s-2),p=Math.min(l.y+h,s-2),o=!0;for(let e=d;e<=p;++e)for(let r=c;r<=f;++r)0===fh[e*s+r]&&(fu[e*s+r]=i._dem.set(r,e,g));for(let e=1;e<h;++e){c=Math.max(1,a.x-e),d=Math.max(1,a.y-e),f=Math.min(l.x+e,s-2),p=Math.min(l.y+e,s-2);for(let r=d;r<=p;++r)for(let n=c;n<=f;++n){let a=r*s+n;if(255===fh[a]){let o=0,l=0,u=-1,c=-1;for(let i=-1;i<=1;++i)for(let a=-1;a<=1;++a){let h=(r+i)*s+n+a;if(fh[h]>=e)continue;let d=fu[h],f=Math.abs(d);f>l&&(o=d,l=f,u=a,c=i)}if(l>.1){let s=1-(e+.5*Math.abs(u*c))/h,l=i._dem.get(n,r)+o*s,d=i._dem.get(n+u,r+c),f=i._dem.get(n-u,r-c,!0);(l-d)*(l-f)>0&&(l=(d+f)/2),fu[a]=i._dem.set(n,r,l),fh[a]=e}}}}}o&&(i._demTile.needsDEMTextureUpload=!0,i._dem._timestamp=eW.now())}getNodesInfo(){if(!this.nodesInfo){for(let e of(this.nodesInfo=[],this.nodes))this.nodesInfo.push(new fd(e));this.freeNodes()}return this.nodesInfo}freeNodes(){if(this.nodes){for(let e of this.nodes)fr(e);this.nodes.splice(0,this.nodes.length)}}destroy(){for(let e of(this.freeNodes(),this.getNodesInfo()))fi(e.node),fr(e.node)}isEmpty(){return!this.nodes.length}updateReplacement(e,i){if(i.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=i.updateTime;let r=i.getReplacementRegionsForTile(e.toUnwrapped()),n=this.getNodesInfo();for(let e=0;e<this.nodesInfo.length;e++){let i=n[e].node;n[e].hiddenByReplacement=!!i.footprint&&!r.find(e=>e.footprint===i.footprint)}}getHeightAtTileCoord(e,i){let r=this.getNodesInfo(),n=[];for(let a=0;a<this.nodesInfo.length;a++){let s=r[a],o=s.node.meshes[0];if(e<o.aabb.min[0]||i<o.aabb.min[1]||e>o.aabb.max[0]||i>o.aabb.max[1])continue;let l=(e-o.aabb.min[0])/(o.aabb.max[0]-o.aabb.min[0])*64|0,u=64*Math.min(63,(i-o.aabb.min[1])/(o.aabb.max[1]-o.aabb.min[1])*64|0)+Math.min(63,l);if(!(o.heightmap[u]<0&&s.node.footprint)){if(s.hiddenByReplacement)return;return{height:o.heightmap[u],maxHeight:s.feature.properties.height,hidden:!1,verticalScale:s.evaluatedScale[2]}}if(s.node.footprint.grid.query(new k(e,i),new k(e,i),n),n.length>0)return{height:void 0,maxHeight:s.feature.properties.height,hidden:s.hiddenByReplacement,verticalScale:s.evaluatedScale[2]}}}}function fp(e,i){return!e.isLightConstant&&i}function fm(e,i){return e.x-i.x||e.y-i.y}function f_(e,i){return 0===fm(e.min,i.min)&&0===fm(e.max,i.max)}function fg(e,i){return!(e.min.x>i.max.x||e.max.x<i.min.x||e.min.y>i.max.y||e.max.y<i.min.y)}function fy(e,i,r){let n=1/(1<<r.canonical.z),a=(1220703125e-13*i.x+r.canonical.x)*n+r.wrap,s=(1220703125e-13*i.y+r.canonical.y)*n;return{min:new k((1220703125e-13*e.x+r.canonical.x)*n+r.wrap,(1220703125e-13*e.y+r.canonical.y)*n),max:new k(a,s)}}function fv(e,i,r,n,a,s,o){let l=e.indices,u=e.vertices,h=[];for(let c=n;c<n+a;c+=3){let n=i[r[c+0]+s],a=i[r[c+1]+s],d=i[r[c+2]+s],f=Math.min(n.x,a.x,d.x),p=Math.max(n.x,a.x,d.x),m=Math.min(n.y,a.y,d.y),_=Math.max(n.y,a.y,d.y);h.length=0,e.grid.query(new k(f,m),new k(p,_),h);for(let e=0;e<h.length;e++){let i=h[e];if(ub(u[l[3*i+0]],u[l[3*i+1]],u[l[3*i+2]],n,a,d,o))return!0}}return!1}no(ff,"Tiled3dModelBucket",{omit:["layers"]}),no(fd,"Tiled3dModelFeature");let fx=hb.types,fb=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],fw=["fill-extrusion-flood-light-ground-radius"],fM=new k(0,1);function fT(e,i,r,n,a,s,o,l){e.emplaceBack((i<<1)+o,(r<<1)+s,(Math.floor(8192*n)<<1)+a,Math.round(l))}function fL(e,i,r,n,a,s){e.emplaceBack(i.x,i.y,(r.x<<1)+n,(r.y<<1)+a,s)}function fS(e,i,r){e.emplaceBack(i.x,i.y,i.z,16384*r[0],16384*r[1],16384*r[2])}class fk{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class fD{constructor(){this.centroidXY=new k(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new k(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new k(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new k(this.max.x-this.min.x,this.max.y-this.min.y)}}class fE{constructor(){this.acc=new k(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,i){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=i.x,e.min.y=e.max.y=i.y)}appendEdge(e,i,r){this.accCount++,this.acc._add(i);let n=!!this.borders;i.x<e.min.x?(e.min.x=i.x,n=!0):i.x>e.max.x&&(e.max.x=i.x,n=!0),i.y<e.min.y?(e.min.y=i.y,n=!0):i.y>e.max.y&&(e.max.y=i.y,n=!0),((0===i.x||8192===i.x)&&i.x===r.x)!=((0===i.y||8192===i.y)&&i.y===r.y)&&this.processBorderOverlap(i,r),n&&this.checkBorderIntersection(i,r)}checkBorderIntersection(e,i){i.x<0!=e.x<0&&this.addBorderIntersection(0,iS(i.y,e.y,(0-i.x)/(e.x-i.x))),i.x>8192!=e.x>8192&&this.addBorderIntersection(1,iS(i.y,e.y,(8192-i.x)/(e.x-i.x))),i.y<0!=e.y<0&&this.addBorderIntersection(2,iS(i.x,e.x,(0-i.y)/(e.y-i.y))),i.y>8192!=e.y>8192&&this.addBorderIntersection(3,iS(i.x,e.x,(8192-i.y)/(e.y-i.y)))}addBorderIntersection(e,i){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);let r=this.borders[e];i<r[0]&&(r[0]=i),i>r[1]&&(r[1]=i)}processBorderOverlap(e,i){if(e.x===i.x){if(e.y===i.y)return;let r=0===e.x?0:1;this.addBorderIntersection(r,i.y),this.addBorderIntersection(r,e.y)}else{let r=0===e.y?2:3;this.addBorderIntersection(r,i.x),this.addBorderIntersection(r,e.x)}}centroid(){return 0===this.accCount?new k(0,0):new k(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,i)=>e+ +(i[0]!==Number.MAX_VALUE),0):0}}function fA(e,i){let r=e.add(i)._unit();return Math.min(4,Math.max(-4,Math.tan(Math.acos(O(e.x*r.x+e.y*r.y,-1,1)))))/4*32767*(e.x*i.y-e.y*i.x<0?-1:1)}let fP=[e=>e.x<0,e=>e.x>8192,e=>e.y<0,e=>e.y>8192];class fC{constructor(e){this.vertexArray=new nQ,this.indexArray=new ar,this.programConfigurations=new a8(e.layers,e.zoom,e=>fw.includes(e)),this._segments=new aE,this.hiddenByLandmarkVertexArray=new am,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new aE}getDefaultSegment(){return this.regionSegments[4]}hasData(){return 0!==this.vertexArray.length}addData(e,i,r,n=!1){let a=e.length;if(a>2){let s,o=Math.max(0,this._segments.get().length-1),l=this._segments._prepareSegment(4*a,this.vertexArray.length,2*this._segmentToGroundQuads[o].length);o!==this._segments.get().length-1&&(o++,this._segmentToGroundQuads[o]=[],this._segmentToRegionTriCounts[o]=[0,0,0,0,0]);{let i=e[0],r=e[1];s=fA(i.sub(e[a-1])._perp()._unit(),r.sub(i)._perp()._unit())}for(let u=0;u<a;u++){let h=u===a-1?0:u+1,c=e[u],d=e[h],f=e[h===a-1?0:h+1],p=d.sub(c)._perp()._unit(),m=fA(p,f.sub(d)._perp()._unit()),_=s;if(fR(c,d,i)||n&&fY(c,i)&&fY(d,i)){s=m;continue}let g=l.vertexLength;for(let e of(fL(this.vertexArray,c,d,1,1,_),fL(this.vertexArray,c,d,1,0,_),fL(this.vertexArray,c,d,0,1,m),fL(this.vertexArray,c,d,0,0,m),l.vertexLength+=4,function(e,i,r,n){let a=[4];if(0===n)return a;r._mult(n);let s=e.sub(r),o=i.sub(r),l=[e,i,s,o];for(let e=0;e<4;e++)for(let i of l)if(fP[e](i)){a.push(e);break}return a}(c,d,p,r)))this._segmentToGroundQuads[o].push({id:g,region:e}),this._segmentToRegionTriCounts[o][e]+=2,l.primitiveLength+=2;s=m}}}prepareBorderSegments(){if(!this.hasData())return;let e=this._segments.get(),i=e.length;for(let e=0;e<i;e++)this._segmentToGroundQuads[e].sort((e,i)=>e.region-i.region);for(let r=0;r<i;r++){let i=this._segmentToGroundQuads[r],n=e[r],a=this._segmentToRegionTriCounts[r];a.reduce((e,i)=>e+i,0);let s=0;for(let e=0;e<=4;e++){let i=a[e];if(0!==i){let r=this.regionSegments[e];r||(r=this.regionSegments[e]=new aE);let a={vertexOffset:n.vertexOffset,primitiveOffset:n.primitiveOffset+s,vertexLength:n.vertexLength,primitiveLength:i};r.get().push(a)}s+=i}for(let e=0;e<i.length;e++){let r=i[e].id;this.indexArray.emplaceBack(r,r+1,r+3),this.indexArray.emplaceBack(r,r+3,r+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,i,r,n,a,s){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,i,r,n,a,s)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,hu.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,i,r,n,a,s){this.hasData()&&this.programConfigurations.updatePaintArrays(e,i,r,n,a,s)}updateHiddenByLandmark(e){if(!this.hasData())return;let i=e.groundVertexCount+e.groundVertexArrayOffset;if(0===e.groundVertexCount)return;let r=2147483648&e.flags?1:0;for(let n=e.groundVertexArrayOffset;n<i;++n)this.hiddenByLandmarkVertexArray.emplace(n,r);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,hc.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){let i=this.regionSegments[e];i&&i.destroy()}}}}class fI{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new ar,this.footprintVertices=new nX,this.footprintSegments=[],this.layoutVertexArray=new nK,this.centroidVertexArray=new aS,this.indexArray=new ar,this.programConfigurations=new a8(e.layers,e.zoom,e=>fb.includes(e)),this.segments=new aE,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.groundEffect=new fC(e),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(e,i,r,n){for(let{feature:a,id:s,index:o,sourceLayerIndex:l}of(this.features=[],this.hasPattern=hr("fill-extrusion",this.layers,i),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=ur(r),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,e)){let e=this.layers[0]._featureFilter.needGeometry,u=ul(a,e);if(!this.layers[0]._featureFilter.filter(new nE(this.zoom),u,r))continue;let h={id:s,sourceLayerIndex:l,index:o,geometry:e?u.geometry:uo(a,r,n),properties:a.properties,type:a.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(hn("fill-extrusion",this.layers,h,this.zoom,i)):this.addFeature(h,h.geometry,o,r,{},i.availableImages,n,i.brightness),i.featureIndex.insert(a,h.geometry,o,l,this.index,c)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(e,i,r,n,a,s){for(let e of this.features){let{geometry:o}=e;this.addFeature(e,o,e.index,i,r,n,a,s)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles()}update(e,i,r,n,a){let s=0!==Object.keys(e).length;if(s&&!this.stateDependentLayers.length)return;let o=s?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(e,i,o,r,n,a),this.groundEffect.update(e,i,o,r,n,a)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hf),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,hd.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,hh.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,i,r,n,a,s,o,l){var u;let h;let c=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,d=[new k(0,0),new k(8192,8192)],f=o.projection,p="globe"===f.name,m="Polygon"===fx[e.type],_=new fE;_.centroidDataIndex=this.centroidData.length;let g=new fD,y=0>=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},n),v=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},n);g.height=v,g.vertexArrayOffset=this.layoutVertexArray.length,g.groundVertexArrayOffset=this.groundEffect.vertexArray.length,p&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new n4);let x=ht(i,500);for(let e=x.length-1;e>=0;e--){let i=x[e];(0===i.length||(u=i[0]).every(e=>e.x<=0)||u.every(e=>e.x>=8192)||u.every(e=>e.y<=0)||u.every(e=>e.y>=8192))&&x.splice(e,1)}if(p)h=fN(x,d,n);else for(let e of(h=[],x))h.push({polygon:e,bounds:d});let b=m?this.edgeRadius:0,w=b>0&&this.zoom<17,M=(e,i)=>{if(0===e.length)return!1;let r=e[e.length-1];return i.x===r.x&&i.y===r.y};for(let{polygon:e,bounds:i}of h){let r=0,a=0;for(let i of e)m&&!i[0].equals(i[i.length-1])&&i.push(i[0]),a+=m?i.length-1:i.length;let s=this.segments.prepareSegment((m?5:4)*a,this.layoutVertexArray,this.indexArray);g.footprintSegIdx<0&&(g.footprintSegIdx=this.footprintSegments.length),g.polygonSegIdx<0&&(g.polygonSegIdx=this.polygonSegments.length);let o={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},l=new fk;if(l.vertexOffset=this.footprintVertices.length,l.indexOffset=3*this.footprintIndices.length,l.ringIndices=[],m){let a=[],o=[];r=s.vertexLength;for(let r=0;r<e.length;r++){let u,h;let d=e[r];d.length&&0!==r&&o.push(a.length/2);let m=[];u=d[1].sub(d[0])._perp()._unit(),l.ringIndices.push(d.length-1);for(let e=1;e<d.length;e++){let i=d[e],r=d[e===d.length-1?1:e+1],o=i.clone();if(b){h=r.sub(i)._perp()._unit();let e=u.add(h)._unit(),n=b*Math.min(4,1/(u.x*e.x+u.y*e.y));o.x+=n*e.x,o.y+=n*e.y,o.x=Math.round(o.x),o.y=Math.round(o.y),u=h}!y||0!==b&&!w||M(m,o)||m.push(o),fT(this.layoutVertexArray,o.x,o.y,0,0,1,1,0),s.vertexLength++,this.footprintVertices.emplaceBack(i.x,i.y),a.push(i.x,i.y),p&&fS(this.layoutVertexExtArray,f.projectTilePoint(o.x,o.y,n),f.upVector(n,o.x,o.y))}y&&(0===b||w)&&(0!==m.length&&M(m,m[0])&&m.pop(),this.groundEffect.addData(m,i,c))}let u=he(a,o);for(let e=0;e<u.length;e+=3)this.footprintIndices.emplaceBack(l.vertexOffset+u[e+0],l.vertexOffset+u[e+1],l.vertexOffset+u[e+2]),this.indexArray.emplaceBack(r+u[e],r+u[e+2],r+u[e+1]),s.primitiveLength++;l.indexCount+=u.length,l.vertexCount+=this.footprintVertices.length-l.vertexOffset}for(let a=0;a<e.length;a++){let o,l,u;let h=e[a];_.startRing(g,h[0]);let d=h.length>4&&fF(h[h.length-2],h[0],h[1]),v=b?function(e,i,r,n){let a=i.sub(e)._perp()._unit(),s=r.sub(i)._perp()._unit();return fz(e,i,r,fO(a,s),n)}(h[h.length-2],h[0],h[1],b):0,x=[];l=h[1].sub(h[0])._perp()._unit();let w=!0;for(let e=1,a=0;e<h.length;e++){let c=h[e-1],m=h[e],T=h[e===h.length-1?1:e+1];if(_.appendEdge(g,m,c),fR(m,c,i)){b&&(l=T.sub(m)._perp()._unit(),w=!w);continue}let L=m.sub(c)._perp(),S=L.x/(Math.abs(L.x)+Math.abs(L.y)),k=L.y>0?1:0,D=c.dist(m);if(a+D>32768&&(a=0),b){u=T.sub(m)._perp()._unit();let e=fz(c,m,T,fO(l,u),b);isNaN(e)&&(e=0);let i=m.sub(c)._unit();c=c.add(i.mult(v))._round(),m=m.add(i.mult(-e))._round(),v=e,l=u,y&&this.zoom>=17&&(M(x,c)||x.push(c),M(x,m)||x.push(m))}let E=s.vertexLength,A=h.length>4&&fF(c,m,T),P=fj(a,d,w);if(fT(this.layoutVertexArray,c.x,c.y,S,k,0,0,P),fT(this.layoutVertexArray,c.x,c.y,S,k,0,1,P),a+=D,P=fj(a,A,!w),d=A,fT(this.layoutVertexArray,m.x,m.y,S,k,0,0,P),fT(this.layoutVertexArray,m.x,m.y,S,k,0,1,P),s.vertexLength+=4,this.indexArray.emplaceBack(E+0,E+1,E+2),this.indexArray.emplaceBack(E+1,E+3,E+2),s.primitiveLength+=2,b){let n=r+(1===e?h.length-2:e-2),a=1===e?r:n+1;if(this.indexArray.emplaceBack(E+1,n,E+3),this.indexArray.emplaceBack(n,a,E+3),s.primitiveLength+=2,void 0===o&&(o=E),!fR(T,h[e],i)){let i=e===h.length-1?o:s.vertexLength;this.indexArray.emplaceBack(E+2,E+3,i),this.indexArray.emplaceBack(E+3,i+1,i),this.indexArray.emplaceBack(E+3,a,i+1),s.primitiveLength+=3}w=!w}if(p){let e=this.layoutVertexExtArray,i=f.projectTilePoint(c.x,c.y,n),r=f.projectTilePoint(m.x,m.y,n),a=f.upVector(n,c.x,c.y),s=f.upVector(n,m.x,m.y);fS(e,i,a),fS(e,i,a),fS(e,r,s),fS(e,r,s)}}m&&(r+=h.length-1),y&&b&&this.zoom>=17&&(0!==x.length&&M(x,x[0])&&x.pop(),this.groundEffect.addData(x,i,c,b>0))}this.footprintSegments.push(l),o.triangleCount=this.indexArray.length-o.triangleArrayOffset,this.polygonSegments.push(o),++g.footprintSegLen,++g.polygonSegLen}if(g.vertexCount=this.layoutVertexArray.length-g.vertexArrayOffset,g.groundVertexCount=this.groundEffect.vertexArray.length-g.groundVertexArrayOffset,0!==g.vertexCount){if(g.centroidXY=_.borders?fM:this.encodeCentroid(_,g),this.centroidData.push(g),_.borders){this.featuresOnBorder.push(_);let e=this.featuresOnBorder.length-1;for(let i=0;i<_.borders.length;i++)_.borders[i][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[i].push(e)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,a,s,n,l),this.groundEffect.addPaintPropertiesData(e,r,a,s,n,l),this.maxHeight=Math.max(this.maxHeight,v)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((i,r)=>this.featuresOnBorder[i].borders[e][0]-this.featuresOnBorder[r].borders[e][0])}splitToSubtiles(){let e=[];for(let i=0;i<this.centroidData.length;i++){let r=this.centroidData[i],n=+(r.min.y+r.max.y>8192),a=2*n+(+(r.min.x+r.max.x>8192)^n);for(let n=0;n<r.polygonSegLen;n++){let s=r.polygonSegIdx+n;e.push({centroidIdx:i,subtile:a,polygonSegmentIdx:s,triangleSegmentIdx:this.polygonSegments[s].triangleSegIdx})}}let i=new ar;e.sort((e,i)=>e.triangleSegmentIdx===i.triangleSegmentIdx?e.subtile-i.subtile:e.triangleSegmentIdx-i.triangleSegmentIdx);let r=0,n=0,a=0;for(let i of e){if(i.triangleSegmentIdx!==r)break;a++}let s=e.length;for(;n!==e.length;){r=e[n].triangleSegmentIdx;let o=0,l=n,u=n;for(let i=l;i<a&&e[i].subtile===o;i++)u++;for(;l!==a;){let n=e[l];o=n.subtile;let s=this.centroidData[n.centroidIdx].min.clone(),h=this.centroidData[n.centroidIdx].max.clone(),c={vertexOffset:this.segments.segments[r].vertexOffset,primitiveOffset:i.length,vertexLength:this.segments.segments[r].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let r=l;r<u;r++){let n=e[r],a=this.polygonSegments[n.polygonSegmentIdx],o=this.centroidData[n.centroidIdx].min,l=this.centroidData[n.centroidIdx].max,u=this.indexArray.uint16;for(let e=a.triangleArrayOffset;e<a.triangleArrayOffset+a.triangleCount;e++)i.emplaceBack(u[3*e],u[3*e+1],u[3*e+2]);c.primitiveLength+=a.triangleCount,s.x=Math.min(s.x,o.x),s.y=Math.min(s.y,o.y),h.x=Math.max(h.x,l.x),h.y=Math.max(h.y,l.y)}c.primitiveLength>0&&this.triangleSubSegments.push({segment:c,min:s,max:h}),l=u;for(let i=l;i<a&&e[i].subtile===e[l].subtile;i++)u++}n=a;for(let i=n;i<s&&e[i].triangleSegmentIdx===e[n].triangleSegmentIdx;i++)a++}i._trim(),this.indexArray=i}getVisibleSegments(e,i,r){let n,a=0,s=0,o=1<<e.canonical.z;if(i){let r=i.getMinMaxForTile(e);r&&(a=r.min,s=r.max)}s+=this.maxHeight;let l=e.toUnwrapped(),u=[l.canonical.x/o+l.wrap,l.canonical.y/o],h=[(l.canonical.x+1)/o+l.wrap,(l.canonical.y+1)/o],c=new aE,d=(e,i,r)=>[e[0]*(1-r[0])+i[0]*r[0],e[1]*(1-r[1])+i[1]*r[1]],f=[],p=[];for(let e of this.triangleSubSegments){f[0]=e.min.x/8192,f[1]=e.min.y/8192,p[0]=e.max.x/8192,p[1]=e.max.y/8192;let i=d(u,h,f),o=d(u,h,p);if(0===new lw([i[0],i[1],a],[o[0],o[1],s]).intersectsPrecise(r)){n&&(c.segments.push(n),n=void 0);continue}let l=e.segment;n&&n.vertexOffset!==l.vertexOffset&&(c.segments.push(n),n=void 0),n?(n.vertexLength+=l.vertexLength,n.primitiveLength+=l.primitiveLength):n={vertexOffset:l.vertexOffset,primitiveLength:l.primitiveLength,vertexLength:l.vertexLength,primitiveOffset:l.primitiveOffset,sortKey:void 0,vaos:{}}}return n&&c.segments.push(n),c}encodeCentroid(e,i){let r=e.centroid(),n=i.span(),a=Math.min(7,Math.round(n.x*this.tileToMeter/10)),s=Math.min(7,Math.round(n.y*this.tileToMeter/10));return new k(O(r.x,1,8191)<<3|a,O(r.y,1,8191)<<3|s)}encodeBorderCentroid(e){if(!e.borders)return new k(0,0);let i=e.borders,r=Number.MAX_VALUE;if(i[0][0]!==r||i[1][0]!==r){let e=i[0][0]!==r?0:1;return new k(6|(i[0][0]!==r?0:65528),((i[e][0]+i[e][1])/2|0)<<3|6)}{let e=i[2][0]!==r?2:3;return new k(((i[e][0]+i[e][1])/2|0)<<3|6,6|(i[2][0]!==r?0:65528))}}showCentroid(e){let i=this.centroidData[e.centroidDataIndex];i.flags&=2147483648,i.centroidXY.x=0,i.centroidXY.y=0,this.writeCentroidToBuffer(i)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);let i=e.vertexArrayOffset,r=e.vertexCount+e.vertexArrayOffset,n=2147483648&e.flags?fM:e.centroidXY,a=this.centroidVertexArray.geta_centroid_pos0(i);if(this.centroidVertexArray.geta_centroid_pos1(i)!==n.y||a!==n.x){for(let e=i;e<r;++e)this.centroidVertexArray.emplace(e,n.x,n.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){for(let e of(this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length),this.centroidData))this.writeCentroidToBuffer(e)}updateReplacement(e,i){if(i.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=i.updateTime;let r=i.getReplacementRegionsForTile(e.toUnwrapped());if(function(e,i){if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].sourceId!==i[r].sourceId||!f_(e[r],i[r]))return!1;return!0}(this.activeReplacements,r))return;if(this.activeReplacements=r,0===this.centroidVertexArray.length)this.createCentroidsBuffer();else for(let e of this.centroidData)e.flags&=2147483647;let n=[];for(let i of this.activeReplacements){let r=Math.pow(2,i.footprintTileId.canonical.z-e.canonical.z);for(let a of this.centroidData)if(!(2147483648&a.flags||i.min.x>a.max.x||a.min.x>i.max.x||i.min.y>a.max.y||a.min.y>i.max.y))for(let s=0;s<a.footprintSegLen;s++){let o=this.footprintSegments[a.footprintSegIdx+s];if(n.length=0,function(e,i,r,n,a,s){let o=Math.pow(2,n.z-a.z);for(let l=0;l<r;l++){let r=e.int16[2*(l+i)+0],u=e.int16[2*(l+i)+1];r=(r+8192*a.x)*o-8192*n.x,u=(u+8192*a.y)*o-8192*n.y,s.push(new k(r,u))}}(this.footprintVertices,o.vertexOffset,o.vertexCount,i.footprintTileId.canonical,e.canonical,n),fv(i.footprint,n,this.footprintIndices.uint16,o.indexOffset,o.indexCount,-o.vertexOffset,-r)){a.flags|=2147483648;break}}}for(let e of this.centroidData)this.writeCentroidToBuffer(e);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,i,r){let n=!1;for(let a=0;a<r.footprintSegLen;a++){let s=this.footprintSegments[r.footprintSegIdx+a],o=0;for(let r of s.ringIndices){for(let a=o,l=r+o-1;a<r+o;l=a++){let r=this.footprintVertices.int16[2*(a+s.vertexOffset)+0],o=this.footprintVertices.int16[2*(a+s.vertexOffset)+1],u=this.footprintVertices.int16[2*(l+s.vertexOffset)+1];o>i!=u>i&&e<(this.footprintVertices.int16[2*(l+s.vertexOffset)+0]-r)*(i-o)/(u-o)+r&&(n=!n)}o=r}}return n}getHeightAtTileCoord(e,i){let r=Number.NEGATIVE_INFINITY,n=!0,a=4*(e+8192)*8192+(i+8192);if(this.partLookup.hasOwnProperty(a)){let e=this.partLookup[a];return e?{height:e.height,hidden:!!(2147483648&e.flags)}:void 0}for(let s of this.centroidData)e>s.max.x||s.min.x>e||i>s.max.y||s.min.y>i||this.footprintContainsPoint(e,i,s)&&s&&s.height>r&&(r=s.height,this.partLookup[a]=s,n=!!(2147483648&s.flags));if(r!==Number.NEGATIVE_INFINITY)return{height:r,hidden:n};this.partLookup[a]=void 0}}function fO(e,i){let r=e.add(i)._unit();return e.x*r.x+e.y*r.y}function fz(e,i,r,n,a){let s=Math.sqrt(1-n*n);return Math.min(e.dist(i)/3,i.dist(r)/3,a*s/n)}function fR(e,i,r){return e.x<r[0].x&&i.x<r[0].x||e.x>r[1].x&&i.x>r[1].x||e.y<r[0].y&&i.y<r[0].y||e.y>r[1].y&&i.y>r[1].y}function fY(e,i){return e.x<i[0].x||e.x>i[1].x||e.y<i[0].y||e.y>i[1].y}function fF(e,i,r){if(e.x<0||e.x>=8192||i.x<0||i.x>=8192||r.x<0||r.x>=8192)return!1;let n=r.sub(i),a=n.perp(),s=e.sub(i);return(n.x*s.x+n.y*s.y)/Math.sqrt((n.x*n.x+n.y*n.y)*(s.x*s.x+s.y*s.y))>-.866&&a.x*s.x+a.y*s.y<0}function fj(e,i,r){let n=i?2|e:-3&e;return r?1|n:-2&n}function fB(){let e=Math.tan(Math.PI/32);return l0*Math.sqrt(1+2*e*e)-l0}function fN(e,i,r){let n=1<<r.z,a=l8(r.x/n);return function(e,i,r,n,a=0,s){let o=[];if(!e.length||!r||!n)return o;let l=(e,i)=>{for(let r of e)o.push({polygon:r,bounds:i})},u=Math.ceil(Math.log2(r)),h=Math.ceil(Math.log2(n)),c=u-h,d=[];for(let e=0;e<Math.abs(c);e++)d.push(c>0?0:1);for(let e=0;e<Math.min(u,h);e++)d.push(0),d.push(1);let f=e;if(f=hw(f,i[0].y-a,i[1].y+a,1),!(f=hw(f,i[0].x-a,i[1].x+a,0)).length)return o;let p=[];for(d.length?p.push({polygons:f,bounds:i,depth:0}):l(f,i);p.length;){let e=p.pop(),i=e.depth,r=d[i],n=e.bounds[0],o=e.bounds[1],u=0===r?n.x:n.y,h=0===r?o.x:o.y,c=s?s(r,u,h):.5*(u+h),f=hw(e.polygons,u-a,c+a,r),m=hw(e.polygons,c-a,h+a,r);if(f.length){let e=[n,new k(0===r?c:o.x,1===r?c:o.y)];d.length>i+1?p.push({polygons:f,bounds:e,depth:i+1}):l(f,e)}if(m.length){let e=[new k(0===r?c:n.x,1===r?c:n.y),o];d.length>i+1?p.push({polygons:m,bounds:e,depth:i+1}):l(m,e)}}return o}(e,i,Math.ceil((l8((r.x+1)/n)-a)/11.25),Math.ceil((l7(r.y/n)-l7((r.y+1)/n))/11.25),1,(e,i,a)=>{if(0===e)return .5*(i+a);{let e=l7((r.y+i/8192)/n);return(l6(.5*(l7((r.y+a/8192)/n)+e))*n-r.y)*8192}})}no(fI,"FillExtrusionBucket",{omit:["layers","features"]}),no(fD,"PartData"),no(fk,"FootprintSegment"),no(fE,"BorderCentroidData"),no(fC,"GroundEffect");let fH=new nN({visibility:new nF(eK["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new nF(eK["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var fV={paint:new nN({"fill-extrusion-opacity":new nF(eK["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nj(eK["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nF(eK["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nF(eK["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nj(eK["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nj(eK["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nj(eK["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nF(eK["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new nF(eK["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new nF(eK["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new nF(eK["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new nF(eK["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new nF(eK["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new nF(eK["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new nF(eK["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new nj(eK["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new nj(eK["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new nF(eK["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new nF(eK["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new nF(eK["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new nF(eK["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new nF(eK["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:fH};class fU extends k{constructor(e,i,r){super(e,i),this.z=r}}function f$(e,i){return e.x*i.x+e.y*i.y}function fW(e,i){if(1===e.length){let r,n=0,a=i[n++];for(;!r||a.equals(r);)if(!(r=i[n++]))return 1/0;for(;n<i.length;n++){let s=i[n],o=e[0],l=r.sub(a),u=s.sub(a),h=o.sub(a),c=f$(l,l),d=f$(l,u),f=f$(u,u),p=f$(h,l),m=f$(h,u),_=c*f-d*d,g=(f*p-d*m)/_,y=(c*m-d*p)/_,v=a.z*(1-g-y)+r.z*g+s.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(let r of i)e=Math.min(e,r.z);return e}}function fG(e,i,r,n,a,s,o,l){let u=o*a.getElevationAt(e,i,!0,!0),h=0!==s[0],c=h?0===s[1]?o*(s[0]/7-450):o*function(e,i,r){var n,a;let s=Math.floor(i[0]/8),o=Math.floor(i[1]/8),l=10*(i[0]-8*s),u=10*(i[1]-8*o),h=e.getElevationAt(s,o,!0,!0),c=e.getMeterToDEM(r),d=Math.floor(.5*(l*c-1)),f=Math.floor(.5*(u*c-1)),p=e.tileCoordToPixel(s,o),m=2*d+1,_=2*f+1,g=(n=p.x-d,a=p.y-f,[e.getElevationAtPixel(n,a,!0),e.getElevationAtPixel(n+_,a,!0),e.getElevationAtPixel(n,a+_,!0),e.getElevationAtPixel(n+m,a+_,!0)]),y=Math.abs(g[0]-g[1]);return h+Math.max(Math.min(.25,.5*c*(y+Math.abs(g[2]-g[3]))/m)*l,Math.min(.25,.5*c*(Math.abs(g[0]-g[2])+Math.abs(g[1]-g[3]))/_)*u)}(a,s,l):u;return{base:u+(0===r)?-1:r,top:h?Math.max(c+n,u+r+2):u+n}}let fq=new nN({"line-cap":new nj(eK.layout_line["line-cap"]),"line-join":new nj(eK.layout_line["line-join"]),"line-miter-limit":new nF(eK.layout_line["line-miter-limit"]),"line-round-limit":new nF(eK.layout_line["line-round-limit"]),"line-sort-key":new nj(eK.layout_line["line-sort-key"]),visibility:new nF(eK.layout_line.visibility)});var fZ={paint:new nN({"line-opacity":new nj(eK.paint_line["line-opacity"]),"line-color":new nj(eK.paint_line["line-color"]),"line-translate":new nF(eK.paint_line["line-translate"]),"line-translate-anchor":new nF(eK.paint_line["line-translate-anchor"]),"line-width":new nj(eK.paint_line["line-width"]),"line-gap-width":new nj(eK.paint_line["line-gap-width"]),"line-offset":new nj(eK.paint_line["line-offset"]),"line-blur":new nj(eK.paint_line["line-blur"]),"line-dasharray":new nj(eK.paint_line["line-dasharray"]),"line-pattern":new nj(eK.paint_line["line-pattern"]),"line-gradient":new nB(eK.paint_line["line-gradient"]),"line-trim-offset":new nF(eK.paint_line["line-trim-offset"]),"line-emissive-strength":new nF(eK.paint_line["line-emissive-strength"]),"line-border-width":new nj(eK.paint_line["line-border-width"]),"line-border-color":new nj(eK.paint_line["line-border-color"])}),layout:fq};function fX(e,i){return 1/d5(e,1,i.tileZoom)}function fJ(e,i,r,n){return e.translatePosMatrix(n||i.tileID.projMatrix,i,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}let fK=e=>{let i=[];fQ(e)&&i.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&i.push("RENDER_LINE_GRADIENT");let r=e.paint.get("line-trim-offset");return 0===r[0]&&0===r[1]||i.push("RENDER_LINE_TRIM_OFFSET"),0!==e.paint.get("line-border-width").constantOr(1)&&i.push("RENDER_LINE_BORDER"),i};function fQ(e){let i=e.paint.get("line-dasharray").value;return i.value||"constant"!==i.kind}let f0=new class extends nj{possiblyEvaluate(e,i){return i=new nE(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(e,i)}evaluate(e,i,r,n){return i=j({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(e,i,r,n)}}(fZ.paint.properties["line-width"].specification);f0.useIntegerZoom=!0;let f1=new nN({visibility:new nF(eK.layout_background.visibility)});var f2={paint:new nN({"background-color":new nF(eK.paint_background["background-color"]),"background-pattern":new nF(eK.paint_background["background-pattern"]),"background-opacity":new nF(eK.paint_background["background-opacity"]),"background-emissive-strength":new nF(eK.paint_background["background-emissive-strength"])}),layout:f1};let f3=new nN({visibility:new nF(eK.layout_raster.visibility)});var f4={paint:new nN({"raster-opacity":new nF(eK.paint_raster["raster-opacity"]),"raster-color":new nB(eK.paint_raster["raster-color"]),"raster-color-mix":new nF(eK.paint_raster["raster-color-mix"]),"raster-color-range":new nF(eK.paint_raster["raster-color-range"]),"raster-hue-rotate":new nF(eK.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nF(eK.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nF(eK.paint_raster["raster-brightness-max"]),"raster-saturation":new nF(eK.paint_raster["raster-saturation"]),"raster-contrast":new nF(eK.paint_raster["raster-contrast"]),"raster-resampling":new nF(eK.paint_raster["raster-resampling"]),"raster-fade-duration":new nF(eK.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new nF(eK.paint_raster["raster-emissive-strength"]),"raster-array-band":new nF(eK.paint_raster["raster-array-band"]),"raster-elevation":new nF(eK.paint_raster["raster-elevation"])}),layout:f3};function f5(i,r,n,a,s,o,l,u){let h=[i,r,1,n,a,1,s,o,1],c=[l,u,1],d=e.bx.adjoint([],h),[f,p,m]=e.v.transformMat3(c,c,d);return e.bx.multiply(h,h,[f,0,0,0,p,0,0,0,m])}function f6(i,r,n,a,s,o,l,u){let h=function(i,r,n,a,s,o,l,u){let h=f5(0,0,1,0,1,1,0,1),c=f5(i,r,n,a,s,o,l,u),d=e.bx.adjoint([],h);return e.bx.multiply(c,c,d)}(i,r,n,a,s,o,l,u);return[h[2]/h[8]/8192,h[5]/h[8]/8192]}function f8(e){return[e[0],Math.min(Math.max(e[1],-l9),l9)]}class f7 extends eJ{constructor(e,i,r,n){super(),this.id=e,this.dispatcher=r,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(n),this.options=i,this._dirty=!1}load(e,i){if(this._loaded=i||!1,this.fire(new eZ("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=ex(this.map._requestManager.transformRequest(this.url,ep.Image),(i,r)=>{this._imageRequest=null,this._loaded=!0,i?this.fire(new eX(i)):r&&(this.image=r instanceof HTMLImageElement?eW.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return e.url&&(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded)),this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw Error("The provided handle is not a WebGLTexture instance");return this.texture=new dk(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new eZ("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof dk||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,this._unsupportedCoords=!1,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let i=e[0][1],r=e[0][1];for(let n of e)n[1]>r&&(r=n[1]),n[1]<i&&(i=n[1]);let n=(r+i)/2;if(n>l9?this.onNorthPole=!0:n<-l9&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){let i=e.map(un.fromLngLat);this.tileID=function(e){let i=1/0,r=1/0,n=-1/0,a=-1/0;for(let s of e)i=Math.min(i,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),a=Math.max(a,s.y);let s=Math.max(0,Math.floor(-Math.log(Math.max(n-i,a-r))/Math.LN2)),o=Math.pow(2,s),l=Math.floor((i+n)/2*o);return l>1&&(l-=1),new lh(s,l,Math.floor((r+a)/2*o))}(i),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new eZ("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(i){var r;for(let e in this.tiles){let i=this.tiles[e];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;let n=cJ(new lh(0,0,0),this.map.transform.projection),a=[n.projection.project(this.coordinates[0][0],this.coordinates[0][1]),n.projection.project(this.coordinates[1][0],this.coordinates[1][1]),n.projection.project(this.coordinates[2][0],this.coordinates[2][1]),n.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(e){let i=e[1].x-e[0].x,r=e[1].y-e[0].y,n=e[2].x-e[1].x,a=e[2].y-e[1].y,s=e[3].x-e[2].x,o=e[3].y-e[2].y,l=e[0].x-e[3].x,u=e[0].y-e[3].y,h=i*a-n*r,c=n*o-s*a,d=s*u-l*o,f=l*r-i*u;return h>0&&c>0&&d>0&&f>0||h<0&&c<0&&d<0&&f<0}(a))return void(this._unsupportedCoords=!0);let s=cJ(this.tileID,this.map.transform.projection),[o,l,u,h]=this.coordinates.map(e=>{let i=s.projection.project(e[0],e[1]);return cK(s,i)._round()});this.perspectiveTransform=f6(o.x,o.y,l.x,l.y,u.x,u.y,h.x,h.y);let c=this._boundsArray=new nK;c.emplaceBack(o.x,o.y,0,0),c.emplaceBack(l.x,l.y,8192,0),c.emplaceBack(h.x,h.y,0,8192),c.emplaceBack(u.x,u.y,8192,8192),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=i.createVertexBuffer(c,dI.members),this.boundsSegments=aE.simpleSegment(0,0,4,2);let d=[],[f,p,m,_]=function(e){let i=e[0][0],r=i,n=e[0][1],a=n;for(let s=1;s<e.length;s++)e[s][0]<i?i=e[s][0]:e[s][0]>r&&(r=e[s][0]),e[s][1]<n?n=e[s][1]:e[s][1]>a&&(a=e[s][1]);return[i,n,r-i,a-n]}([f8((r=this.coordinates)[0]),f8(r[1]),f8(r[2]),f8(r[3])]);{let r=new nK,[s,o,l,u]=function(e){let i=e[0].x,r=i,n=e[0].y,a=n;for(let s=1;s<e.length;s++)e[s].x<i?i=e[s].x:e[s].x>r&&(r=e[s].x),e[s].y<n?n=e[s].y:e[s].y>a&&(a=e[s].y);return[i,n,r-i,a-n]}(a),h=e=>[(e.x-s)/l,(e.y-o)/u],[c,g,y,v]=a.map(h),x=function(i,r,n,a,s,o,l,u){let h=f5(0,0,1,0,1,1,0,1),c=f5(i,r,n,a,s,o,l,u),d=e.bx.adjoint([],c);return e.bx.multiply(h,h,d)}(c[0],c[1],g[0],g[1],y[0],y[1],v[0],v[1]);this.elevatedGlobePerspectiveTransform=f6(c[0],c[1],g[0],g[1],y[0],y[1],v[0],v[1]);let b=(i,n)=>{d.push(i.lng);let a=Math.round((i.lng-f)/m*8192),s=Math.round((i.lat-p)/_*8192),o=h(n),l=e.v.transformMat3([],[o[0],o[1],1],x),u=Math.round(l[0]/l[2]*8192),c=Math.round(l[1]/l[2]*8192);r.emplaceBack(a,s,u,c)},w=a[3].x-a[0].x,M=a[3].y-a[0].y,T=a[2].x-a[1].x,L=a[2].y-a[1].y;for(let e=0;e<65;e++){let i=e/64,r=[a[0].x+i*w,a[0].y+i*M],s=[a[1].x+i*T,a[1].y+i*L],o=s[0]-r[0],l=s[1]-r[1];for(let e=0;e<65;e++){let i=e/64,a={x:r[0]+o*i,y:r[1]+l*i,z:0};b(n.projection.unproject(a.x,a.y),a)}}this.elevatedGlobeVertexBuffer=i.createVertexBuffer(r,dI.members)}{this.maxLongitudeTriangleSize=0;let e=[],r=new ar,n=(i,n,a)=>{r.emplaceBack(i,n,a);let s=d[i],o=d[n],l=d[a],u=Math.min(Math.min(s,o),l),h=Math.max(Math.max(s,o),l)-u;h>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=h),e.push(u+h/2)};for(let e=0;e<64;e++)for(let i=0;i<64;i++){let r=65*e+i,a=r+1,s=r+65,o=s+1;n(r,s,a),n(a,s,o)}[e,r]=function(e,i){let r=Array.from({length:e.length},(e,i)=>i);r.sort((i,r)=>e[i]-e[r]);let n=[],a=new ar;for(let s=0;s<r.length;s++){let o=r[s];n.push(e[o]);let l=3*o,u=l+1;a.emplaceBack(i.uint16[l],i.uint16[u],i.uint16[u+1])}return[n,a]}(e,r),this.elevatedGlobeTrianglesCenterLongitudes=e,this.elevatedGlobeIndexBuffer=i.createIndexBuffer(r)}this.elevatedGlobeSegments=aE.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,m/8192,0,_/8192,0,0,p,f,0])}prepare(){let e=0!==Object.keys(this.tiles).length;if(this.tileID&&!e)return;let i=this.map.painter.context,r=i.gl;!this._dirty||this.texture instanceof dk||(this.texture?this.texture.update(this.image):(this.texture=new dS(i,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(i)}loadTile(e,i){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored",i(null)}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(e){var i;let r=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!r)return null;let n=this.elevatedGlobeTrianglesCenterLongitudes,a=(i=e+180)+360*Math.round((n[0]-i)/360),s=new aE,o=(e,i)=>{s.segments.push({vertexOffset:0,primitiveOffset:e,vertexLength:r.segments[0].vertexLength,primitiveLength:i,sortKey:void 0,vaos:{}})},l=.51*this.maxLongitudeTriangleSize;if(Math.abs(n[0]-a)<=l){let e=es(n,0,n.length,a+l);return e===n.length||o(e,ea(n,e+1,n.length,a+360-l)-e),s}a<n[0]&&(a+=360);let u=ea(n,0,n.length,a-l);if(u===n.length)return o(0,n.length),s;o(0,u-0);let h=es(n,u+1,n.length,a+l);return h!==n.length&&o(h,n.length-h),s}}class f9 extends nU{constructor(e,i){super(e,{},i),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(e){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}let pe=new nN({visibility:new nF(eK.layout_sky.visibility)});var pt={paint:new nN({"sky-type":new nF(eK.paint_sky["sky-type"]),"sky-atmosphere-sun":new nF(eK.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new nF(eK.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new nF(eK.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new nF(eK.paint_sky["sky-gradient-radius"]),"sky-gradient":new nB(eK.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new nF(eK.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new nF(eK.paint_sky["sky-atmosphere-color"]),"sky-opacity":new nF(eK.paint_sky["sky-opacity"])}),layout:pe};function pi(i,r,n){let a=[0,0,1],s=e.q.identity([]);return e.q.rotateY(s,s,n?-(i*D)+Math.PI:i*D),e.q.rotateX(s,s,-(r*D)),e.v.transformQuat(a,a,s),e.v.normalize(a,a)}var pr={paint:new nN({})};let pn={circle:class extends nU{constructor(e,i,r){super(e,uk,i,r)}createBucket(e){return new uc(e)}queryRadius(e){return uw("circle-radius",this,e)+uw("circle-stroke-width",this,e)+uM(this.paint.get("circle-translate"))}queryIntersectsFeature(e,i,r,n,a,s,o,l){let u=uL(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,e.pixelToTileUnitsFactor),h=this.paint.get("circle-radius").evaluate(i,r)+this.paint.get("circle-stroke-width").evaluate(i,r);return uA(e,n,s,o,l,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),u,h)}getProgramIds(){return["circle"]}getDefaultProgramParams(e,i){let r=uE(this);return{config:new a6(this,i),defines:r,overrideFog:!1}}},heatmap:class extends nU{createBucket(e){return new uI(e)}constructor(e,i,r){super(e,uN,i,r),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=uH({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return uw("heatmap-radius",this,e)}queryIntersectsFeature(e,i,r,n,a,s,o,l){let u=this.paint.get("heatmap-radius").evaluate(i,r);return uA(e,n,s,o,l,!0,!0,new k(0,0),u)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(e,i){return"heatmap"===e?{config:new a6(this,i),overrideFog:!1}:{}}},hillshade:class extends nU{constructor(e,i,r){super(e,uU,i,r)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(e,i){return{overrideFog:!1}}},fill:class extends nU{constructor(e,i,r){super(e,ho,i,r)}getProgramIds(){let e=this.paint.get("fill-pattern"),i=e&&e.constantOr(1),r=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getDefaultProgramParams(e,i){return{config:new a6(this,i),overrideFog:!1}}recalculate(e,i){super.recalculate(e,i);let r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new ha(e)}queryRadius(){return uM(this.paint.get("fill-translate"))}queryIntersectsFeature(e,i,r,n,a,s){return!e.queryGeometry.isAboveHorizon&&uf(uT(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,e.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends nU{constructor(e,i,r){super(e,fV,i,r),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(e){return new fI(e)}queryRadius(){return uM(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(i,r,n,a,s,o,l,u,h){var c,d,f,p;let m=uL(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,i.pixelToTileUnitsFactor),_=this.paint.get("fill-extrusion-height").evaluate(r,n),g=this.paint.get("fill-extrusion-base").evaluate(r,n),y=[0,0],v=u&&o.elevation,x=o.elevation?o.elevation.exaggeration():1,b=i.tile.getBucket(this);if(v&&b instanceof fI){let e=b.centroidVertexArray,i=h+1;i<e.length&&(y[0]=e.geta_centroid_pos0(i),y[1]=e.geta_centroid_pos1(i))}if(0===y[0]&&1===y[1])return!1;"globe"===o.projection.name&&(a=fN([a],[new k(0,0),new k(8192,8192)],i.tileID.canonical).map(e=>e.polygon).flat());let[w,M]=(c=a,d=v?u:null,f=o.center.lat,p=i.tileID.canonical,"globe"===o.projection.name?function(i,r,n,a,s,o,l,u,h,c,d){let f=[],p=[],m=i.projection.upVectorScale(d,i.center.lat,i.worldSize).metersToTile,_=[0,0,0,1],g=[0,0,0,1],y=(e,i,r,n)=>{e[0]=i,e[1]=r,e[2]=n,e[3]=1},v=fB();for(let x of(n>0&&(n+=v),a+=v,r)){let r=[],v=[];for(let f of x){let p=f.x+s.x,x=f.y+s.y,b=i.projection.projectTilePoint(p,x,d),w=i.projection.upVector(d,f.x,f.y),M=n,T=a;if(l){let e=fG(p,x,n,a,l,u,h,c);M+=e.base,T+=e.top}0!==n?y(_,b.x+w[0]*m*M,b.y+w[1]*m*M,b.z+w[2]*m*M):y(_,b.x,b.y,b.z),y(g,b.x+w[0]*m*T,b.y+w[1]*m*T,b.z+w[2]*m*T),e.v.transformMat4(_,_,o),e.v.transformMat4(g,g,o),r.push(new fU(_[0],_[1],_[2])),v.push(new fU(g[0],g[1],g[2]))}f.push(r),p.push(v)}return[f,p]}(o,c,g,_,m,l,d,y,x,f,p):d?function(i,r,n,a,s,o,l,u,h){let c=[],d=[],f=[0,0,0,1];for(let p of i){let i=[],m=[];for(let c of p){let d=c.x+a.x,p=c.y+a.y,_=fG(d,p,r,n,o,l,u,h);f[0]=d,f[1]=p,f[2]=_.base,f[3]=1,e.e.transformMat4(f,f,s),f[3]=Math.max(f[3],1e-5);let g=new fU(f[0]/f[3],f[1]/f[3],f[2]/f[3]);f[0]=d,f[1]=p,f[2]=_.top,f[3]=1,e.e.transformMat4(f,f,s),f[3]=Math.max(f[3],1e-5);let y=new fU(f[0]/f[3],f[1]/f[3],f[2]/f[3]);i.push(g),m.push(y)}c.push(i),d.push(m)}return[c,d]}(c,g,_,m,l,d,y,x,f):function(e,i,r,n,a){let s=[],o=[],l=a[8]*i,u=a[9]*i,h=a[10]*i,c=a[11]*i,d=a[8]*r,f=a[9]*r,p=a[10]*r,m=a[11]*r;for(let i of e){let e=[],r=[];for(let s of i){let i=s.x+n.x,o=s.y+n.y,_=a[0]*i+a[4]*o+a[12],g=a[1]*i+a[5]*o+a[13],y=a[2]*i+a[6]*o+a[14],v=a[3]*i+a[7]*o+a[15],x=_+l,b=g+u,w=y+h,M=Math.max(v+c,1e-5),T=_+d,L=g+f,S=y+p,k=Math.max(v+m,1e-5);e.push(new fU(x/M,b/M,w/M)),r.push(new fU(T/k,L/k,S/k))}s.push(e),o.push(r)}return[s,o]}(c,g,_,m,l)),T=i.queryGeometry;return function(e,i,r){let n=1/0;uf(r,i)&&(n=fW(r,i[0]));for(let a=0;a<i.length;a++){let s=i[a],o=e[a];for(let e=0;e<s.length-1;e++){let i=s[e],a=[i,s[e+1],o[e+1],o[e],i];ud(r,a)&&(n=Math.min(n,fW(r,a)))}}return n!==1/0&&n}(w,M,T.isPointQuery()?T.screenBounds:T.screenGeometry)}},line:class extends nU{constructor(e,i,r){super(e,fZ,i,r),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){let e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof iL,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,i){super.recalculate(e,i),this.paint._values["line-floorwidth"]=f0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new dL(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(e,i){let r=fK(this);return{config:new a6(this,i),defines:r,overrideFog:!1}}queryRadius(e){var i,r;return i=uw("line-width",this,e),((r=uw("line-gap-width",this,e))>0?r+2*i:i)/2+Math.abs(uw("line-offset",this,e))+uM(this.paint.get("line-translate"))}queryIntersectsFeature(e,i,r,n,a,s){var o,l;if(e.queryGeometry.isAboveHorizon)return!1;let u=uT(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,e.pixelToTileUnitsFactor),h=e.pixelToTileUnitsFactor/2*(o=this.paint.get("line-width").evaluate(i,r),(l=this.paint.get("line-gap-width").evaluate(i,r))>0?l+2*o:o),c=this.paint.get("line-offset").evaluate(i,r);return c&&(n=function(e,i){let r=[],n=new k(0,0);for(let a=0;a<e.length;a++){let s=e[a],o=[];for(let e=0;e<s.length;e++){let r=s[e],a=s[e+1],l=0===e?n:r.sub(s[e-1])._unit()._perp(),u=e===s.length-1?n:a.sub(r)._unit()._perp(),h=l._add(u)._unit();h._mult(1/(h.x*u.x+h.y*u.y)),o.push(h._mult(i)._add(r))}r.push(o)}return r}(n,c*e.pixelToTileUnitsFactor)),function(e,i,r){for(let n=0;n<i.length;n++){let a=i[n];if(e.length>=3){for(let i=0;i<a.length;i++)if(uy(e,a[i]))return!0}if(function(e,i,r){if(e.length>1){if(up(e,i))return!0;for(let n=0;n<i.length;n++)if(um(i[n],e,r))return!0}for(let n=0;n<e.length;n++)if(um(e[n],i,r))return!0;return!1}(e,a,r))return!0}return!1}(u,n,h)}isTileClipped(){return!0}},symbol:dh,background:class extends nU{constructor(e,i,r){super(e,f2,i,r)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(e,i){return{overrideFog:!1}}},raster:class extends nU{constructor(e,i,r){super(e,f4,i,r),this._updateColorRamp()}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}isLayerDraped(e){return!(e&&e._source instanceof f7)||!e._source.onNorthPole&&!e._source.onSouthPole&&0===this.paint.get("raster-elevation")}_handleSpecialPaintPropertyUpdate(e){"raster-color"!==e&&"raster-color-range"!==e||this._updateColorRamp()}_updateColorRamp(){if(!this.hasColorMap())return;let e=this._transitionablePaint._values["raster-color"].value.expression,[i,r]=this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0});this.colorRamp=uH({expression:e,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:i,end:r}],resolution:256}),this.colorRampTexture=null}},sky:class extends nU{constructor(e,i,r){super(e,pt,i,r),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=uH({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){let i=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(e,i){if("atmosphere"===this.paint.get("sky-type")){let r=this.paint.get("sky-atmosphere-sun"),n=!r,a=e.style.light,s=a.properties.get("position");return n&&"viewport"===a.properties.get("anchor")&&J("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),n?pi(s.azimuthal,90-s.polar,i):pi(r[0],90-r[1],i)}let r=this.paint.get("sky-gradient-center");return pi(r[0],90-r[1],i)}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){let e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}},slot:class extends nU{constructor(e,i,r){super(e,pr,i)}},model:class extends nU{constructor(e,i,r){super(e,fl,i,r)}createBucket(e){return new fs(e)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(){return 0}queryIntersectsFeature(){return!1}_handleOverridablePaintPropertyUpdate(e,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven()||"model-color"!==e&&"model-color-mix-intensity"!==e&&"model-rotation"!==e&&"model-scale"!==e&&"model-translation"!==e&&"model-emissive-strength"!==e)}_isPropertyZoomDependent(e){let i=this._transitionablePaint._values[e];return null!=i&&null!=i.value&&null!=i.value.expression&&i.value.expression instanceof rD}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}}};class pa{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class ps{constructor(){this.tasks={},this.taskQueue=[],$(["process"],this),this.invoker=new pa(this.process),this.nextId=0}add(e,i){let r=this.nextId++,n=function({type:e,isSymbolTile:i,zoom:r}){return r=r||0,"message"===e?0:"maybePrepare"!==e||i?"parseTile"!==e||i?"parseTile"===e&&i?300-r:"maybePrepare"===e&&i?400-r:500:200-r:100-r}(i);return 0===n?(ee(),e(),null):(this.tasks[r]={fn:e,metadata:i,priority:n,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:()=>{delete this.tasks[r]}})}process(){ee();{if(this.taskQueue=this.taskQueue.filter(e=>!!this.tasks[e]),!this.taskQueue.length)return;let e=this.pick();if(null===e)return;let i=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!i)return;i.fn()}}pick(){let e=null,i=1/0;for(let r=0;r<this.taskQueue.length;r++){let n=this.tasks[this.taskQueue[r]];n.priority<i&&(i=n.priority,e=r)}if(null===e)return null;let r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}remove(){this.invoker.remove()}}class po{constructor(e,i,r){this.target=e,this.parent=i,this.mapId=r,this.callbacks={},this.cancelCallbacks={},$(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new ps}send(e,i,r,n,a=!1,s){let o=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=s,this.callbacks[o]=r);let l=new Set;return this.target.postMessage({id:o,type:e,hasCallback:!!r,targetMapId:n,mustQueue:a,sourceMapId:this.mapId,data:nh(i,l)},l),{cancel:()=>{r&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(e){let i=e.data,r=i.id;if(r&&(!i.targetMapId||this.mapId===i.targetMapId)){if("<cancel>"===i.type){let e=this.cancelCallbacks[r];delete this.cancelCallbacks[r],e&&e.cancel()}else if(i.mustQueue||ee()){let e=this.callbacks[r],n=this.scheduler.add(()=>this.processTask(r,i),e&&e.metadata||{type:"message"});n&&(this.cancelCallbacks[r]=n)}else this.processTask(r,i)}}processTask(e,i){if(delete this.cancelCallbacks[e],"<response>"===i.type){let r=this.callbacks[e];delete this.callbacks[e],r&&(i.error?r(nc(i.error)):r(null,nc(i.data)))}else{let r=new Set,n=i.hasCallback?(i,n)=>{this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:i?nh(i):null,data:nh(n,r)},r)}:e=>{},a=nc(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,a,n);else if(this.parent.getWorkerSource){let e=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,e[0],a.source,a.scope)[e[1]](a,n)}else n(Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class pl{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=N();let r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){let n=new pl.Actor(r[e],i,this.id);n.name=`Worker ${e}`,this.actors.push(n)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(e,i,r){Y(this.actors,(r,n)=>{r.send(e,i,n)},r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}pl.Actor=po;class pu{constructor(e,i){this.width=e,this.height=i,this.nextRow=0,this.image=new uY({width:e,height:i}),this.positions={},this.uploaded=!1}getDash(e,i){let r=this.getKey(e,i);return this.positions[r]}trim(){let e=this.width,i=this.height=V(this.nextRow);this.image.resize({width:e,height:i})}getKey(e,i){return e.join(",")+i}getDashRanges(e,i,r){let n=[],a=e.length%2==1?-e[e.length-1]*r:0,s=e[0]*r,o=!0;n.push({left:a,right:s,isDash:o,zeroLength:0===e[0]});let l=e[0];for(let i=1;i<e.length;i++){o=!o;let u=e[i];a=l*r,l+=u,s=l*r,n.push({left:a,right:s,isDash:o,zeroLength:0===u})}return n}addRoundDash(e,i,r){let n=i/2;for(let i=-r;i<=r;i++){let a=this.width*(this.nextRow+r+i),s=0,o=e[0];for(let l=0;l<this.width;l++){let u;l/o.right>1&&(o=e[++s]);let h=Math.min(Math.abs(l-o.left),Math.abs(l-o.right)),c=i/r*(n+1);if(o.isDash){let e=n-Math.abs(c);u=Math.sqrt(h*h+e*e)}else u=n-Math.sqrt(h*h+c*c);this.image.data[a+l]=Math.max(0,Math.min(255,u+128))}}}addRegularDash(e,i){for(let i=e.length-1;i>=0;--i){let r=e[i],n=e[i+1];r.zeroLength?e.splice(i,1):n&&n.isDash===r.isDash&&(n.left=r.left,e.splice(i,1))}let r=e[0],n=e[e.length-1];r.isDash===n.isDash&&(r.left=n.left-this.width,n.right=r.right+this.width);let a=this.width*this.nextRow,s=0,o=e[0];for(let r=0;r<this.width;r++){r/o.right>1&&(o=e[++s]);let n=Math.min(Math.abs(r-o.left),Math.abs(r-o.right));this.image.data[a+r]=Math.max(0,Math.min(255,(o.isDash?n:-n)+i+128))}}addDash(e,i){let r=this.getKey(e,i);if(this.positions[r])return this.positions[r];let n="round"===i,a=n?7:0,s=2*a+1;if(this.nextRow+s>this.height)return J("LineAtlas out of space"),null;0===e.length&&e.push(1);let o=0;for(let i=0;i<e.length;i++)e[i]<0&&(J("Negative value is found in line dasharray, replacing values with 0"),e[i]=0),o+=e[i];if(0!==o){let r=this.width/o,s=this.getDashRanges(e,this.width,r);n?this.addRoundDash(s,r,a):this.addRegularDash(s,"square"===i?.5*r:0)}let l=this.nextRow+a;this.nextRow+=s;let u={tl:[l,a],br:[o,0]};return this.positions[r]=u,u}}no(pu,"LineAtlas");class ph{constructor(e){let i={},r=[];for(let n in e){let a=e[n],s=i[n]={};for(let e in a.glyphs){let i=a.glyphs[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;let n=i.metrics.localGlyph?2:1,o={x:0,y:0,w:i.bitmap.width+2*n,h:i.bitmap.height+2*n};r.push(o),s[e]=o}}let{w:n,h:a}=cA(r),s=new uY({width:n||1,height:a||1});for(let r in e){let n=e[r];for(let e in n.glyphs){let a=n.glyphs[+e];if(!a||0===a.bitmap.width||0===a.bitmap.height)continue;let o=i[r][e],l=a.metrics.localGlyph?2:1;uY.copy(a.bitmap,s,{x:0,y:0},{x:o.x+l,y:o.y+l},a.bitmap)}}this.image=s,this.positions=i}}no(ph,"GlyphAtlas");class pc{constructor(e){this.tileID=new ld(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.scope=e.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.promoteId=e.promoteId,this.isSymbolTile=e.isSymbolTile,this.tileTransform=cJ(e.tileID.canonical,e.projection),this.projection=e.projection,this.brightness=e.brightness,this.extraShadowCaster=!!e.extraShadowCaster}parse(e,i,r,n,a){let s,o,l,u;this.status="parsing",this.data=e,this.collisionBoxArray=new ag;let h=new hM(Object.keys(e.layers).sort()),c=new h3(this.tileID,this.promoteId);c.bucketLayerIDs=[];let d={},f=new pu(256,256),p={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:f,availableImages:r,brightness:this.brightness},m=i.familiesBySource[this.source];for(let i in m){let n=e.layers[i];if(!n)continue;let a=!1,s=!1,o=!1;for(let e of m[i])"symbol"===e[0].type?a=!0:s=!0,e[0].is3D()&&"model"!==e[0].type&&(o=!0);if(this.extraShadowCaster&&!o||!0===this.isSymbolTile&&!a||!1===this.isSymbolTile&&!s)continue;1===n.version&&J(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let l=h.encode(i),u=[];for(let e=0;e<n.length;e++){let r=n.feature(e),a=c.getId(r,i);u.push({feature:r,id:a,index:e,sourceLayerIndex:l})}for(let e of m[i]){let i=e[0];(!this.extraShadowCaster||i.is3D()&&"model"!==i.type)&&(void 0!==this.isSymbolTile&&"symbol"===i.type!==this.isSymbolTile||i.minzoom&&this.zoom<Math.floor(i.minzoom)||i.maxzoom&&this.zoom>=i.maxzoom||"none"!==i.visibility&&(pd(e,this.zoom,p.brightness,r),(d[i.id]=i.createBucket({index:c.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:l,sourceID:this.source,projection:this.projection.spec})).populate(u,p,this.tileID.canonical,this.tileTransform),c.bucketLayerIDs.push(e.map(e=>e.id))))}}f.trim();let _={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(s)return this.status="done",a(s);if(this.extraShadowCaster)this.status="done",a(null,{buckets:F(d).filter(e=>!e.isEmpty()),featureIndex:c,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:p.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(o&&l&&u){let e=new ph(o),i=new cC(l,u);for(let n in d){let a=d[n];a instanceof dx?(pd(a.layers,this.zoom,p.brightness,r),function(e,i,r,n,a,s,o,l,u,h,c){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;let d=e.layers[0].layout,f=e.layers[0]._unevaluatedLayout._values,p={};if("composite"===e.textSizeData.kind){let{minZoom:i,maxZoom:r}=e.textSizeData;p.compositeTextSizes=[f["text-size"].possiblyEvaluate(new nE(i),l),f["text-size"].possiblyEvaluate(new nE(r),l)]}if("composite"===e.iconSizeData.kind){let{minZoom:i,maxZoom:r}=e.iconSizeData;p.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new nE(i),l),f["icon-size"].possiblyEvaluate(new nE(r),l)]}p.layoutTextSize=f["text-size"].possiblyEvaluate(new nE(u+1),l),p.layoutIconSize=f["icon-size"].possiblyEvaluate(new nE(u+1),l),p.textMaxSize=f["text-size"].possiblyEvaluate(new nE(18),l);let m="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),_=d.get("text-size"),g=!1;for(let i of e.features)if(i.icon&&i.icon.nameSecondary){g=!0;break}for(let s of e.features){let u=d.get("text-font").evaluate(s,{},l).join(","),f=_.evaluate(s,{},l),y=p.layoutTextSize.evaluate(s,{},l),v=(p.layoutIconSize.evaluate(s,{},l),{horizontal:{},vertical:void 0}),x=s.text,b,w=[0,0];if(x){let n=x.toString(),o=24*d.get("text-letter-spacing").evaluate(s,{},l),h=24*d.get("text-line-height").evaluate(s,{},l),c=!function(e){for(let r of e){var i;if(i=r.charCodeAt(0),nd.Arabic(i)||nd["Arabic Supplement"](i)||nd["Arabic Extended-A"](i)||nd["Arabic Presentation Forms-A"](i)||nd["Arabic Presentation Forms-B"](i))return!1}return!0}(n)?0:o,p=d.get("text-anchor").evaluate(s,{},l),_=d.get("text-variable-anchor");if(!_){let e=d.get("text-radial-offset").evaluate(s,{},l);w=e?cU(p,[24*e,cH]):d.get("text-offset").evaluate(s,{},l).map(e=>24*e)}let g=m?"center":d.get("text-justify").evaluate(s,{},l),b="point"===d.get("symbol-placement"),M=b?24*d.get("text-max-width").evaluate(s,{},l):1/0,T=s=>{e.allowVerticalPlacement&&nf(n)&&(v.vertical=c_(x,i,r,a,u,M,h,p,s,c,w,cf.vertical,!0,y,f))};if(!m&&_){let e="auto"===g?_.map(e=>c$(e)):[g],n=!1;for(let s=0;s<e.length;s++){let o=e[s];if(!v.horizontal[o]){if(n)v.horizontal[o]=v.horizontal[0];else{let e=c_(x,i,r,a,u,M,h,"center",o,c,w,cf.horizontal,!1,y,f);e&&(v.horizontal[o]=e,n=1===e.positionedLines.length)}}}T("left")}else{if("auto"===g&&(g=c$(p)),b||d.get("text-writing-mode").indexOf("horizontal")>=0||!nf(n)){let e=c_(x,i,r,a,u,M,h,p,g,c,w,cf.horizontal,!1,y,f);e&&(v.horizontal[g]=e)}T(b?"left":g)}}let M=!1;if(s.icon&&s.icon.namePrimary){let i=n[s.icon.namePrimary];i&&(b=function(e,i,r,n){let{horizontalAlign:a,verticalAlign:s}=cw(n),o=r[0]-e.displaySize[0]*a,l=r[1]-e.displaySize[1]*s;return{imagePrimary:e,imageSecondary:i,top:l,bottom:l+e.displaySize[1],left:o,right:o+e.displaySize[0]}}(a[s.icon.namePrimary],s.icon.nameSecondary?a[s.icon.nameSecondary]:void 0,d.get("icon-offset").evaluate(s,{},l),d.get("icon-anchor").evaluate(s,{},l)),M=i.sdf,void 0===e.sdfIcons?e.sdfIcons=i.sdf:e.sdfIcons!==i.sdf&&J("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(i.pixelRatio!==e.pixelRatio||0!==d.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}let T=cG(v.horizontal)||v.vertical;e.iconsInText||(e.iconsInText=!!T&&T.iconsInText),(T||b)&&function(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m){var _;let g,y=s.textMaxSize.evaluate(i,{},d);void 0===y&&(y=o);let v=e.layers[0].layout,x=v.get("icon-offset").evaluate(i,{},d),b=cG(r.horizontal)||r.vertical,w="globe"===f.name,M=o/24,T=e.tilePixelRatio*y/24,L=(_=e.overscaling,e.zoom>18&&_>2&&(_>>=1),Math.max(8192/(512*_),1)*v.get("symbol-spacing")),S=v.get("text-padding")*e.tilePixelRatio,E=v.get("icon-padding")*e.tilePixelRatio,A=v.get("text-max-angle")*D,P="map"===v.get("text-rotation-alignment")&&"point"!==v.get("symbol-placement"),C="map"===v.get("icon-rotation-alignment")&&"point"!==v.get("symbol-placement"),I=v.get("symbol-placement"),O=L/2,z=v.get("icon-text-fit").evaluate(i,{},d),R=v.get("icon-text-fit-padding").evaluate(i,{},d),Y="none"!==z;!1===e.hasAnyIconTextFit&&Y&&(e.hasAnyIconTextFit=!0),n&&Y&&(e.allowVerticalPlacement&&r.vertical&&(g=cT(n,r.vertical,z,R,x,M)),b&&(n=cT(n,b,z,R,x,M)));let F=(o,l,_)=>{if(l.x<0||l.x>=8192||l.y<0||l.y>=8192)return;let y=null;if(w){let{x:e,y:i,z:r}=f.projectTilePoint(l.x,l.y,_);y={anchor:new cL(e,i,r,0,void 0),up:f.upVector(_,l.x,l.y)}}!function(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w,M,T,L,S,k){let D=e.addToLineVertexArray(i,n),E,A,P,C,I,O,z,R=0,Y=0,F=0,j=0,B=-1,N=-1,H={},V=aF(""),U=r?r.anchor:i,$="none"!==u.layout.get("icon-text-fit").evaluate(b,{},L),W=0,G=0;if(void 0===u._unevaluatedLayout.getValue("text-radial-offset")?[W,G]=u.layout.get("text-offset").evaluate(b,{},L).map(e=>24*e):(W=24*u.layout.get("text-radial-offset").evaluate(b,{},L),G=cH),e.allowVerticalPlacement&&a.vertical){let e=a.vertical;if(m)O=cZ(e),l&&(z=cZ(l));else{let r=u.layout.get("text-rotate").evaluate(b,{},L)+90;P=cq(h,U,i,c,d,f,e,p,r,_),l&&(C=cq(h,U,i,c,d,f,l,y,r))}}if(s){let n=u.layout.get("icon-rotate").evaluate(b,{},L),a=cY(s,n,M,$),o=l?cY(l,n,M,$):void 0;A=cq(h,U,i,c,d,f,s,y,n),R=4*a.length;let p=e.iconSizeData,m=null;"source"===p.kind?(m=[128*u.layout.get("icon-size").evaluate(b,{},L)])[0]>32640&&J(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`):"composite"===p.kind&&((m=[128*w.compositeIconSizes[0].evaluate(b,{},L),128*w.compositeIconSizes[1].evaluate(b,{},L)])[0]>32640||m[1]>32640)&&J(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`),e.addSymbols(e.icon,a,m,x,v,b,!1,r,i,D.lineStartIndex,D.lineLength,-1,T,L,S,k),B=e.icon.placedSymbolArray.length-1,o&&(Y=4*o.length,e.addSymbols(e.icon,o,m,x,v,b,cf.vertical,r,i,D.lineStartIndex,D.lineLength,-1,T,L,S,k),N=e.icon.placedSymbolArray.length-1)}for(let n in a.horizontal){let s=a.horizontal[n];E||(V=aF(s.text),m?I=cZ(s):E=cq(h,U,i,c,d,f,s,p,u.layout.get("text-rotate").evaluate(b,{},L),_));let l=1===s.positionedLines.length;if(F+=cW(e,r,i,s,o,u,m,b,_,D,a.vertical?cf.horizontal:cf.horizontalOnly,l?Object.keys(a.horizontal):[n],H,B,w,T,L,S),l)break}a.vertical&&(j+=cW(e,r,i,a.vertical,o,u,m,b,_,D,cf.vertical,["vertical"],H,N,w,T,L,S));let q=-1,Z=(e,i)=>e?Math.max(e,i):i;q=Z(I,-1),q=Z(O,q);let X=(q=Z(z,q))>-1?1:0;e.glyphOffsetArray.length>=dx.MAX_GLYPHS&&J("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(i.x,i.y,U.x,U.y,U.z,H.right>=0?H.right:-1,H.center>=0?H.center:-1,H.left>=0?H.left:-1,H.vertical>=0?H.vertical:-1,B,N,V,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,void 0!==P?P:e.collisionBoxArray.length,void 0!==P?P+1:e.collisionBoxArray.length,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,C||e.collisionBoxArray.length,C?C+1:e.collisionBoxArray.length,c,F,j,R,Y,X,0,W,G,q,0,$?1:0)}(e,l,y,o,r,n,a,g,e.layers[0],e.collisionBoxArray,i.index,i.sourceLayerIndex,e.index,S,P,u,0,E,C,x,i,s,h,c,d,p,m)};if("line"===I)for(let a of cE(i.geometry,0,0,8192,8192))for(let i of function(e,i,r,n,a,s,o,l,u){let h=n?.6*s*o:0,c=cD(n,a),d=c*o,f=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return i-d<i/4&&(i=d+i/4),function e(i,r,n,a,s,o,l,u,h){let c=o/2,d=ck(i),f=0,p=r-n,m=[];for(let e=0;e<i.length-1;e++){let r=i[e],l=i[e+1],u=r.dist(l),_=l.angleTo(r);for(;p+n<f+u;){let g=((p+=n)-f)/u,y=iS(r.x,l.x,g),v=iS(r.y,l.y,g);if(y>=0&&y<h&&v>=0&&v<h&&p-c>=0&&p+c<=d){let r=new cL(y,v,0,_,e);a&&!cS(i,r,o,a,s)||m.push(r)}}f+=u}return u||m.length||l||(m=e(i,f/2,n,a,s,o,l,!0,h)),m}(e,f?i/2*l%i:(c/2+2*s)*o*l%i,i,h,r,d,f,!1,u)}(a,L,A,r.vertical||b,n,24,T,e.overscaling,8192))b&&function(e,i,r,n){let a=e.compareText;if(i in a){let e=a[i];for(let i=e.length-1;i>=0;i--)if(n.dist(e[i])<r)return!0}else a[i]=[];return a[i].push(n),!1}(e,b.text,O,i)||F(a,i,d);else if("line-center"===I){for(let e of i.geometry)if(e.length>1){let i=function(e,i,r,n,a,s){let o=r?14.399999999999999*s:0,l=cD(r,n)*s,u=0,h=ck(e)/2;for(let r=0;r<e.length-1;r++){let n=e[r],a=e[r+1],s=n.dist(a);if(u+s>h){let c=(h-u)/s,d=new cL(iS(n.x,a.x,c),iS(n.y,a.y,c),0,a.angleTo(n),r);return!o||cS(e,d,l,o,i)?d:void 0}u+=s}}(e,A,r.vertical||b,n,0,T);i&&F(e,i,d)}}else if("Polygon"===i.type)for(let e of ht(i.geometry,0)){let i=function(e,i=1,r=!1){let n=1/0,a=1/0,s=-1/0,o=-1/0,l=e[0];for(let e=0;e<l.length;e++){let i=l[e];(!e||i.x<n)&&(n=i.x),(!e||i.y<a)&&(a=i.y),(!e||i.x>s)&&(s=i.x),(!e||i.y>o)&&(o=i.y)}let u=Math.min(s-n,o-a),h=u/2,c=new t5([],cB);if(0===u)return new k(n,a);for(let i=n;i<s;i+=u)for(let r=a;r<o;r+=u)c.push(new cN(i+h,r+h,h,e));let d=function(e){let i=0,r=0,n=0,a=e[0];for(let e=0,s=a.length,o=s-1;e<s;o=e++){let s=a[e],l=a[o],u=s.x*l.y-l.x*s.y;r+=(s.x+l.x)*u,n+=(s.y+l.y)*u,i+=3*u}return new cN(r/i,n/i,0,e)}(e),f=c.length;for(;c.length;){let n=c.pop();(n.d>d.d||!d.d)&&(d=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,f)),n.max-d.d<=i||(h=n.h/2,c.push(new cN(n.p.x-h,n.p.y-h,h,e)),c.push(new cN(n.p.x+h,n.p.y-h,h,e)),c.push(new cN(n.p.x-h,n.p.y+h,h,e)),c.push(new cN(n.p.x+h,n.p.y+h,h,e)),f+=4)}return r&&(console.log(`num probes: ${f}`),console.log(`best distance: ${d.d}`)),d.p}(e,16);F(e[0],new cL(i.x,i.y,0,0,void 0),d)}else if("LineString"===i.type)for(let e of i.geometry)F(e,new cL(e[0].x,e[0].y,0,0,void 0),d);else if("Point"===i.type)for(let e of i.geometry)for(let i of e)F([i],new cL(i.x,i.y,0,0,void 0),d)}(e,s,v,b,n,p,y,0,w,M,o,l,h,c,g)}s&&e.generateCollisionDebugBuffers(u,e.collisionBoxArray)}(a,o,e.positions,l,i.iconPositions,this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):a.hasPattern&&(a instanceof dL||a instanceof ha||a instanceof fI)&&(pd(a.layers,this.zoom,p.brightness,r),a.addFeatures(p,this.tileID.canonical,i.patternPositions,r,this.tileTransform,this.brightness))}this.status="done",a(null,{buckets:F(d).filter(e=>!e.isEmpty()),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:f,imageAtlas:i,brightness:p.brightness})}};if(!this.extraShadowCaster){let e=G(p.glyphDependencies,e=>Object.keys(e).map(Number));Object.keys(e).length?n.send("getGlyphs",{uid:this.uid,stacks:e,scope:this.scope},(e,i)=>{s||(s=e,o=i,g())},void 0,!1,_):o={};let i=Object.keys(p.iconDependencies);i.length?n.send("getImages",{icons:i,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(e,i)=>{s||(s=e,l=i,g())},void 0,!1,_):l={};let r=Object.keys(p.patternDependencies);r.length?n.send("getImages",{icons:r,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(e,i)=>{s||(s=e,u=i,g())},void 0,!1,_):u={}}g()}}function pd(e,i,r,n){let a=new nE(i,{brightness:r});for(let i of e)i.recalculate(a,n)}class pf{constructor(e){this.entries={},this.scheduler=e}request(e,i,r,n){let a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){let[e,r]=a.result;return this.scheduler?this.scheduler.add(()=>{n(e,r)},i):n(e,r),()=>{}}return a.callbacks.push(n),a.cancel||(a.cancel=r((r,n)=>{for(let e of(a.result=[r,n],a.callbacks))this.scheduler?this.scheduler.add(()=>{e(r,n)},i):e(r,n);setTimeout(()=>delete this.entries[e],3e3)})),()=>{a.result||(a.callbacks=a.callbacks.filter(e=>e!==n),a.callbacks.length||(a.cancel(),delete this.entries[e]))}}}function pp(e,i,r){let n=JSON.stringify(e.request);return e.data&&(this.deduped.entries[n]={result:[null,e.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},i=>{let n=ey(e.request,(e,n,a,s)=>{e?i(e):n&&i(null,{vectorTile:r?void 0:new hx(new hN(n)),rawData:n,cacheControl:a,expires:s})});return()=>{n.cancel(),i()}},i)}var pm={workerUrl:"",workerClass:null,workerParams:void 0};function p_(){return null!=pm.workerClass?new pm.workerClass:new self.Worker(pm.workerUrl,pm.workerParams)}let pg="mapboxgl_preloaded_worker_pool";class py{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<py.workerCount;)this.workers.push(new p_);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[pg]}numActive(){return Object.keys(this.active).length}}function pv(){return d||(d=new py),d}py.workerCount=2;let px,pb,pw,pM=null;function pT(){return ee()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:pb||m.DRACO_URL}let pL={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pS={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},pk={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function pD(e,i,r){let n=r.json.bufferViews.length,a=r.buffers.length;i.bufferView=n,r.json.bufferViews[n]={buffer:a,byteLength:e.byteLength},r.buffers[a]=e}let pE="KHR_draco_mesh_compression",pA=new TextDecoder("utf8");function pP(e,i){return new URL(e,i).href}function pC(e,i){let r=e.json.bufferViews[i];return new Uint8Array(e.buffers[r.buffer],r.byteOffset||0,r.byteLength)}function pI(e,i=0,r){let n={json:null,images:[],buffers:[]};if(1179937895===new Uint32Array(e,i,1)[0]){let r=new Uint32Array(e,i),a=2,s=(r[a++]>>2)-3,o=r[a++]>>2;if(a++,n.json=JSON.parse(pA.decode(r.subarray(a,a+o))),(a+=o)<s){let s=r[a++],o=i+(++a<<2);n.buffers[0]=e.slice(o,o+s)}}else n.json=JSON.parse(pA.decode(new Uint8Array(e,i)));let{buffers:a,images:s,meshes:o,extensionsUsed:l}=n.json,u=Promise.resolve();if(a){let e=[];for(let i=0;i<a.length;i++){let s=a[i];s.uri?e.push(function(e,i,r,n){return fetch(pP(e.uri,n)).then(e=>e.arrayBuffer()).then(e=>{i.buffers[r]=e})}(s,n,i,r)):n.buffers[i]||(n.buffers[i]=null)}u=Promise.all(e)}return u.then(()=>{let e=[],i=l&&l.includes(pE);if(i&&e.push(function(){if(!pw)return px||(px=function(e){let i,r=null;function n(){i=new Uint8Array(r.buffer)}function a(){throw Error("Unexpected Draco error.")}let s={a:{a:a,d:function(e,r,n){return i.copyWithin(e,r,r+n)},c:function(e){let a=i.length,s=Math.max(e>>>0,Math.ceil(1.2*a));try{return r.grow(Math.ceil((s-a)/65536)),n(),!0}catch(o){return!1}},b:a}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(e,s):e.then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,s))).then(e=>{let a,s,o,l;let{Rb:u,Qb:h,P:c,T:d,X:f,Ja:p,La:m,Qa:_,Va:g,Wa:y,eb:v,jb:x,f:b,e:w,yb:M,zb:T,Ab:L,Bb:S,Db:k,Gb:D}=e.instance.exports;r=w;let E=(a=0,s=0,o=0,l=0,e=>{o&&(u(l),u(a),s+=o,o=a=0),a||(s+=128,a=h(s));let r=e.length+7&-8,n=a;r>=s&&(o=r,n=l=h(r));for(let r=0;r<e.length;r++)i[n+r]=e[r];return n});return n(),b(),{memory:w,_free:u,_malloc:h,Mesh:class{constructor(){this.ptr=c()}destroy(){d(this.ptr)}},Decoder:class{constructor(){this.ptr=p()}destroy(){x(this.ptr)}DecodeArrayToMesh(e,i,r){let n=E(e);return!!f(m(this.ptr,n,i,r.ptr))}GetAttributeByUniqueId(e,i){return{ptr:_(this.ptr,e.ptr,i)}}GetTrianglesUInt16Array(e,i,r){g(this.ptr,e.ptr,i,r)}GetTrianglesUInt32Array(e,i,r){y(this.ptr,e.ptr,i,r)}GetAttributeDataArrayForAllPoints(e,i,r,n,a){v(this.ptr,e.ptr,i.ptr,r,n,a)}},DT_INT8:M(),DT_UINT8:T(),DT_INT16:L(),DT_UINT16:S(),DT_UINT32:k(),DT_FLOAT32:D()}})}(fetch(pT()))).then(e=>{pw=e,px=void 0})}()),s)for(let i=0;i<s.length;i++)e.push(function(e,i,r,n){if(e.uri){let a=pP(e.uri,n);return fetch(a).then(e=>e.blob()).then(e=>createImageBitmap(e)).then(e=>{i.images[r]=e})}if(void 0!==e.bufferView){let n=pC(i,e.bufferView),a=new Blob([n],{type:e.mimeType});return createImageBitmap(a).then(e=>{i.images[r]=e})}}(s[i],n,i,r));return(e.length?Promise.all(e):Promise.resolve()).then(()=>{if(i&&o)for(let{primitives:e}of o)for(let i of e)!function(e,i){let r=e.extensions&&e.extensions[pE];if(!r)return;let n=new pw.Decoder,a=pC(i,r.bufferView),s=new pw.Mesh;if(!n.DecodeArrayToMesh(a,a.byteLength,s))throw Error("Failed to decode Draco mesh");let o=i.json.accessors[e.indices],l=pL[o.componentType],u=o.count*l.BYTES_PER_ELEMENT,h=pw._malloc(u);for(let a of(l===Uint16Array?n.GetTrianglesUInt16Array(s,u,h):n.GetTrianglesUInt32Array(s,u,h),pD(pw.memory.buffer.slice(h,h+u),o,i),pw._free(h),Object.keys(r.attributes))){let o=n.GetAttributeByUniqueId(s,r.attributes[a]),l=i.json.accessors[e.attributes[a]],u=pS[l.componentType],h=l.count*pk[l.type]*pL[l.componentType].BYTES_PER_ELEMENT,c=pw._malloc(h);n.GetAttributeDataArrayForAllPoints(s,o,pw[u],h,c),pD(pw.memory.buffer.slice(c,c+h),l,i),pw._free(c)}n.destroy(),s.destroy(),delete e.extensions[pE]}(i,n);return n})})}class pO{constructor(e,i,r){if(this.triangleCount=i.length/3,this.min=new k(0,0),this.max=new k(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],0===this.triangleCount||0===e.length||0===r)return;let n=e.map(e=>e.x),a=e.map(e=>e.y);this.min=new k(Math.min(...n),Math.min(...a)),this.max=new k(Math.max(...n),Math.max(...a));let s=this.max.sub(this.min);s.x=Math.max(s.x,1),s.y=Math.max(s.y,1);let o=Math.max(s.x,s.y)/r;this.cellsX=Math.max(1,Math.ceil(s.x/o)),this.cellsY=Math.max(1,Math.ceil(s.y/o)),this.xScale=1/o,this.yScale=1/o;let l=[];for(let r=0;r<this.triangleCount;r++){let n=e[i[3*r+0]].sub(this.min),a=e[i[3*r+1]].sub(this.min),s=e[i[3*r+2]].sub(this.min),u=pz(Math.floor(Math.min(n.x,a.x,s.x)),this.xScale,this.cellsX),h=pz(Math.floor(Math.max(n.x,a.x,s.x)),this.xScale,this.cellsX),c=pz(Math.floor(Math.min(n.y,a.y,s.y)),this.yScale,this.cellsY),d=pz(Math.floor(Math.max(n.y,a.y,s.y)),this.yScale,this.cellsY),f=new k(0,0),p=new k(0,0),m=new k(0,0),_=new k(0,0);for(let e=c;e<=d;++e){f.y=p.y=e*o,m.y=_.y=(e+1)*o;for(let i=u;i<=h;++i)f.x=m.x=i*o,p.x=_.x=(i+1)*o,(ub(n,a,s,f,p,_)||ub(n,a,s,f,_,m))&&l.push({cellIdx:e*this.cellsX+i,triIdx:r})}}if(0===l.length)return;l.sort((e,i)=>e.cellIdx-i.cellIdx||e.triIdx-i.triIdx);let u=0;for(;u<l.length;){let e=l[u].cellIdx,i={start:this.payload.length,len:0};for(;u<l.length&&l[u].cellIdx===e;)++i.len,this.payload.push(l[u++].triIdx);this.cells[e]=i}}query(e,i,r){if(0===this.triangleCount||0===this.cells.length||e.x>this.max.x||this.min.x>i.x||e.y>this.max.y||this.min.y>i.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let e=0;e<this.lookup.length;e++)this.lookup[e]=0;let n=pz(e.x-this.min.x,this.xScale,this.cellsX),a=pz(i.x-this.min.x,this.xScale,this.cellsX),s=pz(e.y-this.min.y,this.yScale,this.cellsY),o=pz(i.y-this.min.y,this.yScale,this.cellsY);for(let e=s;e<=o;e++)for(let i=n;i<=a;i++){let n=this.cells[e*this.cellsX+i];if(n)for(let e=0;e<n.len;e++){let i=this.payload[n.start+e],a=Math.floor(i/8),s=1<<i%8;if(!(this.lookup[a]&s)&&(this.lookup[a]|=s,r.push(i),r.length===this.triangleCount))return}}}}function pz(e,i,r){return Math.max(0,Math.min(r-1,Math.floor(e*i)))}function pR(e,i){let r=e.json.bufferViews[i.bufferView];return new pL[i.componentType](e.buffers[r.buffer],(i.byteOffset||0)+(r.byteOffset||0),i.count*pk[i.type])}function pY(i){let r=function(e,i){let r=[],n=WebGL2RenderingContext;if(e.json.textures)for(let a of e.json.textures){let s={magFilter:n.LINEAR,minFilter:n.NEAREST,wrapS:n.REPEAT,wrapT:n.REPEAT};void 0!==a.sampler&&Object.assign(s,e.json.samplers[a.sampler]),r.push({image:i[a.source],sampler:s,uploaded:!1})}return r}(i,i.images),n=function(e,i){let r=[];for(let n of e.json.meshes){let a=[];for(let r of n.primitives)a.push(function(e,i,r){let n=e.indices,a=e.attributes,s={};s.indexArray=new ar;let o=i.json.accessors[n],l=o.count/3;s.indexArray.reserve(l);let u=pR(i,o);for(let e=0;e<l;e++)s.indexArray.emplaceBack(u[3*e],u[3*e+1],u[3*e+2]);s.indexArray._trim(),s.vertexArray=new ac;let h=i.json.accessors[a.POSITION];s.vertexArray.reserve(h.count);let c=pR(i,h);for(let e=0;e<h.count;e++)s.vertexArray.emplaceBack(c[3*e],c[3*e+1],c[3*e+2]);if(s.vertexArray._trim(),s.aabb=new lw(h.min,h.max),s.centroid=function(e,i){let r=[0,0,0],n=e.length;if(n>0){for(let a=0;a<n;a++){let n=3*e[a];r[0]+=i[n],r[1]+=i[n+1],r[2]+=i[n+2]}r[0]/=n,r[1]/=n,r[2]/=n}return r}(u,c),void 0!==a.COLOR_0){let e=i.json.accessors[a.COLOR_0],r=pk[e.type];if(5126===e.componentType){s.colorArray=3===r?new ac:new n1,s.colorArray.reserve(e.count);let n=pR(i,e);if(3===r)for(let i=0;i<e.count;i++)s.colorArray.emplaceBack(n[3*i],n[3*i+1],n[3*i+2]);else for(let i=0;i<e.count;i++)s.colorArray.emplaceBack(n[4*i],n[4*i+1],n[4*i+2],n[4*i+3]);s.colorArray._trim()}else if(5123===e.componentType&&4===r){s.colorArray=new n1,s.colorArray.resize(e.count);let r=pR(i,e),n=1/65535,a=s.colorArray.float32;for(let e=0;e<4*r.length;++e)a[e]=r[e]*n}else J(`glTF color buffer parsing for accessor ${JSON.stringify(e)} is not supported`)}if(void 0!==a.NORMAL){s.normalArray=new ac;let e=i.json.accessors[a.NORMAL];s.normalArray.reserve(e.count);let r=pR(i,e);for(let i=0;i<e.count;i++)s.normalArray.emplaceBack(r[3*i],r[3*i+1],r[3*i+2]);s.normalArray._trim()}if(void 0!==a.TEXCOORD_0&&r.length>0){s.texcoordArray=new ad;let e=i.json.accessors[a.TEXCOORD_0];s.texcoordArray.reserve(e.count);let r=pR(i,e);for(let i=0;i<e.count;i++)s.texcoordArray.emplaceBack(r[2*i],r[2*i+1]);s.texcoordArray._trim()}let d=e.material;return s.material=function(e,i){let{emissiveFactor:r=[0,0,0],alphaMode:n="OPAQUE",alphaCutoff:a=.5,normalTexture:s,occlusionTexture:o,emissiveTexture:l,doubleSided:u}=e,{baseColorFactor:h=[1,1,1,1],metallicFactor:c=1,roughnessFactor:d=1,baseColorTexture:f,metallicRoughnessTexture:p}=e.pbrMetallicRoughness||{};return{pbrMetallicRoughness:{baseColorFactor:new tv(...h),metallicFactor:c,roughnessFactor:d,baseColorTexture:f?i[f.index]:void 0,metallicRoughnessTexture:p?i[p.index]:void 0},doubleSided:u,emissiveFactor:r,alphaMode:n,alphaCutoff:a,normalTexture:s?i[s.index]:void 0,occlusionTexture:o?i[o.index]:void 0,emissionTexture:l?i[l.index]:void 0,defined:void 0===e.defined}}(void 0!==d?i.json.materials[d]:{defined:!1},r),void 0!==a._FEATURE_RGBA4444&&(s.featureData=new Uint32Array(pR(i,i.json.accessors[a._FEATURE_RGBA4444]).buffer)),s}(r,e,i));r.push(a)}return r}(i,r),{scenes:a,scene:s,nodes:o}=i.json,l=a?a[s||0].nodes:o,u=[];for(let r of l)u.push(function i(r,n,a){let{matrix:s,rotation:o,translation:l,scale:u,mesh:h,extras:c,children:d}=r,f={};if(f.matrix=s||e.m.fromRotationTranslationScale([],o||[0,0,0,1],l||[0,0,0],u||[1,1,1]),void 0!==h){f.meshes=a[h];let e=f.anchor=[0,0];for(let i of f.meshes){let{min:r,max:n}=i.aabb;e[0]+=r[0]+n[0],e[1]+=r[1]+n[1]}e[0]=Math.floor(e[0]/f.meshes.length/2),e[1]=Math.floor(e[1]/f.meshes.length/2)}if(c&&(c.id&&(f.id=c.id),c.lights&&(f.lights=function(e){if(!e.length)return[];let i=function(e){let i=atob(e),r=new Uint8Array(i.length);for(let e=0;e<i.length;e++)r[e]=i.codePointAt(e);return r}(e),r=[],n=i.length/24,a=new Uint16Array(i.buffer),s=new Float32Array(i.buffer);for(let e=0;e<n;e++){let i=a[2*e*6]/30,n=a[2*e*6+1]/30,o=a[2*e*6+10]/100,l=s[6*e+1],u=s[6*e+2],h=s[6*e+3],c=s[6*e+4],d=h-l,f=c-u,p=Math.hypot(d,f);r.push({pos:[l+.5*d,u+.5*f,n],normal:[f/p,-d/p,0],width:p,height:i,depth:o,points:[l,u,h,c]})}return r}(c.lights))),d){let e=[];for(let r of d)e.push(i(n.json.nodes[r],n,a));f.children=e}return f}(o[r],i,n));return function(e,i,r){let n={},a=new Set;for(let s=0;s<e.length;s++){let e=r[i[s]];if(!e.extras)continue;let o=e.extras["mapbox:footprint:version"],l=e.extras["mapbox:footprint:id"];(o||l)&&a.add(s),"1.0.0"===o&&l&&(n[l]=s)}for(let s=0;s<e.length;s++){if(a.has(s))continue;let o=e[s],l=r[i[s]];if(!l.extras)continue;let u=null;o.id in n&&(u=function(e){let i=[],r=[],n=0;for(let a of e){n=i.length;let e=a.vertexArray.float32,s=a.indexArray.uint16;for(let r=0;r<a.vertexArray.length;r++)i.push(new k(e[3*r+0],e[3*r+1]));for(let e=0;e<3*a.indexArray.length;e++)r.push(s[e]+n)}if(r.length%3!=0)return null;for(let e=0;e<r.length;e+=3){let n=i[r[e+0]],a=i[r[e+1]],s=i[r[e+2]];(n.x-a.x)*(s.y-a.y)-(s.x-a.x)*(n.y-a.y)>0&&([r[e+1],r[e+2]]=[r[e+2],r[e+1]])}return{vertices:i,indices:r}}(e[n[o.id]].meshes)),u||(u=function(e){if(!e.extras||!e.extras.ground)return null;let i=e.extras.ground;if(!i||!Array.isArray(i)||0===i.length)return null;let r=i[0];if(!r||!Array.isArray(r)||0===r.length)return null;let n=[];for(let e of r){if(!Array.isArray(e)||2!==e.length)continue;let i=e[0],r=e[1];"number"==typeof i&&"number"==typeof r&&n.push(new k(i,r))}if(n.length<3)return null;n.length>1&&n[n.length-1].equals(n[0])&&n.pop();let a=0;for(let e=0;e<n.length;e++){let i=n[e],r=n[(e+1)%n.length],s=n[(e+2)%n.length];a+=(i.x-r.x)*(s.y-r.y)-(s.x-r.x)*(i.y-r.y)}a>0&&n.reverse();let s=he(n.flatMap(e=>[e.x,e.y]),[]);return 0===s.length?null:{vertices:n,indices:s}}(l)),u&&(o.footprint=function(e){if(0===e.vertices.length||0===e.indices.length)return null;let[i,r]=[e.vertices[0].clone(),e.vertices[0].clone()];for(let n=1;n<e.vertices.length;++n){let a=e.vertices[n];i.x=Math.min(i.x,a.x),i.y=Math.min(i.y,a.y),r.x=Math.max(r.x,a.x),r.y=Math.max(r.y,a.y)}let n=Math.ceil(Math.max(r.x-i.x,r.y-i.y)/256),a=new pO(e.vertices,e.indices,Math.max(8,n));return{vertices:e.vertices,indices:e.indices,grid:a,min:i,max:r}}(u))}if(a.size>0){let i=Array.from(a.values()).sort((e,i)=>e-i);for(let r=i.length-1;r>=0;r--)e.splice(i[r],1)}}(u,l,i.json.nodes),u}no(pO,"TriangleGridIndex");let pF=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pj{static from(e){if(!(e instanceof ArrayBuffer))throw Error("Data must be an instance of ArrayBuffer.");let[i,r]=new Uint8Array(e,0,2);if(219!==i)throw Error("Data does not appear to be in a KDBush format.");let n=r>>4;if(1!==n)throw Error(`Got v${n} data when expected v1.`);let a=pF[15&r];if(!a)throw Error("Unrecognized array type.");let[s]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new pj(o,s,a,e)}constructor(e,i=64,r=Float64Array,n){if(isNaN(e)||e<0)throw Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;let a=pF.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-o%8)%8;if(a<0)throw Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+l,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+o+l),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+l,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=e)}add(e,i){let r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=i,r}finish(){let e=this._pos>>1;if(e!==this.numItems)throw Error(`Added ${e} items when expected ${this.numItems}.`);return function e(i,r,n,a,s,o){if(s-a<=n)return;let l=a+s>>1;(function e(i,r,n,a,s,o){for(;s>a;){if(s-a>600){let l=s-a+1,u=n-a+1,h=Math.log(l),c=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*c*(l-c)/l)*(u-l/2<0?-1:1);e(i,r,n,Math.max(a,Math.floor(n-u*c/l+d)),Math.min(s,Math.floor(n+(l-u)*c/l+d)),o)}let l=r[2*n+o],u=a,h=s;for(pB(i,r,a,n),r[2*s+o]>l&&pB(i,r,a,s);u<h;){for(pB(i,r,u,h),u++,h--;r[2*u+o]<l;)u++;for(;r[2*h+o]>l;)h--}r[2*a+o]===l?pB(i,r,a,h):pB(i,r,++h,s),h<=n&&(a=h+1),n<=h&&(s=h-1)}})(i,r,l,a,s,o),e(i,r,n,a,l-1,1-o),e(i,r,n,l+1,s,1-o)}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,i,r,n){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:a,coords:s,nodeSize:o}=this,l=[0,a.length-1,0],u=[];for(;l.length;){let h=l.pop()||0,c=l.pop()||0,d=l.pop()||0;if(c-d<=o){for(let o=d;o<=c;o++){let l=s[2*o],h=s[2*o+1];l>=e&&l<=r&&h>=i&&h<=n&&u.push(a[o])}continue}let f=d+c>>1,p=s[2*f],m=s[2*f+1];p>=e&&p<=r&&m>=i&&m<=n&&u.push(a[f]),(0===h?e<=p:i<=m)&&(l.push(d),l.push(f-1),l.push(1-h)),(0===h?r>=p:n>=m)&&(l.push(f+1),l.push(c),l.push(1-h))}return u}within(e,i,r){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:n,coords:a,nodeSize:s}=this,o=[0,n.length-1,0],l=[],u=r*r;for(;o.length;){let h=o.pop()||0,c=o.pop()||0,d=o.pop()||0;if(c-d<=s){for(let r=d;r<=c;r++)pH(a[2*r],a[2*r+1],e,i)<=u&&l.push(n[r]);continue}let f=d+c>>1,p=a[2*f],m=a[2*f+1];pH(p,m,e,i)<=u&&l.push(n[f]),(0===h?e-r<=p:i-r<=m)&&(o.push(d),o.push(f-1),o.push(1-h)),(0===h?e+r>=p:i+r>=m)&&(o.push(f+1),o.push(c),o.push(1-h))}return l}}function pB(e,i,r,n){pN(e,r,n),pN(i,2*r,2*n),pN(i,2*r+1,2*n+1)}function pN(e,i,r){let n=e[i];e[i]=e[r],e[r]=n}function pH(e,i,r,n){let a=e-r,s=i-n;return a*a+s*s}e.$=45,e.A=l9,e.B=function(i){let r=e.m.identity(new Float64Array(16));e.m.multiply(r,i.pixelMatrix,i.globeMatrix);let n=[0,lL,0],a=[0,lM,0];return e.v.transformMat4(n,n,r),e.v.transformMat4(a,a,r),[n[0]>0&&n[0]<=i.width&&n[1]>0&&n[1]<=i.height&&!lX(i,new l3(i.center.lat,90)),a[0]>0&&a[0]<=i.width&&a[1]>0&&a[1]<=i.height&&!lX(i,new l3(i.center.lat,-90))]},e.C=tv,e.D=si,e.E=l5,e.F=lb,e.G=6,e.H=l6,e.I=dY,e.J=8192,e.K=function(i,r){let{scale:n}=i.tileTransform,a=8192*n/(i.tileSize*Math.pow(2,r.zoom-i.tileID.overscaledZ+i.tileID.canonical.z));return e.h.scale(new Float32Array(4),r.inverseAdjustmentMatrix,[a,a])},e.L=l3,e.M=un,e.N=d1,e.O=ld,e.P=k,e.Q=dQ,e.R=lm,e.S=function(i){let r=dQ(i,!0);return e.h.invert([],[r[0],r[1],r[4],r[5]])},e.T=l_,e.U=lc,e.V=function(e){let{x:i,y:r}=e.point,{lng:n,lat:a}=e._center;return lG(i,r,e.worldSize,n,a)},e.W=cf,e.X=J,e.Y=function(e){return e*E},e.Z=5,e._=function(e){return A[Math.round((e+45+360)%360/90)%4]},e.a=dB,e.a$=aV,e.a0=l4,e.a1=function(e,i){return eg(j(e,{type:"json"}),i)},e.a2=ep,e.a3=ex,e.a4=eW,e.a5=uF,e.a6=eJ,e.a7=eX,e.a8=eZ,e.a9=dS,e.aA=uy,e.aB=ua,e.aC=lM,e.aD=pf,e.aE=nH,e.aF=pp,e.aG=function(e){++ef>eu&&(e.getActor().send("enforceCacheSizeLimit",el),ef=0)},e.aH=eO,e.aI=e$,e.aJ=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.aK=f7,e.aL=function(e,i){let r=document.createElement("video");r.muted=!0,r.onloadstart=function(){i(null,r)};for(let i=0;i<e.length;i++){let n=document.createElement("source");(function(e){let i=document.createElement("a");return i.href=e,i.protocol===location.protocol&&i.host===location.host})(e[i])||(r.crossOrigin="Anonymous"),n.src=e[i],r.appendChild(n)}return{cancel:()=>{}}},e.aM=eQ,e.aN=dk,e.aO=function(e){return fetch(e).then(e=>e.arrayBuffer()).then(i=>pI(i,0,e))},e.aP=pY,e.aQ=class{constructor(e,i,r,n){this.id=e,this.position=null!=i?new l3(i[0],i[1]):new l3(0,0),this.orientation=null!=r?r:[0,0,0],this.nodes=n,this.uploaded=!1,this.aabb=new lw([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(i,r){if(e.m.multiply(i.matrix,r,i.matrix),i.meshes)for(let e of i.meshes){let r=lw.applyTransform(e.aabb,i.matrix);this.aabb.encapsulate(r)}if(i.children)for(let e of i.children)this._applyTransformations(e,i.matrix)}computeBoundsAndApplyParent(){let i=e.m.identity([]);for(let e of this.nodes)this._applyTransformations(e,i)}_positionModelOnTerrain(i,r){let n=i.elevation;if(!n)return 0;let a=lw.projectAabbCorners(this.aabb,this.matrix),s=1/l4(this.position.lat)*i.worldSize,o=function(i,r){let n=[0,0,1],a=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(let s of a){let a=i[s.corners[0]],o=i[s.corners[1]],l=i[s.corners[2]],u=[o[0]-a[0],o[1]-a[1],r*(o[2]-a[2])],h=e.v.cross(u,u,[l[0]-a[0],l[1]-a[1],r*(l[2]-a[2])]);e.v.normalize(h,h),s.dotProductWithUp=e.v.dot(h,n)}return a.sort((e,i)=>e.dotProductWithUp-i.dotProductWithUp),a[0].corners}(a,s),l=a[o[0]],u=a[o[1]],h=a[o[2]],c=a[o[3]],d=n.getAtPointOrZero(new un(l[0]/i.worldSize,l[1]/i.worldSize),0),f=n.getAtPointOrZero(new un(u[0]/i.worldSize,u[1]/i.worldSize),0),p=n.getAtPointOrZero(new un(h[0]/i.worldSize,h[1]/i.worldSize),0),m=n.getAtPointOrZero(new un(c[0]/i.worldSize,c[1]/i.worldSize),0),_=(d+m)/2,g=(f+p)/2;return _>g?f<p?d8(r,u,c,l,f,m,d,s):d8(r,h,l,c,p,d,m,s):d<m?d8(r,l,u,h,d,f,p,s):d8(r,c,h,u,m,p,f,s),Math.max(_,g)}computeModelMatrix(i,r,n,a,s,o,l=!1){let u=i.transform,h=u.zoom,c=u.project(this.position),d=ut(this.position.lat,h),f=1/d;e.m.identity(this.matrix),e.m.translate(this.matrix,this.matrix,[c.x+a[0]*f,c.y+a[1]*f,a[2]]);let p=1,m=1,_=u.worldSize;if(l){if("mercator"===u.projection.name){let i=0;u.elevation&&(i=u.elevation.getAtPointOrZero(new un(c.x/_,c.y/_),0));let r=e.e.transformMat4([],[c.x,c.y,i,1],u.projMatrix)[3]/u.cameraToCenterDistance;p=r,m=r*ut(u.center.lat,h)}else if("globe"===u.projection.name){let i=d7(this.matrix,u),r=e.m.multiply([],u.projMatrix,i),n=[0,0,0,1];e.e.transformMat4(n,n,r);let a=n[3]/u.cameraToCenterDistance,s=lq(h),o=u.projection.pixelsPerMeter(this.position.lat,_)*ut(this.position.lat,h),l=u.projection.pixelsPerMeter(u.center.lat,_)*ut(u.center.lat,h);p=a/iS(o,ue(u.center.lat),s),m=a*d/o,p*=l,m*=l}}else p=f;e.m.scale(this.matrix,this.matrix,[p,p,m]);let g=[...this.matrix],y=this.orientation,v=[];if(d6(v,[y[0]+r[0],y[1]+r[1],y[2]+r[2]],n),e.m.multiply(this.matrix,g,v),s&&u.elevation){let i=0,r=[];if(o&&u.elevation){i=this._positionModelOnTerrain(u,r);let n=e.m.fromQuat([],r),a=e.m.multiply([],n,v);e.m.multiply(this.matrix,g,a)}else i=u.elevation.getAtPointOrZero(new un(c.x/_,c.y/_),0);0!==i&&(this.matrix[14]+=i)}}upload(e){if(!this.uploaded){for(let i of this.nodes)ft(i,e);for(let e of this.nodes)fi(e);this.uploaded=!0}}destroy(){for(let e of this.nodes)fr(e)}},e.aR=$,e.aS=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.aT=cE,e.aU=ud,e.aV=24,e.aW=cU,e.aX=c$,e.aY=cw,e.aZ=pj,e.a_=aX,e.aa=cA,e.ab=cP,e.ac=nN,e.ad=nF,e.ae=eK,e.af=class{constructor(e){this.specification=e}possiblyEvaluate(e,i){return Q(e.expression.evaluate(i))}interpolate(e,i,r){return{x:iS(e.x,i.x,r),y:iS(e.y,i.y,r),z:iS(e.z,i.z,r),azimuthal:iS(e.azimuthal,i.azimuthal,r),polar:iS(e.polar,i.polar,r)}}},e.ag=nC,e.ah=e=>ni(r1(e)),e.ai=nr,e.aj=r9,e.ak=j,e.al=nE,e.am=rD,e.an=z,e.ao=lq,e.ap=e=>ni(r4(e)),e.aq=ik,e.ar=nY,e.as=class{constructor(e){this.specification=e}possiblyEvaluate(e,i){return function([e,i]){let r=Q([1,e,i]);return{x:r.x,y:r.y,z:r.z}}(e.expression.evaluate(i))}interpolate(e,i,r){return{x:iS(e.x,i.x,r),y:iS(e.y,i.y,r),z:iS(e.z,i.z,r)}}},e.at=function(e,i,r=0,n=!0){let a=new k(r,r),s=e.sub(a),o=i.add(a),l=[s,new k(o.x,s.y),o,new k(s.x,o.y)];return n&&l.push(s.clone()),l},e.au=function(e,i){let r=[];for(let n=0;n<e.length;n++){let a=R(n-1,-1,e.length-1),s=R(n+1,-1,e.length-1),o=e[n],l=e[s],u=e[a].sub(o).unit(),h=l.sub(o).unit(),c=h.angleWithSep(u.x,u.y),d=u.add(h).unit().mult(-1*i/Math.sin(c/2));r.push(o.add(d))}return r},e.av=cK,e.aw=uv,e.ax=function(i,r,n=0){return e.v.fromValues(((r.x-n)*i.scale-i.x)*8192,(r.y*i.scale-i.y)*8192,r.z*l4(l7(r.y)))},e.ay=d5,e.az=function(e){let i=1/0,r=1/0,n=-1/0,a=-1/0;for(let s of e)i=Math.min(i,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),a=Math.max(a,s.y);return{min:new k(i,r),max:new k(n,a)}},e.b=function(e,i){return e/l4(i)},e.b$=0,e.b0=a$,e.b1=aq,e.b2=aU,e.b3=function(e,i,r){let n=Math.sqrt(e*e+i*i+r*r),a=n>0?Math.acos(r/n)*E:0,s=0!==e||0!==i?Math.atan2(-i,-e)*E+90:0;return s<0&&(s+=360),[n,s,a]},e.b4=dF,e.b5=dN,e.b6=dj,e.b7=aW,e.b8=class extends aH{constructor(e){super(e),this.current=aJ}set(e,i,r){if(this.fetchUniformLocation(e,i)){for(let e=0;e<9;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}},e.b9=aG,e.bA=function(i,r){let n=[0,0,0],a=lV(lP(r.canonical));return e.v.transformMat4(n,n,a),e.v.transformMat4(n,n,i),n},e.bB=e=>({u_camera_to_center_distance:new aU(e),u_extrude_scale:new aQ(e),u_device_pixel_ratio:new aU(e),u_matrix:new aX(e),u_inv_rot_matrix:new aX(e),u_merc_center:new a$(e),u_tile_id:new aW(e),u_zoom_transition:new aU(e),u_up_dir:new aW(e),u_emissive_strength:new aU(e)}),e.bC=e=>({u_matrix:new aX(e),u_pixels_to_tile_units:new aQ(e),u_device_pixel_ratio:new aU(e),u_units_to_pixels:new a$(e),u_dash_image:new aV(e),u_gradient_image:new aV(e),u_image_height:new aU(e),u_texsize:new a$(e),u_tile_units_to_pixels:new aU(e),u_alpha_discard_threshold:new aU(e),u_trim_offset:new a$(e),u_emissive_strength:new aU(e)}),e.bD=e=>({u_matrix:new aX(e),u_texsize:new a$(e),u_pixels_to_tile_units:new aQ(e),u_device_pixel_ratio:new aU(e),u_image:new aV(e),u_units_to_pixels:new a$(e),u_tile_units_to_pixels:new aU(e),u_alpha_discard_threshold:new aU(e)}),e.bE=at,e.bF=cn,e.bG=cl,e.bH=uE,e.bI=(e,i,r,n,a,s)=>{let o;let l=e.transform,u="globe"===l.projection.name;if("map"===s.paint.get("circle-pitch-alignment")){if(u){let e=lW(l.zoom,i.canonical)*l._pixelsPerMercatorPixel;o=Float32Array.from([e,0,0,e])}else o=l.calculatePixelsToTileUnitsMatrix(r)}else o=new Float32Array([l.pixelsToGLUnits[0],0,0,l.pixelsToGLUnits[1]]);let h={u_camera_to_center_distance:e.transform.getCameraToCenterDistance(l.projection),u_matrix:e.translatePosMatrix(i.projMatrix,r,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_device_pixel_ratio:eW.devicePixelRatio,u_extrude_scale:o,u_inv_rot_matrix:uD,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:s.paint.get("circle-emissive-strength")};if(u){h.u_inv_rot_matrix=n,h.u_merc_center=a,h.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],h.u_zoom_transition=lq(l.zoom);let e=8192*a[0],r=8192*a[1];h.u_up_dir=l.projection.upVector(new lh(0,0,0),e,r)}return h},e.bJ=fK,e.bK=(e,i,r,n,a)=>{let s=e.transform;return{u_matrix:fJ(e,i,r,n),u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:s.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:a,u_image:0,u_tile_units_to_pixels:fX(i,s),u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}},e.bL=(e,i,r,n,a,s,o)=>{let l=e.transform,u=l.calculatePixelsToTileUnitsMatrix(i);return{u_matrix:fJ(e,i,r,n),u_pixels_to_tile_units:u,u_device_pixel_ratio:s,u_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:fQ(r)&&i.lineAtlasTexture?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:fX(i,e.transform),u_alpha_discard_threshold:0,u_trim_offset:o,u_emissive_strength:r.paint.get("line-emissive-strength")}},e.bM=V,e.bN=uH,e.bO=fB,e.bP=lp,e.bQ=fI,e.bR=2147483648,e.bS=450,e.bT=7,e.bU=lI,e.bV=lU,e.bW=nq,e.bX=ac,e.bY=ao,e.bZ=1,e.b_=771,e.ba=P,e.bb=function(e,i,r){let n=lq(r.zoom),a=e.style.map._antialias,s=i.options.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===n&&!a&&!s},e.bc=function(i){let r=i.pixelsPerMeter,n=r/(1/l4(i.center.lat)),a=e.m.identity(new Float64Array(16));return e.m.translate(a,a,[i.point.x,i.point.y,0]),e.m.scale(a,a,[n,n,r]),Float32Array.from(a)},e.bd=e1,e.be=lR,e.bf=function(e){let i=l9-5;return Math.round(Math.pow(Math.abs(Math.sin((e=O(e,-i,i)/i*90)*D)),3)*(lT.length-1))},e.bg=function(i,r,n,a){let s=r.getNorth(),o=r.getSouth(),l=r.getWest(),u=r.getEast(),h=1<<i.z,c=u-l,d=s-o,f=c/64,p=-d/lT[n],m=[0,f,0,p,0,0,s,l,0];if(i.z>0){let i=180/a;e.bx.multiply(m,m,[i/c+1,0,0,0,i/d+1,0,-.5*i/f,.5*i/p,1])}return m[2]=h,m[5]=i.x,m[8]=i.y,m},e.bh=lV,e.bi=lP,e.bj=function(i,r,n){let a=e.m.identity(new Float64Array(16));return e.m.rotateY(a,n.globeMatrix,(r/(1<<i)-.5)*Math.PI*2),Float32Array.from(a)},e.bk=class{isDataAvailableAtPoint(e){let i=this._source();if(this.isUsingMockSource()||!i||e.y<0||e.y>1)return!1;let r=i.getSource().maxzoom,n=1<<r,a=Math.floor(e.x),s=Math.floor((e.x-a)*n),o=Math.floor(e.y*n),l=this.findDEMTileFor(new ld(r,a,r,s,o));return!(!l||!l.dem)}getAtPointOrZero(e,i=0){return this.getAtPoint(e,i)||0}getAtPoint(e,i,r=!0){if(this.isUsingMockSource())return null;null==i&&(i=null);let n=this._source();if(!n||e.y<0||e.y>1)return i;let a=n.getSource().maxzoom,s=1<<a,o=Math.floor(e.x),l=e.x-o,u=new ld(a,o,a,Math.floor(l*s),Math.floor(e.y*s)),h=this.findDEMTileFor(u);if(!h||!h.dem)return i;let c=h.dem,d=1<<h.tileID.canonical.z,f=(l*d-h.tileID.canonical.x)*c.dim,p=(e.y*d-h.tileID.canonical.y)*c.dim,m=Math.floor(f),_=Math.floor(p);return(r?this.exaggeration():1)*iS(iS(c.get(m,_),c.get(m,_+1),p-_),iS(c.get(m+1,_),c.get(m+1,_+1),p-_),f-m)}getAtTileOffset(e,i,r){let n=1<<e.canonical.z;return this.getAtPointOrZero(new un(e.wrap+(e.canonical.x+i/8192)/n,(e.canonical.y+r/8192)/n))}getAtTileOffsetFunc(i,r,n,a){return s=>{let o=this.getAtTileOffset(i,s.x,s.y),l=a.upVector(i.canonical,s.x,s.y),u=a.upVectorScale(i.canonical,r,n).metersToTile;return e.v.scale(l,l,o*u),l}}getForTilePoints(e,i,r,n){if(this.isUsingMockSource())return!1;let a=h2.create(this,e,n);return!!a&&(i.forEach(e=>{e[2]=this.exaggeration()*a.getElevationAt(e[0],e[1],r)}),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;let i=this.findDEMTileFor(e);if(!i||!i.dem)return null;let r=i.dem.tree,n=i.tileID,a=1<<e.canonical.z-n.canonical.z,s=e.canonical.x/a-n.canonical.x,o=e.canonical.y/a-n.canonical.y,l=0;for(let i=0;i<e.canonical.z-n.canonical.z&&!r.leaves[l];i++){let e=2*Math.floor(o*=2)+Math.floor(s*=2);l=r.childOffsets[l]+e,s%=1,o%=1}return{min:this.exaggeration()*r.minimums[l],max:this.exaggeration()*r.maximums[l]}}getMinElevationBelowMSL(){throw Error("Pure virtual method called.")}raycast(e,i,r){throw Error("Pure virtual method called.")}pointCoordinate(e){throw Error("Pure virtual method called.")}_source(){throw Error("Pure virtual method called.")}isUsingMockSource(){throw Error("Pure virtual method called.")}exaggeration(){throw Error("Pure virtual method called.")}findDEMTileFor(e){throw Error("Pure virtual method called.")}get visibleDemTiles(){throw Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){let e=this.visibleDemTiles;if(0===e.length)return null;let i=!1,r=Number.MAX_VALUE,n=Number.MIN_VALUE;for(let a of e){let e=this.getMinMaxForTile(a.tileID);e&&(r=Math.min(r,e.min),n=Math.max(n,e.max),i=!0)}return i?{min:r,max:n}:null}},e.bl=ll,e.bm=aE,e.bn=lk,e.bo=nX,e.bp=ar,e.bq=dH,e.br=pl,e.bs=pv,e.bt=dz,e.bu=uj,e.bv=function(e,i){return[Math.pow(e[0],2.2)*i,Math.pow(e[1],2.2)*i,Math.pow(e[2],2.2)*i]},e.bw=function(e){return[Math.pow(e[0],1/2.2),Math.pow(e[1],1/2.2),Math.pow(e[2],1/2.2)]},e.by=lW,e.bz=256,e.c=O,e.c$=p,e.c0=al,e.c1=function(e,i,r,n,a){return O((e-i)/(r-i)*(a-n)+n,n,a)},e.c2=rt,e.c3=lw,e.c4=ut,e.c5=d7,e.c6=[1,1,1],e.c7=h2,e.c8=d9,e.c9=n7,e.cA=q,e.cB=e=>ni(r3(e)),e.cC=nL,e.cD=eg,e.cE=C,e.cF=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},e.cG=I,e.cH=ui,e.cI=lj,e.cJ=function([e,i,r]){let n=Math.hypot(e,i,r);return new l3(Math.atan2(e,r)*E,(.5*Math.PI-Math.acos(-i/n))*E)},e.cK=l8,e.cL=l0,e.cM=m,e.cN=lX,e.cO=lZ,e.cP=function(i){let r=[0,0,0],n=e.m.identity(new Float64Array(16));return e.m.multiply(n,i.pixelMatrix,i.globeMatrix),e.v.transformMat4(r,r,n),new k(r[0],r[1])},e.cQ=function(e){let i=e.navigator?e.navigator.userAgent:null;return!!function(e){if(null==ei){let i=e.navigator?e.navigator.userAgent:null;ei=!!e.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return ei}(e)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.cR=N,e.cS=class{constructor(e,i,r){this._transformRequestFn=e,this._customAccessToken=i,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){let e=function(){let e="";for(let i=0;i<10;i++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,i){return this._transformRequestFn&&this._transformRequestFn(e,i)||{url:e}}normalizeStyleURL(e,i){if(!ew(e))return e;let r=eD(e);return r.params.push(`sdk=js-${p}`),r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||i)}normalizeGlyphsURL(e,i){if(!ew(e))return e;let r=eD(e);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||i)}normalizeModelURL(e,i){if(!ew(e))return e;let r=eD(e);return r.path=`/models/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||i)}normalizeSourceURL(e,i,r,n){if(!ew(e))return e;let a=eD(e);return a.path=`/v4/${a.authority}.json`,a.params.push("secure"),r&&a.params.push(`language=${r}`),n&&a.params.push(`worldview=${n}`),this._makeAPIURL(a,this._customAccessToken||i)}normalizeSpriteURL(e,i,r,n){let a=eD(e);return ew(e)?(a.path=`/styles/v1${a.path}/sprite${i}${r}`,this._makeAPIURL(a,this._customAccessToken||n)):(a.path+=`${i}${r}`,eE(a))}normalizeTileURL(e,i,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ew(e))return e;let n=eD(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||r&&"raster"!==n.authority&&512===r?"@2x":""}${_.supported?".webp":"$1"}`),"raster"===n.authority?n.path=`/${m.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${m.TILE_URL_VERSION}${n.path}`);let a=this._customAccessToken||function(e){for(let i of e){let e=i.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(n.params)||m.ACCESS_TOKEN;return m.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,a)}canonicalizeTileURL(e,i){let r=eD(e);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return e;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+=`raster/${r.path.replace(`/${m.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${r.path.replace(`/${m.TILE_URL_VERSION}/`,"")}`;let a=r.params;return i&&(a=a.filter(e=>!e.match(/^access_token=/))),a.length&&(n+=`?${a.join("&")}`),n}canonicalizeTileset(e,i){let r=!!i&&ew(i),n=[];for(let i of e.tiles||[])eM(i)?n.push(this.canonicalizeTileURL(i,r)):n.push(i);return n}_makeAPIURL(e,i){let r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",n=eD(m.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol){let i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==n.path&&(e.path=`${n.path}${e.path}`),!m.REQUIRE_ACCESS_TOKEN)return eE(e);if(i=i||m.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw Error(`An API access token is required to use Mapbox GL. ${r}`);if("s"===i[0])throw Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return e.params=e.params.filter(e=>-1===e.indexOf("access_token")),e.params.push(`access_token=${i||""}`),eE(e)}},e.cT=function(e,i){i?eN.add(e):eN.delete(e)},e.cU=_,e.cV=eF,e.cW=eB,e.cX=eb,e.cY=eR,e.cZ=function(e){eN.delete(e)},e.c_=Y,e.ca=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(e){let i=fy(new k(0,0),new k(8192,8192),e),r=[];for(let n of this._activeRegions){if(n.hiddenByOverlap||!fg(i,n))continue;let a=function(e,i,r){let n=1<<r.canonical.z,a=((i.x-r.wrap)*n-r.canonical.x)*8192,s=(i.y*n-r.canonical.y)*8192;return{min:new k(((e.x-r.wrap)*n-r.canonical.x)*8192,(e.y*n-r.canonical.y)*8192),max:new k(a,s)}}(n.min,n.max,e);r.push({min:a.min,max:a.max,sourceId:this._sourceIds[n.priority],footprint:n.footprint,footprintTileId:n.tileId})}return r}setSources(e){this._setSources(e.map(e=>({getSourceId:()=>e.cache.id,getFootprints:()=>{let i=[];for(let r of e.cache.getVisibleCoordinates()){let n=e.cache.getTile(r).buckets[e.layer];if(n)for(let e of n.getNodesInfo()){let n=e.node;n.footprint&&i.push({footprint:n.footprint,id:r.toUnwrapped()})}}return i}})))}_addSource(e){let i=e.getFootprints();if(0!==i.length){for(let e of i){if(!e.footprint)continue;let i=fy(e.footprint.min,e.footprint.max,e.id);this._activeRegions.push({min:i.min,max:i.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:e.id,footprint:e.footprint})}this._sourceIds.push(e.getSourceId())}}_computeReplacement(){this._activeRegions.sort((e,i)=>e.priority-i.priority||fm(e.min,i.min)||fm(e.max,i.max));let e=this._activeRegions.length!==this._prevRegions.length;if(!e){let i=0,r=0;for(;!e&&i!==this._activeRegions.length;){let n=this._activeRegions[i],a=this._prevRegions[r];e=n.priority!==a.priority||!f_(n,a),++i,++r}}if(e){++this._updateTime;let e=e=>{let i=this._activeRegions;if(e>=i.length)return e;let r=i[e].priority;for(;e<i.length&&i[e].priority===r;)++e;return e};if(this._sourceIds.length>1){let i=0,r=e(0);for(;i!==r;){let n=i,a=i;for(;n!==r;){let e=this._activeRegions[n];e.hiddenByOverlap=!1;for(let i=0;i<a;i++){let r=this._activeRegions[i];if(!r.hiddenByOverlap&&fg(e,r)&&(e.hiddenByOverlap=function e(i,r,n,a){if(!i||!n)return!1;let s=i.vertices;if(!r.canonical.equals(a.canonical)||r.wrap!==a.wrap){if(n.vertices.length<i.vertices.length)return e(n,a,i,r);let o=r.canonical,l=a.canonical,u=Math.pow(2,l.z-o.z);s=i.vertices.map(e=>new k(e.x*o.x*8192*u-8192*l.x,e.y*o.y*8192*u-8192*l.y))}return fv(n,s,i.indices,0,i.indices.length,0,0)}(e.footprint,e.tileId,r.footprint,r.tileId),e.hiddenByOverlap))break}++n}r=e(i=r)}}}}_setSources(e){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let i=e.length-1;i>=0;i--)this._addSource(e[i]);this._computeReplacement()}},e.cb=nK,e.cc=dI,e.cd=ah,e.ce=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){for(let e of(this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy(),this._poleSegments))e.destroy();for(let e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy()}_fillGridMeshWithLods(e,i){let r=new nX,n=new ar,a=[],s=e+1+2,o=i[0]+1,l=i[0]+1+(1+i.length),u=(e,i,r)=>{let n=e===s-1?e-2:0===e?e:e-1;return[n+=r?24575:0,i]};for(let e=0;e<s;++e)r.emplaceBack(...u(e,0,!0));for(let e=0;e<o;++e)for(let i=0;i<s;++i)r.emplaceBack(...u(i,e,0===i||i===s-1));for(let e=0;e<i.length;++e){let n=i[e];for(let e=0;e<s;++e)r.emplaceBack(...u(e,n,!0))}for(let e=0;e<i.length;++e){let o=n.length,u=i[e]+1+2,h=new ar;for(let r=0;r<u-1;r++){let a=r===u-2,o=a?s*(l-i.length+e-r):s;for(let e=0;e<s-1;e++){let i=r*s+e;0===r||a||0===e||e===s-2?(h.emplaceBack(i+1,i,i+o),h.emplaceBack(i+o,i+o+1,i+1)):(n.emplaceBack(i+1,i,i+o),n.emplaceBack(i+o,i+o+1,i+1))}}let c=aE.simpleSegment(0,o,r.length,n.length-o);for(let e=0;e<h.uint16.length;e+=3)n.emplaceBack(h.uint16[e],h.uint16[e+1],h.uint16[e+2]);let d=aE.simpleSegment(0,o,r.length,n.length-o);a.push({withoutSkirts:c,withSkirts:d})}return{vertices:r,indices:n,segments:a}}_createGrid(e){let i=this._fillGridMeshWithLods(64,lT);this._gridSegments=i.segments,this._gridBuffer=e.createVertexBuffer(i.vertices,ll.members),this._gridIndexBuffer=e.createIndexBuffer(i.indices,!0)}_createPoles(e){let i=new ar;for(let e=0;e<=64;e++)i.emplaceBack(0,e+1,e+2);this._poleIndexBuffer=e.createIndexBuffer(i,!0);let r=new ao,n=new ao,a=new ao,s=new ao;this._poleSegments=[];for(let e=0,i=0;e<5;e++){let o=360/(1<<e);r.emplaceBack(0,-lM,0,.5,0),n.emplaceBack(0,-lM,0,.5,1),a.emplaceBack(0,-lM,0,.5,.5),s.emplaceBack(0,-lM,0,.5,.5);for(let e=0;e<=64;e++){let i=e/64,l=0,u=iS(0,o,i),[h,c,d]=lF(lK,lQ,u,lM);r.emplaceBack(h,c,d,i,l),n.emplaceBack(h,c,d,i,1-l);let f=u*D;i=.5+.5*Math.sin(f),l=.5+.5*Math.cos(f),a.emplaceBack(h,c,d,i,l),s.emplaceBack(h,c,d,i,1-l)}this._poleSegments.push(aE.simpleSegment(i,0,66,64)),i+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,ls,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(n,ls,!1),this._texturedPoleNorthVertexBuffer=e.createVertexBuffer(a,ls,!1),this._texturedPoleSouthVertexBuffer=e.createVertexBuffer(s,ls,!1)}getGridBuffers(e,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e,i){return[i?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,i?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},e.cf=function(e){return eN.has(e)},e.cg=ur,e.ch=Q,e.ci=function(e){return e({pluginStatus:nb,pluginURL:nw}),nL.on("pluginStateChange",e),e},e.cj=cR,e.ck=cz,e.cl=e_,e.cm=nM,e.cn=ew,e.co=Z,e.cp=function(e,i,r){return"custom"===e.type?new f9(e,i):new pn[e.type](e,i,r)},e.cq=function(e){let i=e.indexOf("\x1f");return i>=0?e.slice(0,i):e},e.cr=e=>ni(r0(e)),e.cs=e=>ni(rQ(e)),e.ct=e=>ni(r2(e)),e.cu=function(e){return e.indexOf("\x1f")>=0},e.cv=function(e){let i=e.indexOf("\x1f");return i>=0?e.slice(i+1):""},e.cw=rS,e.cx=function(e){let i=[],r=e.id;return void 0===r&&i.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&i.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&i.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),i},e.cy=e=>ni(rX(e)),e.cz=e=>ni(rW(e)),e.d=function(e){return e*D},e.d0=function(e,i){el=e,eu=i},e.d1=function(e,i,r=!1){if(nb===ng||nb===ny||nb===nv)throw Error("setRTLTextPlugin cannot be called multiple times.");nw=eW.resolveURL(e),nb=ng,nx=i,nT(),r||nk()},e.d2=nS,e.d3=function(){pv().acquire(pg)},e.d4=function(){let e=d;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(pg),d=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.d5=py,e.d6=function(e){let i=eh();if(!i)return;let r=i.delete(eo);e&&r.catch(e).then(()=>e())},e.d7=pm,e.d8=pT,e.d9=function(e){pb=eW.resolveURL(e),pM||(pM=new pl(pv(),new eJ)),pM.broadcast("setDracoUrl",pb)},e.da=F,e.db=h1,e.dc=M,e.dd=hb,e.de=hp,e.df=S,e.dg=hL,e.dh=class extends eJ{constructor(e,i,r,n,a,s){super(),this.actor=e,this.layerIndex=i,this.availableImages=r,this.loadVectorData=a||pp,this.loading={},this.loaded={},this.deduped=new pf(e.scheduler),this.isSpriteLoaded=n,this.scheduler=e.scheduler,this.brightness=s}loadTile(e,i){let r=e.uid,n=e&&e.request,a=n&&n.collectResourceTiming,s=this.loading[r]=new pc(e);s.abort=this.loadVectorData(e,(o,l)=>{let u=!this.loading[r];if(delete this.loading[r],u||o||!l)return s.status="done",u||(this.loaded[r]=s),i(o);let h=l.rawData,c={};l.expires&&(c.expires=l.expires),l.cacheControl&&(c.cacheControl=l.cacheControl),s.vectorTile=l.vectorTile||new hx(new hN(h));let d=()=>{s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,(e,r)=>{if(e||!r)return i(e);let s={};if(a){let e=eU(n);e.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(e)))}i(null,j({rawTileData:h.slice(0)},r,c,s))})};this.isSpriteLoaded?d():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()}),this.loaded=this.loaded||{},this.loaded[r]=s})}reloadTile(e,i){let r=this.loaded,n=e.uid,a=this;if(r&&r[n]){let s=r[n];s.showCollisionBoxes=e.showCollisionBoxes,s.projection=e.projection,s.brightness=e.brightness,s.tileTransform=cJ(e.tileID.canonical,e.projection),s.extraShadowCaster=e.extraShadowCaster;let o=(e,r)=>{let n=s.reloadCallback;n&&(delete s.reloadCallback,s.parse(s.vectorTile,a.layerIndex,this.availableImages,a.actor,n)),i(e,r)};"parsing"===s.status?s.reloadCallback=o:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}else i(null,void 0)}abortTile(e,i){let r=e.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),i()}removeTile(e,i){let r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],i()}},e.di=eU,e.dj=ey,e.dk=h3,e.dl=function(e){let i=0;if(1179937895!==new Uint32Array(e,0,1)[0]){let r=new Uint32Array(e,0,7),[,,n,a,s,o]=r;i=r.byteLength+a+s+o+s,(n!==e.byteLength||i>=e.byteLength)&&J("Invalid b3dm header information.")}return pI(e,i)},e.dm=function(i,r){let n=pY(i);for(let i of n){for(let e of i.meshes)(function(e){e.heightmap=new Float32Array(4096),e.heightmap.fill(-1);let i=e.vertexArray.float32,r=e.aabb.min[0]-1,n=e.aabb.min[1]-1,a=64/(e.aabb.max[0]-r+2),s=64/(e.aabb.max[1]-n+2);for(let o=0;o<i.length;o+=3){let l=i[o+2],u=(i[o+0]-r)*a|0,h=(i[o+1]-n)*s|0;l>e.heightmap[64*h+u]&&(e.heightmap[64*h+u]=l)}})(e);i.lights&&(i.lightMeshIndex=i.meshes.length,i.meshes.push(function(i,r){let n={};n.indexArray=new ar,n.indexArray.reserve(4*i.length),n.vertexArray=new ac,n.vertexArray.reserve(10*i.length),n.colorArray=new n1,n.vertexArray.reserve(10*i.length);let a=0;for(let s of i){let i=Math.min(10,Math.max(4,1.3*s.height))*r,o=[-s.normal[1],s.normal[0],0],l=Math.min(.29,.1*s.width/s.depth),u=s.width-2*s.depth*r*(l+.01),h=e.v.scaleAndAdd([],s.pos,o,u/2),c=e.v.scaleAndAdd([],s.pos,o,-u/2),d=[h[0],h[1],h[2]+s.height],f=[c[0],c[1],c[2]+s.height],p=e.v.scaleAndAdd([],s.normal,o,l);e.v.scale(p,p,i);let m=e.v.scaleAndAdd([],s.normal,o,-l);e.v.scale(m,m,i),e.v.add(p,h,p),e.v.add(m,c,m),h[2]+=.1,c[2]+=.1,n.vertexArray.emplaceBack(p[0],p[1],p[2]),n.vertexArray.emplaceBack(m[0],m[1],m[2]),n.vertexArray.emplaceBack(h[0],h[1],h[2]),n.vertexArray.emplaceBack(c[0],c[1],c[2]),n.vertexArray.emplaceBack(d[0],d[1],d[2]),n.vertexArray.emplaceBack(f[0],f[1],f[2]),n.vertexArray.emplaceBack(h[0],h[1],h[2]),n.vertexArray.emplaceBack(c[0],c[1],c[2]),n.vertexArray.emplaceBack(p[0],p[1],p[2]),n.vertexArray.emplaceBack(m[0],m[1],m[2]);let _=u/i/2;n.colorArray.emplaceBack(-_-l,-1,_,.8),n.colorArray.emplaceBack(_+l,-1,_,.8),n.colorArray.emplaceBack(-_,0,_,1.3),n.colorArray.emplaceBack(_,0,_,1.3),n.colorArray.emplaceBack(_+l,-.8,_,.7),n.colorArray.emplaceBack(_+l,-.8,_,.7),n.colorArray.emplaceBack(0,0,_,1.3),n.colorArray.emplaceBack(0,0,_,1.3),n.colorArray.emplaceBack(_+l,-1.2,_,.8),n.colorArray.emplaceBack(_+l,-1.2,_,.8),n.indexArray.emplaceBack(6+a,4+a,8+a),n.indexArray.emplaceBack(7+a,9+a,5+a),n.indexArray.emplaceBack(0+a,1+a,2+a),n.indexArray.emplaceBack(1+a,3+a,2+a),a+=10}let s={defined:!0,emissiveFactor:[0,0,0]},o={};return o.baseColorFactor=tv.white,s.pbrMetallicRoughness=o,n.material=s,n.aabb=new lw([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),n}(i.lights,r)))}return n},e.dn=ff,e.dp=po,e.dq=nD,e.dr=function(e){ec(),r&&r.then(i=>{i.keys().then(r=>{for(let n=0;n<r.length-e;n++)i.delete(r[n])})})},e.f=function(i,r){let{x:n,y:a}=i.point,s=lG(n,a,i.worldSize/i._pixelsPerMercatorPixel,0,0);return e.m.multiply(s,s,lU(lP(r)))},e.g=en,e.i=co,e.j=cs,e.k=d_,e.l=l7,e.n=iS,e.o=da,e.p=function(e,i){let r={};for(let n=0;n<i.length;n++){let a=i[n];a in e&&(r[a]=e[a])}return r},e.r=d0,e.s=function(e,i,r){e[4*i+0]=r[0],e[4*i+1]=r[1],e[4*i+2]=r[2],e[4*i+3]=r[3]},e.t=lh,e.u=function(e,i,r,n,a){let s=5*i+2;e.float32[s+0]=r,e.float32[s+1]=n,e.float32[s+2]=a},e.w=R,e.x=lz,e.y=function(e,i,r,n,a,s,o,l,u){if("globe"===u.name)return lz(e,i,new lh(r,n,a),!1);let h=cJ({z:r,x:n,y:a},u);return new lw([(s+h.x/h.scale)*i,h.y/h.scale*i,o],[(s+h.x2/h.scale)*i,h.y2/h.scale*i,l])},e.z=function(e,i,r){let n=0;for(let a=0;a<2;++a){let s=r?r[a]:0;e[a]>s&&(n+=(e[a]-s)*(e[a]-s)),i[a]<s&&(n+=(s-i[a])*(s-i[a]))}return n}}),n(["./shared"],function(e){class i{constructor(e){this.keyCache={},this._layers={},this._layerConfigs={},e&&this.replace(e)}replace(e,i){this._layerConfigs={},this._layers={},this.update(e,[],i)}update(i,r,n){for(let r of(this._options=n,i))this._layerConfigs[r.id]=r,(this._layers[r.id]=e.cp(r,this.scope,this._options)).compileFilter(),this.keyCache[r.id]&&delete this.keyCache[r.id];for(let e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];for(let i of(this.familiesBySource={},function(i,r){let n={};for(let a=0;a<i.length;a++){let s=r&&r[i[a].id]||function(i){let r="";for(let n of e.aS)r+=`/${function e(i){if("number"==typeof i||"boolean"==typeof i||"string"==typeof i||null==i)return JSON.stringify(i);if(Array.isArray(i)){let r="[";for(let n of i)r+=`${e(n)},`;return`${r}]`}let r="{";for(let n of Object.keys(i).sort())r+=`${n}:${e(i[n])},`;return`${r}}`}(i[n])}`;return r}(i[a]);r&&(r[i[a].id]=s);let o=n[s];o||(o=n[s]=[]),o.push(i[a])}let a=[];for(let e in n)a.push(n[e]);return a}(e.da(this._layerConfigs),this.keyCache))){let e=i.map(e=>this._layers[e.id]),r=e[0];if("none"===r.visibility)continue;let n=r.source||"",a=this.familiesBySource[n];a||(a=this.familiesBySource[n]={});let s=r.sourceLayer||"_geojsonTileLayer",o=a[s];o||(o=a[s]=[]),o.push(e)}}}class r{loadTile(i,r){let{uid:n,encoding:a,rawImageData:s,padding:o}=i,l=ImageBitmap&&s instanceof ImageBitmap?this.getImageData(s,o):s;r(null,new e.db(n,l,a,o<1))}getImageData(e,i){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);let r=this.offscreenCanvasContext.getImageData(-i,-i,e.width+2*i,e.height+2*i);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),r}}function n(e,i){if(0!==e.length){a(e[0],i);for(var r=1;r<e.length;r++)a(e[r],!i)}}function a(e,i){for(var r=0,n=0,a=0,s=e.length,o=s-1;a<s;o=a++){var l=(e[a][0]-e[o][0])*(e[o][1]+e[a][1]),u=r+l;n+=Math.abs(r)>=Math.abs(l)?r-u+l:l-u+r,r=u}r+n>=0!=!!i&&e.reverse()}var s,o=e.dc(function e(i,r){var a,s=i&&i.type;if("FeatureCollection"===s)for(a=0;a<i.features.length;a++)e(i.features[a],r);else if("GeometryCollection"===s)for(a=0;a<i.geometries.length;a++)e(i.geometries[a],r);else if("Feature"===s)e(i.geometry,r);else if("Polygon"===s)n(i.coordinates,r);else if("MultiPolygon"===s)for(a=0;a<i.coordinates.length;a++)n(i.coordinates[a],r);return i});let l=e.dd.prototype.toGeoJSON;var u={exports:{}},h=e.df,c=e.de.VectorTileFeature;function d(e,i){this.options=i||{},this.features=e,this.length=e.length}function f(e,i){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=i||4096}d.prototype.feature=function(e){return new f(this.features[e],this.options.extent)},f.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var r=e[i],n=[],a=0;a<r.length;a++)n.push(new h(r[a][0],r[a][1]));this.geometry.push(n)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,i=1/0,r=-1/0,n=1/0,a=-1/0,s=0;s<e.length;s++)for(var o=e[s],l=0;l<o.length;l++){var u=o[l];i=Math.min(i,u.x),r=Math.max(r,u.x),n=Math.min(n,u.y),a=Math.max(a,u.y)}return[i,n,r,a]},f.prototype.toGeoJSON=c.prototype.toGeoJSON;var p=e.dg;function m(e){var i=new p;return function(e,i){for(var r in e.layers)i.writeMessage(3,_,e.layers[r])}(e,i),i.finish()}function _(e,i){i.writeVarintField(15,e.version||1),i.writeStringField(1,e.name||""),i.writeVarintField(5,e.extent||4096);var r,n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),i.writeMessage(2,g,n);var a=n.keys;for(r=0;r<a.length;r++)i.writeStringField(3,a[r]);var s=n.values;for(r=0;r<s.length;r++)i.writeMessage(4,x,s[r])}function g(e,i){var r=e.feature;void 0!==r.id&&i.writeVarintField(1,r.id),i.writeMessage(2,y,e),i.writeVarintField(3,r.type),i.writeMessage(4,v,r)}function y(e,i){var r=e.feature,n=e.keys,a=e.values,s=e.keycache,o=e.valuecache;for(var l in r.properties){var u=r.properties[l],h=s[l];if(null!==u){void 0===h&&(n.push(l),s[l]=h=n.length-1),i.writeVarint(h);var c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var d=c+":"+u,f=o[d];void 0===f&&(a.push(u),o[d]=f=a.length-1),i.writeVarint(f)}}}function v(e,i){for(var r=e.loadGeometry(),n=e.type,a=0,s=0,o=r.length,l=0;l<o;l++){var u=r[l],h=1;1===n&&(h=u.length),i.writeVarint((h<<3)+1);for(var c=3===n?u.length-1:u.length,d=0;d<c;d++){1===d&&1!==n&&i.writeVarint((c-1<<3)+2);var f=u[d].x-a,p=u[d].y-s;i.writeVarint(f<<1^f>>31),i.writeVarint(p<<1^p>>31),a+=f,s+=p}3===n&&i.writeVarint(15)}}function x(e,i){var r=typeof e;"string"===r?i.writeStringField(1,e):"boolean"===r?i.writeBooleanField(7,e):"number"===r&&(e%1!=0?i.writeDoubleField(3,e):e<0?i.writeSVarintField(6,e):i.writeVarintField(5,e))}u.exports=m,u.exports.fromVectorTileJs=m,u.exports.fromGeojsonVt=function(e,i){i=i||{};var r={};for(var n in e)r[n]=new d(e[n].features,i),r[n].name=n,r[n].version=i.version,r[n].extent=i.extent;return m({layers:r})},u.exports.GeoJSONWrapper=d;var b=e.dc(u.exports);let w={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},M=Math.fround||(s=new Float32Array(1),e=>(s[0]=+e,s[0]));class T{constructor(e){this.options=Object.assign(Object.create(w),e),this.trees=Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){let{log:i,minZoom:r,maxZoom:n}=this.options;i&&console.time("total time");let a=`prepare ${e.length} points`;i&&console.time(a),this.points=e;let s=[];for(let i=0;i<e.length;i++){let r=e[i];if(!r.geometry)continue;let[n,a]=r.geometry.coordinates,o=M(k(n)),l=M(D(a));s.push(o,l,1/0,i,-1,1),this.options.reduce&&s.push(0)}let o=this.trees[n+1]=this._createTree(s);i&&console.timeEnd(a);for(let e=n;e>=r;e--){let r=+Date.now();o=this.trees[e]=this._createTree(this._cluster(o,e)),i&&console.log("z%d: %d clusters in %dms",e,o.numItems,+Date.now()-r)}return i&&console.timeEnd("total time"),this}getClusters(e,i){let r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),a=180===e[2]?180:((e[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,a=180;else if(r>a){let e=this.getClusters([r,n,180,s],i),o=this.getClusters([-180,n,a,s],i);return e.concat(o)}let o=this.trees[this._limitZoom(i)],l=o.range(k(r),D(s),k(a),D(n)),u=o.data,h=[];for(let e of l){let i=this.stride*e;h.push(u[i+5]>1?L(u,i,this.clusterProps):this.points[u[i+3]])}return h}getChildren(e){let i=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",a=this.trees[r];if(!a)throw Error(n);let s=a.data;if(i*this.stride>=s.length)throw Error(n);let o=this.options.radius/(this.options.extent*Math.pow(2,r-1)),l=a.within(s[i*this.stride],s[i*this.stride+1],o),u=[];for(let i of l){let r=i*this.stride;s[r+4]===e&&u.push(s[r+5]>1?L(s,r,this.clusterProps):this.points[s[r+3]])}if(0===u.length)throw Error(n);return u}getLeaves(e,i,r){let n=[];return this._appendLeaves(n,e,i=i||10,r=r||0,0),n}getTile(e,i,r){let n=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:s,radius:o}=this.options,l=o/s,u=(r-l)/a,h=(r+1+l)/a,c={features:[]};return this._addTileFeatures(n.range((i-l)/a,u,(i+1+l)/a,h),n.data,i,r,a,c),0===i&&this._addTileFeatures(n.range(1-l/a,u,1,h),n.data,a,r,a,c),i===a-1&&this._addTileFeatures(n.range(0,u,l/a,h),n.data,-1,r,a,c),c.features.length?c:null}getClusterExpansionZoom(e){let i=this._getOriginZoom(e)-1;for(;i<=this.options.maxZoom;){let r=this.getChildren(e);if(i++,1!==r.length)break;e=r[0].properties.cluster_id}return i}_appendLeaves(e,i,r,n,a){for(let s of this.getChildren(i)){let i=s.properties;if(i&&i.cluster?a+i.point_count<=n?a+=i.point_count:a=this._appendLeaves(e,i.cluster_id,r,n,a):a<n?a++:e.push(s),e.length===r)break}return a}_createTree(i){let r=new e.aZ(i.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<i.length;e+=this.stride)r.add(i[e],i[e+1]);return r.finish(),r.data=i,r}_addTileFeatures(e,i,r,n,a,s){for(let o of e){let e,l,u,h;let c=o*this.stride,d=i[c+5]>1;if(d)e=S(i,c,this.clusterProps),l=i[c],u=i[c+1];else{let r=this.points[i[c+3]];e=r.properties;let[n,a]=r.geometry.coordinates;l=k(n),u=D(a)}let f={type:1,geometry:[[Math.round(this.options.extent*(l*a-r)),Math.round(this.options.extent*(u*a-n))]],tags:e};void 0!==(h=d||this.options.generateId?i[c+3]:this.points[i[c+3]].id)&&(f.id=h),s.features.push(f)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,i){let{radius:r,extent:n,reduce:a,minPoints:s}=this.options,o=r/(n*Math.pow(2,i)),l=e.data,u=[],h=this.stride;for(let r=0;r<l.length;r+=h){if(l[r+2]<=i)continue;l[r+2]=i;let n=l[r],c=l[r+1],d=e.within(l[r],l[r+1],o),f=l[r+5],p=f;for(let e of d){let r=e*h;l[r+2]>i&&(p+=l[r+5])}if(p>f&&p>=s){let e,s=n*f,o=c*f,m=-1,_=((r/h|0)<<5)+(i+1)+this.points.length;for(let n of d){let u=n*h;if(l[u+2]<=i)continue;l[u+2]=i;let c=l[u+5];s+=l[u]*c,o+=l[u+1]*c,l[u+4]=_,a&&(e||(e=this._map(l,r,!0),m=this.clusterProps.length,this.clusterProps.push(e)),a(e,this._map(l,u)))}l[r+4]=_,u.push(s/p,o/p,1/0,_,-1,p),a&&u.push(m)}else{for(let e=0;e<h;e++)u.push(l[r+e]);if(p>1)for(let e of d){let r=e*h;if(!(l[r+2]<=i)){l[r+2]=i;for(let e=0;e<h;e++)u.push(l[r+e])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,i,r){if(e[i+5]>1){let n=this.clusterProps[e[i+6]];return r?Object.assign({},n):n}let n=this.points[e[i+3]].properties,a=this.options.map(n);return r&&a===n?Object.assign({},a):a}}function L(e,i,r){return{type:"Feature",id:e[i+3],properties:S(e,i,r),geometry:{type:"Point",coordinates:[360*(e[i]-.5),360*Math.atan(Math.exp((180-360*e[i+1])*Math.PI/180))/Math.PI-90]}}}function S(e,i,r){let n=e[i+5],a=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?Math.round(n/100)/10+"k":n,s=e[i+6];return Object.assign(-1===s?{}:Object.assign({},r[s]),{cluster:!0,cluster_id:e[i+3],point_count:n,point_count_abbreviated:a})}function k(e){return e/360+.5}function D(e){let i=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return r<0?0:r>1?1:r}var E={exports:{}};E.exports=function(){function e(e,r,n,a){var s={id:void 0===e?null:e,type:r,geometry:n,tags:a,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var r=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)i(e,r);else if("Polygon"===n||"MultiLineString"===n)for(var a=0;a<r.length;a++)i(e,r[a]);else if("MultiPolygon"===n)for(a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++)i(e,r[a][s])}(s),s}function i(e,i){for(var r=0;r<i.length;r+=3)e.minX=Math.min(e.minX,i[r]),e.minY=Math.min(e.minY,i[r+1]),e.maxX=Math.max(e.maxX,i[r]),e.maxY=Math.max(e.maxY,i[r+1])}function r(i,o,l,u){if(o.geometry){var h=o.geometry.coordinates,c=o.geometry.type,d=Math.pow(l.tolerance/((1<<l.maxZoom)*l.extent),2),f=[],p=o.id;if(l.promoteId?p=o.properties[l.promoteId]:l.generateId&&(p=u||0),"Point"===c)n(h,f);else if("MultiPoint"===c)for(var m=0;m<h.length;m++)n(h[m],f);else if("LineString"===c)a(h,f,d,!1);else if("MultiLineString"===c){if(l.lineMetrics){for(m=0;m<h.length;m++)a(h[m],f=[],d,!1),i.push(e(p,"LineString",f,o.properties));return}s(h,f,d,!1)}else if("Polygon"===c)s(h,f,d,!0);else{if("MultiPolygon"!==c){if("GeometryCollection"===c){for(m=0;m<o.geometry.geometries.length;m++)r(i,{id:p,geometry:o.geometry.geometries[m],properties:o.properties},l,u);return}throw Error("Input data is not a valid GeoJSON object.")}for(m=0;m<h.length;m++){var _=[];s(h[m],_,d,!0),f.push(_)}}i.push(e(p,c,f,o.properties))}}function n(e,i){i.push(e[0]/360+.5),i.push(o(e[1])),i.push(0)}function a(e,i,r,n){for(var a,s,l=0,u=0;u<e.length;u++){var h=e[u][0]/360+.5,c=o(e[u][1]);i.push(h),i.push(c),i.push(0),u>0&&(l+=n?(a*c-h*s)/2:Math.sqrt(Math.pow(h-a,2)+Math.pow(c-s,2))),a=h,s=c}var d=i.length-3;i[2]=1,function e(i,r,n,a){for(var s,o=a,l=n-r>>1,u=n-r,h=i[r],c=i[r+1],d=i[n],f=i[n+1],p=r+3;p<n;p+=3){var m=function(e,i,r,n,a,s){var o=a-r,l=s-n;if(0!==o||0!==l){var u=((e-r)*o+(i-n)*l)/(o*o+l*l);u>1?(r=a,n=s):u>0&&(r+=o*u,n+=l*u)}return(o=e-r)*o+(l=i-n)*l}(i[p],i[p+1],h,c,d,f);if(m>o)s=p,o=m;else if(m===o){var _=Math.abs(p-l);_<u&&(s=p,u=_)}}o>a&&(s-r>3&&e(i,r,s,a),i[s+2]=o,n-s>3&&e(i,s,n,a))}(i,0,d,r),i[d+2]=1,i.size=Math.abs(l),i.start=0,i.end=i.size}function s(e,i,r,n){for(var s=0;s<e.length;s++){var o=[];a(e[s],o,r,n),i.push(o)}}function o(e){var i=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return r<0?0:r>1?1:r}function l(i,r,n,a,s,o,l,h){if(a/=r,o>=(n/=r)&&l<a)return i;if(l<n||o>=a)return null;for(var d=[],f=0;f<i.length;f++){var p=i[f],m=p.geometry,_=p.type,g=0===s?p.minX:p.minY,y=0===s?p.maxX:p.maxY;if(g>=n&&y<a)d.push(p);else if(!(y<n||g>=a)){var v=[];if("Point"===_||"MultiPoint"===_)(function(e,i,r,n,a){for(var s=0;s<e.length;s+=3){var o=e[s+a];o>=r&&o<=n&&(i.push(e[s]),i.push(e[s+1]),i.push(e[s+2]))}})(m,v,n,a,s);else if("LineString"===_)u(m,v,n,a,s,!1,h.lineMetrics);else if("MultiLineString"===_)c(m,v,n,a,s,!1);else if("Polygon"===_)c(m,v,n,a,s,!0);else if("MultiPolygon"===_)for(var x=0;x<m.length;x++){var b=[];c(m[x],b,n,a,s,!0),b.length&&v.push(b)}if(v.length){if(h.lineMetrics&&"LineString"===_){for(x=0;x<v.length;x++)d.push(e(p.id,_,v[x],p.tags));continue}"LineString"!==_&&"MultiLineString"!==_||(1===v.length?(_="LineString",v=v[0]):_="MultiLineString"),"Point"!==_&&"MultiPoint"!==_||(_=3===v.length?"Point":"MultiPoint"),d.push(e(p.id,_,v,p.tags))}}}return d.length?d:null}function u(e,i,r,n,a,s,o){for(var l,u,c=h(e),m=0===a?f:p,_=e.start,g=0;g<e.length-3;g+=3){var y=e[g],v=e[g+1],x=e[g+2],b=e[g+3],w=e[g+4],M=0===a?y:v,T=0===a?b:w,L=!1;o&&(l=Math.sqrt(Math.pow(y-b,2)+Math.pow(v-w,2))),M<r?T>r&&(u=m(c,y,v,b,w,r),o&&(c.start=_+l*u)):M>n?T<n&&(u=m(c,y,v,b,w,n),o&&(c.start=_+l*u)):d(c,y,v,x),T<r&&M>=r&&(u=m(c,y,v,b,w,r),L=!0),T>n&&M<=n&&(u=m(c,y,v,b,w,n),L=!0),!s&&L&&(o&&(c.end=_+l*u),i.push(c),c=h(e)),o&&(_+=l)}var S=e.length-3;y=e[S],v=e[S+1],x=e[S+2],(M=0===a?y:v)>=r&&M<=n&&d(c,y,v,x),S=c.length-3,s&&S>=3&&(c[S]!==c[0]||c[S+1]!==c[1])&&d(c,c[0],c[1],c[2]),c.length&&i.push(c)}function h(e){var i=[];return i.size=e.size,i.start=e.start,i.end=e.end,i}function c(e,i,r,n,a,s){for(var o=0;o<e.length;o++)u(e[o],i,r,n,a,s,!1)}function d(e,i,r,n){e.push(i),e.push(r),e.push(n)}function f(e,i,r,n,a,s){var o=(s-i)/(n-i);return e.push(s),e.push(r+(a-r)*o),e.push(1),o}function p(e,i,r,n,a,s){var o=(s-r)/(a-r);return e.push(i+(n-i)*o),e.push(s),e.push(1),o}function m(i,r){for(var n=[],a=0;a<i.length;a++){var s,o=i[a],l=o.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)s=_(o.geometry,r);else if("MultiLineString"===l||"Polygon"===l){s=[];for(var u=0;u<o.geometry.length;u++)s.push(_(o.geometry[u],r))}else if("MultiPolygon"===l)for(s=[],u=0;u<o.geometry.length;u++){for(var h=[],c=0;c<o.geometry[u].length;c++)h.push(_(o.geometry[u][c],r));s.push(h)}n.push(e(o.id,l,s,o.tags))}return n}function _(e,i){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+i,e[n+1],e[n+2]);return r}function g(e,i){if(e.transformed)return e;var r,n,a,s=1<<e.z,o=e.x,l=e.y;for(r=0;r<e.features.length;r++){var u=e.features[r],h=u.geometry,c=u.type;if(u.geometry=[],1===c)for(n=0;n<h.length;n+=2)u.geometry.push(y(h[n],h[n+1],i,s,o,l));else for(n=0;n<h.length;n++){var d=[];for(a=0;a<h[n].length;a+=2)d.push(y(h[n][a],h[n][a+1],i,s,o,l));u.geometry.push(d)}}return e.transformed=!0,e}function y(e,i,r,n,a,s){return[Math.round(r*(e*n-a)),Math.round(r*(i*n-s))]}function v(e,i,r,n,a,s){var o=n*n;if(n>0&&i.size<(a?o:n))r.numPoints+=i.length/3;else{for(var l=[],u=0;u<i.length;u+=3)(0===n||i[u+2]>o)&&(r.numSimplified++,l.push(i[u]),l.push(i[u+1])),r.numPoints++;a&&function(e,i){for(var r=0,n=0,a=e.length,s=a-2;n<a;s=n,n+=2)r+=(e[n]-e[s])*(e[n+1]+e[s+1]);if(r>0===i)for(n=0,a=e.length;n<a/2;n+=2){var o=e[n],l=e[n+1];e[n]=e[a-2-n],e[n+1]=e[a-1-n],e[a-2-n]=o,e[a-1-n]=l}}(l,s),e.push(l)}}function x(e,i){var n,a,s,o,u,h,c=(i=this.options=function(e,i){for(var r in i)e[r]=i[r];return e}(Object.create(this.options),i)).debug;if(c&&console.time("preprocess data"),i.maxZoom<0||i.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(i.promoteId&&i.generateId)throw Error("promoteId and generateId cannot be used together.");var d=function(e,i){var n=[];if("FeatureCollection"===e.type)for(var a=0;a<e.features.length;a++)r(n,e.features[a],i,a);else r(n,"Feature"===e.type?e:{geometry:e},i);return n}(e,i);this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",i.indexMaxZoom,i.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=d,s=(a=i).buffer/a.extent,o=n,u=l(n,1,-1-s,s,0,-1,2,a),h=l(n,1,1-s,2+s,0,-1,2,a),(u||h)&&(o=l(n,1,-s,1+s,0,-1,2,a)||[],u&&(o=m(u,1).concat(o)),h&&(o=o.concat(m(h,-1)))),d=o).length&&this.splitTile(d,0,0,0),c&&(d.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function b(e,i,r){return 32*((1<<e)*r+i)+e}return x.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},x.prototype.splitTile=function(e,i,r,n,a,s,o){for(var u=[e,i,r,n],h=this.options,c=h.debug;u.length;){n=u.pop(),r=u.pop(),i=u.pop(),e=u.pop();var d=1<<i,f=b(i,r,n),p=this.tiles[f];if(!p&&(c>1&&console.time("creation"),p=this.tiles[f]=function(e,i,r,n,a){for(var s=i===a.maxZoom?0:a.tolerance/((1<<i)*a.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:i,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},l=0;l<e.length;l++){o.numFeatures++,function(e,i,r,n){var a=i.geometry,s=i.type,o=[];if("Point"===s||"MultiPoint"===s)for(var l=0;l<a.length;l+=3)o.push(a[l]),o.push(a[l+1]),e.numPoints++,e.numSimplified++;else if("LineString"===s)v(o,a,e,r,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(l=0;l<a.length;l++)v(o,a[l],e,r,"Polygon"===s,0===l);else if("MultiPolygon"===s)for(var u=0;u<a.length;u++){var h=a[u];for(l=0;l<h.length;l++)v(o,h[l],e,r,!0,0===l)}if(o.length){var c=i.tags||null;if("LineString"===s&&n.lineMetrics){for(var d in c={},i.tags)c[d]=i.tags[d];c.mapbox_clip_start=a.start/a.size,c.mapbox_clip_end=a.end/a.size}var f={geometry:o,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:c};null!==i.id&&(f.id=i.id),e.features.push(f)}}(o,e[l],s,a);var u=e[l].minX,h=e[l].minY,c=e[l].maxX,d=e[l].maxY;u<o.minX&&(o.minX=u),h<o.minY&&(o.minY=h),c>o.maxX&&(o.maxX=c),d>o.maxY&&(o.maxY=d)}return o}(e,i,r,n,h),this.tileCoords.push({z:i,x:r,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",i,r,n,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var m="z"+i;this.stats[m]=(this.stats[m]||0)+1,this.total++}if(p.source=e,a){if(i===h.maxZoom||i===a)continue;var _=1<<a-i;if(r!==Math.floor(s/_)||n!==Math.floor(o/_))continue}else if(i===h.indexMaxZoom||p.numPoints<=h.indexMaxPoints)continue;if(p.source=null,0!==e.length){c>1&&console.time("clipping");var g,y,x,w,M,T,L=.5*h.buffer/h.extent,S=.5-L,k=.5+L,D=1+L;g=y=x=w=null,M=l(e,d,r-L,r+k,0,p.minX,p.maxX,h),T=l(e,d,r+S,r+D,0,p.minX,p.maxX,h),e=null,M&&(g=l(M,d,n-L,n+k,1,p.minY,p.maxY,h),y=l(M,d,n+S,n+D,1,p.minY,p.maxY,h),M=null),T&&(x=l(T,d,n-L,n+k,1,p.minY,p.maxY,h),w=l(T,d,n+S,n+D,1,p.minY,p.maxY,h),T=null),c>1&&console.timeEnd("clipping"),u.push(g||[],i+1,2*r,2*n),u.push(y||[],i+1,2*r,2*n+1),u.push(x||[],i+1,2*r+1,2*n),u.push(w||[],i+1,2*r+1,2*n+1)}}},x.prototype.getTile=function(e,i,r){var n=this.options,a=n.extent,s=n.debug;if(e<0||e>24)return null;var o=1<<e,l=b(e,i=(i%o+o)%o,r);if(this.tiles[l])return g(this.tiles[l],a);s>1&&console.log("drilling down to z%d-%d-%d",e,i,r);for(var u,h=e,c=i,d=r;!u&&h>0;)h--,c=Math.floor(c/2),d=Math.floor(d/2),u=this.tiles[b(h,c,d)];return u&&u.source?(s>1&&console.log("found parent tile z%d-%d-%d",h,c,d),s>1&&console.time("drilling down"),this.splitTile(u.source,h,c,d,e,i,r),s>1&&console.timeEnd("drilling down"),this.tiles[l]?g(this.tiles[l],a):null):null},function(e,i){return new x(e,i)}}();var A=e.dc(E.exports);function P(i,r){let n=i.tileID.canonical;if(!this._geoJSONIndex)return r(null,null);let a=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!a)return r(null,null);let s=new class{constructor(i){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.J,this.length=i.length,this._features=i}feature(i){return new class{constructor(i){this._feature=i,this.extent=e.J,this.type=i.type,this.properties=i.tags,"id"in i&&!isNaN(i.id)&&(this.id=parseInt(i.id,10))}loadGeometry(){if(1===this._feature.type){let i=[];for(let r of this._feature.geometry)i.push([new e.P(r[0],r[1])]);return i}{let i=[];for(let r of this._feature.geometry){let n=[];for(let i of r)n.push(new e.P(i[0],i[1]));i.push(n)}return i}}toGeoJSON(e,i,r){return l.call(this,e,i,r)}}(this._features[i])}}(a.features),o=b(s);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),r(null,{vectorTile:s,rawData:o.buffer})}class C extends e.dh{constructor(e,i,r,n,a,s){super(e,i,r,n,P,s),a&&(this.loadGeoJSON=a)}loadData(i,r){let n=i&&i.request,a=n&&n.collectResourceTiming;this.loadGeoJSON(i,(s,l)=>{if(s||!l)return r(s);if("object"!=typeof l)return r(Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`));{o(l,!0);try{if(i.filter){let r=e.cw(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw Error(r.value.map(e=>`${e.key}: ${e.message}`).join(", "));let n=l.features.filter(e=>r.value.evaluate({zoom:0},e));l={type:"FeatureCollection",features:n}}this._geoJSONIndex=i.cluster?new T(function({superclusterOptions:i,clusterProperties:r}){if(!r||!i)return i;let n={},a={},s={accumulated:null,zoom:0},o={properties:null},l=Object.keys(r);for(let i of l){let[s,o]=r[i],l=e.cw(o),u=e.cw("string"==typeof s?[s,["accumulated"],["get",i]]:s);n[i]=l.value,a[i]=u.value}return i.map=e=>{o.properties=e;let i={};for(let e of l)i[e]=n[e].evaluate(s,o);return i},i.reduce=(e,i)=>{for(let r of(o.properties=i,l))s.accumulated=e[r],e[r]=a[r].evaluate(s,o)},i}(i)).load(l.features):A(l,i.geojsonVtOptions)}catch(s){return r(s)}this.loaded={};let u={};if(a){let r=e.di(n);r&&(u.resourceTiming={},u.resourceTiming[i.source]=JSON.parse(JSON.stringify(r)))}r(null,u)}})}reloadTile(e,i){let r=this.loaded;return r&&r[e.uid]?super.reloadTile(e,i):this.loadTile(e,i)}loadGeoJSON(i,r){if(i.request)e.a1(i.request,r);else{if("string"!=typeof i.data)return r(Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`));try{return r(null,JSON.parse(i.data))}catch(e){return r(Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,i){try{i(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(r){i(r)}}getClusterChildren(e,i){try{i(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(r){i(r)}}getClusterLeaves(e,i){try{i(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(r){i(r)}}}class I{constructor(i,r){this.tileID=new e.O(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=i.projection,this.brightness=r}parse(i,r,n,a){this.status="parsing";let s=new e.O(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),o={},l=r.familiesBySource[n.source],u=new e.dk(s,n.promoteId);return u.bucketLayerIDs=[],e.dl(i).then(i=>{if(!i)return a(Error("Could not parse tile"));let r=e.dm(i,1/e.cg(n.tileID.canonical)),h=i.json.extensionsUsed&&i.json.extensionsUsed.includes("MAPBOX_mesh_features"),c=new e.al(this.zoom,{brightness:this.brightness});for(let n in l)for(let a of l[n]){let n=a[0],l=i.json.extensionsUsed;n.recalculate(c,[]);let u=new e.dn(r,s,l&&l.includes("MAPBOX_mesh_features"),this.brightness);h||(u.needsUpload=!0),o[n.fqid]=u,u.evaluate(n)}this.status="done",a(null,{buckets:o,featureIndex:u})}).catch(e=>a(Error(e.message)))}}class O{constructor(e,i,r,n,a,s){this.actor=e,this.layerIndex=i,this.brightness=s,this.loading={},this.loaded={}}loadTile(i,r){let n=i.uid,a=this.loading[n]=new I(i,this.brightness);e.dj(i.request,(e,s)=>{let o=!this.loading[n];return delete this.loading[n],o||e?(a.status="done",o||(this.loaded[n]=a),r(e)):s&&0!==s.byteLength?void a.parse(s,this.layerIndex,i,(e,i)=>{a.status="done",this.loaded=this.loaded||{},this.loaded[n]=a,e||!i?r(e):r(null,i)}):(a.status="done",this.loaded[n]=a,r())})}reloadTile(e,i){let r=this.loaded,n=e.uid;if(r&&r[n]){let a=r[n];a.projection=e.projection,a.brightness=e.brightness,"parsing"===a.status?a.reloadCallback=(r,n)=>{a.reloadCallback&&(delete a.reloadCallback,this.loadTile(e,i)),i(r,n)}:"done"===a.status&&this.loadTile(e,i)}}abortTile(e,i){let r=e.uid;this.loading[r]&&delete this.loading[r],i()}removeTile(e,i){let r=this.loaded,n=e.uid;r&&r[n]&&delete r[n],i()}}class z{constructor(i){this.self=i,this.actor=new e.dp(i,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.o({name:"mercator"}),this.workerSourceTypes={vector:e.dh,geojson:C,"batched-model":O},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,i)=>{if(this.workerSourceTypes[e])throw Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=i},this.self.registerRTLTextPlugin=i=>{if(e.dq.isParsed())throw Error("RTL text plugin already registered.");e.dq.applyArabicShaping=i.applyArabicShaping,e.dq.processBidirectionalText=i.processBidirectionalText,e.dq.processStyledBidirectionalText=i.processStyledBidirectionalText}}clearCaches(e,i,r){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],r()}checkIfReady(e,i,r){r()}setReferrer(e,i){this.referrer=i}spriteLoaded(i,{scope:r,isLoaded:n}){if(this.isSpriteLoaded[i]||(this.isSpriteLoaded[i]={}),this.isSpriteLoaded[i][r]=n,this.workerSources[i]&&this.workerSources[i][r])for(let a in this.workerSources[i][r]){let s=this.workerSources[i][r][a];for(let i in s)s[i]instanceof e.dh&&(s[i].isSpriteLoaded=n,s[i].fire(new e.a8("isSpriteLoaded")))}}setImages(e,{scope:i,images:r},n){if(this.availableImages[e]||(this.availableImages[e]={}),this.availableImages[e][i]=r,this.workerSources[e]&&this.workerSources[e][i]){for(let n in this.workerSources[e][i]){let a=this.workerSources[e][i][n];for(let e in a)a[e].availableImages=r}n()}else n()}setProjection(i,r){this.projections[i]=e.o(r)}setBrightness(e,i,r){this.brightness=i,r()}setLayers(e,i,r){this.getLayerIndex(e,i.scope).replace(i.layers,i.options),r()}updateLayers(e,i,r){this.getLayerIndex(e,i.scope).update(i.layers,i.removedIds,i.options),r()}loadTile(e,i,r){i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,i.type,i.source,i.scope).loadTile(i,r)}loadDEMTile(e,i,r){this.getDEMWorkerSource(e,i.source,i.scope).loadTile(i,r)}reloadTile(e,i,r){i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,i.type,i.source,i.scope).reloadTile(i,r)}abortTile(e,i,r){this.getWorkerSource(e,i.type,i.source,i.scope).abortTile(i,r)}removeTile(e,i,r){this.getWorkerSource(e,i.type,i.source,i.scope).removeTile(i,r)}removeSource(e,i,r){if(!(this.workerSources[e]&&this.workerSources[e][i.scope]&&this.workerSources[e][i.scope][i.type]&&this.workerSources[e][i.scope][i.type][i.source]))return;let n=this.workerSources[e][i.scope][i.type][i.source];delete this.workerSources[e][i.scope][i.type][i.source],void 0!==n.removeSource?n.removeSource(i,r):r()}loadWorkerSource(e,i,r){try{this.self.importScripts(i.url),r()}catch(n){r(n.toString())}}syncRTLPluginState(i,r,n){try{e.dq.setState(r);let i=e.dq.getPluginURL();if(e.dq.isLoaded()&&!e.dq.isParsed()&&null!=i){this.self.importScripts(i);let r=e.dq.isParsed();n(r?void 0:Error(`RTL Text Plugin failed to import scripts from ${i}`),r)}}catch(a){n(a.toString())}}setDracoUrl(e,i){this.dracoUrl=i}getAvailableImages(e,i){this.availableImages[e]||(this.availableImages[e]={});let r=this.availableImages[e][i];return r||(r=[]),r}getLayerIndex(e,r){this.layerIndexes[e]||(this.layerIndexes[e]={});let n=this.layerIndexes[e][r];return n||((n=this.layerIndexes[e][r]=new i).scope=r),n}getWorkerSource(e,i,r,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][n]||(this.workerSources[e][n]={}),this.workerSources[e][n][i]||(this.workerSources[e][n][i]={}),this.isSpriteLoaded[e]||(this.isSpriteLoaded[e]={}),!this.workerSources[e][n][i][r]){let a={send:(i,r,n,a,s,o)=>{this.actor.send(i,r,n,e,s,o)},scheduler:this.actor.scheduler};this.workerSources[e][n][i][r]=new this.workerSourceTypes[i](a,this.getLayerIndex(e,n),this.getAvailableImages(e,n),this.isSpriteLoaded[e][n],void 0,this.brightness)}return this.workerSources[e][n][i][r]}getDEMWorkerSource(e,i,n){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][n]||(this.demWorkerSources[e][n]={}),this.demWorkerSources[e][n][i]||(this.demWorkerSources[e][n][i]=new r),this.demWorkerSources[e][n][i]}enforceCacheSizeLimit(i,r){e.dr(r)}getWorkerPerformanceMetrics(e,i,r){r(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new z(self)),z}),n(["./shared"],function(e){let i,r;function n(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],i[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i||Object.keys(e).length!==Object.keys(i).length)return!1;for(let r in e)if(!n(e[r],i[r]))return!1;return!0}return e===i}function a(e){var i;return"undefined"!=typeof window&&"undefined"!=typeof document&&!!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,i,r=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(r);try{i=new Worker(n),e=!0}catch(a){e=!1}return i&&i.terminate(),URL.revokeObjectURL(n),e}()&&!!function(){var e=document.createElement("canvas");e.width=e.height=1;var i=e.getContext("2d");if(!i)return!1;var r=i.getImageData(0,0,1,1);return r&&r.width===e.width}()&&(void 0===s[i=e&&e.failIfMajorPerformanceCaveat]&&(s[i]=function(e){var i,r,n,s=(i=document.createElement("canvas"),(r=Object.create(a.webGLContextAttributes)).failIfMajorPerformanceCaveat=e,i.getContext("webgl2",r));if(!s)return!1;try{n=s.createShader(s.VERTEX_SHADER)}catch(o){return!1}return!(!n||s.isContextLost())&&(s.shaderSource(n,"void main() {}"),s.compileShader(n),!0===s.getShaderParameter(n,s.COMPILE_STATUS))}(i)),!!s[i]&&!document.documentMode)}var s={};function o(e,i,r){let n=document.createElement(e);return null!=i&&(n.className=i),r&&r.appendChild(n),n}function l(e,i,r){let n=document.createElementNS("http://www.w3.org/2000/svg",e);for(let e of Object.keys(i))n.setAttributeNS(null,e,String(i[e]));return r&&r.appendChild(n),n}a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};let u="undefined"!=typeof document?document.documentElement&&document.documentElement.style:null,h=u&&void 0!==u.userSelect?"userSelect":"WebkitUserSelect";function c(){u&&h&&(i=u[h],u[h]="none")}function d(){u&&h&&(u[h]=i)}function f(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",f,!0)}function p(){window.addEventListener("click",f,!0),window.setTimeout(()=>{window.removeEventListener("click",f,!0)},0)}function m(e,i){let r=e.getBoundingClientRect();return y(e,r,i)}function _(e,i){let r=e.getBoundingClientRect(),n=[];for(let a=0;a<i.length;a++)n.push(y(e,r,i[a]));return n}function g(e){return void 0!==window.InstallTrigger&&2===e.button&&e.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button}function y(i,r,n){let a=i.offsetWidth===r.width?1:i.offsetWidth/r.width;return new e.P((n.clientX-r.left)*a,(n.clientY-r.top)*a)}class v{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(e,i){this._updatedSourceCaches[e]=i,this.setDirty()}discardSourceCacheUpdate(e){delete this._updatedSourceCaches[e]}updateLayer(e){let i=e.scope;this._updatedLayers[i]=this._updatedLayers[i]||new Set,this._updatedLayers[i].add(e.id),this.setDirty()}removeLayer(e){let i=e.scope;this._removedLayers[i]=this._removedLayers[i]||{},this._updatedLayers[i]=this._updatedLayers[i]||new Set,this._removedLayers[i][e.id]=e,this._updatedLayers[i].delete(e.id),this._updatedPaintProps.delete(e.fqid),this.setDirty()}getRemovedLayer(e){return this._removedLayers[e.scope]?this._removedLayers[e.scope][e.id]:null}discardLayerRemoval(e){this._removedLayers[e.scope]&&delete this._removedLayers[e.scope][e.id]}getLayerUpdatesByScope(){let e={};for(let i in this._updatedLayers)e[i]=e[i]||{},e[i].updatedIds=Array.from(this._updatedLayers[i].values());for(let i in this._removedLayers)e[i]=e[i]||{},e[i].removedIds=Object.keys(this._removedLayers[i]);return e}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(e){this._updatedPaintProps.add(e.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(e){this._updatedImages.add(e),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}let x={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class b{constructor(e,i,r,n,a,s){this.length=i.length,this.attributes=r,this.itemSize=i.bytesPerElement,this.dynamicDraw=n,this.instanceCount=s,this.context=e;let o=e.gl;this.buffer=o.createBuffer(),e.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||a||i.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){let i=this.context.gl;this.bind(),i.bufferSubData(i.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,i){for(let r=0;r<this.attributes.length;r++){let n=i.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}setVertexAttribPointers(e,i,r){for(let n=0;n<this.attributes.length;n++){let a=this.attributes[n],s=i.attributes[a.name];void 0!==s&&e.vertexAttribPointer(s,a.components,e[x[a.type]],!1,this.itemSize,a.offset+this.itemSize*(r||0))}}setVertexAttribDivisor(e,i,r){for(let n=0;n<this.attributes.length;n++){let a=i.attributes[this.attributes[n].name];void 0!==a&&this.instanceCount&&this.instanceCount>0&&e.vertexAttribDivisor(a,r)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class w{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class M extends w{getDefault(){return e.C.transparent}set(e){let i=this.current;(e.r!==i.r||e.g!==i.g||e.b!==i.b||e.a!==i.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class T extends w{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class L extends w{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class S extends w{getDefault(){return[!0,!0,!0,!0]}set(e){let i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class k extends w{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class D extends w{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class E extends w{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){let i=this.current;(e.func!==i.func||e.ref!==i.ref||e.mask!==i.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class A extends w{getDefault(){let e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){let i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class P extends w{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;e?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),this.current=e,this.dirty=!1}}class C extends w{getDefault(){return[0,1]}set(e){let i=this.current;(e[0]!==i[0]||e[1]!==i[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class I extends w{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;e?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),this.current=e,this.dirty=!1}}class O extends w{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class z extends w{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;e?i.enable(i.BLEND):i.disable(i.BLEND),this.current=e,this.dirty=!1}}class R extends w{getDefault(){let e=this.gl;return[e.ONE,e.ZERO,e.ONE,e.ZERO]}set(e){let i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Y extends w{getDefault(){return e.C.transparent}set(e){let i=this.current;(e.r!==i.r||e.g!==i.g||e.b!==i.b||e.a!==i.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class F extends w{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(e,e),this.current=e,this.dirty=!1)}}class j extends w{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;e?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),this.current=e,this.dirty=!1}}class B extends w{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class N extends w{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let H=class extends w{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class V extends w{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class U extends w{getDefault(){let e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){let i=this.current;(e[0]!==i[0]||e[1]!==i[1]||e[2]!==i[2]||e[3]!==i[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class $ extends w{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class W extends w{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;i.bindRenderbuffer(i.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class G extends w{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;i.bindTexture(i.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class q extends w{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Z extends w{getDefault(){return null}set(e){let i=this.gl;i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class X extends w{getDefault(){return null}set(e){this.gl&&(e!==this.current||this.dirty)&&(this.gl.bindVertexArray(e),this.current=e,this.dirty=!1)}}class J extends w{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class K extends w{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Q extends w{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let i=this.gl;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class ee extends w{constructor(e,i){super(e),this.context=e,this.parent=i}getDefault(){return null}}class et extends ee{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let i=this.gl;i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class ei extends ee{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let i=this.gl;i.framebufferRenderbuffer(i.FRAMEBUFFER,this.attachment(),i.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class er extends ee{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let i=this.gl;i.framebufferTexture2D(i.FRAMEBUFFER,this.attachment(),i.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class en extends ei{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ea{constructor(e,i,r,n,a){this.context=e,this.width=i,this.height=r;let s=this.framebuffer=e.gl.createFramebuffer();n&&(this.colorAttachment=new et(e,s)),a&&(this.depthAttachmentType=a,this.depthAttachment="renderbuffer"===a?new ei(e,s):new er(e,s))}destroy(){let e=this.context.gl;if(this.colorAttachment){let i=this.colorAttachment.get();i&&e.deleteTexture(i)}if(this.depthAttachment&&this.depthAttachmentType){if("renderbuffer"===this.depthAttachmentType){let i=this.depthAttachment.get();i&&e.deleteRenderbuffer(i)}else{let i=this.depthAttachment.get();i&&e.deleteTexture(i)}}e.deleteFramebuffer(this.framebuffer)}}class es{constructor(e,i){this.gl=e,this.clearColor=new M(this),this.clearDepth=new T(this),this.clearStencil=new L(this),this.colorMask=new S(this),this.depthMask=new k(this),this.stencilMask=new D(this),this.stencilFunc=new E(this),this.stencilOp=new A(this),this.stencilTest=new P(this),this.depthRange=new C(this),this.depthTest=new I(this),this.depthFunc=new O(this),this.blend=new z(this),this.blendFunc=new R(this),this.blendColor=new Y(this),this.blendEquation=new F(this),this.cullFace=new j(this),this.cullFaceSide=new B(this),this.frontFace=new N(this),this.program=new H(this),this.activeTexture=new V(this),this.viewport=new U(this),this.bindFramebuffer=new $(this),this.bindRenderbuffer=new W(this),this.bindTexture=new G(this),this.bindVertexBuffer=new q(this),this.bindElementBuffer=new Z(this),this.bindVertexArrayOES=new X(this),this.pixelStoreUnpack=new J(this),this.pixelStoreUnpackPremultiplyAlpha=new K(this),this.pixelStoreUnpackFlipY=new Q(this),this.options=i?{...i}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=e.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,r,n){return new e.I(this,i,r,n)}createVertexBuffer(e,i,r,n,a){return new b(this,e,i,r,n,a)}createRenderbuffer(e,i,r){let n=this.gl,a=n.createRenderbuffer();return this.bindRenderbuffer.set(a),n.renderbufferStorage(n.RENDERBUFFER,e,i,r),this.bindRenderbuffer.set(null),a}createFramebuffer(e,i,r,n){return new ea(this,e,i,r,n)}clear({color:e,depth:i,stencil:r,colorMask:n}){let a=this.gl,s=0;e&&(s|=a.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set(n||[!0,!0,!0,!0])),void 0!==i&&(s|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),void 0!==r&&(s|=a.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),a.clear(s)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(i){n(i.blendFunction,e.a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor),i.blendEquation?this.blendEquation.set(i.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(i.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}class eo{constructor(e=0,i=0,r=0,n=0){if(isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0||isNaN(n)||n<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=i,this.left=r,this.right=n}interpolate(i,r,n){return null!=r.top&&null!=i.top&&(this.top=e.n(i.top,r.top,n)),null!=r.bottom&&null!=i.bottom&&(this.bottom=e.n(i.bottom,r.bottom,n)),null!=r.left&&null!=i.left&&(this.left=e.n(i.left,r.left,n)),null!=r.right&&null!=i.right&&(this.right=e.n(i.right,r.right,n)),this}getCenter(i,r){let n=e.c((this.left+i-this.right)/2,0,i),a=e.c((this.top+r-this.bottom)/2,0,r);return new e.P(n,a)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new eo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function el(i,r){let n=e.g(i,3);e.m.fromQuat(i,r),e.s(i,3,n)}function eu(i,r){let n=e.q.identity([]);return e.q.rotateZ(n,n,-r),e.q.rotateX(n,n,-i),n}function eh(i,r){let n=[i[0],i[1],0],a=[r[0],r[1],0];if(e.v.length(n)>=1e-15){let i=e.v.normalize([],n);e.v.scale(a,i,e.v.dot(a,i)),r[0]=a[0],r[1]=a[1]}let s=e.v.cross([],r,i);if(1e-15>e.v.len(s))return null;let o=Math.atan2(-s[1],s[0]);return eu(Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2]),o)}class ec{constructor(e,i){this.position=e,this.orientation=i}get position(){return this._position}set position(i){if(i){let r=i instanceof e.M?i:new e.M(i[0],i[1],i[2]);this._renderWorldCopies&&(r.x=e.w(r.x,0,1)),this._position=r}else this._position=null}lookAtPoint(i,r){if(this.orientation=null,!this.position)return;let n=this.position,a=this._elevation?this._elevation.getAtPointOrZero(e.M.fromLngLat(i)):0,s=e.M.fromLngLat(i,a),o=[s.x-n.x,s.y-n.y,s.z-n.z];r||(r=[0,0,1]),r[2]=Math.abs(r[2]),this.orientation=eh(o,r)}setPitchBearing(i,r){this.orientation=eu(e.d(i),e.d(-r))}}class ed{constructor(i,r){this._transform=e.m.identity([]),this.orientation=r,this.position=i}get mercatorPosition(){let i=this.position;return new e.M(i[0],i[1],i[2])}get position(){let i=e.g(this._transform,3);return[i[0],i[1],i[2]]}set position(i){i&&e.s(this._transform,3,[i[0],i[1],i[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||e.q.identity([]),i&&el(this._transform,this._orientation)}getPitchBearing(){let e=this.forward(),i=this.right();return{bearing:Math.atan2(-i[1],i[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,i){this._orientation=eu(e,i),el(this._transform,this._orientation)}forward(){let i=e.g(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){let i=e.g(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){let i=e.g(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,r){let n=new Float64Array(16);return e.m.invert(n,this.getWorldToCamera(i,r)),n}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(i,r,n){let a=this.position;e.v.scale(a,a,-i);let s=new Float64Array(16);return e.m.fromScaling(s,[n,n,n]),e.m.translate(s,s,a),s[10]*=r,s}getWorldToCamera(i,r){let n=new Float64Array(16),a=new Float64Array(4),s=this.position;return e.q.conjugate(a,this._orientation),e.v.scale(s,s,-i),e.m.fromQuat(n,a),e.m.translate(n,n,s),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r,n}getCameraToClipPerspective(i,r,n,a){let s=new Float64Array(16);return e.m.perspective(s,i,r,n,a),s}getCameraToClipOrthographic(i,r,n,a,s,o){let l=new Float64Array(16);return e.m.ortho(l,i,r,n,a,s,o),l}getDistanceToElevation(i,r=!1){let n=0===i?0:e.b(i,r?e.l(this.position[1]):this.position[1]),a=this.forward();return(n-this.position[2])/a[2]}clone(){return new ed([...this.position],[...this.orientation])}}let ef={unknown:0,flipRequired:1,flipNotRequired:2},ep=Math.tan(85*Math.PI/180);function em(i,r,n,a,s,o,l){let u=e.m.create();if(n){if("globe"===o.name){let i=e.f(s,r);e.m.multiply(u,u,i)}else{let i=e.h.invert([],l);u[0]=i[0],u[1]=i[1],u[4]=i[2],u[5]=i[3],a||e.m.rotateZ(u,u,s.angle)}}else e.m.multiply(u,s.labelPlaneMatrix,i);return u}function e_(e,i,r,n,a,s,o){let l=em(e,i,r,n,a,s,o);return"globe"===s.name&&r||(l[2]=l[6]=l[10]=l[14]=0),l}function eg(i,r,n,a,s,o,l){if(n){if("globe"===o.name){let u=em(i,r,n,a,s,o,l);return e.m.invert(u,u),e.m.multiply(u,i,u),u}{let r=e.m.clone(i),n=e.m.identity([]);return n[0]=l[0],n[1]=l[1],n[4]=l[2],n[5]=l[3],e.m.multiply(r,r,n),a||e.m.rotateZ(r,r,-s.angle),r}}return s.glCoordMatrix}function ey(i,r,n,a){let s=[i,r,n,1];n?e.e.transformMat4(s,s,a):ek(s,s,a);let o=s[3];return s[0]/=o,s[1]/=o,s[2]/=o,s}function ev(e,i){return Math.min(.5+e/i*.5,1.5)}function ex(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_){let{lineStartIndex:g,glyphStartIndex:y,segment:v}=l,x=y+l.numGlyphs,b=g+l.lineLength,w=i.getoffsetX(y),M=i.getoffsetX(x-1),T=eL(e*w,r,n,a,s,o,v,g,b,u,h,c,d,f,!0,p,m,_);if(!T)return null;let L=eL(e*M,r,n,a,s,o,v,g,b,u,h,c,d,f,!0,p,m,_);return L?{first:T,last:L}:null}function eb(i,r,n,a){return i===e.W.horizontal&&Math.abs(a)>Math.abs(n)?{useVertical:!0}:i===e.W.vertical?a>0?{needsFlipping:!0}:null:r!==ef.unknown&&(0===n||Math.abs(a/n)>ep)?r===ef.flipRequired?{needsFlipping:!0}:null:n<0?{needsFlipping:!0}:null}function ew(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x){let b=r/24,w=i.lineOffsetX*b,M=i.lineOffsetY*b,{lineStartIndex:T,glyphStartIndex:L,numGlyphs:S,segment:k,writingMode:D,flipState:E}=i,A=T+i.lineLength,P=i=>{if(d){let[r,n,a]=i.up,s=c.length;e.u(d,s+0,r,n,a),e.u(d,s+1,r,n,a),e.u(d,s+2,r,n,a),e.u(d,s+3,r,n,a)}let[r,n,a]=i.point;e.k(c,r,n,a,i.angle)};if(S>1){let e=ex(b,u,w,M,n,f,p,i,h,o,m,g,!1,y,v,x);if(!e)return{notEnoughRoom:!0};if(a&&!n){let[r,n,a]=e.first.point,[s,o,u]=e.last.point;[r,n]=ey(r,n,a,l),[s,o]=ey(s,o,u,l);let h=eb(D,E,(s-r)*_,o-n);if(i.flipState=h&&h.needsFlipping?ef.flipRequired:ef.flipNotRequired,h)return h}P(e.first);for(let e=L+1;e<L+S-1;e++){let i=eL(b*u.getoffsetX(e),w,M,n,f,p,k,T,A,h,o,m,g,!1,!1,y,v,x);if(!i)return c.length-=4*(e-L),{notEnoughRoom:!0};P(i)}P(e.last)}else{if(a&&!n){let r=ey(p.x,p.y,0,s),n=T+k+1,a=new e.P(h.getx(n),h.gety(n)),o=ey(a.x,a.y,0,s),l=o[3]>0?o:eT(p,a,r,1,s,void 0,y,v.canonical),u=eb(D,E,(l[0]-r[0])*_,l[1]-r[1]);if(i.flipState=u&&u.needsFlipping?ef.flipRequired:ef.flipNotRequired,u)return u}let r=eL(b*u.getoffsetX(L),w,M,n,f,p,k,T,A,h,o,m,g,!1,!1,y,v,x);if(!r)return{notEnoughRoom:!0};P(r)}return{}}function eM(e,i,r,n,a){let{x:s,y:o,z:l}=n.projectTilePoint(e.x,e.y,i);if(!a)return ey(s,o,l,r);let[u,h,c]=a(e);return ey(s+u,o+h,l+c,r)}function eT(i,r,n,a,s,o,l,u){let h=eM(i.sub(r)._unit()._add(i),u,s,l,o);return e.v.sub(h,n,h),e.v.normalize(h,h),e.v.scaleAndAdd(h,n,h,a)}function eL(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v){let x=a?i-r:i+r,b=x>0?1:-1,w=0;a&&(b*=-1,w=Math.PI),b<0&&(w+=Math.PI);let M=u+l+(b>0?0:1)|0,T=s,L=s,S=0,k=0,D=Math.abs(x),E=[],A=[],P=o,C=P,I=()=>eT(C,P,L,D-S+1,d,p,g,y.canonical);for(;S+k<=D;){if((M+=b)<u||M>=h)return null;if(L=T,C=P,E.push(L),m&&A.push(C),P=new e.P(c.getx(M),c.gety(M)),!(T=f[M])){let e=eM(P,y.canonical,d,g,p);T=e[3]>0?f[M]=e:I()}S+=k,k=e.v.distance(L,T)}_&&p&&(f[M]&&(T=I(),k=e.v.distance(L,T)),f[M]=T);let O=(D-S)/k,z=P.sub(C)._mult(O)._add(C),R=e.v.sub([],T,L),Y=e.v.scaleAndAdd([],L,R,O),F=[0,0,1],j=R[0],B=R[1];if(v&&(0!==(F=g.upVector(y.canonical,z.x,z.y))[0]||0!==F[1]||1!==F[2])){let i=[F[2],0,-F[0]],r=e.v.cross([],F,i);e.v.normalize(i,i),e.v.normalize(r,r),j=e.v.dot(R,i),B=e.v.dot(R,r)}if(n){let i=e.v.cross([],F,R);e.v.normalize(i,i),e.v.scaleAndAdd(Y,Y,i,n*b)}let N=w+Math.atan2(B,j);return E.push(Y),m&&A.push(z),{point:Y,angle:N,path:E,tilePath:A,up:F}}function eS(e,i){let r=i.length,n=r+4*e;i.resize(n),i.float32.fill(-1/0,4*r,4*n)}function ek(e,i,r){let n=i[0],a=i[1];return e[0]=r[0]*n+r[4]*a+r[12],e[1]=r[1]*n+r[5]*a+r[13],e[3]=r[3]*n+r[7]*a+r[15],e}let eD=(e,i,r)=>(1-r)*e+r*i,eE=e=>e*e*e*e*e;class eA{constructor(i,r,n,a,s,o,l){this.tileSize=512,this._renderWorldCopies=void 0===s||s,this._minZoom=i||0,this._maxZoom=r||22,this._minPitch=null==n?0:n,this._maxPitch=null==a?60:a,this.setProjection(o),this.setMaxBounds(l),this.width=0,this.height=0,this._center=new e.L(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new eo,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new ed,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){let e=new eA(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get isOrthographic(){return"globe"!==this.projection.name&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return"globe"!==this.projection.name&&!this.isOrthographic}updateElevation(e,i=!1){let r=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||r)&&this._updateCameraOnTerrain(),(e||r)&&this._constrainCamera(i),this._calcMatrices()}getProjection(){return e.p(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};let r=this.projection?this.getProjection():void 0;this.projection=e.o(this.projectionOptions);let a=!n(r,this.getProjection());return a&&this._calcMatrices(),this.mercatorFromTransition=!1,a}setOrthographicProjectionAtLowPitch(e){return this._orthographicProjectionAtLowPitch!==e&&(this._orthographicProjectionAtLowPitch=e,this._calcMatrices(),!0)}setMercatorFromTransition(){let i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.o({name:"mercator"});let r=i!==this.projection.name;return r&&this._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){let e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){let e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.b(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.P(this.width,this.height)}get bearing(){return e.w(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(i){let r=-i*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=e.h.create(),e.h.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){let r=e.c(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){let e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=e.d(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){let i=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==i&&(this._unmodified=!1,this._setZoom(i),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){let e=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,i=this.elevation&&e===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||e===Number.NEGATIVE_INFINITY&&(!i||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);let r=this._elevation;i||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&r.exaggeration()&&this._centerAltitudeValidForExaggeration!==r.exaggeration()?this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*r.exaggeration():this._centerAltitude=e||0,this._centerAltitudeValidForExaggeration=r.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;let i=this._elevation,r=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop(),a=0,s=0;for(let o=0;o<r.length;o++){let l=new e.P(r[o][0]*this.width,n+r[o][1]*(this.height-n)),u=i.pointCoordinate(l);if(!u)continue;let h=1/Math.hypot(u[0]-this._camera.position[0],u[1]-this._camera.position[1]);a+=u[3]*h,s+=h}return 0===s?NaN:a/s}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;let e=this._seaLevelZoom,i=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=this.pixelsPerMeter/this.worldSize*i,n=this._mercatorZfromZoom(e),a=this._mercatorZfromZoom(this._maxZoom);this._setZoom(this._zoomFromMercatorZ(Math.max(n-r,a)))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(i){let r;let n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));r=i.z<this._camera.position[2]?[n.x,n.y,n.z]:[i.x,i.y,i.z];let a=e.v.length(e.v.sub([],this._camera.position,r));return e.c(this._zoomFromMercatorZ(a),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let r=!1;if(i.orientation&&!e.q.exactEquals(i.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(i.orientation)),i.position){let n=[i.position.x,i.position.y,i.position.z];e.v.exactEquals(n,this._camera.position)||(this._setCameraPosition(n),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();let i=this._camera.position,r=new ec;return r.position=new e.M(i[0],i[1],i[2]),r.orientation=this._camera.orientation,r._elevation=this.elevation,r._renderWorldCopies=this.renderWorldCopies,r}_setCameraOrientation(i){if(!e.q.length(i))return!1;e.q.normalize(i,i);let r=e.v.transformQuat([],[0,0,-1],i),n=e.v.transformQuat([],[0,-1,0],i);if(n[2]<0)return!1;let a=eh(r,n);return!!a&&(this._camera.orientation=a,!0)}_setCameraPosition(i){let r=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,a=this.cameraToCenterDistance;i[2]=e.c(i[2],a/n,a/r),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,i,r){this._unmodified=!1,this._edgeInsets.interpolate(e,i,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){return Math.max(0,(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize)))}getVisibleUnwrappedCoordinates(i){let r=[new e.U(0,i)];if(this.renderWorldCopies){let n=this.pointCoordinate(new e.P(0,0)),a=this.pointCoordinate(new e.P(this.width,0)),s=this.pointCoordinate(new e.P(this.width,this.height)),o=this.pointCoordinate(new e.P(0,this.height)),l=Math.floor(Math.min(n.x,a.x,s.x,o.x)),u=Math.floor(Math.max(n.x,a.x,s.x,o.x));for(let n=l-1;n<=u+1;n++)0!==n&&r.push(new e.U(n,i))}return r}isLODDisabled(e){return(!e||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(i,r,n){let a=[];if(0===r[0]&&0===r[1])return a;for(let n of i){let i=n.canonical,s=n.overscaledZ,o=n.wrap,l=1<<i.z,u=i.x+1<l,h=i.x>0,c=i.y+1<l,d=i.y>0,f=n.wrap-(h?0:1),p=n.wrap+(u?0:1),m=h?i.x-1:l-1,_=u?i.x+1:0;r[0]<0?(a.push(new e.O(s,p,i.z,_,i.y)),r[1]<0&&c&&(a.push(new e.O(s,o,i.z,i.x,i.y+1)),a.push(new e.O(s,p,i.z,_,i.y+1))),r[1]>0&&d&&(a.push(new e.O(s,o,i.z,i.x,i.y-1)),a.push(new e.O(s,p,i.z,_,i.y-1)))):r[0]>0?(a.push(new e.O(s,f,i.z,m,i.y)),r[1]<0&&c&&(a.push(new e.O(s,o,i.z,i.x,i.y+1)),a.push(new e.O(s,f,i.z,m,i.y+1))),r[1]>0&&d&&(a.push(new e.O(s,o,i.z,i.x,i.y-1)),a.push(new e.O(s,f,i.z,m,i.y-1)))):r[1]<0&&c?a.push(new e.O(s,o,i.z,i.x,i.y+1)):d&&a.push(new e.O(s,o,i.z,i.x,i.y-1))}if(a.length>1){a.sort((e,i)=>e.overscaledZ-i.overscaledZ||e.wrap-i.wrap||e.canonical.z-i.canonical.z||e.canonical.x-i.canonical.x||e.canonical.y-i.canonical.y);let e=0,i=0;for(;i<a.length;)a[i].equals(a[e])?++i:a[++e]=a[i++];a.length=e+1}let s=[];for(let e of a)a.some(i=>e.isChildOf(i))||s.push(e);return s.filter(e=>!i.some(i=>!!(e.overscaledZ<n&&i.isChildOf(e))||e.equals(i)||e.isChildOf(i)))}coveringTiles(i){let r,n=this.coveringZoomLevel(i),a=n,s=this.elevation&&this.elevation.exaggeration(),o=s&&!i.isTerrainDEM,l="mercator"===this.projection.name;if(void 0!==i.minzoom&&n<i.minzoom)return[];void 0!==i.maxzoom&&n>i.maxzoom&&(n=i.maxzoom);let u=this.locationCoordinate(this.center),h=this.center.lat,c=1<<n,d=[c*u.x,c*u.y,0],f="globe"===this.projection.name,p=!f,m=e.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,p),_=f?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),g=c*e.b(1,this.center.lat),y=this._camera.position[2]/e.b(1,this.center.lat),v=[c*_.x,c*_.y,y*(p?1:g)],x=f||s,b=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),w=this.isLODDisabled(!0)?n:0;if(this._elevation&&i.isTerrainDEM)r=1e4*this._elevation.exaggeration();else if(this._elevation){let e=this._elevation.getMinMaxForVisibleTiles();r=e?e.max:this._centerAltitude}else r=this._centerAltitude;let M=i.isTerrainDEM?-r:this._elevation?this._elevation.getMinElevationBelowMSL():0,T=this.projection.isReprojectedInTileSpace?e.r(this):1,L=i=>{let r=1/4e4,n=new e.M(i.x+r,i.y,i.z),a=new e.M(i.x,i.y+r,i.z),s=i.toLngLat(),o=n.toLngLat(),l=a.toLngLat(),u=this.locationCoordinate(s),h=this.locationCoordinate(o),c=this.locationCoordinate(l);return Math.sqrt(Math.hypot(h.x-u.x,h.y-u.y)*Math.hypot(c.x-u.x,c.y-u.y))*T/r},S=i=>{let n=r;return{aabb:e.y(this,c,0,0,0,i,M,n,this.projection),zoom:0,x:0,y:0,minZ:M,maxZ:n,wrap:i,fullyVisible:!1}},k=[],D=[],E=n,A=i.reparseOverscaled?a:n,P=e=>e*e,C=P((y-this._centerAltitude)*g),I=e=>{if(!this._elevation||!e.tileID||!l)return;let i=this._elevation.getMinMaxForTile(e.tileID),r=e.aabb;i?(r.min[2]=i.min,r.max[2]=i.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=O(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=this._centerAltitude))},O=i=>{if(i.zoom<w)return!0;if(i.zoom===E)return!1;if(null!=i.shouldSplit)return i.shouldSplit;let r=i.aabb.distanceX(v),n=i.aabb.distanceY(v),s=C,l=1;if(f){s=P(i.aabb.distanceZ(v));let r=Math.pow(2,i.zoom),n=Math.min(Math.max(h,e.l((i.y+1)/r)),e.l(i.y/r)),a=e.a0(n)/e.a0(h);if(l=n===h?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,a/this._mercatorScaleRatio),this.zoom<=e.Z&&i.zoom===E-1&&a>=.9)return!0}else if(o&&(s=P(i.aabb.distanceZ(v)*g)),this.projection.isReprojectedInTileSpace&&a<=5){let r=Math.pow(2,i.zoom),n=L(new e.M((i.x+.5)/r,(i.y+.5)/r));l=n>.85?1:n}let u=r*r+n*n+s,c=P((1<<E-i.zoom)*b*l*((e,i)=>{if(i*P(.707)<e)return 1;let r=Math.sqrt(i/e);return r/(1.4144271570014144+(Math.pow(1.1,r-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(s,C),u));return u<c};if(this.renderWorldCopies)for(let e=1;e<=3;e++)k.push(S(-e)),k.push(S(e));for(k.push(S(0));k.length>0;){let r=k.pop(),a=r.x,s=r.y,u=r.fullyVisible,h=()=>"globe"===this.projection.name&&(0===r.y||r.y===(1<<r.zoom)-1);if(!u){let i=x?r.aabb.intersects(m):r.aabb.intersectsFlat(m);if(0===i&&h()){let n=new e.t(r.zoom,a,s);i=e.x(this,c,n,!0).intersects(m)}if(0===i)continue;u=2===i}if(r.zoom!==E&&O(r))for(let i=0;i<4;i++){let n=(a<<1)+i%2,h=(s<<1)+(i>>1),d={aabb:l?r.aabb.quadrant(i):e.y(this,c,r.zoom+1,n,h,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:h,wrap:r.wrap,fullyVisible:u,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};o&&!f&&(d.tileID=new e.O(r.zoom+1===E?A:r.zoom+1,r.wrap,r.zoom+1,n,h),I(d)),k.push(d)}else{let o=r.zoom===E?A:r.zoom;if(i.minzoom&&i.minzoom>o)continue;if(!u){let i=x?r.aabb.intersectsPrecise(m):r.aabb.intersectsPreciseFlat(m);if(0===i&&h()){let n=new e.t(r.zoom,a,s);i=e.x(this,c,n,!0).intersectsPrecise(m)}if(0===i)continue}let l=d[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),f=d[1]-.5-s,p=r.tileID?r.tileID:new e.O(o,r.wrap,r.zoom,a,s);D.push({tileID:p,distanceSq:l*l+f*f})}}if(this.fogCullDistSq){let n=this.fogCullDistSq,a=this.horizonLineFromTop();D=D.filter(s=>{let o=[0,0,0,1],l=[e.J,e.J,0,1],u=this.calculateFogTileMatrix(s.tileID.toUnwrapped());e.e.transformMat4(o,o,u),e.e.transformMat4(l,l,u);let h=e.e.min([],o,l),c=e.e.max([],o,l),d=e.z(h,c);if(0===d)return!0;let f=!1,p=this._elevation;if(p&&d>n&&0!==a){let n;let o=this.calculateProjMatrix(s.tileID.toUnwrapped());i.isTerrainDEM||(n=p.getMinMaxForTile(s.tileID)),n||(n={min:M,max:r});let l=e._(this.rotation),u=[l[0]*e.J,l[1]*e.J,n.max];e.v.transformMat4(u,u,o),f=(1-u[1])*this.height*.5<a}return d<n||f})}return D.sort((e,i)=>e.distanceSq-i.distanceSq).map(e=>e.tileID)}resize(e,i){this.width=e,this.height=i,this.pixelsToGLUnits=[2/e,-2/i],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(i){let r=e.c(i.lat,-e.A,e.A),n=this.projection.project(i.lng,r);return new e.P(n.x*this.worldSize,n.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.b(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,r){let n,a;let s=this.centerPoint;if("globe"===this.projection.name){let e=this.worldSize;n=(r.x-s.x)/e,a=(r.y-s.y)/e}else{let e=this.pointCoordinate(r),i=this.pointCoordinate(s);n=e.x-i.x,a=e.y-i.y}let o=this.locationCoordinate(i);this.setLocation(new e.M(o.x-n,o.y-a))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(i,r){let n=r?e.b(r,i.lat):void 0,a=this.projection.project(i.lng,i.lat);return new e.M(a.x,a.y,n)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(i,r){let n=null!=r?r:this._centerAltitude,a=[i.x,i.y,0,1],s=[i.x,i.y,1,1];e.e.transformMat4(a,a,this.pixelMatrixInverse),e.e.transformMat4(s,s,this.pixelMatrixInverse);let o=s[3];e.e.scale(a,a,1/a[3]),e.e.scale(s,s,1/o);let l=a[2],u=s[2];return{p0:a,p1:s,t:l===u?0:(n-l)/(u-l)}}screenPointToMercatorRay(i){let r=[i.x,i.y,0,1],n=[i.x,i.y,1,1];return e.e.transformMat4(r,r,this.pixelMatrixInverse),e.e.transformMat4(n,n,this.pixelMatrixInverse),e.e.scale(r,r,1/r[3]),e.e.scale(n,n,1/n[3]),r[2]=e.b(r[2],this._center.lat)*this.worldSize,n[2]=e.b(n[2],this._center.lat)*this.worldSize,e.e.scale(r,r,1/this.worldSize),e.e.scale(n,n,1/this.worldSize),new e.R([r[0],r[1],r[2]],e.v.normalize([],e.v.sub([],n,r)))}rayIntersectionCoordinate(i){let{p0:r,p1:n,t:a}=i,s=e.b(r[2],this._center.lat),o=e.b(n[2],this._center.lat);return new e.M(e.n(r[0],n[0],a)/this.worldSize,e.n(r[1],n[1],a)/this.worldSize,e.n(s,o,a))}pointCoordinate(e,i=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,i)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let r=this.projection.pointCoordinate3D(this,i.x,i.y);if(r)return new e.M(r[0],r[1],r[2]);let n=0,a=this.horizonLineFromTop();if(i.y>a)return this.pointCoordinate(i);let s=.02*a,o=i.clone();for(let i=0;i<10&&a-n>s;i++){o.y=e.n(n,a,.66);let i=this.projection.pointCoordinate3D(this,o.x,o.y);i?(a=o.y,r=i):n=o.y}return r?new e.M(r[0],r[1],r[2]):this.pointCoordinate(i)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=e.G)return!this.isPointAboveHorizon(i);let r=this.pointCoordinate(i);return r.y>=0&&r.y<=1}_coordinatePoint(i,r){let n=r&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,a=[i.x*this.worldSize,i.y*this.worldSize,n+i.toAltitude(),1];return e.e.transformMat4(a,a,this.pixelMatrix),a[3]>0?new e.P(a[0]/a[3],a[1]/a[3]):new e.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){let{top:i,left:r}=this._edgeInsets,n=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=this.pointLocation3D(new e.P(r,i)),o=this.pointLocation3D(new e.P(a,i)),l=this.pointLocation3D(new e.P(a,n)),u=this.pointLocation3D(new e.P(r,n)),h=Math.min(s.lng,o.lng,l.lng,u.lng),c=Math.max(s.lng,o.lng,l.lng,u.lng),d=Math.min(s.lat,o.lat,l.lat,u.lat),f=Math.max(s.lat,o.lat,l.lat,u.lat),p=Math.pow(2,-this.zoom)/16*270,m="globe"===this.projection.name?1:4,_=(i,r,n,a,s)=>{let o=(i+n)/2,l=(r+a)/2,u=new e.P(o,l),{lng:g,lat:y}=this.pointLocation3D(u),v=Math.max(0,h-g,d-y,g-c,y-f);h=Math.min(h,g),c=Math.max(c,g),d=Math.min(d,y),f=Math.max(f,y),(s<m||v>p)&&(_(i,r,o,l,s+1),_(o,l,n,a,s+1))};if(_(r,i,a,i,1),_(a,i,a,n,1),_(a,n,r,n,1),_(r,n,r,i,1),"globe"===this.projection.name){let[i,r]=e.B(this);i?(f=90,c=180,h=-180):r&&(d=-90,c=180,h=-180)}return new e.D(new e.L(h,d),new e.L(c,f))}_getBoundsRectangular(i,r){var n,a,s,o;let{top:l,left:u}=this._edgeInsets,h=this.height-this._edgeInsets.bottom,c=this.width-this._edgeInsets.right,d=new e.P(u,l),f=new e.P(c,l),p=new e.P(c,h),m=new e.P(u,h),_=this.pointCoordinate(d,i),g=this.pointCoordinate(f,i),y=this.pointCoordinate(p,r),v=this.pointCoordinate(m,r);return _.y>1&&g.y>=0?_=new e.M((1-v.y)/(((n=_).y-v.y)/(n.x-v.x))+v.x,1):_.y<0&&g.y<=1&&(_=new e.M(-v.y/(((a=_).y-v.y)/(a.x-v.x))+v.x,0)),g.y>1&&_.y>=0?g=new e.M((1-y.y)/(((s=g).y-y.y)/(s.x-y.x))+y.x,1):g.y<0&&_.y<=1&&(g=new e.M(-y.y/(((o=g).y-y.y)/(o.x-y.x))+y.x,0)),(new e.D).extend(this.coordinateLocation(_)).extend(this.coordinateLocation(g)).extend(this.coordinateLocation(v)).extend(this.coordinateLocation(y))}_getBoundsRectangularTerrain(){let e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);let i=e.visibleDemTiles.reduce((e,i)=>{if(i.dem){let r=i.dem.tree;e.min=Math.min(e.min,r.minimums[0]),e.max=Math.max(e.max,r.maximums[0])}return e},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(i.min*e.exaggeration(),i.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){let i=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,r=this.height/2-i*(1-this._horizonShift);return e?Math.max(0,r):r}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-e.A,this.maxLat=e.A,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.E(this.minLng)*this.tileSize,this.worldMaxX=e.E(this.maxLng)*this.tileSize,this.worldMinY=e.H(this.maxLat)*this.tileSize,this.worldMaxY=e.H(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,i){return this.projection.createTileMatrix(this,i,e)}calculateDistanceTileData(i){let r=i.key,n=this._distanceTileDataCache;if(n[r])return n[r];let a=i.canonical,s=1/this.height,o=this.cameraWorldSize,l=o/this.zoomScale(a.z),u=(a.x+Math.pow(2,a.z)*i.wrap)*l,h=a.y*l,c=this.point;c.x*=o/this.worldSize,c.y*=o/this.worldSize;let d=this.angle,f=Math.sin(-d),p=-Math.cos(-d);return n[r]={bearing:[f,p],center:[(c.x-u)*s,(c.y-h)*s],scale:l/e.J*s},n[r]}calculateFogTileMatrix(i){let r=i.key,n=this._fogTileMatrixCache;if(n[r])return n[r];let a=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return e.m.multiply(a,this.worldToFogMatrix,a),n[r]=new Float32Array(a),n[r]}calculateProjMatrix(i,r=!1,n=!1){let a,s;let o=i.key;if((a=n?this._expandedProjMatrixCache:r?this._alignedProjMatrixCache:this._projMatrixCache)[o])return a[o];let l=this.calculatePosMatrix(i,this.worldSize);return s=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.expandedFarZProjMatrix:r?this.alignedProjMatrix:this.projMatrix,e.m.multiply(l,s,l),a[o]=new Float32Array(l),a[o]}calculatePixelsToTileUnitsMatrix(i){let r=i.tileID.key,n=this._pixelsToTileUnitsCache;if(n[r])return n[r];let a=e.K(i,this);return n[r]=a,n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){let i=1/this.worldSize,r=e.m.fromScaling([],[i,i,i]);return e.m.multiply(r,r,this.globeMatrix),r}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;let i=this._elevation;this._updateCameraState();let r=e.b(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),a=this._camera.forward(),s=e.b(1,this._center.lat);n[2]/=s,a[2]/=s,e.v.normalize(a,a);let o=i.raycast(n,a,i.exaggeration());if(o){let i=e.v.scaleAndAdd([],n,a,o),r=new e.M(i[0],i[1],e.b(i[2],e.l(i[1]))),l=(r.z+e.v.length([r.x-n[0],r.y-n[1],r.z-n[2]*s]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(l),this._centerAltitude=r.toAltitude(),this._center=this.coordinateLocation(r),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;let r=this._elevation,n=e.b(1,this._center.lat)*this.worldSize,a=this._computeCameraPosition(n),s=r.getAtPointOrZero(new e.M(...a)),o=this.pixelsPerMeter/this.worldSize*s,l=this._minimumHeightOverTerrain(),u=a[2]-o;if(u<=l){if(u<0||i){let i=this.locationCoordinate(this._center,this._centerAltitude),r=[a[0],a[1],i.z-a[2]],n=e.v.length(r);r[2]-=(l-u)/this._pixelsPerMercatorPixel;let s=e.v.length(r);if(0===s)return;e.v.scale(r,r,n/s*this._pixelsPerMercatorPixel),this._camera.position=[a[0],a[1],i.z*this._pixelsPerMercatorPixel-r[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){let r=this.center;return r.lat=e.c(r.lat,this.minLat,this.maxLat),!this.maxBounds&&(this.renderWorldCopies||i)||(r.lng=e.c(r.lng,this.minLng,this.maxLng)),this.center=r,void(this._constraining=!1)}let r=this._unmodified,{x:n,y:a}=this.point,s=0,o=n,l=a,u=this.width/2,h=this.height/2,c=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(a-h<c&&(l=c+h),a+h>d&&(l=d-h),d-c<this.height&&(s=Math.max(s,this.height/(d-c)),l=(d+c)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){let e=this.worldMinX*this.scale,i=this.worldMaxX*this.scale,r=this.worldSize/2-(e+i)/2;(o=(n+r+this.worldSize)%this.worldSize-r)-u<e&&(o=e+u),o+u>i&&(o=i-u),i-e<this.width&&(s=Math.max(s,this.width/(i-e)),o=(i+e)/2)}o===n&&l===a||(this.center=this.unproject(new e.P(o,l))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){let i;if(!this.height)return;let r=this.centerOffset,n="globe"===this.projection.name,a=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.b(1,this.center.lat)/e.b(1,e.$));let s=e.N(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,s),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;let o="meters"===this.projection.zAxisUnit?a:1,l=this._camera.getWorldToCamera(this.worldSize,o),u=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(u[8]=-(2*r.x)/this.width,u[9]=2*r.y/this.height,this.isOrthographic){let e=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),n=e*this.aspect,a=-n,s=-e;n-=r.x,a-=r.x,e+=r.y,s+=r.y,((e,i,r,n)=>{for(let a=0;a<16;a++)e[a]=eD(i[a],r[a],n)})(i=this._camera.getCameraToClipOrthographic(a,n,s,e,this._nearZ,this._farZ),i,u,eE(this.pitch>=15?1:this.pitch/15))}else i=u;let h=e.m.mul([],u,l),c=e.m.mul([],i,l);if(this.projection.isReprojectedInTileSpace){let i=this.locationCoordinate(this.center),r=e.m.identity([]);e.m.translate(r,r,[i.x*this.worldSize,i.y*this.worldSize,0]),e.m.multiply(r,r,e.Q(this)),e.m.translate(r,r,[-i.x*this.worldSize,-i.y*this.worldSize,0]),e.m.multiply(c,c,r),e.m.multiply(h,h,r),this.inverseAdjustmentMatrix=e.S(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=e.m.scale([],c,[this.worldSize,this.worldSize,this.worldSize/o,1]),this.projMatrix=c,this.invProjMatrix=e.m.invert(new Float64Array(16),this.projMatrix),n){let i=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);i[8]=-(2*r.x)/this.width,i[9]=2*r.y/this.height,this.expandedFarZProjMatrix=e.m.mul([],i,l)}else this.expandedFarZProjMatrix=this.projMatrix;let d=e.m.invert([],i);this.frustumCorners=e.T.fromInvProjectionMatrix(d,this.horizonLineFromTop(),this.height),this.cameraFrustum=e.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!n);let f=new Float32Array(16);e.m.identity(f),e.m.scale(f,f,[1,-1,1]),e.m.rotateX(f,f,this._pitch),e.m.rotateZ(f,f,this.angle);let p=e.m.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=e.m.clone(p);let m=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;p[8]=-(2*r.x)/this.width,p[9]=2*(r.y+m)/this.height,this.skyboxMatrix=e.m.multiply(f,p,f);let _=this.point,g=_.x,y=_.y,v=this.width%2/2,x=this.height%2/2,b=Math.cos(this.angle),w=Math.sin(this.angle),M=g-Math.round(g)+b*v+w*x,T=y-Math.round(y)+b*x+w*v,L=new Float64Array(c);if(e.m.translate(L,L,[M>.5?M-1:M,T>.5?T-1:T,0]),this.alignedProjMatrix=L,c=e.m.create(),e.m.scale(c,c,[this.width/2,-this.height/2,1]),e.m.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=e.m.create(),e.m.scale(c,c,[1,-1,1]),e.m.translate(c,c,[-1,-1,0]),e.m.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=e.m.multiply(new Float64Array(16),this.labelPlaneMatrix,h),this._calcFogMatrices(),this._distanceTileDataCache={},!(c=e.m.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");if(this.pixelMatrixInverse=c,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.V(this);let i=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.v.transformMat4(i,i,l),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=c;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};let i=this.cameraWorldSizeForFog,r=this.cameraPixelsPerMeter,n=this._camera.position,a=1/this.height/this._pixelsPerMercatorPixel,s=[i,i,r];e.v.scale(s,s,a),e.v.scale(n,n,-1),e.v.multiply(n,n,s);let o=e.m.create();e.m.translate(o,o,n),e.m.scale(o,o,s),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,r,a)}_computeCameraPosition(e){let i=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,r=this._camera.forward(),n=this.point,a=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*i-e/this.worldSize*this._centerAltitude;return[n.x/this.worldSize-r[0]*a,n.y/this.worldSize-r[1]*a,e/this.worldSize*this._centerAltitude-r[2]*a]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){let r=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=this._camera.position[2],a=i[2],s=1;this.projection.wrap&&(this.center=this.center.wrap()),a>0&&(s=Math.min((r-n)/a,1)),this._camera.position=e.v.scaleAndAdd([],this._camera.position,i,s),this._updateStateFromCamera()}_updateStateFromCamera(){let i=this._camera.position,r=this._camera.forward(),{pitch:n,bearing:a}=this._camera.getPitchBearing(),s=e.b(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.d(this._maxPitch)),l=Math.max((i[2]-s)/Math.cos(n),o),u=this._zoomFromMercatorZ(l);e.v.scaleAndAdd(i,i,r,l),this._pitch=e.c(n,e.d(this.minPitch),e.d(this.maxPitch)),this.angle=e.w(a,-Math.PI,Math.PI),this._setZoom(e.c(u,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.M(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){let e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(i){let r=0,n=e.G,a=0,s=1/0;for(;n-r>1e-6&&n>r;){let e=r+.5*(n-r),o=this.tileSize*Math.pow(2,e),l=this.getCameraToCenterDistance(this.projection,e,o),u=this.scaleZoom(l/(i*this.tileSize)),h=Math.abs(e-u);h<s&&(s=h,a=e),e<u?r=e:n=e}return a}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.X("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,r){let n=Math.min(i.x,r.x),a=Math.max(i.x,r.x),s=Math.min(i.y,r.y),o=Math.max(i.y,r.y);if(s<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;let l=[new e.P(n,s),new e.P(a,o),new e.P(n,o),new e.P(a,s)],u=this.renderWorldCopies?-3:0,h=this.renderWorldCopies?4:1;for(let e of l){let i=this.pointRayIntersection(e);if(i.t<0)return!0;let r=this.rayIntersectionCoordinate(i);if(r.x<u||r.y<0||r.x>h||r.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.Y(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.P(0,0),new e.P(this.width,this.height))}zoomDeltaToMovement(i,r){let n=e.v.length(e.v.sub([],this._camera.position,i)),a=this._zoomFromMercatorZ(n)+r;return n-this._mercatorZfromZoom(a)}getCameraPoint(){if("globe"===this.projection.name){let i=function([i,r,n],a){let s=[i,r,n,1];e.e.transformMat4(s,s,a);let o=s[3]=Math.max(s[3],1e-6);return s[0]/=o,s[1]/=o,s[2]/=o,s}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.P(i[0],i[1])}{let i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.P(0,i))}}getCameraToCenterDistance(i,r=this.zoom,n=this.worldSize){let a=e.N(i,r,this.width,this.height,1024),s=i.pixelSpaceConversion(this.center.lat,n,a),o=.5/Math.tan(.5*this._fov)*this.height*s;return this.isOrthographic&&(o=eD(1,o,eE(this.pitch>=15?1:this.pitch/15))),o}getWorldToCameraMatrix(){let i=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.m.multiply(i,i,this.globeMatrix),i}getFrustum(i){return e.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,"meters"===this.projection.zAxisUnit)}}class eP extends e.a6{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(i){this.images[i]={},this.loaded[i]=!1,this.updatedImages[i]={},this.patterns[i]={},this.callbackDispatchedThisFrame[i]={},this.atlasImage[i]=new e.a5({width:1,height:1})}isLoaded(){for(let e in this.loaded)if(!this.loaded[e])return!1;return!0}setLoaded(e,i){if(this.loaded[i]!==e&&(this.loaded[i]=e,e)){for(let{ids:e,callback:r}of this.requestors)this._notify(e,i,r);this.requestors=[]}}hasImage(e,i){return!!this.getImage(e,i)}getImage(e,i){return this.images[i][e]}addImage(e,i,r){this._validate(e,r)&&(this.images[i][e]=r)}_validate(i,r){let n=!0;return this._validateStretch(r.stretchX,r.data&&r.data.width)||(this.fire(new e.a7(Error(`Image "${i}" has invalid "stretchX" value`))),n=!1),this._validateStretch(r.stretchY,r.data&&r.data.height)||(this.fire(new e.a7(Error(`Image "${i}" has invalid "stretchY" value`))),n=!1),this._validateContent(r.content,r)||(this.fire(new e.a7(Error(`Image "${i}" has invalid "content" value`))),n=!1),n}_validateStretch(e,i){if(!e)return!0;let r=0;for(let n of e){if(n[0]<r||n[1]<n[0]||i<n[1])return!1;r=n[1]}return!0}_validateContent(e,i){return!(e&&(4!==e.length||e[0]<0||i.data.width<e[0]||e[1]<0||i.data.height<e[1]||e[2]<0||i.data.width<e[2]||e[3]<0||i.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,i,r){r.version=this.images[i][e].version+1,this.images[i][e]=r,this.updatedImages[i][e]=!0}removeImage(e,i){let r=this.images[i][e];delete this.images[i][e],delete this.patterns[i][e],r.userImage&&r.userImage.onRemove&&r.userImage.onRemove()}listImages(e){return Object.keys(this.images[e])}getImages(e,i,r){let n=!0,a=!!this.loaded[i];if(!a)for(let r of e)this.images[i][r]||(n=!1);a||n?this._notify(e,i,r):this.requestors.push({ids:e,scope:i,callback:r})}getUpdatedImages(e){return this.updatedImages[e]}_notify(i,r,n){let a={};for(let n of i){this.images[r][n]||this.fire(new e.a8("styleimagemissing",{id:n}));let i=this.images[r][n];i?a[n]={data:i.data.clone(),pixelRatio:i.pixelRatio,sdf:i.sdf,version:i.version,stretchX:i.stretchX,stretchY:i.stretchY,content:i.content,hasRenderCallback:!!(i.userImage&&i.userImage.render)}:e.X(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,a)}getPixelSize(e){let{width:i,height:r}=this.atlasImage[e];return{width:i,height:r}}getPattern(i,r){let n=this.patterns[r][i],a=this.getImage(i,r);if(!a)return null;if(n&&n.position.version===a.version)return n.position;if(n)n.position.version=a.version;else{let n={w:a.data.width+2,h:a.data.height+2,x:0,y:0},s=new e.ab(n,a);this.patterns[r][i]={bin:n,position:s}}return this._updatePatternAtlas(r),this.patterns[r][i].position}bind(i,r){let n=i.gl,a=this.atlasTexture[r];a?this.dirty&&(a.update(this.atlasImage[r]),this.dirty=!1):(a=new e.a9(i,this.atlasImage[r],n.RGBA),this.atlasTexture[r]=a),a.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(i){let r=[];for(let e in this.patterns[i])r.push(this.patterns[i][e].bin);let{w:n,h:a}=e.aa(r),s=this.atlasImage[i];for(let r in s.resize({width:n||1,height:a||1}),this.patterns[i]){let{bin:n}=this.patterns[i][r],a=n.x+1,o=n.y+1,l=this.images[i][r].data,u=l.width,h=l.height;e.a5.copy(l,s,{x:0,y:0},{x:a,y:o},{width:u,height:h}),e.a5.copy(l,s,{x:0,y:h-1},{x:a,y:o-1},{width:u,height:1}),e.a5.copy(l,s,{x:0,y:0},{x:a,y:o+h},{width:u,height:1}),e.a5.copy(l,s,{x:u-1,y:0},{x:a-1,y:o},{width:1,height:h}),e.a5.copy(l,s,{x:0,y:0},{x:a+u,y:o},{width:1,height:h})}this.dirty=!0}beginFrame(){for(let e in this.images)this.callbackDispatchedThisFrame[e]={}}dispatchRenderCallbacks(e,i){for(let r of e){if(this.callbackDispatchedThisFrame[i][r])continue;this.callbackDispatchedThisFrame[i][r]=!0;let e=this.images[i][r];(function(e){let{userImage:i}=e;return!!(i&&i.render&&i.render())&&(e.data.replace(new Uint8Array(i.data.buffer)),!0)})(e)&&this.updateImage(r,i,e)}}}let eC=new e.ac({anchor:new e.ad(e.ae.light.anchor),position:new e.af(e.ae.light.position),color:new e.ad(e.ae.light.color),intensity:new e.ad(e.ae.light.intensity)});class eI extends e.a6{constructor(i,r="flat"){super(),this._transitionable=new e.ag(eC),this.setLight(i,r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,r,n={}){this._validate(e.ah,i,n)||(this._transitionable.setTransitionOrValue(i),this.id=r)}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(i,r,n){return(!n||!1!==n.validate)&&e.ai(this,i.call(e.aj,e.ak({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.ae})))}}let eO=new e.ac({source:new e.ad(e.ae.terrain.source),exaggeration:new e.ad(e.ae.terrain.exaggeration)}),ez=class extends e.a6{constructor(i,r,n,a){super(),this.scope=n,this._transitionable=new e.ag(eO,n,a),this._transitionable.setTransitionOrValue(i,a),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=r}get(){return this._transitionable.serialize()}set(e,i){this._transitionable.setTransitionOrValue(e,i)}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}getExaggeration(i){return this._transitioning.possiblyEvaluate(new e.al(i)).get("exaggeration")}isZoomDependent(){let i=this._transitionable._values.exaggeration;return null!=i&&null!=i.value&&null!=i.value.expression&&i.value.expression instanceof e.am}};function eR(i,r,n,a){let s=e.an(45,65,n),[o,l]=eY(i,a),u=1-Math.min(1,Math.exp(-((r-o)/(l-o)*6)));return u*=u*u,(u=Math.min(1,1.00747*u))*s*i.alpha}function eY(e,i){let r=.5/Math.tan(.5*i);return[e.range[0]+r,e.range[1]+r]}function eF(i,r,n,a,s){let o=e.v.transformMat4([],[r,n,a],s.mercatorFogMatrix);return eR(i,e.v.length(o),s.pitch,s._fov)}function ej(i,r,n,a,s,o,l){let u=Number.MAX_VALUE,h=-Number.MAX_VALUE;for(let i of[[n,a,0],[s,a,0],[s,o,0],[n,o,0]]){let n=e.v.transformMat4([],i,r),a=e.v.length(n);u=Math.min(u,a),h=Math.max(h,a)}return[eR(i,u,l.pitch,l._fov),eR(i,h,l.pitch,l._fov)]}let eB=new e.ac({range:new e.ad(e.ae.fog.range),color:new e.ad(e.ae.fog.color),"high-color":new e.ad(e.ae.fog["high-color"]),"space-color":new e.ad(e.ae.fog["space-color"]),"horizon-blend":new e.ad(e.ae.fog["horizon-blend"]),"star-intensity":new e.ad(e.ae.fog["star-intensity"]),"vertical-range":new e.ad(e.ae.fog["vertical-range"])});class eN extends e.a6{constructor(i,r){super(),this._transitionable=new e.ag(eB),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=r}get state(){let i=this._transform,r="globe"===i.projection.name,n=e.ao(i.zoom),a=this.properties.get("range");return{range:r?[e.n(.5,a[0],n),e.n(3,a[1],n)]:a,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,r={}){if(this._validate(e.ap,i,r))return;let n=e.ak({},i);for(let i of Object.keys(e.ae.fog))void 0===n[i]&&(n[i]=e.ae.fog[i].default);this._transitionable.setTransitionOrValue(n)}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;let r=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.an(45,65,i))*r.a}getOpacityAtLatLng(i,r){return this._transform.projection.supportsFog?function(i,r,n){let a=e.M.fromLngLat(r),s=n.elevation?n.elevation.getAtPointOrZero(a):0;return eF(i,a.x,a.y,s,n)}(this.state,i,r):0}getOpacityForTile(i){if(!this._transform.projection.supportsFog)return[1,1];let r=this._transform.calculateFogTileMatrix(i.toUnwrapped());return ej(this.state,r,0,0,e.J,e.J,this._transform)}getOpacityForBounds(e,i,r,n,a){return this._transform.projection.supportsFog?ej(this.state,e,i,r,n,a,this._transform):[1,1]}getFovAdjustedRange(e){return this._transform.projection.supportsFog?eY(this.state,e):[0,1]}isVisibleOnFrustum(i){if(!this._transform.projection.supportsFog)return!1;for(let r of[4,5,6,7]){let n;let a=i.points[r];if(a[2]>=0)n=a;else{let s=i.points[r-4];n=e.aq(s,a,s[2]/(s[2]-a[2]))}if(eF(this.state,n[0],n[1],0,this._transform)>=.05)return!0}return!1}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(i,r,n){return(!n||!1!==n.validate)&&e.ai(this,i.call(e.aj,e.ak({value:r,style:{glyphs:!0,sprite:!0},styleSpec:e.ae})))}}class eH extends e.a6{constructor(i,r,n,a){super(),this.scope=n,this._options=i,this.properties=new e.ar(r),this._transitionable=new e.ag(r,n,new Map(a)),this._transitionable.setTransitionOrValue(i.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(e){this._transitionable.setTransitionOrValue(this._options.properties,new Map(e))}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(e,i){this._options=e,this._transitionable.setTransitionOrValue(e.properties,i)}shadowsEnabled(){return!!this.properties&&!0===this.properties.get("cast-shadows")}}let eV=new e.ac({color:new e.ad(e.ae.properties_light_ambient.color),intensity:new e.ad(e.ae.properties_light_ambient.intensity)}),eU=new e.ac({direction:new e.as(e.ae.properties_light_directional.direction),color:new e.ad(e.ae.properties_light_directional.color),intensity:new e.ad(e.ae.properties_light_directional.intensity),"cast-shadows":new e.ad(e.ae.properties_light_directional["cast-shadows"]),"shadow-intensity":new e.ad(e.ae.properties_light_directional["shadow-intensity"])});class e${constructor(e,i,r,n){this.screenBounds=e,this.cameraPoint=i,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,n)}static createFromScreenPoints(i,r){let n,a;if(i instanceof e.P||"number"==typeof i[0]){let s=e.P.convert(i);n=[s],a=r.isPointAboveHorizon(s)}else{let s=e.P.convert(i[0]),o=e.P.convert(i[1]);n=[s,o],a=e.at(s,o).every(e=>r.isPointAboveHorizon(e))}return new e$(n,r.getCameraPoint(),a,r)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(i){return e.at(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){let r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.P(1,1)):this.screenBounds[1],a=e.at(r,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>r.x&&this.cameraPoint.x<n.x?a.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?a[2]=this.cameraPoint:this.cameraPoint.x<=r.x&&(a[3]=this.cameraPoint)),e.au(a,i)}bufferedCameraGeometryGlobe(i){let r=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.P(1,1)):this.screenBounds[1],a=e.at(r,n,i),s=this.cameraPoint.clone();switch(3*((s.y>r.y)+(s.y>n.y))+((s.x>r.x)+(s.x>n.x))){case 0:a[0]=s,a[4]=s.clone();break;case 1:a.splice(1,0,s);break;case 2:a[1]=s;break;case 3:a.splice(4,0,s);break;case 5:a.splice(2,0,s);break;case 6:a[3]=s;break;case 7:a.splice(3,0,s);break;case 8:a[2]=s}return a}containsTile(i,r,n,a=0){var s;let o=i.queryPadding/r._pixelsPerMercatorPixel+1,l=n?this._bufferedCameraMercator(o,r):this._bufferedScreenMercator(o,r),u=i.tileID.wrap+(l.unwrapped?a:0),h=l.polygon.map(r=>e.av(i.tileTransform,r,u));if(!e.aw(h,0,0,e.J,e.J))return;u=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?a:0);let c=this.screenGeometryMercator.polygon.map(r=>e.ax(i.tileTransform,r,u)),d=c.map(i=>new e.P(i[0],i[1])),f=r.getFreeCameraOptions().position||new e.M(0,0,0),p=e.ax(i.tileTransform,f,u),m=c.map(i=>{let r=e.v.sub(i,i,p);return e.v.normalize(r,r),new e.R(p,r)}),_=e.ay(i,1,r.zoom)*r._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:d,tilespaceRays:m,bufferedTilespaceGeometry:h,bufferedTilespaceBounds:((s=e.az(h)).min.x=e.c(s.min.x,0,e.J),s.min.y=e.c(s.min.y,0,e.J),s.max.x=e.c(s.max.x,0,e.J),s.max.y=e.c(s.max.y,0,e.J),s),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:_}}_bufferedScreenMercator(e,i){let r=100*e|0;if(this._screenRaycastCache[r])return this._screenRaycastCache[r];{let n;return n="globe"===i.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),i):{polygon:this.bufferedScreenGeometry(e).map(e=>i.pointCoordinate3D(e)),unwrapped:!0},this._screenRaycastCache[r]=n,n}}_bufferedCameraMercator(e,i){let r=100*e|0;if(this._cameraRaycastCache[r])return this._cameraRaycastCache[r];{let n;return n="globe"===i.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),i):{polygon:this.bufferedCameraGeometry(e).map(e=>i.pointCoordinate3D(e)),unwrapped:!0},this._cameraRaycastCache[r]=n,n}}_projectAndResample(i,r){let n=function(i,r){let n=e.m.multiply([],r.pixelMatrix,r.globeMatrix),a=[0,-e.aC,0,1],s=[0,e.aC,0,1],o=[0,0,0,1];e.e.transformMat4(a,a,n),e.e.transformMat4(s,s,n),e.e.transformMat4(o,o,n);let l=new e.P(a[0]/a[3],a[1]/a[3]),u=new e.P(s[0]/s[3],s[1]/s[3]),h=e.aA(i,l)&&a[3]<o[3],c=e.aA(i,u)&&s[3]<o[3];if(!h&&!c)return null;let d=function(e,i,r){for(let n=1;n<e.length;n++){let a=eG(i.pointCoordinate3D(e[n-1]).x),s=eG(i.pointCoordinate3D(e[n]).x);if(r<0){if(a<s)return{idx:n,t:-a/(s-1-a)}}else if(s<a)return{idx:n,t:(1-a)/(s+1-a)}}return null}(i,r,h?-1:1);if(!d)return null;let{idx:f,t:p}=d,m=f>1?eW(i.slice(0,f),r):[],_=f<i.length?eW(i.slice(f),r):[];m=m.map(i=>new e.P(eG(i.x),i.y)),_=_.map(i=>new e.P(eG(i.x),i.y));let g=[...m];0===g.length&&g.push(_[_.length-1]);let y=e.n(g[g.length-1].y,(0===_.length?m[0]:_[0]).y,p);return g.push(...h?[new e.P(0,y),new e.P(0,0),new e.P(1,0),new e.P(1,y)]:[new e.P(1,y),new e.P(1,1),new e.P(0,1),new e.P(0,y)]),0===_.length?g.push(m[0]):g.push(..._),{polygon:g.map(i=>new e.M(i.x,i.y)),unwrapped:!1}}(i,r);if(n)return n;let a=function(i,r){let n=!1,a=-1/0,s=0;for(let e=0;e<i.length-1;e++)i[e].x>a&&(a=i[e].x,s=e);for(let e=0;e<i.length-1;e++){let r=(s+e)%(i.length-1),a=i[r],o=i[r+1];Math.abs(a.x-o.x)>.5&&(a.x<o.x?(a.x+=1,0===r&&(i[i.length-1].x+=1)):(o.x+=1,r+1===i.length-1&&(i[0].x+=1)),n=!0)}let o=e.E(r.center.lng);return n&&o<Math.abs(o-1)&&i.forEach(e=>{e.x-=1}),{polygon:i,unwrapped:n}}(eW(i,r).map(i=>new e.P(eG(i.x),i.y)),r);return{polygon:a.polygon.map(i=>new e.M(i.x,i.y)),unwrapped:a.unwrapped}}}function eW(i,r){return e.aB(i,e=>{let i=r.pointCoordinate3D(e);e.x=i.x,e.y=i.y},1/256)}function eG(e){return e<0?1+e%1:e%1}function eq(i,r,n,a,s){let o=function(n,a){if(n)return s(n);if(a){i.url&&a.tiles&&i.tiles&&delete i.tiles;let n=e.p(e.ak(a,i),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(n.vectorLayers=a.vector_layers,n.vectorLayerIds=n.vectorLayers.map(e=>e.id)),n.tiles=r.canonicalizeTileset(n,i.url),s(null,n)}};return i.url?e.a1(r.transformRequest(r.normalizeSourceURL(i.url,null,n,a),e.a2.Source),o):e.a4.frame(()=>o(null,i))}class eZ{constructor(i,r,n){this.bounds=e.D.convert(this.validateBounds(i)),this.minzoom=r||0,this.maxzoom=n||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(i){let r=Math.pow(2,i.z),n=Math.floor(e.E(this.bounds.getWest())*r),a=Math.floor(e.H(this.bounds.getNorth())*r),s=Math.ceil(e.E(this.bounds.getEast())*r),o=Math.ceil(e.H(this.bounds.getSouth())*r);return i.x>=n&&i.x<s&&i.y>=a&&i.y<o}}class eX extends e.a6{constructor(i,r,n,a){if(super(),this.id=i,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.ak(this,e.p(r,["url","scheme","tileSize","promoteId"])),this._options=e.ak({type:"vector"},r),this._collectResourceTiming=!!r.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a),this._tileWorkers={},this._deduped=new e.aD}load(i){this._loaded=!1,this.fire(new e.a8("dataloading",{dataType:"source"}));let r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,n=this.map._worldview;this._tileJSONRequest=eq(this._options,this.map._requestManager,r,n,(r,a)=>{this._tileJSONRequest=null,this._loaded=!0,r?(n&&n.length,this.fire(new e.a7(r))):a&&(e.ak(this,a),a.bounds&&(this.tileBounds=new eZ(a.bounds,this.minzoom,this.maxzoom)),e.aH(a.tiles,this.map._requestManager._customAccessToken),this.fire(new e.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.a8("data",{dataType:"source",sourceDataType:"content"}))),i&&i(r)})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest();let i=e.aE(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.ak({},this._options)}loadTile(i,r){let n=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(n,e.a2.Tile),data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:e.a4.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:i.isExtraShadowCaster};if(a.request.collectResourceTiming=this._collectResourceTiming,i.actor&&"expired"!==i.state)"loading"===i.state?i.reloadCallback=r:i.request=i.actor.send("reloadTile",a,s.bind(this));else if(i.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",a,s.bind(this),void 0,!0);else{let r=e.aF.call({deduped:this._deduped},a,(e,r)=>{e||!r?s.call(this,e):(a.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},i.actor&&i.actor.send("loadTile",a,s.bind(this),void 0,!0))},!0);i.request={cancel:r}}function s(n,a){return delete i.request,i.aborted?r(null):n&&404!==n.status?r(n):(a&&a.resourceTiming&&(i.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&i.setExpiryData(a),i.loadVectorData(a,this.map.painter),e.aG(this.dispatcher),r(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(e){e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope}),e.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class eJ extends e.a6{constructor(i,r,n,a){super(),this.id=i,this.dispatcher=n,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.ak({type:"raster"},r),e.ak(this,e.p(r,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new e.a8("dataloading",{dataType:"source"})),this._tileJSONRequest=eq(this._options,this.map._requestManager,null,null,(r,n)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new e.a7(r)):n&&(e.ak(this,n),n.bounds&&(this.tileBounds=new eZ(n.bounds,this.minzoom,this.maxzoom)),e.aH(n.tiles),this.fire(new e.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.a8("data",{dataType:"source",sourceDataType:"content"}))),i&&i(r)})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest();let i=e.aE(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.ak({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(i,r){let n=e.a4.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),n,this.tileSize);i.request=e.a3(this.map._requestManager.transformRequest(a,e.a2.Tile),(n,a,s,o)=>(delete i.request,i.aborted?(i.state="unloaded",r(null)):n?(i.state="errored",r(n)):a?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:s,expires:o}),i.setTexture(a,this.map.painter),i.state="loaded",e.aG(this.dispatcher),void r(null)):r(null)))}abortTile(e,i){e.request&&(e.request.cancel(),delete e.request),i()}unloadTile(i,r){i.texture&&i.texture instanceof e.a9?(i.destroy(!0),i.texture&&i.texture instanceof e.a9&&this.map.painter.saveTileTexture(i.texture)):i.destroy(),r()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let eK={vector:eX,raster:eJ,"raster-dem":class extends eJ{constructor(i,r,n,a){super(i,r,n,a),this.type="raster-dem",this.maxzoom=22,this._options=e.ak({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}loadTile(i,r){let n=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function a(e,n){e&&(i.state="errored",r(e)),n&&(i.dem=n,i.dem.onDeserialize(),i.needsHillshadePrepare=!0,i.needsDEMTextureUpload=!0,i.state="loaded",r(null))}i.request=e.a3(this.map._requestManager.transformRequest(n,e.a2.Tile),(function(n,s,o,l){if(delete i.request,i.aborted)i.state="unloaded",r(null);else if(n)i.state="errored",r(n);else if(s){this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:o,expires:l});let r=ImageBitmap&&s instanceof ImageBitmap&&e.aI(),n=1-(s.width-e.aJ(s.width))/2;n<1||i.neighboringTiles||(i.neighboringTiles=this._getNeighboringTiles(i.tileID));let u=r?s:e.a4.getImageData(s,n),h={uid:i.uid,coord:i.tileID,source:this.id,scope:this.scope,rawImageData:u,encoding:this.encoding,padding:n};i.actor&&"expired"!==i.state||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",h,a.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(i){let r=i.canonical,n=Math.pow(2,r.z),a=(r.x-1+n)%n,s=0===r.x?i.wrap-1:i.wrap,o=(r.x+1+n)%n,l=r.x+1===n?i.wrap+1:i.wrap,u={};return u[new e.O(i.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},u[new e.O(i.overscaledZ,l,r.z,o,r.y).key]={backfilled:!1},r.y>0&&(u[new e.O(i.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1},u[new e.O(i.overscaledZ,i.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},u[new e.O(i.overscaledZ,l,r.z,o,r.y-1).key]={backfilled:!1}),r.y+1<n&&(u[new e.O(i.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1},u[new e.O(i.overscaledZ,i.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},u[new e.O(i.overscaledZ,l,r.z,o,r.y+1).key]={backfilled:!1}),u}},geojson:class extends e.a6{constructor(i,r,n,a){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(a),this._data=r.data,this._options=e.ak({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;let s=e.J/this.tileSize;this.workerOptions=e.ak({source:this.id,scope:this.scope,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*s,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*s,extent:e.J,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.J,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*s,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id,scope:this.scope},i),this}getClusterChildren(e,i){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id,scope:this.scope},i),this}getClusterLeaves(e,i,r,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:e,limit:i,offset:r},n),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.a8("dataloading",{dataType:"source"})),this._loaded=!1;let i=e.ak({},this.workerOptions);i.scope=this.scope;let r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(e.a4.resolveURL(r),e.a2.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this._pendingLoad=this.actor.send(`${this.type}.loadData`,i,(i,r)=>{if(this._loaded=!0,this._pendingLoad=null,i)this.fire(new e.a7(i));else{let i={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(i.resourceTiming=r.resourceTiming[this.id]),this.fire(new e.a8("data",i)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(i,r){let n=i.actor?"reloadTile":"loadTile";i.actor=this.actor;let a={type:this.type,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:e.a4.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};i.request=this.actor.send(n,a,(e,a)=>(delete i.request,i.destroy(),i.aborted?r(null):e?r(e):(i.loadVectorData(a,this.map.painter,"reloadTile"===n),r(null))),void 0,"loadTile"===n)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope}),e.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.ak({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends e.aK{constructor(e,i,r,n){super(e,i,r,n),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;let i=this.options;for(let r of(this.urls=[],i.urls))this.urls.push(this.map._requestManager.transformRequest(r,e.a2.Source).url);e.aL(this.urls,(i,r)=>{this._loaded=!0,i?this.fire(new e.a7(i)):r&&(this.video=r,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){let r=this.video.seekable;i<r.start(0)||i>r.end(0)?this.fire(new e.a7(new e.aM(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;let i=this.map.painter.context,r=i.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new e.a9(i,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(i)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:e.aK,model:class extends e.a6{constructor(e,i,r,n){super(),this.id=e,this.type="model",this.models=[],this._loaded=!1,this._options=i}load(){let i=[];for(let r in this._options.models){let n=this._options.models[r],a=e.aO(this.map._requestManager.transformRequest(n.uri,e.a2.Model).url).then(i=>{if(!i)return;let a=e.aP(i),s=new e.aQ(r,n.position,n.orientation,a);s.computeBoundsAndApplyParent(),this.models.push(s)}).catch(i=>{this.fire(new e.a7(Error(`Could not load model ${r} from ${n.uri}: ${i.message}`)))});i.push(a)}return Promise.allSettled(i).then(()=>{this._loaded=!0,this.fire(new e.a8("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(i=>{this.fire(new e.a7(Error(`Could not load models: ${i.message}`)))})}onAdd(e){this.map=e,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(e,i){}serialize(){return{type:"model"}}},"batched-model":class extends e.a6{constructor(e,i,r,n){super(),this.type="batched-model",this.id=e,this.tileSize=512,this._options=i,this.tiles=this._options.tiles,this.maxzoom=i.maxzoom||19,this.minzoom=i.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=r,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(n)}onAdd(e){this.map=e,this.load()}load(i){this._loaded=!1,this.fire(new e.a8("dataloading",{dataType:"source"}));let r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,n=this.map._worldview;this._tileJSONRequest=eq(this._options,this.map._requestManager,r,n,(r,a)=>{this._tileJSONRequest=null,this._loaded=!0,r?(n&&n.length,this.fire(new e.a7(r))):a&&(e.ak(this,a),a.bounds&&(this.tileBounds=new eZ(a.bounds,this.minzoom,this.maxzoom)),e.aH(a.tiles,this.map._requestManager._customAccessToken),this.fire(new e.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.a8("data",{dataType:"source",sourceDataType:"content"}))),i&&i(r)})}hasTransition(){return!1}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loaded(){return this._loaded}loadTile(i,r){let n=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(n,e.a2.Tile),data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:i.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(i.actor&&"expired"!==i.state){if("loading"===i.state)i.reloadCallback=r;else{if(i.buckets){for(let e of Object.values(i.buckets))e.dirty=!0;return void(i.state="loaded")}i.request=i.actor.send("reloadTile",a,s.bind(this))}}else i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",a,s.bind(this),void 0,!0);function s(e,n){return i.aborted?r(null):e&&404!==e.status?r(e):(n&&(n.resourceTiming&&(i.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&i.setExpiryData(n),i.buckets={...i.buckets,...n.buckets}),i.state="loaded",void r(null))}}serialize(){return e.ak({},this._options)}},canvas:class extends e.aK{constructor(i,r,n,a){super(i,r,n,a),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new e.a7(new e.aM(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.a7(new e.aM(`sources.${i}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.a7(new e.aM(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof HTMLCanvasElement||this.fire(new e.a7(new e.aM(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.a7(new e.aM(`sources.${i}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.a7(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;let r=this.map.painter.context;this.texture?!i&&!this._playing||this.texture instanceof e.aN||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.a9(r,this.canvas,r.gl.RGBA,{premultiply:!0}),this._prepareData(r)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.a6{constructor(i,r,n,a){super(),this.id=i,this.type="custom",this._dataType="raster",this._dispatcher=n,this._implementation=r,this.setEventedParent(a),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.a7(Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.a7(Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new eZ(this._implementation.bounds,this.minzoom,this.maxzoom)),r.update=this._update.bind(this),r.clearTiles=this._clearTiles.bind(this),r.coveringTiles=this._coveringTiles.bind(this),e.ak(this,e.p(r,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.p(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.a8("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(i){this._map=i,this._loaded=!1,this.fire(new e.a8("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(i),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){let{x:i,y:r,z:n}=e.canonical;return this._implementation.hasTile({x:i,y:r,z:n})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e,i){let{x:r,y:n,z:a}=e.tileID.canonical,s=new AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:r,y:n,z:a},{signal:s.signal})).then((function(r){return delete e.request,e.aborted?(e.state="unloaded",i(null)):void 0===r?(e.state="errored",i(null)):null===r?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",i(null)):r instanceof ImageData||r instanceof HTMLCanvasElement||r instanceof ImageBitmap||r instanceof HTMLImageElement?(this.loadTileData(e,r),e.state="loaded",void i(null)):(e.state="errored",i(Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(r=>{20!==r.code&&(e.state="errored",i(r))}),e.request.cancel=()=>s.abort()}loadTileData(e,i){e.setTexture(i,this._map.painter)}unloadTile(i,r){if(i.texture&&i.texture instanceof e.a9?(i.destroy(!0),i.texture&&i.texture instanceof e.a9&&this._map.painter.saveTileTexture(i.texture)):i.destroy(),this._implementation.unloadTile){let{x:e,y:r,z:n}=i.tileID.canonical;this._implementation.unloadTile({x:e,y:r,z:n})}r()}abortTile(e,i){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}))}_clearTiles(){let i=e.aE(this.id,this.scope);this._map.style.clearSource(i)}_update(){this.fire(new e.a8("data",{dataType:"source",sourceDataType:"content"}))}}},eQ=function(i,r,n,a){let s=new eK[r.type](i,r,n,a);if(s.id!==i)throw Error(`Expected Source id to be ${i} instead of ${s.id}`);return e.aR(["load","abort","unload","serialize","prepare"],s),s};function e0(e,i){let r=e.tileID,n=i.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}class e1{constructor(e){this.style=e}processLayersChanged(){for(let e in this.layers=[],this.style._mergedLayers){let i=this.style._mergedLayers[e];if("fill-extrusion"===i.type)this.layers.push(i);else if("model"===i.type){let e=this.style.getLayerSource(i);e&&"batched-model"===e.type&&this.layers.push(i)}}}updateZOffset(e,i){this.currentBuildingBuckets=[];for(let e=0;e<this.layers.length;++e){let r=this.layers[e],n=this.style.getLayerSourceCache(r),a=1;"fill-extrusion"===r.type&&(a=r.paint.get("fill-extrusion-opacity")>0?r.paint.get("fill-extrusion-vertical-scale"):0);let s=n?n.getTile(i):null;if(!s&&n&&i.canonical.z>n.getSource().minzoom){let e=i.scaledTo(Math.min(n.getSource().maxzoom,i.overscaledZ-1));for(;e.overscaledZ>=n.getSource().minzoom&&!(s=n.getTile(e))&&0!==e.overscaledZ;)e=e.scaledTo(e.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:s?s.getBucket(r):null,tileID:s?s.tileID:i,verticalScale:a})}e.hasAnyZOffset=!1;let r=!1;for(let n=0;n<e.symbolInstances.length;n++){let a=e.symbolInstances.get(n),s=a.zOffset,o=this._getHeightAtTileOffset(i,a.tileAnchorX,a.tileAnchorY);a.zOffset=-1!==o?o:s,r||s===a.zOffset||(r=!0),e.hasAnyZOffset||0===a.zOffset||(e.hasAnyZOffset=!0)}r&&(e.zOffsetBuffersNeedUpload=!0,e.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(i,r,n,a){let s=r,o=n;if(i.canonical.z!==a.canonical.z){let l=a.canonical,u=1/(1<<i.canonical.z-l.z);s=(r+i.canonical.x*e.J)*u-l.x*e.J|0,o=(n+i.canonical.y*e.J)*u-l.y*e.J|0}return{tileX:s,tileY:o}}_getHeightAtTileOffset(e,i,r){let n,a;for(let s=0;s<this.layers.length;++s){if("fill-extrusion"!==this.layers[s].type)continue;let{bucket:o,tileID:l,verticalScale:u}=this.currentBuildingBuckets[s];if(!o)continue;let{tileX:h,tileY:c}=this._mapCoordToOverlappingTile(e,i,r,l),d=o.getHeightAtTileCoord(h,c);d&&void 0!==d.height&&(d.hidden?n=d.height:a=Math.max(d.height*u,a||0))}if(void 0!==a)return a;for(let a=0;a<this.layers.length;++a){if("model"!==this.layers[a].type)continue;let{bucket:s,tileID:o}=this.currentBuildingBuckets[a];if(!s)continue;let{tileX:l,tileY:u}=this._mapCoordToOverlappingTile(e,i,r,o),h=s.getHeightAtTileCoord(l,u);if(h&&!h.hidden)return void 0===h.height&&void 0!==n?Math.min(h.maxHeight,n)*h.verticalScale:(h.height||0)*h.verticalScale}return -1}}function e2(i){i=i.slice();let r=Object.create(null);for(let e=0;e<i.length;e++)r[i[e].id]=i[e];for(let n=0;n<i.length;n++)"ref"in i[n]&&(i[n]=function(i,r){let n={};for(let e in i)"ref"!==e&&(n[e]=i[e]);return e.aS.forEach(e=>{e in r&&(n[e]=r[e])}),n}(i[n],r[i[n].ref]));return i}let e3={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",setImportUrl:"setImportUrl",setImportData:"setImportData",setImportConfig:"setImportConfig"};function e4(e,i,r){r.push({command:e3.addSource,args:[e,i[e]]})}function e5(e,i,r){i.push({command:e3.removeSource,args:[e]}),r[e]=!0}function e6(e,i,r,a,s,o){let l;for(l in i=i||{},e=e||{})e.hasOwnProperty(l)&&(n(e[l],i[l])||r.push({command:o,args:[a,l,i[l],s]}));for(l in i)i.hasOwnProperty(l)&&!e.hasOwnProperty(l)&&(n(e[l],i[l])||r.push({command:o,args:[a,l,i[l],s]}))}function e8(e){return e.id}function e7(e,i){return e[i.id]=i,e}class e9{constructor(e,i){this.reset(e,i)}reset(e,i){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(i||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(1===this.points.length)return this.points[0];i=e.c(i,0,1);let r=1,n=this._distances[r],a=i*this.paddedLength+this.padding;for(;n<a&&r<this._distances.length;)n=this._distances[++r];let s=r-1,o=this._distances[s],l=n-o,u=l>0?(a-o)/l:0;return this.points[s].mult(1-u).add(this.points[r].mult(u))}}class te{constructor(e,i,r){let n=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(i/r);for(let e=0;e<this.xCellCount*this.yCellCount;e++)n.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=i,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,i,r,n,a){this._forEachCell(i,r,n,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(a)}insertCircle(e,i,r,n){this._forEachCell(i-n,r-n,i+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(i),this.circles.push(r),this.circles.push(n)}_insertBoxCell(e,i,r,n,a,s){this.boxCells[a].push(s)}_insertCircleCell(e,i,r,n,a,s){this.circleCells[a].push(s)}_query(e,i,r,n,a,s){if(r<0||e>this.width||n<0||i>this.height)return!a&&[];let o=[];if(e<=0&&i<=0&&this.width<=r&&this.height<=n){if(a)return!0;for(let e=0;e<this.boxKeys.length;e++)o.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){let i=this.circles[3*e],r=this.circles[3*e+1],n=this.circles[3*e+2];o.push({key:this.circleKeys[e],x1:i-n,y1:r-n,x2:i+n,y2:r+n})}return s?o.filter(s):o}return this._forEachCell(e,i,r,n,this._queryCell,o,{hitTest:a,seenUids:{box:{},circle:{}}},s),a?o.length>0:o}_queryCircle(e,i,r,n,a){let s=e-r,o=e+r,l=i-r,u=i+r;if(o<0||s>this.width||u<0||l>this.height)return!n&&[];let h=[];return this._forEachCell(s,l,o,u,this._queryCellCircle,h,{hitTest:n,circle:{x:e,y:i,radius:r},seenUids:{box:{},circle:{}}},a),n?h.length>0:h}query(e,i,r,n,a){return this._query(e,i,r,n,!1,a)}hitTest(e,i,r,n,a){return this._query(e,i,r,n,!0,a)}hitTestCircle(e,i,r,n){return this._queryCircle(e,i,r,!0,n)}_queryCell(e,i,r,n,a,s,o,l){let u=o.seenUids,h=this.boxCells[a];if(null!==h){let a=this.bboxes;for(let c of h)if(!u.box[c]){u.box[c]=!0;let h=4*c;if(e<=a[h+2]&&i<=a[h+3]&&r>=a[h+0]&&n>=a[h+1]&&(!l||l(this.boxKeys[c]))){if(o.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[c],x1:a[h],y1:a[h+1],x2:a[h+2],y2:a[h+3]})}}}let c=this.circleCells[a];if(null!==c){let a=this.circles;for(let h of c)if(!u.circle[h]){u.circle[h]=!0;let c=3*h;if(this._circleAndRectCollide(a[c],a[c+1],a[c+2],e,i,r,n)&&(!l||l(this.circleKeys[h]))){if(o.hitTest)return s.push(!0),!0;{let e=a[c],i=a[c+1],r=a[c+2];s.push({key:this.circleKeys[h],x1:e-r,y1:i-r,x2:e+r,y2:i+r})}}}}}_queryCellCircle(e,i,r,n,a,s,o,l){let u=o.circle,h=o.seenUids,c=this.boxCells[a];if(null!==c){let e=this.bboxes;for(let i of c)if(!h.box[i]){h.box[i]=!0;let r=4*i;if(this._circleAndRectCollide(u.x,u.y,u.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!l||l(this.boxKeys[i])))return s.push(!0),!0}}let d=this.circleCells[a];if(null!==d){let e=this.circles;for(let i of d)if(!h.circle[i]){h.circle[i]=!0;let r=3*i;if(this._circlesCollide(e[r],e[r+1],e[r+2],u.x,u.y,u.radius)&&(!l||l(this.circleKeys[i])))return s.push(!0),!0}}}_forEachCell(e,i,r,n,a,s,o,l){let u=this._convertToXCellCoord(e),h=this._convertToYCellCoord(i),c=this._convertToXCellCoord(r),d=this._convertToYCellCoord(n);for(let f=u;f<=c;f++)for(let u=h;u<=d;u++)if(a.call(this,e,i,r,n,this.xCellCount*u+f,s,o,l))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,i,r,n,a,s){let o=n-e,l=a-i,u=r+s;return u*u>o*o+l*l}_circleAndRectCollide(e,i,r,n,a,s,o){let l=(s-n)/2,u=Math.abs(e-(n+l));if(u>l+r)return!1;let h=(o-a)/2,c=Math.abs(i-(a+h));if(c>h+r)return!1;if(u<=l||c<=h)return!0;let d=u-l,f=c-h;return d*d+f*f<=r*r}}class tt{constructor(e,i,r=new te(e.width+200,e.height+200,25),n=new te(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=i}placeCollisionBox(e,i,r,n,a,s,o,l){let u=r.projectedAnchorX,h=r.projectedAnchorY,c=r.projectedAnchorZ,d=r.elevation,f=r.tileID,p=e.getProjection();if(d&&f){let[e,i,n]=p.upVector(f.canonical,r.tileAnchorX,r.tileAnchorY),a=p.upVectorScale(f.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;u+=e*d*a,h+=i*d*a,c+=n*d*a}let m=this.projectAndGetPerspectiveRatio(o,u,h,c,r.tileID,"globe"===p.name||!!d||this.transform.pitch>0,p),_=s*m.perspectiveRatio,g=(r.x1*i+n.x-r.padding)*_+m.point.x,y=(r.y1*i+n.y-r.padding)*_+m.point.y,v=(r.x2*i+n.x+r.padding)*_+m.point.x,x=(r.y2*i+n.y+r.padding)*_+m.point.y,b=m.perspectiveRatio<=.55||m.occluded;return!this.isInsideGrid(g,y,v,x)||!a&&this.grid.hitTest(g,y,v,x,l)||b?{box:[],offscreen:!1,occluded:m.occluded}:{box:[g,y,v,x],offscreen:this.isOffscreen(g,y,v,x),occluded:!1}}placeCollisionCircles(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_){let g=[],y=this.transform.elevation,v=i.getProjection(),x=y?y.getAtTileOffsetFunc(_,this.transform.center.lat,this.transform.worldSize,v):null,b=new e.P(n.tileAnchorX,n.tileAnchorY),{x:w,y:M,z:T}=v.projectTilePoint(b.x,b.y,_.canonical);if(x){let[e,i,r]=x(b);w+=e,M+=i,T+=r}let L="globe"===v.name,S=this.projectAndGetPerspectiveRatio(l,w,M,T,_,L||!!y||this.transform.pitch>0,v),{perspectiveRatio:k}=S,D=(d?o/k:o*k)/e.aV,E=ey(w,M,T,u),A=S.signedDistanceFromCamera>0?ex(D,s,n.lineOffsetX*D,n.lineOffsetY*D,!1,E,b,n,a,u,{},y&&!d?x:null,d&&!!y,v,_,d):null,P=!1,C=!1,I=!0;if(A&&!S.occluded){let i=.5*p*k+m,n=new e.P(-100,-100),a=new e.P(this.screenRightBoundary,this.screenBottomBoundary),s=new e9,{first:o,last:l}=A,u=o.path.length,d=[];for(let e=u-1;e>=1;e--)d.push(o.path[e]);for(let e=1;e<l.path.length;e++)d.push(l.path[e]);let _=2.5*i;h&&(d=d.map(([e,i,r],n)=>(x&&!L&&(r=x(n<u-1?o.tilePath[u-1-n]:l.tilePath[n-u+2])[2]),ey(e,i,r,h)))).some(e=>e[3]<=0)&&(d=[]);let y=[];if(d.length>0){let i=1/0,r=-1/0,s=1/0,o=-1/0;for(let e of d)i=Math.min(i,e[0]),s=Math.min(s,e[1]),r=Math.max(r,e[0]),o=Math.max(o,e[1]);r>=n.x&&i<=a.x&&o>=n.y&&s<=a.y&&(y=[d.map(i=>new e.P(i[0],i[1]))],(i<n.x||r>a.x||s<n.y||o>a.y)&&(y=e.aT(y,n.x,n.y,a.x,a.y)))}for(let e of y){s.reset(e,.25*i);let n=0;n=s.length<=.5*i?1:Math.ceil(s.paddedLength/_)+1;for(let e=0;e<n;e++){let a=e/Math.max(n-1,1),o=s.lerp(a),l=o.x+100,u=o.y+100;g.push(l,u,i,0);let h=l-i,d=u-i,p=l+i,m=u+i;if(I=I&&this.isOffscreen(h,d,p,m),C=C||this.isInsideGrid(h,d,p,m),!r&&this.grid.hitTestCircle(l,u,i,f)&&(P=!0,!c))return{circles:[],offscreen:!1,collisionDetected:P,occluded:!1}}}}return{circles:(c||!P)&&C?g:[],offscreen:I,collisionDetected:P,occluded:S.occluded}}queryRenderedSymbols(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};let r=[],n=1/0,a=1/0,s=-1/0,o=-1/0;for(let l of i){let i=new e.P(l.x+100,l.y+100);n=Math.min(n,i.x),a=Math.min(a,i.y),s=Math.max(s,i.x),o=Math.max(o,i.y),r.push(i)}let l=this.grid.query(n,a,s,o).concat(this.ignoredGrid.query(n,a,s,o)),u={},h={};for(let i of l){let n=i.key;if(void 0===u[n.bucketInstanceId]&&(u[n.bucketInstanceId]={}),u[n.bucketInstanceId][n.featureIndex])continue;let a=[new e.P(i.x1,i.y1),new e.P(i.x2,i.y1),new e.P(i.x2,i.y2),new e.P(i.x1,i.y2)];e.aU(r,a)&&(u[n.bucketInstanceId][n.featureIndex]=!0,void 0===h[n.bucketInstanceId]&&(h[n.bucketInstanceId]=[]),h[n.bucketInstanceId].push(n.featureIndex))}return h}insertCollisionBox(e,i,r,n,a){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:n,collisionGroupID:a},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,i,r,n,a){let s=i?this.ignoredGrid:this.grid,o={bucketInstanceId:r,featureIndex:n,collisionGroupID:a};for(let i=0;i<e.length;i+=4)s.insertCircle(o,e[i],e[i+1],e[i+2])}projectAndGetPerspectiveRatio(i,r,n,a,s,o,l){let u=[r,n,a,1],h=!1;a||this.transform.pitch>0?(e.e.transformMat4(u,u,i),this.fogState&&s&&"globe"!==l.name&&(h=function(i,r,n,a,s,o){let l=o.calculateFogTileMatrix(s),u=[r,n,a];return e.v.transformMat4(u,u,l),eR(i,e.v.length(u),o.pitch,o._fov)}(this.fogState,r,n,a,s.toUnwrapped(),this.transform)>.9)):ek(u,u,i);let c=u[3];return{point:new e.P((u[0]/c+1)/2*this.transform.width+100,(-u[1]/c+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(l)/c*.5,1.5),signedDistanceFromCamera:c,occluded:o&&u[2]>c||h}}isOffscreen(e,i,r,n){return r<100||e>=this.screenRightBoundary||n<100||i>this.screenBottomBoundary}isInsideGrid(e,i,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&i<this.gridBottomBoundary}getViewportMatrix(){let i=e.m.identity([]);return e.m.translate(i,i,[-100,-100,0]),i}}function ti(i,r,n){let a=r.createTileMatrix(i,i.worldSize,n.toUnwrapped());return e.m.multiply(new Float32Array(16),i.projMatrix,a)}function tr(e,i,r){return i.name===r.projection.name?e.projMatrix:ti(r,i,e)}class tn{constructor(e,i,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?i:-i))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class ta{constructor(e,i,r,n,a,s=!1){this.text=new tn(e?e.text:null,i,r,a),this.icon=new tn(e?e.icon:null,i,n,a),this.clipped=s}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ts{constructor(e,i,r,n=!1){this.text=e,this.icon=i,this.skipFade=r,this.clipped=n}}class to{constructor(){this.invProjMatrix=e.m.create(),this.viewportMatrix=e.m.create(),this.circles=[]}}class tl{constructor(e,i,r,n,a){this.bucketInstanceId=e,this.featureIndex=i,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=a}}class tu{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){let i=++this.maxGroupID;this.collisionGroups[e]={ID:i,predicate:e=>e.collisionGroupID===i}}return this.collisionGroups[e]}}function th(i,r,n,a,s){let{horizontalAlign:o,verticalAlign:l}=e.aY(i),u=e.aW(i,a);return new e.P(-(o-.5)*r+u[0]*s,-(l-.5)*n+u[1]*s)}function tc(i,r,n,a,s){let o=new e.P(i,r);return n&&o._rotate(a?s:-s),o}class td{constructor(e,i,r,n,a,s){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new tt(this.transform,a),this.buildingIndex=s,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new tu(r),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,r,n,a){var s,o,l;let u=n.getBucket(r),h=n.latestFeatureIndex;if(!u||!h||r.fqid!==u.layerIds[0])return;let c=u.layers[0].layout,d=n.collisionBoxArray,f=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),p=n.tileSize/e.J,m=n.tileID.toUnwrapped();this.transform.setProjection(u.projection);let _=(s=n.tileID,o=u.getProjection(),l=this.transform,o.name===this.projection?l.calculateProjMatrix(s.toUnwrapped()):ti(l,o,s)),g="map"===c.get("text-pitch-alignment"),y="map"===c.get("text-rotation-alignment");r.compileFilter();let v=r.dynamicFilter(),x=r.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(n),w=e_(_,n.tileID.canonical,g,y,this.transform,u.getProjection(),b),M=null;if(g){let i=eg(_,n.tileID.canonical,g,y,this.transform,u.getProjection(),b);M=e.m.multiply([],this.transform.labelPlaneMatrix,i)}let T=null;v&&n.latestFeatureIndex&&(T={unwrappedTileID:m,dynamicFilter:v,dynamicFilterNeedsFeature:x,featureIndex:n.latestFeatureIndex}),this.retainedQueryData[u.bucketInstanceId]=new tl(u.bucketInstanceId,h,u.sourceLayerIndex,u.index,n.tileID);let L={bucket:u,layout:c,posMatrix:_,textLabelPlaneMatrix:w,labelToScreenMatrix:M,clippingData:T,scale:f,textPixelRatio:p,holdingForFade:n.holdingForFade(),collisionBoxArray:d,partiallyEvaluatedTextSize:e.i(u.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.i(u.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(u.sourceID)};if(a)for(let e of u.sortKeyRanges){let{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:a}=e;i.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:a,parameters:L})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:u.symbolInstances.length,parameters:L})}attemptAnchorPlacement(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y){let{textOffset0:v,textOffset1:x,crossTileID:b}=d,w=[v,x],M=th(e,r,n,w,a),T=this.collisionIndex.placeCollisionBox(p,a,i,tc(M.x,M.y,s,o,this.transform.angle),c,l,u,h.predicate);if(_){let e=p.getSymbolInstanceIconSize(y,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,e,_,tc(M.x,M.y,s,o,this.transform.angle),c,l,u,h.predicate).box.length)return}if(T.box.length>0){let i;return this.prevPlacement&&this.prevPlacement.variableOffsets[b]&&this.prevPlacement.placements[b]&&this.prevPlacement.placements[b].text&&(i=this.prevPlacement.variableOffsets[b].anchor),this.variableOffsets[b]={textOffset:w,width:r,height:n,anchor:e,textScale:a,prevAnchor:i},this.markUsedJustification(p,e,d,m),p.allowVerticalPlacement&&(this.markUsedOrientation(p,m,d),this.placedOrientations[b]=m),{shift:M,placedGlyphBoxes:T}}}placeLayerBucketPart(i,r,n,a){let{bucket:s,layout:o,posMatrix:l,textLabelPlaneMatrix:u,labelToScreenMatrix:h,clippingData:c,textPixelRatio:d,holdingForFade:f,collisionBoxArray:p,partiallyEvaluatedTextSize:m,partiallyEvaluatedIconSize:_,collisionGroup:g}=i.parameters,y=o.get("text-optional"),v=o.get("icon-optional"),x=o.get("text-allow-overlap"),b=o.get("icon-allow-overlap"),w="map"===o.get("text-rotation-alignment"),M="map"===o.get("text-pitch-alignment"),T="viewport-y"===o.get("symbol-z-order"),L=o.get("symbol-z-elevate");this.transform.setProjection(s.projection);let S=x&&(b||!s.hasIconData()||v),k=b&&(x||!s.hasTextData()||y);!s.collisionArrays&&p&&s.deserializeCollisionBoxes(p),n&&a&&s.updateCollisionDebugBuffers(this.transform.zoom,p);let D=(i,a,p)=>{let{crossTileID:T,numVerticalGlyphVertices:L}=i;if(c){let n={zoom:this.transform.zoom,pitch:this.transform.pitch},a=null;if(c.dynamicFilterNeedsFeature){let e=this.retainedQueryData[s.bucketInstanceId];a=c.featureIndex.loadFeature({featureIndex:i.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,c.dynamicFilter)(n,a,this.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.P(i.tileAnchorX,i.tileAnchorY),this.transform.calculateDistanceTileData(c.unwrappedTileID)))return this.placements[T]=new ts(!1,!1,!1,!0),void r.add(T)}if(r.has(T))return;if(f)return void(this.placements[T]=new ts(!1,!1,!1));let D=!1,E=!1,A=!0,P=!1,C=!1,I=null,O={box:null,offscreen:null,occluded:null},z={box:null,offscreen:null,occluded:null},R=null,Y=null,F=null,j=0,B=0,N=0;p.textFeatureIndex?j=p.textFeatureIndex:i.useRuntimeCollisionCircles&&(j=i.featureIndex),p.verticalTextFeatureIndex&&(B=p.verticalTextFeatureIndex);let H=e=>{e.tileID=this.retainedQueryData[s.bucketInstanceId].tileID;let r=this.transform.elevation;e.elevation=i.zOffset+(r?r.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},V=p.textBox;if(V){H(V);let r=r=>{let n=e.W.horizontal;if(s.allowVerticalPlacement&&!r&&this.prevPlacement){let e=this.prevPlacement.placedOrientations[T];e&&(this.placedOrientations[T]=e,n=e,this.markUsedOrientation(s,n,i))}return n},n=(i,r)=>{if(s.allowVerticalPlacement&&L>0&&p.verticalTextBox){for(let n of s.writingModes)if(n===e.W.vertical?z=O=r():O=i(),O&&O.box&&O.box.length)break}else O=i()};if(o.get("text-variable-anchor")){let u=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[T]){let e=this.prevPlacement.variableOffsets[T];u.indexOf(e.anchor)>0&&(u=u.filter(i=>i!==e.anchor)).unshift(e.anchor)}let h=(e,r,n)=>{let o=s.getSymbolInstanceTextSize(m,i,this.transform.zoom,a),h=(e.x2-e.x1)*o+2*e.padding,c=(e.y2-e.y1)*o+2*e.padding,f=i.hasIconTextFit&&!b?r:null;f&&H(f);let p={box:[],offscreen:!1,occluded:!1},y=x?2*u.length:u.length;for(let r=0;r<y;++r){let y=this.attemptAnchorPlacement(u[r%u.length],e,h,c,o,w,M,d,l,g,r>=u.length,i,a,s,n,f,m,_);if(y&&(p=y.placedGlyphBoxes)&&p.box&&p.box.length){D=!0,I=y.shift;break}}return p};n(()=>h(V,p.iconBox,e.W.horizontal),()=>{let i=p.verticalTextBox;return i&&H(i),s.allowVerticalPlacement&&!(O&&O.box&&O.box.length)&&L>0&&i?h(i,p.verticalIconBox,e.W.vertical):{box:null,offscreen:null,occluded:null}}),O&&(D=O.box,A=O.offscreen,P=O.occluded);let c=r(!(!O||!O.box));if(!D&&this.prevPlacement){let e=this.prevPlacement.variableOffsets[T];e&&(this.variableOffsets[T]=e,this.markUsedJustification(s,e.anchor,i,c))}}else{let o=(r,n)=>{let o=s.getSymbolInstanceTextSize(m,i,this.transform.zoom,a),u=this.collisionIndex.placeCollisionBox(s,o,r,new e.P(0,0),x,d,l,g.predicate);return u&&u.box&&u.box.length&&(this.markUsedOrientation(s,n,i),this.placedOrientations[T]=n),u};n(()=>o(V,e.W.horizontal),()=>{let i=p.verticalTextBox;return s.allowVerticalPlacement&&L>0&&i?(H(i),o(i,e.W.vertical)):{box:null,offscreen:null,occluded:null}}),r(!!(O&&O.box&&O.box.length))}}if(D=(R=O)&&R.box&&R.box.length>0,A=R&&R.offscreen,P=R&&R.occluded,i.useRuntimeCollisionCircles){let r=s.text.placedSymbolArray.get(i.centerJustifiedTextSymbolIndex>=0?i.centerJustifiedTextSymbolIndex:i.verticalPlacedTextSymbolIndex),a=e.j(s.textSizeData,m,r),c=o.get("text-padding");Y=this.collisionIndex.placeCollisionCircles(s,x,r,s.lineVertexArray,s.glyphOffsetArray,a,l,u,h,n,M,g.predicate,i.collisionCircleDiameter*a/e.aV,c,this.retainedQueryData[s.bucketInstanceId].tileID),D=x||Y.circles.length>0&&!Y.collisionDetected,A=A&&Y.offscreen,P=Y.occluded}if(p.iconFeatureIndex&&(N=p.iconFeatureIndex),p.iconBox){let r=r=>{H(r);let n=i.hasIconTextFit&&I?tc(I.x,I.y,w,M,this.transform.angle):new e.P(0,0),a=s.getSymbolInstanceIconSize(_,this.transform.zoom,i.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(s,a,r,n,b,d,l,g.predicate)};E=z&&z.box&&z.box.length&&p.verticalIconBox?(F=r(p.verticalIconBox)).box.length>0:(F=r(p.iconBox)).box.length>0,A=A&&F.offscreen,C=F.occluded}let U=y||0===i.numHorizontalGlyphVertices&&0===L,$=v||0===i.numIconVertices;if(U||$?$?U||(E=E&&D):D=E&&D:E=D=E&&D,D&&R&&R.box&&this.collisionIndex.insertCollisionBox(R.box,o.get("text-ignore-placement"),s.bucketInstanceId,z&&z.box&&B?B:j,g.ID),E&&F&&this.collisionIndex.insertCollisionBox(F.box,o.get("icon-ignore-placement"),s.bucketInstanceId,N,g.ID),Y&&(D&&this.collisionIndex.insertCollisionCircles(Y.circles,o.get("text-ignore-placement"),s.bucketInstanceId,j,g.ID),n)){let e=s.bucketInstanceId,i=this.collisionCircleArrays[e];void 0===i&&(i=this.collisionCircleArrays[e]=new to);for(let e=0;e<Y.circles.length;e+=4)i.circles.push(Y.circles[e+0]),i.circles.push(Y.circles[e+1]),i.circles.push(Y.circles[e+2]),i.circles.push(Y.collisionDetected?1:0)}let W="globe"!==s.projection.name;S=S&&(W||!P),k=k&&(W||!C),this.placements[T]=new ts(D||S,E||k,A||s.justReloaded),r.add(T)};if(L&&this.buildingIndex&&(this.buildingIndex.updateZOffset(s,this.retainedQueryData[s.bucketInstanceId].tileID),s.updateZOffset()),T){let i=s.getSortedSymbolIndexes(this.transform.angle);for(let e=i.length-1;e>=0;--e){let r=i[e];D(s.symbolInstances.get(r),r,s.collisionArrays[r])}s.hasAnyZOffset&&e.X(`${s.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(s.hasAnyZOffset){let e=s.getSortedIndexesByZOffset();for(let i=0;i<e.length;++i){let r=e[i];D(s.symbolInstances.get(r),r,s.collisionArrays[r])}}else for(let e=i.symbolInstanceStart;e<i.symbolInstanceEnd;e++)D(s.symbolInstances.get(e),e,s.collisionArrays[e]);if(n&&s.bucketInstanceId in this.collisionCircleArrays){let i=this.collisionCircleArrays[s.bucketInstanceId];e.m.invert(i.invProjMatrix,l),i.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}markUsedJustification(i,r,n,a){let{leftJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:u,crossTileID:h}=n,c=e.aX(r),d=a===e.W.vertical?u:"left"===c?s:"center"===c?o:"right"===c?l:-1;s>=0&&(i.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:h),o>=0&&(i.text.placedSymbolArray.get(o).crossTileID=d>=0&&o!==d?0:h),l>=0&&(i.text.placedSymbolArray.get(l).crossTileID=d>=0&&l!==d?0:h),u>=0&&(i.text.placedSymbolArray.get(u).crossTileID=d>=0&&u!==d?0:h)}markUsedOrientation(i,r,n){let a=r===e.W.horizontal||r===e.W.horizontalOnly?r:0,s=r===e.W.vertical?r:0,{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:l,rightJustifiedTextSymbolIndex:u,verticalPlacedTextSymbolIndex:h}=n,c=i.text.placedSymbolArray;o>=0&&(c.get(o).placedOrientation=a),l>=0&&(c.get(l).placedOrientation=a),u>=0&&(c.get(u).placedOrientation=a),h>=0&&(c.get(h).placedOrientation=s)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;let i=this.prevPlacement,r=!1;this.prevZoomAdjustment=i?i.zoomAdjustment(this.transform.zoom):0;let n=i?i.symbolFadeChange(e):1,a=i?i.opacities:{},s=i?i.variableOffsets:{},o=i?i.placedOrientations:{};for(let e in this.placements){let i=this.placements[e],s=a[e];s?(this.opacities[e]=new ta(s,n,i.text,i.icon,null,i.clipped),r=r||i.text!==s.text.placed||i.icon!==s.icon.placed):(this.opacities[e]=new ta(null,n,i.text,i.icon,i.skipFade,i.clipped),r=r||i.text||i.icon)}for(let e in a){let i=a[e];if(!this.opacities[e]){let a=new ta(i,n,!1,!1);a.isHidden()||(this.opacities[e]=a,r=r||i.text.placed||i.icon.placed)}}for(let e in s)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=s[e]);for(let e in o)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=o[e]);r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=i?i.lastPlacementChangeTime:e)}updateLayerOpacities(e,i){let r=new Set;for(let n of i){let i=n.getBucket(e);i&&n.latestFeatureIndex&&e.fqid===i.layerIds[0]&&(this.updateBucketOpacities(i,r,n.collisionBoxArray),i.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(i,n.tileID),i.updateZOffset()))}}updateBucketOpacities(i,r,n){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();let a=i.layers[0].layout,s=!!i.layers[0].dynamicFilter(),o=new ta(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),u=a.get("icon-allow-overlap"),h=a.get("text-variable-anchor"),c="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),f=new ta(null,0,l&&(u||!i.hasIconData()||a.get("icon-optional")),u&&(l||!i.hasTextData()||a.get("text-optional")),!0);!i.collisionArrays&&n&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(n);let p=(e,i,r)=>{for(let n=0;n<i/4;n++)e.opacityVertexArray.emplaceBack(r)},m=0;for(let n=0;n<i.symbolInstances.length;n++){let a=i.symbolInstances.get(n),{numHorizontalGlyphVertices:l,numVerticalGlyphVertices:u,crossTileID:_,numIconVertices:g}=a,y=r.has(_),v=this.opacities[_];y?v=o:v||(v=f,this.opacities[_]=v),r.add(_);let x=l>0||u>0,b=g>0,w=this.placedOrientations[_],M=w===e.W.vertical,T=w===e.W.horizontal||w===e.W.horizontalOnly;if(!x&&!b||v.isHidden()||m++,x){let e=tp(v.text);p(i.text,l,M?tm:e),p(i.text,u,T?tm:e);let r=v.text.isHidden(),{leftJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:o,verticalPlacedTextSymbolIndex:h}=a,c=i.text.placedSymbolArray,d=r||M?1:0;n>=0&&(c.get(n).hidden=d),s>=0&&(c.get(s).hidden=d),o>=0&&(c.get(o).hidden=d),h>=0&&(c.get(h).hidden=r||T?1:0);let f=this.variableOffsets[_];f&&this.markUsedJustification(i,f.anchor,a,w);let m=this.placedOrientations[_];m&&(this.markUsedJustification(i,"left",a,m),this.markUsedOrientation(i,m,a))}if(b){let e=tp(v.icon),{placedIconSymbolIndex:r,verticalPlacedIconSymbolIndex:n}=a,s=i.icon.placedSymbolArray,o=v.icon.isHidden()?1:0;r>=0&&(p(i.icon,g,M?tm:e),s.get(r).hidden=o),n>=0&&(p(i.icon,a.numVerticalIconVertices,T?tm:e),s.get(n).hidden=o)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){let r=i.collisionArrays[n];if(r){let n=new e.P(0,0),o=!0;if(r.textBox||r.verticalTextBox){if(h){let e=this.variableOffsets[_];e?(n=th(e.anchor,e.width,e.height,e.textOffset,e.textScale),c&&n._rotate(d?this.transform.angle:-this.transform.angle)):o=!1}s&&(o=!v.clipped),r.textBox&&tf(i.textCollisionBox.collisionVertexArray,v.text.placed,!o||M,n.x,n.y),r.verticalTextBox&&tf(i.textCollisionBox.collisionVertexArray,v.text.placed,!o||T,n.x,n.y)}let l=o&&!!(!T&&r.verticalIconBox);r.iconBox&&tf(i.iconCollisionBox.collisionVertexArray,v.icon.placed,l,a.hasIconTextFit?n.x:0,a.hasIconTextFit?n.y:0),r.verticalIconBox&&tf(i.iconCollisionBox.collisionVertexArray,v.icon.placed,!l,a.hasIconTextFit?n.x:0,a.hasIconTextFit?n.y:0)}}}if(i.fullyClipped=0===m,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){let e=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=e.invProjMatrix,i.placementViewportMatrix=e.viewportMatrix,i.collisionCircleArray=e.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,i){let r=this.zoomAtLastRecencyCheck===i?1-this.zoomAdjustment(i):1;return this.zoomAtLastRecencyCheck=i,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function tf(e,i,r,n,a){e.emplaceBack(i?1:0,r?1:0,n||0,a||0),e.emplaceBack(i?1:0,r?1:0,n||0,a||0),e.emplaceBack(i?1:0,r?1:0,n||0,a||0),e.emplaceBack(i?1:0,r?1:0,n||0,a||0)}function tp(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;let i=e.placed?1:0,r=Math.floor(127*e.opacity);return 33554432*r+16777216*i+131072*r+65536*i+512*r+256*i+2*r+i}let tm=0;class t_{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,i,r,n,a){let s=this._bucketParts;for(;this._currentTileIndex<e.length;)if(i.getBucketParts(s,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort((e,i)=>e.sortKey-i.sortKey));this._currentPartIndex<s.length;){let e=s[this._currentPartIndex];if(i.placeLayerBucketPart(e,this._seenCrossTileIDs,r,0===e.symbolInstanceStart),this._currentPartIndex++,a())return!0}return!1}}class tg{constructor(e,i,r,n,a,s,o,l,u){this.placement=new td(e,a,s,o,l,u),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(i,r,n,a){let s=e.a4.now(),o=()=>{let i=e.a4.now()-s;return!this._forceFullPlacement&&i>2};for(;this._currentPlacementIndex>=0;){let s=r[i[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){let i=s.layout.get("symbol-z-elevate"),r=this._inProgressLayer=this._inProgressLayer||new t_(s),l=e.aE(s.source,s.scope);if(r.continuePlacement(i?a[l]:n[l],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}let ty=512/e.J/2;class tv{constructor(i,r,n){this.tileID=i,this.bucketInstanceId=n,this.index=new e.aZ(r.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];let a=i.canonical.x*e.J,s=i.canonical.y*e.J;for(let e=0;e<r.length;e++){let{key:i,crossTileID:n,tileAnchorX:o,tileAnchorY:l}=r.get(e),u=Math.floor((a+o)*ty),h=Math.floor((s+l)*ty);this.index.add(u,h),this.keys.push(i),this.crossTileIDs.push(n)}this.index.finish()}findMatches(i,r,n){let a=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z),s=ty/Math.pow(2,r.canonical.z-this.tileID.canonical.z),o=r.canonical.x*e.J,l=r.canonical.y*e.J;for(let e=0;e<i.length;e++){let r=i.get(e);if(r.crossTileID)continue;let{key:u,tileAnchorX:h,tileAnchorY:c}=r,d=Math.floor((o+h)*s),f=Math.floor((l+c)*s);for(let e of this.index.range(d-a,f-a,d+a,f+a)){let i=this.crossTileIDs[e];if(this.keys[e]===u&&!n.has(i)){n.add(i),r.crossTileID=i;break}}}}}class tx{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class tb{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){let i=Math.round((e-this.lng)/360);if(0!==i)for(let e in this.indexes){let r=this.indexes[e],n={};for(let e in r){let a=r[e];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+i),n[a.tileID.key]=a}this.indexes[e]=n}this.lng=e}addBucket(e,i,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===i.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<i.symbolInstances.length;e++)i.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);let n=this.usedCrossTileIDs[e.overscaledZ];for(let r in this.indexes){let a=this.indexes[r];if(Number(r)>e.overscaledZ)for(let r in a){let s=a[r];s.tileID.isChildOf(e)&&s.findMatches(i.symbolInstances,e,n)}else{let s=a[e.scaledTo(Number(r)).key];s&&s.findMatches(i.symbolInstances,e,n)}}for(let e=0;e<i.symbolInstances.length;e++){let a=i.symbolInstances.get(e);a.crossTileID||(a.crossTileID=r.generate(),n.add(a.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new tv(e,i.symbolInstances,i.bucketInstanceId),!0}removeBucketCrossTileIDs(e,i){for(let r of i.crossTileIDs)this.usedCrossTileIDs[e].delete(r)}removeStaleBuckets(e){let i=!1;for(let r in this.indexes){let n=this.indexes[r];for(let a in n)e[n[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[a]),delete n[a],i=!0)}return i}}class tw{constructor(){this.layerIndexes={},this.crossTileIDs=new tx,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,i,r,n){let a=this.layerIndexes[e.fqid];void 0===a&&(a=this.layerIndexes[e.fqid]=new tb);let s=!1,o={};for(let l of("globe"!==n.name&&a.handleWrapJump(r),i)){let i=l.getBucket(e);i&&e.fqid===i.layerIds[0]&&(i.bucketInstanceId||(i.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(l.tileID,i,this.crossTileIDs)&&(s=!0),o[i.bucketInstanceId]=!0)}return a.removeStaleBuckets(o)&&(s=!0),s}pruneUnusedLayers(e){let i={};for(let r in e.forEach(e=>{i[e]=!0}),this.layerIndexes)i[r]||delete this.layerIndexes[r]}}var tM="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef RENDER_CUTOFF\nfloat cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}\n#endif",tT="\nout vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#ifdef INDICATOR_CUTOUT\nuniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;\n#endif\nvec4 applyCutout(vec4 color) {\n#ifdef INDICATOR_CUTOUT\nfloat holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);\n#else\nreturn color;\n#endif\n}\n#ifdef DEBUG_WIREFRAME\n#define HANDLE_WIREFRAME_DEBUG \\\nglFragColor=vec4(0.7,0.0,0.0,0.7); \\\ngl_FragDepth=gl_FragCoord.z-0.0001;\n#else\n#define HANDLE_WIREFRAME_DEBUG\n#endif\n#ifdef RENDER_CUTOFF\nuniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;\n#endif\nvec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}",tL="\n#define EXTENT 8192.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}\n#ifdef RENDER_CUTOFF\nuniform vec4 u_cutoff_params;out float v_cutoff_opacity;\n#endif\nconst vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}",tS="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",tk="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",tD="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",tE="highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {\n#ifdef FOG_DITHERING\nvec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);\n#else\nreturn color;\n#endif\n}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",tA="#ifdef RASTER_ARRAY\nuniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);vec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return (texCoord.xxyy+vec2(1.5,0.5).xyxy)/texResolution.xxyy;}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;vec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texture(u_image0,c.yz),texture(u_image0,c.xz),texture(u_image0,c.yw),texture(u_image0,c.xw)\n);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;vec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texture(u_image1,c.yz),texture(u_image1,c.xz),texture(u_image1,c.yw),texture(u_image1,c.xw)\n);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texture(u_image0,texCoord);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texture(u_image1,texCoord);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}\n#endif",tP="#ifdef RENDER_SHADOWS\nuniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}\n#endif//RENDER_SHADOWS",tC="#ifdef RENDER_SHADOWS\n#ifdef DEPTH_TEXTURE\nuniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;\n#else\nuniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;\n#endif\nuniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;\n#ifdef DEPTH_TEXTURE\nshadow_depth=texture(u_shadowmap_1,uv).r;\n#else\nshadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;\n#endif\nreturn step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;\n#ifdef DEPTH_TEXTURE\nshadow_depth=texture(u_shadowmap_0,uv).r;\n#else\nshadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;\n#endif\nreturn step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;\n#ifdef NATIVE\nhighp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));\n#else\nhighp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(\nshadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)\n);\n#endif\nvec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {\n#ifdef SHADOWS_SINGLE_CASCADE\nlight_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);\n#else\nlight_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));\n#endif\n}highp float calculate_shadow_bias(float NDotL) {\n#ifdef NORMAL_OFFSET\nreturn 0.5*u_shadow_bias.x;\n#else\nreturn 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));\n#endif\n}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}\n#endif";let tI=[];tF(tM,tI),tF(tL,tI),tF(tT,tI);let tO={"_prelude_fog.vertex.glsl":tD,"_prelude_terrain.vertex.glsl":tk,"_prelude_shadow.vertex.glsl":tP,"_prelude_fog.fragment.glsl":tE,"_prelude_shadow.fragment.glsl":tC,"_prelude_lighting.glsl":"\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}\n#endif//LIGHTING_3D_MODE","_prelude_raster_array.glsl":tA},tz={};tj("",tk),tj(tE,tD),tj(tC,tP),tj(tA,"");let tR=tj(tT,tL);var tY={background:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nin vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_lighting.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),backgroundPattern:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),circle:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nuniform float u_emissive_strength;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\nglFragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nout vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}'),clippingMask:tj("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tj('#include "_prelude_fog.fragment.glsl"\nuniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nout vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),heatmapTexture:tj("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(0.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}","in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:tj("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",'#include "_prelude_terrain.vertex.glsl"\nin vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}'),collisionCircle:tj("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}","in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:tj("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",'#include "_prelude_terrain.vertex.glsl"\nin vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;\n#endif\nout vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}'),fill:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nuniform float u_emissive_strength;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillOutline:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin highp vec2 v_pos;uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillOutlinePattern:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillPattern:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillExtrusion:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec4 v_color;in vec4 v_flat;\n#ifdef RENDER_SHADOWS\nin highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;\n#endif\nuniform lowp float u_opacity;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec2 v_ao;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nin vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nin highp vec3 v_normal;\n#endif\nuniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nin float v_flood_radius;in float v_has_floodlight;\n#endif\nuniform float u_emissive_strength;in float v_height;void main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nvec3 normal=normalize(v_normal);\n#endif\nfloat z;vec4 color=v_color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);\n#ifdef LIGHTING_3D_MODE\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#else\ncolor=mix(v_color,v_roof_color,z);\n#endif\n#endif\nfloat h=max(0.0,v_height);float ao_shade=1.0;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\ncolor.rgb*=mix(ao_shade,1.0,v_has_floodlight);\n#else\ncolor.rgb*=ao_shade;\n#endif\n#else\ncolor.rgb*=ao_shade;\n#endif\n#endif\n#ifdef LIGHTING_3D_MODE\nfloat flood_radiance=0.0;\n#ifdef FLOOD_LIGHT\nflood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef FLOOD_LIGHT\nfloat ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);\n#else\nfloat shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);\n#endif\n#else\ncolor.rgb=apply_lighting(color.rgb,normal);\n#ifdef FLOOD_LIGHT\ncolor.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);\n#endif\n#endif\ncolor.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));\n#endif\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nuniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nout vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nout highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec2 v_ao;\n#endif\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nout float v_flood_radius;out float v_has_floodlight;\n#endif\nout float v_height;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define highp float flood_light_wall_radius\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize highp float flood_light_wall_radius\nbase*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nv_normal=normal;\n#endif\nbase=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat cutoff=1.0;vec3 scaled_pos=pos;\n#ifdef RENDER_CUTOFF\nvec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);\n#endif\nfloat hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=pos;vec3 shd_pos1=pos;\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifndef LIGHTING_3D_MODE\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#endif\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\nfloat is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;\n#endif\nv_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);\n#else\nv_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),fillExtrusionDepth:tj("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\nout highp float v_depth;void main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\nbase*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nvec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);\n#else\npos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}'),fillExtrusionPattern:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nin vec3 v_normal;\n#endif\nin vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define highp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize highp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nout vec2 v_pos;out vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nout vec3 v_normal;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define mediump vec4 pattern\n#pragma mapbox: define highp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize highp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_normal=normal;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}'),groundShadow:tj('#include "_prelude_shadow.fragment.glsl"\nprecision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\nvoid main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);\n#ifdef RENDER_CUTOFF\nshadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,v_depth));\n#endif\n#ifdef FOG\nshadow=mix(shadow,vec3(1.0),v_fog_opacity);\n#endif\n#ifdef INDICATOR_CUTOUT\nshadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);\n#endif\nglFragColor=vec4(shadow,1.0);}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);v_depth=gl_Position.w;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);\n#endif\n}'),fillExtrusionGroundEffect:tj("uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;\n#ifdef SDF_SUBPASS\nin highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}\n#ifdef FOG\nin highp float v_fog;\n#endif\n#endif\nvoid main() {\n#ifdef CLEAR_SUBPASS\nvec4 color=vec4(1.0);\n#ifdef CLEAR_FROM_TEXTURE\ncolor=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));\n#endif\nglFragColor=color;\n#else\n#ifdef SDF_SUBPASS\nhighp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;\n#ifdef FOG\nfog=v_fog;\n#endif\n#ifdef RENDER_CUTOFF\nfog*=v_cutoff_opacity;\n#endif\nglFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));\n#else\nvec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);\n#ifdef OVERDRAW_INSPECTOR\ncolor=vec4(1.0);\n#endif\nglFragColor=color;HANDLE_WIREFRAME_DEBUG;\n#endif\n#endif\n}",'#include "_prelude_fog.vertex.glsl"\nin highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;\n#ifdef SDF_SUBPASS\nout highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;\n#ifdef FOG\nout highp float v_fog;\n#endif\n#endif\nuniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;\n#pragma mapbox: define highp float flood_light_ground_radius\nconst float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {\n#pragma mapbox: initialize highp float flood_light_ground_radius\nvec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;\n#ifdef SDF_SUBPASS\nv_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);\n#ifdef FOG\nv_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);\n#endif\n#endif\nfloat hidden_by_landmark=0.0;\n#ifdef HAS_CENTROID\nhidden_by_landmark=a_hidden_by_landmark;\n#endif\nfloat isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n}'),hillshadePrepare:tj("precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\nglFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);\n#endif\n#ifdef FOG\nglFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),line:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;in vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nfloat luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\nif (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    \nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nout_color*=(alpha*opacity);\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#define EXTRUDE_SCALE 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nin highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nin float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),linePattern:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting_ground(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ncolor*=(alpha*opacity);\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),raster:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_raster_array.glsl"\nuniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;\n#ifndef RASTER_ARRAY\nuniform sampler2D u_image0;uniform sampler2D u_image1;\n#endif\n#ifdef RASTER_COLOR\nuniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;\n#endif\nvoid main() {vec4 color0,color1,color;vec2 value;\n#ifdef RASTER_COLOR\n#ifdef RASTER_ARRAY\n#ifdef RASTER_ARRAY_LINEAR\nvalue=mix(\nraTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#else\nvalue=mix(\nraTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#endif\nif (value.y > 0.0) value.x/=value.y;\n#else\ncolor=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);\n#endif\ncolor=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;\n#else\ncolor0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);\n#endif\ncolor.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;\n#endif\n#ifdef FOG\nhighp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));\n#endif\nglFragColor=vec4(out_color*color.a,color.a);\n#ifdef RENDER_CUTOFF\nglFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;\n#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8;\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;in vec2 a_texture_pos;\n#endif\nout vec2 v_pos0;out vec2 v_pos1;out float v_depth;void main() {vec2 uv;\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);\n#endif\n#else\nfloat w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n#else\ngl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#endif\n#endif\nv_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;\n#ifdef RENDER_CUTOFF\nv_depth=gl_Position.z;\n#endif\n}'),symbolIcon:tj('#include "_prelude_lighting.glsl"\nuniform sampler2D u_texture;\n#ifdef ICON_TRANSITION\nuniform float u_icon_transition;\n#endif\nin float v_fade_opacity;in vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nin vec2 v_tex_b;\n#endif\nuniform mediump float u_icon_saturation;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float emissive_strength\nlowp float alpha=opacity*v_fade_opacity;vec4 out_color;\n#ifdef ICON_TRANSITION\nvec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;\n#else\nout_color=texture(u_texture,v_tex_a)*alpha;\n#endif\n#ifdef SATURATION\nvec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\n#ifdef ICON_TRANSITION\nin vec2 a_texb;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nout vec2 v_tex_b;\n#endif\nout float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float emissive_strength\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nv_tex_a=a_tex/u_texsize;\n#ifdef ICON_TRANSITION\nv_tex_b=a_texb/u_texsize;\n#endif\nv_fade_opacity=out_fade_opacity;}'),symbolSDF:tj('#include "_prelude_lighting.glsl"\n#define SDF_PX 8.0\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout float v_draw_halo;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nfloat gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}'),symbolTextAndIcon:tj('#include "_prelude_lighting.glsl"\n#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef Z_OFFSET\nin float a_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout float v_draw_halo;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nfloat out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);\n#endif\nfloat gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}'),terrainRaster:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;in vec2 v_pos0;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nin vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth;\n#endif\nuniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;\n#ifdef LIGHTING_3D_MODE\nconst vec3 normal=vec3(0.0,0.0,1.0);\n#ifdef RENDER_SHADOWS\nfloat cutoffOpacity=1.0;\n#ifdef RENDER_CUTOFF\ncutoffOpacity=cutoff_opacity(u_cutoff_params,v_depth);\n#endif\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nvec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,v_depth,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;\n#else\nfloat lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));\n#endif\n#else\nfloat lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;\n#endif\n#endif\n#else\ncolor=image_color;\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;\n#endif\nvoid main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}'),terrainDepth:tj("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}'),skybox:tj('#include "_prelude_fog.fragment.glsl"\nin lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',tS),skyboxGradient:tj('#include "_prelude_fog.fragment.glsl"\nin highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',tS),skyboxCapture:tj("\nin highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}","in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;in vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nraster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);\n#else\nraster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;\n#else\ncolor=apply_lighting_ground(color);\n#endif\n#endif\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;\n#endif\nout vec2 v_pos0;void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);globe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}'),globeAtmosphere:tj('#include "_prelude_fog.fragment.glsl"\nuniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {\n#ifdef ALPHA_PASS\nglFragColor=vec4(0,0,0,0);return;\n#else\n#ifdef NATIVE\nglFragColor=vec4(1,1,1,1);\n#else\nglFragColor=vec4(0,0,0,1);\n#endif\nreturn;\n#endif\n}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;\n#ifdef ALPHA_PASS\nfloat a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);\n#else\nvec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;\n#ifndef NATIVE\nc=dither(c,gl_FragCoord.xy+u_temporal_offset);\n#endif\nglFragColor=vec4(c*t,t);\n#endif\n}',"in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}"),model:tj('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;\n#ifdef RENDER_SHADOWS\nin vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;\n#endif\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nuniform vec4 u_occlusionTextureTransform;\n#endif\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#ifdef HAS_ATTRIBUTE_a_pbr\nin lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;\n#endif\n#ifdef HAS_TEXTURE_u_baseColorTexture\nuniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;\n#endif\n#ifdef HAS_TEXTURE_u_metallicRoughnessTexture\nuniform sampler2D u_metallicRoughnessTexture;\n#endif\n#ifdef HAS_TEXTURE_u_occlusionTexture\nuniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;\n#endif\n#ifdef HAS_TEXTURE_u_normalTexture\nuniform sampler2D u_normalTexture;\n#endif\n#ifdef HAS_TEXTURE_u_emissionTexture\nuniform sampler2D u_emissionTexture;\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nin highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}\n#endif\n#define saturate(_x) clamp(_x,0.,1.)\nvec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)\n{\n#ifdef LIGHTING_3D_MODE\nvec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));\n#endif\nreturn apply_lighting(albedo,transformed_normal,lighting_factor);\n#else\nvec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;\n#endif\n}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;\n#ifdef HAS_ATTRIBUTE_a_color_3f\nalbedo*=vec4(color_3f,1.0);\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#else\n#ifdef HAS_ATTRIBUTE_a_color_4f\nalbedo*=color_4f;\n#endif\n#endif\n#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)\nvec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}\n#ifdef UNPREMULT_TEXTURE_IN_SHADER\nif(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;\n#endif\nif(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}\n#endif\nreturn vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {\n#ifdef HAS_TEXTURE_u_normalTexture\nhighp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;\n#else\nreturn mat3(1.0);\n#endif\n}highp vec3 getNormal(){highp vec3 n;\n#ifdef HAS_ATTRIBUTE_a_normal_3f\nn=normalize(normal_3f);\n#else\nhighp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;\n#endif\n#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nvec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);\n#endif\nreturn n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;\n#ifdef HAS_ATTRIBUTE_a_pbr\nmat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;\n#endif\n#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) \nvec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;\n#endif\nconst float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)\n{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)\n{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)\n{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)\n{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)\n{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)\n{\n#ifdef LIGHTING_3D_MODE\nreturn mat.diffuseColor;\n#else\nreturn mat.diffuseColor/PI;\n#endif\n}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)\n{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)\n{vec3 env_light=vec3(0.65,0.65,0.65);\n#ifdef LIGHTING_3D_MODE\nfloat ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;\n#endif\nvec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)\n{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=NdotL;\n#endif\nvec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;\n#if !defined(LIGHTING_3D_MODE)\nconst vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);\n#endif\ncolor*=intensityFactor;return color;}void main() {\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nif (isOccluded()) {discard;}\n#endif\nvec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;\n#ifdef LIGHTING_3D_MODE\nlightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;\n#endif\nvec4 finalColor;\n#ifdef DIFFUSE_SHADED\nvec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);\n#ifdef HAS_TEXTURE_u_occlusionTexture\nfloat ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;\n#endif\nfinalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;\n#else\nMaterial mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;\n#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nvec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;\n#else\nvec2 uv=uv_2f;\n#endif\nao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;\n#endif\nvec4 emissive=u_emissiveFactor;\n#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nemissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);\n#endif\ncolor+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;\n#ifdef HAS_ATTRIBUTE_a_pbr\nfloat resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));\n#ifdef HAS_ATTRIBUTE_a_color_4f\nfloat distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);\n#endif\n#endif\nvec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);\n#endif\n#ifdef FOG\nfinalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));\n#endif\n#ifdef RENDER_CUTOFF\nfinalColor*=v_cutoff_opacity;\n#endif\n#ifdef INDICATOR_CUTOUT\nfinalColor=applyCutout(finalColor);\n#endif\nglFragColor=finalColor;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec3 a_pos_3f;\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr\n#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength\nuniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_normal_matrix;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;\n#endif\nout vec4 v_position_height;out lowp vec4 v_color_mix;\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nout highp float v_depth;\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\nout lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;\n#endif\nvec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute-custom highp vec4 pbr\n#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength\nhighp mat4 normal_matrix;\n#ifdef INSTANCED_ARRAYS\nnormal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\nnormal_matrix=u_normal_matrix;\n#endif\nvec3 local_pos;mat3 rs;\n#ifdef MODEL_POSITION_ON_GPU\nvec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;\n#else\nlocal_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);\n#endif\nv_position_height.w=a_pos_3f.z;\n#ifdef HAS_ATTRIBUTE_a_pbr\nvec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(local_pos);\n#endif\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nfloat x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);\n#else\nnormal_3f=vec3(normal_matrix*vec4(normal_3f,0));\n#endif\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#ifdef HAS_ATTRIBUTE_a_color_4f\nv_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 shadow_pos=local_pos;\n#ifdef NORMAL_OFFSET\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nvec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();\n#else\nvec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();\n#endif\n#endif\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;\n#endif\n}'),modelDepth:tj("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}","in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;\n#ifdef MODEL_POSITION_ON_GPU\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_instance;\n#endif\nuniform highp mat4 u_node_matrix;\n#endif\nvoid main() {\n#ifdef MODEL_POSITION_ON_GPU\nhighp mat4 instance;\n#ifdef INSTANCED_ARRAYS\ninstance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\ninstance=u_instance;\n#endif\nvec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;\n#else\ngl_Position=u_matrix*vec4(a_pos_3f,1);\n#endif\nv_depth=gl_Position.z/gl_Position.w;}"),stars:tj("in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)\n{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}","\nin vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}")};function tF(e,i){for(let r of e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n"))if("#"===(r=r.trim())[0]&&r.includes("if")&&!r.includes("endif"))for(let e of(r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim()).split(" "))i.includes(e)||i.push(e)}function tj(e,i){let r=/#include\s+"([^"]+)"/g,n=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g,a=i.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);a&&(a=a.map(e=>{let i=e.split(" ");return i[i.length-1]}),a=[...new Set(a)]);let s={},o=[],l=[];if(e=e.replace(r,(e,i)=>(l.push(i),"")),(i=i.replace(r,(e,i)=>(o.push(i),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let u=[...tI];for(let r of(tF(e,u),tF(i,u),[...o,...l]))tO[r]||console.error(`Undefined include: ${r}`),tz[r]||(tz[r]=[],tF(tO[r],tz[r])),u=[...u,...tz[r]];return{fragmentSource:e=e.replace(n,(e,i,r,n,a)=>(s[a]=!0,"define"===i?`
#ifndef HAS_UNIFORM_u_${a}
in ${r} ${n} ${a};
#else
uniform ${r} ${n} u_${a};
#endif
`:"initialize"===i?`
#ifdef HAS_UNIFORM_u_${a}
    ${r} ${n} ${a} = u_${a};
#endif
`:"define-attribute"===i?`
#ifdef HAS_ATTRIBUTE_a_${a}
    in ${r} ${n} ${a};
#endif
`:"initialize-attribute"===i?"":void 0)),vertexSource:i=i.replace(n,(e,i,r,n,a)=>{let o="float"===n?"vec2":n,l=a.match(/color/)?"color":o;return"define-attribute-vertex-shader-only"===i?`
#ifdef HAS_ATTRIBUTE_a_${a}
in ${r} ${n} a_${a};
#endif
`:s[a]?"define"===i?`
#ifndef HAS_UNIFORM_u_${a}
uniform lowp float u_${a}_t;
in ${r} ${o} a_${a};
out ${r} ${n} ${a};
#else
uniform ${r} ${n} u_${a};
#endif
`:"initialize"===i?"vec4"===l?`
#ifndef HAS_UNIFORM_u_${a}
    ${a} = a_${a};
#else
    ${r} ${n} ${a} = u_${a};
#endif
`:`
#ifndef HAS_UNIFORM_u_${a}
    ${a} = unpack_mix_${l}(a_${a}, u_${a}_t);
#else
    ${r} ${n} ${a} = u_${a};
#endif
`:"define-attribute"===i?`
#ifdef HAS_ATTRIBUTE_a_${a}
    in ${r} ${n} a_${a};
    out ${r} ${n} ${a};
#endif
`:"initialize-attribute"===i?`
#ifdef HAS_ATTRIBUTE_a_${a}
    ${a} = a_${a};
#endif
`:void 0:"define"===i?`
#ifndef HAS_UNIFORM_u_${a}
uniform lowp float u_${a}_t;
in ${r} ${o} a_${a};
#else
uniform ${r} ${n} u_${a};
#endif
`:"define-instanced"===i?"mat4"===l?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${a}0;
in vec4 a_${a}1;
in vec4 a_${a}2;
in vec4 a_${a}3;
#else
uniform ${r} ${n} u_${a};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${r} ${o} a_${a};
#else
uniform ${r} ${n} u_${a};
#endif
`:"initialize-attribute-custom"===i?`
#ifdef HAS_ATTRIBUTE_a_${a}
    ${r} ${n} ${a} = a_${a};
#endif
`:"vec4"===l?`
#ifndef HAS_UNIFORM_u_${a}
    ${r} ${n} ${a} = a_${a};
#else
    ${r} ${n} ${a} = u_${a};
#endif
`:`
#ifndef HAS_UNIFORM_u_${a}
    ${r} ${n} ${a} = unpack_mix_${l}(a_${a}, u_${a}_t);
#else
    ${r} ${n} ${a} = u_${a};
#endif
`}),staticAttributes:a,usedDefines:u,vertexIncludes:o,fragmentIncludes:l}}class tB{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,i,r,n,a,s,o,l){this.context=e;let u=this.boundPaintVertexBuffers.length!==n.length;for(let e=0;!u&&e<n.length;e++)this.boundPaintVertexBuffers[e]!==n[e]&&(u=!0);let h=this.boundDynamicVertexBuffers.length!==o.length;for(let e=0;!h&&e<o.length;e++)this.boundDynamicVertexBuffers[e]!==o[e]&&(h=!0);if(!this.vao||this.boundProgram!==i||this.boundLayoutVertexBuffer!==r||u||h||this.boundIndexBuffer!==a||this.boundVertexOffset!==s)this.freshBind(i,r,n,a,s,o,l);else{for(let r of(e.bindVertexArrayOES.set(this.vao),o))r&&(r.bind(),l&&r.instanceCount&&r.setVertexAttribDivisor(e.gl,i,l));a&&a.dynamicDraw&&a.bind()}}freshBind(e,i,r,n,a,s,o){let l=e.numAttributes,u=this.context,h=u.gl;for(let o of(this.vao&&this.destroy(),this.vao=u.gl.createVertexArray(),u.bindVertexArrayOES.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=i,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=a,this.boundDynamicVertexBuffers=s,i.enableAttributes(h,e),i.bind(),i.setVertexAttribPointers(h,e,a),r))o.enableAttributes(h,e),o.bind(),o.setVertexAttribPointers(h,e,a);for(let i of s)i&&(i.enableAttributes(h,e),i.bind(),i.setVertexAttribPointers(h,e,a),o&&i.instanceCount&&i.setVertexAttribDivisor(h,e,o));n&&n.bind(),u.currentNumAttributes=l}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function tN(i,r,n){if(!r.needsDEMTextureUpload)return;let a=i.context,s=a.gl;a.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||i.getTileTexture(n.stride);let o=n.getPixels();r.demTexture?r.demTexture.update(o,{premultiply:!1}):r.demTexture=new e.a9(a,o,s.R32F,{premultiply:!1}),r.needsDEMTextureUpload=!1}let tH=i=>({u_matrix:new e.a_(i),u_image0:new e.a$(i),u_skirt_height:new e.b2(i),u_ground_shadow_factor:new e.b7(i)}),tV=(e,i,r)=>({u_matrix:e,u_image0:0,u_skirt_height:i,u_ground_shadow_factor:r}),tU=(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(n),u_merc_matrix:r,u_zoom_transition:a,u_merc_center:s,u_image0:0,u_frustum_tl:o,u_frustum_tr:l,u_frustum_br:u,u_frustum_bl:h,u_globe_pos:c,u_globe_radius:d,u_viewport:f,u_grid_matrix:m?Float32Array.from(m):new Float32Array(9),u_skirt_height:p}),t$=(i,r)=>{if(r>0&&i.terrain&&e.X("Cutoff is currently disabled on terrain"),r<=0||i.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};let n=i.transform,a=Math.max(Math.abs(n._zoom-(i.minCutoffZoom-1)),1),s=n.isLODDisabled(!1)?e.an(60,45,n.pitch):e.an(30,15,n.pitch),o=n._farZ-n._nearZ,l=r*n.height,u=((1-s)*n.cameraToCenterDistance+s*(n._farZ+l))*a;return{shouldRenderCutoff:s<1,uniformValues:{u_cutoff_params:[n._nearZ,n._farZ,(u-n._nearZ)/o,(u-l-n._nearZ)/o]}}};function tW(e,i){return null!=e&&null!=i&&!(!e.hasData()||!i.hasData())&&null!=e.demTexture&&null!=i.demTexture&&e.tileID.key!==i.tileID.key}let tG=new class{constructor(){this.operations={}}newMorphing(e,i,r,n,a){if(e in this.operations){let i=this.operations[e];i.to.tileID.key!==r.tileID.key&&(i.queued=r)}else this.operations[e]={startTime:n,phase:0,duration:a,from:i,to:r,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;let i=this.operations[e];return{from:i.from,to:i.to,phase:i.phase}}update(e){for(let i in this.operations){let r=this.operations[i];for(r.phase=(e-r.startTime)/r.duration;r.phase>=1||!this._validOp(r);)if(!this._nextOp(r,e)){delete this.operations[i];break}}}_nextOp(e,i){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=i,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},tq={0:null,1:"TERRAIN_VERTEX_MORPHING"};function tZ(e,i,r){return 0===i?0:6*Math.pow(1.5,22-e)*Math.max(i,1)*(i<1&&514===r?.25/i:1)}let tX=e=>({u_matrix:e});function tJ(i,r,n,a,s){if(s>0){let o=e.a4.now(),l=(o-i.timeAdded)/s,u=r?(o-r.timeAdded)/s:-1,h=n.getSource(),c=a.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),d=!r||Math.abs(r.tileID.overscaledZ-c)>Math.abs(i.tileID.overscaledZ-c),f=d&&i.refreshedUponExpiration?1:e.c(d?l:1-u,0,1);return i.refreshedUponExpiration&&l>=1&&(i.refreshedUponExpiration=!1),r?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}class tK extends e.bq{constructor(i){let r=eQ("mock-dem",{type:"raster-dem",maxzoom:i.transform.maxZoom},new e.br(e.bs(),null),i.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,i){e.state="loaded",i(null)}}class tQ extends e.bq{constructor(i){let r=eQ("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new e.br(e.bs(),null),i.style);super("proxy",r,!1),r.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,r,n){if(i.freezeTileCoverage)return;this.transform=i;let a=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((r,n)=>{if(r[n.key]="",!this._tiles[n.key]){let r=new e.bt(n,this._source.tileSize*n.overscaleFactor(),i.tileZoom);r.state="loaded",this._tiles[n.key]=r}return r},{});for(let e in this._tiles)e in a||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){let i=this.proxyCachedFBO[e];if(void 0!==i){let r=Object.values(i);this.renderCachePool.push(...r),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach(e=>e.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class t0 extends e.O{constructor(e,i,r){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=i,this.projMatrix=r}}class t1 extends e.bk{constructor(i,r){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},i.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};let[n,a,s]=function(i){let r=new e.bo,n=new e.bp;r.reserve(17161),n.reserve(33800);let a=e.J/128,s=e.J+a/2,o=s+a;for(let i=-a;i<o;i+=a)for(let n=-a;n<o;n+=a){let a=n<0||n>s||i<0||i>s?24575:0,o=e.c(Math.round(n),0,e.J),l=e.c(Math.round(i),0,e.J);r.emplaceBack(o+a,l)}let l=(e,i)=>{let r=131*i+e;n.emplaceBack(r+1,r,r+131),n.emplaceBack(r+131,r+131+1,r+1)};for(let e=1;e<129;e++)for(let i=1;i<129;i++)l(i,e);return[0,129].forEach(e=>{for(let i=0;i<130;i++)l(i,e),l(e,i)}),[r,n,32768]}(),o=i.context;this.gridBuffer=o.createVertexBuffer(n,e.bl.members),this.gridIndexBuffer=o.createIndexBuffer(a),this.gridSegments=e.bm.simpleSegment(0,0,n.length,a.length),this.gridNoSkirtSegments=e.bm.simpleSegment(0,0,n.length,s),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new tQ(r.map),this.orthoMatrix=e.m.create(),e.m.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.J,0,e.J,0,1);let l=o.gl;this._overlapStencilMode=new e.b6({func:l.GEQUAL,mask:255},0,255,l.KEEP,l.KEEP,l.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=r,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new tK(r.map),this._pendingGroundEffectLayers=[]}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),this._style=e,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,r,n){if(i&&i.terrain){this._style!==i&&(this.style=i,this._evaluationZoom=void 0);let a=i.terrain.properties,s=0===i.terrain.drapeRenderMode,o=i.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=e.a4.now();let l=i.terrain&&i.terrain.scope,u=a.get("source"),h=s?this._mockSourceCache:i.getSourceCache(u,l);if(!h)return void e.X(`Couldn't find terrain source "${u}".`);if(this.sourceCache=h,this._exaggeration=o?this.calculateExaggeration(r):a.get("exaggeration"),!r.projection.requiresDraping&&o&&0===this._exaggeration)return void this._disable();this.enabled=!0;let c=()=>{this.sourceCache.used&&e.X(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);let i=this.getScaledDemTileSize();this.sourceCache.update(r,i,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,c(),this._initializing=!0),c(),r.updateElevation(!0,n),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(r),this._emptyDEMTextureDirty=!0,this._previousZoom=r.zoom}else this._disable()}calculateExaggeration(i){let r=this._previousCameraAltitude,n=i.getFreeCameraOptions().position.z/i.pixelsPerMeter*i.worldSize;this._previousCameraAltitude=n;let a=null!=r?n-r:Number.MAX_VALUE;if(2>Math.abs(a))return this._exaggeration;let s=i.zoom,o=this._style.terrain;if(!this._previousUpdateTimestamp)return o.getExaggeration(s);let l=s-this._previousZoom,u=this._previousUpdateTimestamp,h=s;null!=this._evaluationZoom&&(Math.abs(s-(h=this._evaluationZoom))>.5&&(l=.5*(s-h+l)),l*a<0&&(h+=l)),this._evaluationZoom=h;let c=o.getExaggeration(h),d=c===o.getExaggeration(Math.max(0,h-.1));if(d&&.01>Math.abs(c-this._exaggeration))return c;let f=Math.min(.1,.00375*(this._updateTimestamp-u));return(d||c<.1||1e-4>Math.abs(l))&&(f=Math.min(.2,4*f)),e.n(this._exaggeration,c,f)}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(let e in this._style._mergedSourceCaches)this._style._mergedSourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(e=>e.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){let e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;let r=this.proxySourceCache,n=this.painter.transform;this._initializing&&(this._initializing=0===n._centerAltitude&&-1===this.getAtPointOrZero(e.M.fromLngLat(n.center),-1),this._emptyDEMTextureDirty=!this._initializing);let a=this.proxyCoords=r.getIds().map(e=>{let i=r.getTileByID(e).tileID;return i.projMatrix=n.calculateProjMatrix(i.toUnwrapped()),i});!function(i,r){let n=r.transform.pointCoordinate(r.transform.getCameraPoint()),a=new e.P(n.x,n.y);i.sort((i,r)=>{if(r.overscaledZ-i.overscaledZ)return r.overscaledZ-i.overscaledZ;let n=new e.P(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),s=new e.P(r.canonical.x+(1<<r.canonical.z)*r.wrap,r.canonical.y),o=a.mult(1<<i.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(n)-o.distSqr(s)})}(a,this.painter);let s=this.proxyToSource||{};this.proxyToSource={},a.forEach(e=>{this.proxyToSource[e.key]={}}),this.terrainTileForTile={};let o=this._style._mergedSourceCaches;for(let e in o){let r=o[e];if(!r.used||(r!==this.sourceCache&&this.resetTileLookupCache(r.id),this._setupProxiedCoordsForOrtho(r,i[e],s),r.usedForTerrain))continue;let n=i[e];r.getSource().reparseOverscaled&&this._assignTerrainTiles(n)}this.proxiedCoords[r.id]=a.map(e=>new t0(e,e.key,this.orthoMatrix)),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(s),this.renderingToTexture=!1;let l={};for(let e of(this._visibleDemTiles=[],this.proxyCoords)){let i=this.terrainTileForTile[e.key];if(!i)continue;let r=i.tileID.key;r in l||(this._visibleDemTiles.push(i),l[r]=r)}}_assignTerrainTiles(e){this._initializing||e.forEach(e=>{if(this.terrainTileForTile[e.key])return;let i=this._findTileCoveringTileID(e,this.sourceCache);i&&(this.terrainTileForTile[e.key]=i)})}_prepareDEMTextures(){let e=this.painter.context,i=e.gl;for(let r in this.terrainTileForTile){let n=this.terrainTileForTile[r],a=n.dem;a&&(!n.demTexture||n.needsDEMTextureUpload)&&(e.activeTexture.set(i.TEXTURE1),tN(this.painter,n,a))}}_prepareDemTileUniforms(e,i,r,n){if(!i||null==i.demTexture)return!1;let a=e.tileID.canonical,s=Math.pow(2,i.tileID.canonical.z-a.z),o=n||"";return r[`u_dem_tl${o}`]=[a.x*s%1,a.y*s%1],r[`u_dem_scale${o}`]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){let i=this.painter.context,r=i.gl;if(!this._emptyDepthBufferTexture){let n=new e.a5({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.a9(i,n,r.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0,i=this._visibleDemTiles.reduce((i,r)=>{if(!r.dem)return i;let n=r.dem.tree.minimums[0];return n>0&&e++,i+n},0);return e?i/e:0}_updateEmptyDEMTexture(){let i=this.painter.context,r=i.gl;i.activeTexture.set(r.TEXTURE2);let n=this._getLoadedAreaMinimum(),[a,s]=(()=>{let i=new e.bu({width:1,height:1},new Float32Array([n]));return[r.R32F,i]})();this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(s,{premultiply:!1}):o=this._emptyDEMTexture=new e.a9(i,s,a,{premultiply:!1}),o}setupElevationDraw(i,r,n){let a=this.painter.context,s=a.gl,o={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};o.u_exaggeration=this.exaggeration();let l=null,u=null,h=1;if(n&&n.morphing&&this._useVertexMorphing){let e=n.morphing.srcDemTile,r=n.morphing.dstDemTile;h=n.morphing.phase,e&&r&&(this._prepareDemTileUniforms(i,e,o,"_prev")&&(u=e),this._prepareDemTileUniforms(i,r,o)&&(l=r))}let c=e=>e&&e.demTexture&&this.painter.linearFloatFilteringSupported()?s.LINEAR:s.NEAREST,d=e=>{o.u_dem_size=1===e.size[0]?1:e.size[0]-2};if(u&&l)a.activeTexture.set(s.TEXTURE2),l.demTexture.bind(c(l),s.CLAMP_TO_EDGE),a.activeTexture.set(s.TEXTURE4),u.demTexture.bind(c(u),s.CLAMP_TO_EDGE),l.demTexture&&d(l.demTexture),o.u_dem_lerp=h;else{l=this.terrainTileForTile[i.tileID.key],a.activeTexture.set(s.TEXTURE2);let e=this._prepareDemTileUniforms(i,l,o)?l.demTexture:this.emptyDEMTexture;e.bind(c(l),s.CLAMP_TO_EDGE),d(e)}if(a.activeTexture.set(s.TEXTURE3),n&&n.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),this._depthFBO&&(o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE),o.u_depth_size_inv=[1,1]),n&&n.useMeterToDem&&l){let i=(1<<l.tileID.canonical.z)*e.b(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=i}if(n&&n.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),r.setTerrainUniformValues(a,o),"globe"===this.painter.transform.projection.name){let e=this.globeUniformValues(this.painter.transform,i.tileID.canonical,n&&n.useDenormalizedUpVectorScale);r.setGlobeUniformValues(a,e)}}globeUniformValues(i,r,n){let a=i.projection;return{u_tile_tl_up:a.upVector(r,0,0),u_tile_tr_up:a.upVector(r,e.J,0),u_tile_br_up:a.upVector(r,e.J,e.J),u_tile_bl_up:a.upVector(r,0,e.J),u_tile_up_scale:n?e.bn(1):a.upVectorScale(r,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){let r=this.painter,n=this.painter.context;0!==i.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),r.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(i,r,n,a,s){if("globe"===i.transform.projection.name)!function(i,r,n,a,s){let o,l;let u=i.context,h=u.gl,c=i.transform,d=e.bb(i,u,c),f=(e,r)=>{if(l===r)return;let n=[tq[r],"PROJECTION_GLOBE_VIEW"];d&&n.push("CUSTOM_ANTIALIASING");let a=i.isTileAffectedByFog(e);o=i.getOrCreateProgram("globeRaster",{defines:n,overrideFog:a}),l=r},p=i.colorModeForRenderPass(),m=new e.b4(h.LEQUAL,e.b4.ReadWrite,i.depthRangeFor3D);tG.update(s);let _=e.bc(c),g=[e.E(c.center.lng),e.H(c.center.lat)],y=i.globeSharedBuffers,v=[c.width*e.a4.devicePixelRatio,c.height*e.a4.devicePixelRatio],x=Float32Array.from(c.globeMatrix),b={useDenormalizedUpVectorScale:!0};{let c=i.transform,d=tZ(c.zoom,r.exaggeration(),r.sourceCache._source.tileSize);l=-1;let w=h.TRIANGLES;for(let l of a){let a=n.getTile(l),M=e.b6.disabled,T=r.prevTerrainTileForTile[l.key],L=r.terrainTileForTile[l.key];tW(T,L)&&tG.newMorphing(l.key,T,L,s,250),u.activeTexture.set(h.TEXTURE0),a.texture&&a.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE);let S=tG.getMorphValuesForProxy(l.key),k=S?1:0;S&&e.bd(b,{morphing:{srcDemTile:S.from,dstDemTile:S.to,phase:e.ba(S.phase)}});let D=e.be(l.canonical),E=e.bf(D.getCenter().lat),A=e.bg(l.canonical,D,E,c.worldSize/c._pixelsPerMercatorPixel),P=e.bh(e.bi(l.canonical)),C=tU(c.expandedFarZProjMatrix,x,_,P,e.ao(c.zoom),g,c.frustumCorners.TL,c.frustumCorners.TR,c.frustumCorners.BR,c.frustumCorners.BL,c.globeCenterInViewSpace,c.globeRadius,v,d,A);if(f(l,k),o&&(r.setupElevationDraw(a,o,b),i.uploadCommonUniforms(u,o,l.toUnwrapped()),y)){let[r,n,a]=y.getGridBuffers(E,0!==d);o.draw(i,w,m,M,p,e.b5.backCCW,C,"globe_raster",r,n,a)}}}if(y&&(i.renderDefaultNorthPole||i.renderDefaultSouthPole)){let s=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];for(let l of(d&&s.push("CUSTOM_ANTIALIASING"),o=i.getOrCreateProgram("globeRaster",{defines:s}),a)){let{x:a,y:s,z:d}=l.canonical,f=0===s,_=s===(1<<d)-1,[x,w,M,T]=y.getPoleBuffers(d,!1);if(T&&(f||_)){let s=n.getTile(l);u.activeTexture.set(h.TEXTURE0),s.texture&&s.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE);let y=e.bj(d,a,c),L=e.bh(e.bi(l.canonical)),S=(r,n)=>r.draw(i,h.TRIANGLES,m,e.b6.disabled,p,e.b5.disabled,tU(c.expandedFarZProjMatrix,y,y,L,0,g,c.frustumCorners.TL,c.frustumCorners.TR,c.frustumCorners.BR,c.frustumCorners.BL,c.globeCenterInViewSpace,c.globeRadius,v,0),"globe_pole_raster",n,M,T);r.setupElevationDraw(s,o,b),i.uploadCommonUniforms(u,o,l.toUnwrapped()),f&&i.renderDefaultNorthPole&&S(o,x),_&&i.renderDefaultSouthPole&&(y=e.m.scale(e.m.create(),y,[1,-1,1]),S(o,w))}}}}(i,r,n,a,s);else{let o,l;let u=i.context,h=u.gl,c=i.shadowRenderer,d=t$(i,i.longestCutoffRange),f=e=>{if(l===e)return;let r=[];r.push(tq[e]),d.shouldRenderCutoff&&r.push("RENDER_CUTOFF"),o=i.getOrCreateProgram("terrainRaster",{defines:r}),l=e},p=i.colorModeForRenderPass(),m=new e.b4(h.LEQUAL,e.b4.ReadWrite,i.depthRangeFor3D);tG.update(s);let _=i.transform,g=tZ(_.zoom,r.exaggeration(),r.sourceCache._source.tileSize),y=[0,0,0];if(c){let e=i.style.directionalLight,r=i.style.ambientLight;e&&r&&(y=rn(e,r))}{l=-1;let v=h.TRIANGLES,[x,b]=[r.gridIndexBuffer,r.gridSegments];for(let l of a){let a;let w=n.getTile(l),M=e.b6.disabled,T=r.prevTerrainTileForTile[l.key],L=r.terrainTileForTile[l.key];tW(T,L)&&tG.newMorphing(l.key,T,L,s,250),u.activeTexture.set(h.TEXTURE0),w.texture&&w.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE);let S=tG.getMorphValuesForProxy(l.key),k=S?1:0;S&&(a={morphing:{srcDemTile:S.from,dstDemTile:S.to,phase:e.ba(S.phase)}});let D=tV(l.projMatrix,!function(e,i){let r=1<<e.z;return!i&&(0===e.x||e.x===r-1)||0===e.y||e.y===r-1}(l.canonical,_.renderWorldCopies)?g:g/10,y);if(f(k),!o)continue;r.setupElevationDraw(w,o,a);let E=l.toUnwrapped();c&&c.setupShadows(E,o),i.uploadCommonUniforms(u,o,E,null,d),o.draw(i,v,m,M,p,e.b5.backCCW,D,"terrain_raster",r.gridBuffer,x,b)}}}}(r,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,r.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(0===this._drapedRenderBatches.length)return i+1;this.renderingToTexture=!0;let r=this.painter,n=this.painter.context,a=this.proxySourceCache,s=this.proxiedCoords[a.id],o=this._drapedRenderBatches.shift(),l=r.style.order,u=[],h=0;for(let c of s){let s;let d=a.getTileByID(c.proxyTileKey),f=a.proxyCachedFBO[c.key]?a.proxyCachedFBO[c.key][i]:void 0,p=void 0!==f?a.renderCache[f]:this.pool[h++],m=void 0!==f;if(d.texture=p.tex,m&&!p.dirty){u.push(d.tileID);continue}n.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(n.clear({color:e.C.transparent,stencil:0}),p.dirty=!1);for(let e=o.start;e<=o.end;++e){let i=r.style._mergedLayers[l[e]];if(i.isHidden(r.transform.zoom))continue;let a=r.style.getLayerSourceCache(i),o=a?this.proxyToSource[c.key][a.id]:[c];o&&(n.viewport.set([0,0,p.fb.width,p.fb.height]),s!==(a?a.id:null)&&(this._setupStencil(p,o,i,a),s=a?a.id:null),r.renderLayer(r,a,i,o))}if(0===this._drapedRenderBatches.length)for(let e of this._pendingGroundEffectLayers){let i=r.style._mergedLayers[l[e]];if(i.isHidden(r.transform.zoom))continue;let a=r.style.getLayerSourceCache(i),o=a?this.proxyToSource[c.key][a.id]:[c];o&&(n.viewport.set([0,0,p.fb.width,p.fb.height]),s!==(a?a.id:null)&&(this._setupStencil(p,o,i,a),s=a?a.id:null),r.renderLayer(r,a,i,o))}this.renderedToTile?(p.dirty=!0,u.push(d.tileID)):m||--h,5===h&&(h=0,this.renderToBackBuffer(u))}return this.renderToBackBuffer(u),this.renderingToTexture=!1,n.bindFramebuffer.set(null),n.viewport.set([0,0,r.width,r.height]),o.end+1}postRender(){}isLayerOrderingCorrect(e){let i=e.order.length,r=-1,n=i;for(let a=0;a<i;++a)this._style.isLayerDraped(e._mergedLayers[e.order[a]])?r=Math.max(r,a):n=Math.min(n,a);return n>r}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter(e=>e.dem).forEach(i=>{e=Math.min(e,i.dem.tree.minimums[0])}),0===e?e:(e-30)*this._exaggeration}raycast(e,i,r){if(!this._visibleDemTiles)return null;let n=this._visibleDemTiles.filter(e=>e.dem).map(n=>{let a=n.tileID,s=1<<a.overscaledZ,{x:o,y:l}=a.canonical,u=o/s,h=(o+1)/s,c=l/s,d=(l+1)/s;return{minx:u,miny:c,maxx:h,maxy:d,t:n.dem.tree.raycastRoot(u,c,h,d,e,i,r),tile:n}});for(let a of(n.sort((e,i)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==i.t?i.t:Number.MAX_VALUE)),n)){if(null==a.t)break;let n=a.tile.dem.tree.raycast(a.minx,a.miny,a.maxx,a.maxy,e,i,r);if(null!=n)return n}return null}_createFBO(){let i=this.painter.context,r=i.gl,n=this.drapeBufferSize;i.activeTexture.set(r.TEXTURE0);let a=new e.a9(i,{width:n[0],height:n[1],data:null},r.RGBA);a.bind(r.LINEAR,r.CLAMP_TO_EDGE);let s=i.createFramebuffer(n[0],n[1],!0,null);return s.colorAttachment.set(a.texture),s.depthAttachment=new en(i,s.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,s.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):s.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:s,tex:a,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(let e in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[e].hasTransition())return!0;return this._style.order.some(e=>{let i=this._style._mergedLayers[e],r=i.isHidden(this.painter.transform.zoom);return"custom"===i.type?!r&&i.shouldRedrape():!r&&i.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(let e of this._style.getSources())if(e instanceof eX){i=!0;break}if(!i)return;let r={};for(let i=0;i<this._style.order.length;++i){let n=this._style._mergedLayers[this._style.order[i]],a=this._style.getLayerSourceCache(n);if(a&&!r[a.id]&&!n.isHidden(this.painter.transform.zoom)&&"line"===n.type&&n.widthExpression() instanceof e.am)for(let e of(r[a.id]=!0,this.proxyCoords)){let i=this.proxyToSource[e.key][a.id];if(i)for(let e of i)this._clearRenderCacheForTile(a.id,e)}}}_clearRasterLayersFromRenderCache(){let e=!1;for(let i in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[i]._source instanceof eJ){e=!0;break}if(!e)return;let i={};for(let e=0;e<this._style.order.length;++e){let r=this._style._mergedLayers[this._style.order[e]],n=this._style.getLayerSourceCache(r);if(!n||i[n.id]||r.isHidden(this.painter.transform.zoom)||"raster"!==r.type)continue;let a=r.paint.get("raster-fade-duration");for(let e of this.proxyCoords){let i=this.proxyToSource[e.key][n.id];if(i)for(let e of i){let i=tJ(n.getTile(e),n.findLoadedParent(e,0),n,this.painter.transform,a);(1!==i.opacity||0!==i.mix)&&this._clearRenderCacheForTile(n.id,e)}}}}_setupDrapedRenderBatches(){let i=this._style.order,r=i.length;if(0===r)return;let n=[];this._pendingGroundEffectLayers=[];let a,s=0,o=this._style._mergedLayers[i[s]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++s<r;)o=this._style._mergedLayers[i[s]];for(;s<r;++s){let e=this._style._mergedLayers[i[s]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===a&&(a=s):("fill-extrusion"===e.type&&this._pendingGroundEffectLayers.push(s),void 0!==a&&(n.push({start:a,end:s-1}),a=void 0)))}if(void 0!==a&&n.push({start:a,end:s-1}),0!==n.length){let i=n[n.length-1];this._pendingGroundEffectLayers.every(e=>e>i.end)||e.X("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=n}_setupRenderCache(e){let i=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,i.renderCache.length>i.renderCachePool.length){let e=Object.values(i.proxyCachedFBO);i.proxyCachedFBO={};for(let r=0;r<e.length;++r){let n=Object.values(e[r]);i.renderCachePool.push(...n)}}return}this._clearRasterLayersFromRenderCache();let r=this.proxyCoords,n=this._tilesDirty;for(let a=r.length-1;a>=0;a--){let s=r[a];if(i.getTileByID(s.key),void 0!==i.proxyCachedFBO[s.key]){let r=e[s.key],a=this.proxyToSource[s.key],o=0;for(let e in a){let i=a[e],s=r[e];if(!s||s.length!==i.length||i.some((i,r)=>i!==s[r]||n[e]&&n[e].hasOwnProperty(i.key))){o=-1;break}++o}for(let e in i.proxyCachedFBO[s.key])i.renderCache[i.proxyCachedFBO[s.key][e]].dirty=o<0||o!==Object.values(r).length}}let a=[...this._drapedRenderBatches];for(let e of(a.sort((e,i)=>i.end-i.start-(e.end-e.start)),a))for(let n of r){if(i.proxyCachedFBO[n.key])continue;let r=i.renderCachePool.pop();void 0===r&&i.renderCache.length<50&&(r=i.renderCache.length,i.renderCache.push(this._createFBO())),void 0!==r&&(i.proxyCachedFBO[n.key]={},i.proxyCachedFBO[n.key][e.start]=r,i.renderCache[r].dirty=!0)}this._tilesDirty={}}_setupStencil(e,i,r,n){let a;if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));let s=this.painter.context,o=s.gl;if(i.length<=1)return void(this._overlapStencilType=!1);if(r.isTileClipped())a=i.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(i[0].overscaledZ>i[i.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(s.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,r.isTileClipped()&&this._renderTileClippingMasks(i,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):e.b6.disabled}_renderTileClippingMasks(i,r){let n=this.painter,a=this.painter.context,s=a.gl;n._tileClippingMaskIDs={},a.setColorMode(e.a.disabled),a.setDepthMode(e.b4.disabled);let o=n.getOrCreateProgram("clippingMask");for(let a of i){let i=n._tileClippingMaskIDs[a.key]=--r;o.draw(n,s.TRIANGLES,e.b4.disabled,new e.b6({func:s.ALWAYS,mask:0},i,255,s.KEEP,s.KEEP,s.REPLACE),e.a.disabled,e.b5.disabled,tX(a.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}pointCoordinate(i){let r=this.painter.transform;if(i.x<0||i.x>r.width||i.y<0||i.y>r.height)return null;let n=[i.x,i.y,1,1];e.e.transformMat4(n,n,r.pixelMatrixInverse),e.e.scale(n,n,1/n[3]),n[0]/=r.worldSize,n[1]/=r.worldSize;let a=r._camera.position,s=e.b(1,r.center.lat),o=[a[0],a[1],a[2]/s,0],l=e.v.subtract([],n.slice(0,3),o);e.v.normalize(l,l);let u=this.raycast(o,l,this._exaggeration);return null!==u&&u?(e.v.scaleAndAdd(o,o,l,u),o[3]=o[2],o[2]*=s,o):null}drawDepth(){let i=this.painter,r=i.context,n=this.proxySourceCache,a=Math.ceil(i.width),s=Math.ceil(i.height);if(this._depthFBO&&(this._depthFBO.width!==a||this._depthFBO.height!==s)&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){let i=r.gl,n=r.createFramebuffer(a,s,!0,"renderbuffer");r.activeTexture.set(i.TEXTURE0);let o=new e.a9(r,{width:a,height:s,data:null},i.RGBA);o.bind(i.NEAREST,i.CLAMP_TO_EDGE),n.colorAttachment.set(o.texture);let l=r.createRenderbuffer(r.gl.DEPTH_COMPONENT16,a,s);n.depthAttachment.set(l),this._depthFBO=n,this._depthTexture=o}r.bindFramebuffer.set(this._depthFBO.framebuffer),r.viewport.set([0,0,a,s]),function(i,r,n,a){if("globe"===i.transform.projection.name)return;let s=i.context,o=s.gl;s.clear({depth:1});let l=i.getOrCreateProgram("terrainDepth"),u=new e.b4(o.LESS,e.b4.ReadWrite,i.depthRangeFor3D);for(let s of a){let a=n.getTile(s),h=tV(s.projMatrix,0,[0,0,0]);r.setupElevationDraw(a,l),l.draw(i,o.TRIANGLES,u,e.b6.disabled,e.a.unblended,e.b5.backCCW,h,"terrain_depth",r.gridBuffer,r.gridIndexBuffer,r.gridNoSkirtSegments)}}(i,this,n,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,r,n){if(i.getSource() instanceof e.aK)return this._setupProxiedCoordsForImageSource(i,r,n);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};let a=this.proxiedCoords[i.id]=[],s=this.proxyCoords;for(let e=0;e<s.length;e++){let r=s[e],o=this._findTileCoveringTileID(r,i);if(o){let e=this._createProxiedId(r,o,n[r.key]&&n[r.key][i.id]);a.push(e),this.proxyToSource[r.key][i.id]=[e]}}let o=!1,l=new Set;for(let e=0;e<r.length;e++){let s=i.getTile(r[e]);if(!s||!s.hasData())continue;let u=this._findTileCoveringTileID(s.tileID,this.proxySourceCache);if(u&&u.tileID.canonical.z!==s.tileID.canonical.z){let e=this.proxyToSource[u.tileID.key][i.id],r=this._createProxiedId(u.tileID,s,n[u.tileID.key]&&n[u.tileID.key][i.id]);e?e.splice(e.length-1,0,r):this.proxyToSource[u.tileID.key][i.id]=[r];let h=this.proxyToSource[u.tileID.key][i.id];l.has(h)||l.add(h),a.push(r),o=!0}}if(this._sourceTilesOverlap[i.id]=o,o&&this._debugParams.sortTilesHiZFirst)for(let e of l)e.sort((e,i)=>i.overscaledZ-e.overscaledZ)}_setupProxiedCoordsForImageSource(i,r,n){if(!i.getSource().loaded())return;let a=this.proxiedCoords[i.id]=[],s=this.proxyCoords,o=i.getSource(),l=o.tileID;if(!l)return;let u=new e.P(l.x,l.y)._div(1<<l.z),h=o.coordinates.map(e.M.fromLngLat).reduce((e,i)=>(e.min.x=Math.min(e.min.x,i.x-u.x),e.min.y=Math.min(e.min.y,i.y-u.y),e.max.x=Math.max(e.max.x,i.x-u.x),e.max.y=Math.max(e.max.y,i.y-u.y),e),{min:new e.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(i,r)=>{let n=i.wrap+i.canonical.x/(1<<i.canonical.z),a=i.canonical.y/(1<<i.canonical.z),s=e.J/(1<<i.canonical.z),o=r.wrap+r.canonical.x/(1<<r.canonical.z),l=r.canonical.y/(1<<r.canonical.z);return n+s<o+h.min.x||n>o+h.max.x||a+s<l+h.min.y||a>l+h.max.y};for(let e=0;e<s.length;e++){let o=s[e];for(let e=0;e<r.length;e++){let s=i.getTile(r[e]);if(!s||!s.hasData()||c(o,s.tileID))continue;let l=this._createProxiedId(o,s,n[o.key]&&n[o.key][i.id]),u=this.proxyToSource[o.key][i.id];u?u.push(l):this.proxyToSource[o.key][i.id]=[l],a.push(l)}}}_createProxiedId(i,r,n){let a=this.orthoMatrix;if(n){let e=n.find(e=>e.key===r.tileID.key);if(e)return e}if(r.tileID.key!==i.key){let n,s,o;let l=i.canonical.z-r.tileID.canonical.z;a=e.m.create();let u=r.tileID.wrap-i.wrap<<i.overscaledZ;l>0?(s=(n=e.J>>l)*((r.tileID.canonical.x<<l)-i.canonical.x+u),o=n*((r.tileID.canonical.y<<l)-i.canonical.y)):(n=e.J<<-l,s=e.J*(r.tileID.canonical.x-(i.canonical.x+u<<-l)),o=e.J*(r.tileID.canonical.y-(i.canonical.y<<-l))),e.m.ortho(a,0,n,0,n,0,1),e.m.translate(a,a,[s,o,0])}return new t0(r.tileID,i.key,a)}_findTileCoveringTileID(i,r){let n=r.getTile(i);if(n&&n.hasData())return n;let a=this._findCoveringTileCache[r.id],s=a[i.key];if((n=s?r.getTileByID(s):null)&&n.hasData()||null===s)return n;let o=n?n.tileID:i,l=o.overscaledZ,u=r.getSource().minzoom,h=[];if(!s){let a=r.getSource().maxzoom;if(i.canonical.z>=a){let n=i.canonical.z-a;r.getSource().reparseOverscaled?(l=Math.max(i.canonical.z+2,r.transform.tileZoom),o=new e.O(l,i.wrap,a,i.canonical.x>>n,i.canonical.y>>n)):0!==n&&(l=a,o=new e.O(l,i.wrap,a,i.canonical.x>>n,i.canonical.y>>n))}o.key!==i.key&&(h.push(o.key),n=r.getTile(o))}let c=e=>{h.forEach(i=>{a[i]=e}),h.length=0};for(l-=1;l>=u&&(!n||!n.hasData());l--){n&&c(n.tileID.key);let e=o.calculateScaledKey(l);if((n=r.getTileByID(e))&&n.hasData())break;let i=a[e];if(null===i)break;void 0===i?h.push(e):n=r.getTileByID(i)}return c(n?n.tileID.key:null),n&&n.hasData()?n:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,i){let r=this._tilesDirty[e];r||(r=this._tilesDirty[e]={}),r[i.key]=!0}}let t2=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],t3=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class t4{static cacheKey(e,i,r,n){let a=`${i}${n?n.cacheKey:""}`;for(let i of r)e.usedDefines.includes(i)&&(a+=`/${i}`);return a}constructor(i,r,n,a,s,o){let l=i.gl;this.program=l.createProgram(),this.configuration=a,this.name=r,this.fixedDefines=[...o];let u=a?a.getBinderAttributes():[],h=(n.staticAttributes||[]).concat(u),c=a?a.defines():[];c=c.concat(o.map(e=>`#define ${e}`));let d="#version 300 es\n",f=d+c.concat("precision mediump float;",tM,tR.fragmentSource).join("\n");for(let e of n.fragmentIncludes)f+=`
${tO[e]}`;f+=`
${n.fragmentSource}`;let p=d+c.concat("precision highp float;",tM,tR.vertexSource).join("\n");for(let e of n.vertexIncludes)p+=`
${tO[e]}`;p+=`
${n.vertexSource}`;let m=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(m,f),l.compileShader(m),l.attachShader(this.program,m);let _=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(_,p),l.compileShader(_),l.attachShader(this.program,_),this.attributes={},this.numAttributes=h.length;for(let e=0;e<this.numAttributes;e++)if(h[e]){let i=h[e].startsWith("a_")?h[e]:`a_${h[e]}`;l.bindAttribLocation(this.program,e,i),this.attributes[i]=e}l.linkProgram(this.program),l.deleteShader(_),l.deleteShader(m),this.fixedUniforms=s(i),this.binderUniforms=a?a.getUniforms(i):[],o.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new e.a$(i),u_dem_prev:new e.a$(i),u_dem_tl:new e.b0(i),u_dem_scale:new e.b2(i),u_dem_tl_prev:new e.b0(i),u_dem_scale_prev:new e.b2(i),u_dem_size:new e.b2(i),u_dem_lerp:new e.b2(i),u_exaggeration:new e.b2(i),u_depth:new e.a$(i),u_depth_size_inv:new e.b0(i),u_meter_to_dem:new e.b2(i),u_label_plane_matrix_inv:new e.a_(i)}),o.includes("GLOBE")&&(this.globeUniforms={u_tile_tl_up:new e.b7(i),u_tile_tr_up:new e.b7(i),u_tile_br_up:new e.b7(i),u_tile_bl_up:new e.b7(i),u_tile_up_scale:new e.b2(i)}),o.includes("FOG")&&(this.fogUniforms={u_fog_matrix:new e.a_(i),u_fog_range:new e.b0(i),u_fog_color:new e.b9(i),u_fog_horizon_blend:new e.b2(i),u_fog_vertical_limit:new e.b0(i),u_fog_temporal_offset:new e.b2(i),u_frustum_tl:new e.b7(i),u_frustum_tr:new e.b7(i),u_frustum_br:new e.b7(i),u_frustum_bl:new e.b7(i),u_globe_pos:new e.b7(i),u_globe_radius:new e.b2(i),u_globe_transition:new e.b2(i),u_is_globe:new e.a$(i),u_viewport:new e.b0(i)}),o.includes("RENDER_CUTOFF")&&(this.cutoffUniforms={u_cutoff_params:new e.b9(i)}),o.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms={u_lighting_ambient_color:new e.b7(i),u_lighting_directional_dir:new e.b7(i),u_lighting_directional_color:new e.b7(i),u_ground_radiance:new e.b7(i)}),o.includes("RENDER_SHADOWS")&&(this.shadowUniforms={u_light_matrix_0:new e.a_(i),u_light_matrix_1:new e.a_(i),u_fade_range:new e.b0(i),u_shadow_normal_offset:new e.b7(i),u_shadow_intensity:new e.b2(i),u_shadow_texel_size:new e.b2(i),u_shadow_map_resolution:new e.b2(i),u_shadow_direction:new e.b7(i),u_shadow_bias:new e.b7(i),u_shadowmap_0:new e.a$(i),u_shadowmap_1:new e.a$(i)})}}setTerrainUniformValues(e,i){if(!this.terrainUniforms)return;let r=this.terrainUniforms;if(!this.failedToCreate)for(let n in e.program.set(this.program),i)r[n]&&r[n].set(this.program,n,i[n])}setGlobeUniformValues(e,i){if(!this.globeUniforms)return;let r=this.globeUniforms;if(!this.failedToCreate)for(let n in e.program.set(this.program),i)r[n]&&r[n].set(this.program,n,i[n])}setFogUniformValues(e,i){if(!this.fogUniforms)return;let r=this.fogUniforms;if(!this.failedToCreate)for(let n in e.program.set(this.program),i)r[n].set(this.program,n,i[n])}setCutoffUniformValues(e,i){if(!this.cutoffUniforms)return;let r=this.cutoffUniforms;if(!this.failedToCreate)for(let n in e.program.set(this.program),i)r[n].set(this.program,n,i[n])}setLightsUniformValues(e,i){if(!this.lightsUniforms)return;let r=this.lightsUniforms;if(!this.failedToCreate)for(let n in e.program.set(this.program),i)r[n].set(this.program,n,i[n])}setShadowUniformValues(e,i){if(this.failedToCreate||!this.shadowUniforms)return;let r=this.shadowUniforms;for(let n in e.program.set(this.program),i)r[n].set(this.program,n,i[n])}_drawDebugWireframe(i,r,n,a,s,o,l,u,h,c){let d=i.options.wireframe;if(!1===d.terrain&&!1===d.layers2D&&!1===d.layers3D)return;let f=i.context;if(!(!(!d.terrain||"terrainRaster"!==this.name&&"globeRaster"!==this.name)||!(!d.layers2D||i._terrain&&i._terrain.renderingToTexture||!t2.includes(this.name))||!(!d.layers3D||!t3.includes(this.name))))return;let p=f.gl,m=i.wireframeDebugCache.getLinesFromTrianglesBuffer(i.frameCounter,s,f);if(!m)return;let _=[...this.fixedDefines];_.push("DEBUG_WIREFRAME");let g=i.getOrCreateProgram(this.name,{config:this.configuration,defines:_});f.program.set(g.program);let y=(e,i,r)=>{if(i[e]&&r[e])for(let n in i[e])r[e][n]&&r[e][n].set(r.program,n,i[e][n].current)};h&&h.setUniforms(g.program,f,g.binderUniforms,l,{zoom:u}),y("fixedUniforms",this,g),y("terrainUniforms",this,g),y("globeUniforms",this,g),y("fogUniforms",this,g),y("lightsUniforms",this,g),y("shadowUniforms",this,g),m.bind(),f.setColorMode(new e.a([p.ONE,p.ONE_MINUS_SRC_ALPHA,p.ZERO,p.ONE],e.C.transparent,[!0,!0,!0,!1])),f.setDepthMode(new e.b4(r.func===p.LESS?p.LEQUAL:r.func,e.b4.ReadOnly,r.range)),f.setStencilMode(e.b6.disabled);let v=3*o.primitiveLength*2,x=3*o.primitiveOffset*4;c&&c>1?p.drawElementsInstanced(p.LINES,v,p.UNSIGNED_SHORT,x,c):p.drawElements(p.LINES,v,p.UNSIGNED_SHORT,x),s.bind(),f.program.set(this.program),f.setDepthMode(r),f.setStencilMode(n),f.setColorMode(a)}draw(e,i,r,n,a,s,o,l,u,h,c,d,f,p,m,_){let g=e.context,y=g.gl;if(this.failedToCreate)return;for(let e of(g.program.set(this.program),g.setDepthMode(r),g.setStencilMode(n),g.setColorMode(a),g.setCullFace(s),Object.keys(this.fixedUniforms)))this.fixedUniforms[e].set(this.program,e,o[e]);p&&p.setUniforms(this.program,g,this.binderUniforms,d,{zoom:f});let v={[y.LINES]:2,[y.TRIANGLES]:3,[y.LINE_STRIP]:1}[i],x=_&&_>0?1:void 0;for(let s of c.get()){let o=s.vaos||(s.vaos={});(o[l]||(o[l]=new tB)).bind(g,this,u,p?p.getPaintVertexBuffers():[],h,s.vertexOffset,m||[],x),_&&_>1?y.drawElementsInstanced(i,s.primitiveLength*v,y.UNSIGNED_SHORT,s.primitiveOffset*v*2,_):y.drawElements(i,s.primitiveLength*v,y.UNSIGNED_SHORT,s.primitiveOffset*v*2),i===y.TRIANGLES&&this._drawDebugWireframe(e,r,n,a,h,s,d,f,p,_)}}}function t5(i,r){let n=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,i.transform.tileZoom)/n,s=a*(r.tileID.canonical.x+r.tileID.wrap*n),o=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture?r.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/e.ay(r,1,i.transform.tileZoom),u_pixel_coord_upper:[s>>16,o>>16],u_pixel_coord_lower:[65535&s,65535&o]}}let t6=e.m.create(),t8=(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g)=>{let y=r.style.light,v=y.properties.get("position"),x=[v.x,v.y,v.z],b=e.bx.create();"viewport"===y.properties.get("anchor")&&(e.bx.fromRotation(b,-r.transform.angle),e.v.transformMat3(x,x,b));let w=y.properties.get("color"),M=r.transform,T={u_matrix:i,u_lightpos:x,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[w.r,w.g,w.b],u_vertical_gradient:+n,u_opacity:a,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:t6,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:s,u_edge_radius:o,u_flood_light_color:f,u_vertical_scale:p,u_flood_light_intensity:m,u_ground_shadow_factor:_,u_emissive_strength:g};return"globe"===M.projection.name&&(T.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],T.u_zoom_transition=h,T.u_inv_rot_matrix=d,T.u_merc_center=c,T.u_up_dir=M.projection.upVector(new e.t(0,0,0),c[0]*e.J,c[1]*e.J),T.u_height_lift=u),T},t7=(e,i,r)=>({u_matrix:e,u_edge_radius:i,u_vertical_scale:r}),t9=(i,r,n,a,s,o,l,u,h,c,d,f,p,m)=>{let _=t8(i,r,n,a,s,o,l,h,c,d,f,p,m,1,[0,0,0],0),g={u_height_factor:-Math.pow(2,l.overscaledZ)/u.tileSize/8};return e.ak(_,t5(r,u),g)},ie=(e,i)=>({u_matrix:e,u_emissive_strength:i}),it=(i,r,n,a)=>e.ak(ie(i,r),t5(n,a)),ii=(e,i,r)=>({u_matrix:e,u_world:r,u_emissive_strength:i}),ir=(i,r,n,a,s)=>e.ak(it(i,r,n,a),{u_world:s}),ia=(i,r,n,a)=>{let s=e.J/n.tileSize;return{u_matrix:i,u_camera_to_center_distance:r.getCameraToCenterDistance(a),u_extrude_scale:[r.pixelsToGLUnits[0]/s,r.pixelsToGLUnits[1]/s]}},is=(e,i,r=1)=>({u_matrix:e,u_color:i,u_overlay:0,u_overlay_scale:r}),io=e.m.create(),il=(i,r,n,a,s,o,l)=>{let u=i.transform,h="globe"===u.projection.name,c=h?e.by(u.zoom,r.canonical)*u._pixelsPerMercatorPixel:e.ay(n,1,o),d={u_matrix:r.projMatrix,u_extrude_scale:c,u_intensity:l,u_inv_rot_matrix:io,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(h){d.u_inv_rot_matrix=a,d.u_merc_center=s,d.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],d.u_zoom_transition=e.ao(u.zoom);let i=s[0]*e.J,n=s[1]*e.J;d.u_up_dir=u.projection.upVector(new e.t(0,0,0),i,n)}return d},iu=(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w)=>{var M,T;return{u_matrix:i,u_normalize_matrix:r,u_globe_matrix:n,u_merc_matrix:a,u_grid_matrix:s,u_tl_parent:o,u_scale_parent:c,u_fade_t:d.mix,u_opacity:d.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(T=f.paint.get("raster-saturation"))>0?1-1/(1.001-T):-T,u_contrast_factor:(M=f.paint.get("raster-contrast"))>0?1/(1-M):1+M,u_spin_weights:function(e){let i=Math.sin(e*=Math.PI/180),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*i-r+1)/3,(Math.sqrt(3)*i-r+1)/3]}(f.paint.get("raster-hue-rotate")),u_perspective_transform:p,u_raster_elevation:m,u_zoom_transition:l,u_merc_center:u,u_cutoff_params:h,u_colorization_mix:function([i,r,n,a],[s,o]){if(s===o)return[0,0,0,0];let l=(e.bz+3)/(e.bz+1)/(o-s);return[i*l,r*l,n*l,a*l]}(g,v),u_colorization_offset:function(i,[r,n]){return r===n?0:((i-r)/(n-r)*(e.bz+3)-1)/(e.bz+1)}(y,v),u_color_ramp:_,u_texture_offset:[b/(x+2*b),x/(x+2*b)],u_texture_res:[x+2*b,x+2*b],u_emissive_strength:w}},ih=e.m.create(),ic=(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v)=>{let x=s.transform,b={u_is_size_zoom_constant:+("constant"===i||"source"===i),u_is_size_feature_constant:+("constant"===i||"camera"===i),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:x.getCameraToCenterDistance(g),u_rotate_symbol:+n,u_aspect_ratio:x.width/x.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:l,u_coord_matrix:u,u_is_text:+h,u_pitch_with_map:+a,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ih,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ih,u_up_vector:[0,-1,0],u_icon_transition:v||0,u_icon_saturation:y};return"globe"===g.name&&(b.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],b.u_zoom_transition=f,b.u_inv_rot_matrix=m,b.u_merc_center=p,b.u_camera_forward=x._camera.forward(),b.u_ecef_origin=e.bA(x.globeMatrix,d.toUnwrapped()),b.u_tile_matrix=Float32Array.from(x.globeMatrix),b.u_up_vector=_),b},id=(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y)=>e.ak(ic(i,r,n,a,s,o,l,u,h,c,f,p,m,_,g,y,1),{u_gamma_scale:a?s.transform.getCameraToCenterDistance(y)*Math.cos(s.terrain?0:s.transform._pitch):1,u_device_pixel_ratio:e.a4.devicePixelRatio,u_is_halo:+d,undefined:void 0}),ip=(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g)=>e.ak(id(i,r,n,a,s,o,l,u,!0,h,!0,d,f,p,m,_,g),{u_texsize_icon:c,u_texture_icon:1}),im=(e,i,r,n)=>({u_matrix:e,u_emissive_strength:i,u_opacity:r,u_color:n}),i_=(i,r,n,a,s,o,l)=>e.ak(function(i,r,n,a){let s=n.imageManager.getPattern(i.toString(),r),{width:o,height:l}=n.imageManager.getPixelSize(r),u=Math.pow(2,a.tileID.overscaledZ),h=a.tileSize*Math.pow(2,n.transform.tileZoom)/u,c=h*(a.tileID.canonical.x+a.tileID.wrap*u),d=h*a.tileID.canonical.y;return{u_image:0,u_pattern_tl:s.tl,u_pattern_br:s.br,u_texsize:[o,l],u_pattern_size:s.displaySize,u_tile_units_to_pixels:1/e.ay(a,1,n.transform.tileZoom),u_pixel_coord_upper:[c>>16,d>>16],u_pixel_coord_lower:[65535&c,65535&d]}}(s,o,a,l),{u_matrix:i,u_emissive_strength:r,u_opacity:n}),ig={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},iy=(i,r,n,a,s,o,l,u,h,c,d,f,p=[0,0,0])=>{let m=a.style.light,_=m.properties.get("position"),g=[-_.x,-_.y,_.z],y=e.bx.create();"viewport"===m.properties.get("anchor")&&(e.bx.fromRotation(y,-a.transform.angle),e.v.transformMat3(g,g,y));let v="MASK"===c.alphaMode,x=m.properties.get("color"),b=f.paint.get("model-ambient-occlusion-intensity"),w=f.paint.get("model-color").constantOr(e.C.white),M=f.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:i,u_lighting_matrix:r,u_normal_matrix:n,u_lightpos:g,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[x.r,x.g,x.b],u_camera_pos:p,u_opacity:s,u_baseTextureIsAlpha:0,u_alphaMask:+v,u_alphaCutoff:c.alphaCutoff,u_baseColorFactor:[o.r,o.g,o.b,o.a],u_emissiveFactor:[l[0],l[1],l[2],1],u_metallicFactor:u,u_roughnessFactor:h,u_baseColorTexture:ig.BaseColor,u_metallicRoughnessTexture:ig.MetallicRoughness,u_normalTexture:ig.Normal,u_occlusionTexture:ig.Occlusion,u_emissionTexture:ig.Emission,u_color_mix:[w.r,w.g,w.b,M],u_aoIntensity:b,u_emissive_strength:d}},iv=new Float32Array(16),ix=(e,i=iv,r=iv)=>({u_matrix:e,u_instance:i,u_node_matrix:r}),ib={fillExtrusion:i=>({u_matrix:new e.a_(i),u_lightpos:new e.b7(i),u_lightintensity:new e.b2(i),u_lightcolor:new e.b7(i),u_vertical_gradient:new e.b2(i),u_opacity:new e.b2(i),u_edge_radius:new e.b2(i),u_ao:new e.b0(i),u_tile_id:new e.b7(i),u_zoom_transition:new e.b2(i),u_inv_rot_matrix:new e.a_(i),u_merc_center:new e.b0(i),u_up_dir:new e.b7(i),u_height_lift:new e.b2(i),u_flood_light_color:new e.b7(i),u_vertical_scale:new e.b2(i),u_flood_light_intensity:new e.b2(i),u_ground_shadow_factor:new e.b7(i),u_emissive_strength:new e.b2(i)}),fillExtrusionDepth:i=>({u_matrix:new e.a_(i),u_edge_radius:new e.b2(i),u_vertical_scale:new e.b2(i)}),fillExtrusionPattern:i=>({u_matrix:new e.a_(i),u_lightpos:new e.b7(i),u_lightintensity:new e.b2(i),u_lightcolor:new e.b7(i),u_vertical_gradient:new e.b2(i),u_height_factor:new e.b2(i),u_edge_radius:new e.b2(i),u_ao:new e.b0(i),u_tile_id:new e.b7(i),u_zoom_transition:new e.b2(i),u_inv_rot_matrix:new e.a_(i),u_merc_center:new e.b0(i),u_up_dir:new e.b7(i),u_height_lift:new e.b2(i),u_image:new e.a$(i),u_texsize:new e.b0(i),u_pixel_coord_upper:new e.b0(i),u_pixel_coord_lower:new e.b0(i),u_tile_units_to_pixels:new e.b2(i),u_opacity:new e.b2(i)}),fillExtrusionGroundEffect:i=>({u_matrix:new e.a_(i),u_opacity:new e.b2(i),u_ao_pass:new e.b2(i),u_meter_to_tile:new e.b2(i),u_ao:new e.b0(i),u_flood_light_intensity:new e.b2(i),u_flood_light_color:new e.b7(i),u_attenuation:new e.b2(i),u_edge_radius:new e.b2(i),u_fb:new e.a$(i),u_fb_size:new e.b2(i)}),fill:i=>({u_matrix:new e.a_(i),u_emissive_strength:new e.b2(i)}),fillPattern:i=>({u_matrix:new e.a_(i),u_emissive_strength:new e.b2(i),u_image:new e.a$(i),u_texsize:new e.b0(i),u_pixel_coord_upper:new e.b0(i),u_pixel_coord_lower:new e.b0(i),u_tile_units_to_pixels:new e.b2(i)}),fillOutline:i=>({u_matrix:new e.a_(i),u_emissive_strength:new e.b2(i),u_world:new e.b0(i)}),fillOutlinePattern:i=>({u_matrix:new e.a_(i),u_emissive_strength:new e.b2(i),u_world:new e.b0(i),u_image:new e.a$(i),u_texsize:new e.b0(i),u_pixel_coord_upper:new e.b0(i),u_pixel_coord_lower:new e.b0(i),u_tile_units_to_pixels:new e.b2(i)}),circle:e.bB,collisionBox:i=>({u_matrix:new e.a_(i),u_camera_to_center_distance:new e.b2(i),u_extrude_scale:new e.b0(i)}),collisionCircle:i=>({u_matrix:new e.a_(i),u_inv_matrix:new e.a_(i),u_camera_to_center_distance:new e.b2(i),u_viewport_size:new e.b0(i)}),debug:i=>({u_color:new e.b1(i),u_matrix:new e.a_(i),u_overlay:new e.a$(i),u_overlay_scale:new e.b2(i)}),clippingMask:i=>({u_matrix:new e.a_(i)}),heatmap:i=>({u_extrude_scale:new e.b2(i),u_intensity:new e.b2(i),u_matrix:new e.a_(i),u_inv_rot_matrix:new e.a_(i),u_merc_center:new e.b0(i),u_tile_id:new e.b7(i),u_zoom_transition:new e.b2(i),u_up_dir:new e.b7(i)}),heatmapTexture:i=>({u_image:new e.a$(i),u_color_ramp:new e.a$(i),u_opacity:new e.b2(i)}),hillshade:i=>({u_matrix:new e.a_(i),u_image:new e.a$(i),u_latrange:new e.b0(i),u_light:new e.b0(i),u_shadow:new e.b1(i),u_highlight:new e.b1(i),u_emissive_strength:new e.b2(i),u_accent:new e.b1(i)}),hillshadePrepare:i=>({u_matrix:new e.a_(i),u_image:new e.a$(i),u_dimension:new e.b0(i),u_zoom:new e.b2(i)}),line:e.bC,linePattern:e.bD,raster:i=>({u_matrix:new e.a_(i),u_normalize_matrix:new e.a_(i),u_globe_matrix:new e.a_(i),u_merc_matrix:new e.a_(i),u_grid_matrix:new e.b8(i),u_tl_parent:new e.b0(i),u_scale_parent:new e.b2(i),u_fade_t:new e.b2(i),u_opacity:new e.b2(i),u_image0:new e.a$(i),u_image1:new e.a$(i),u_brightness_low:new e.b2(i),u_brightness_high:new e.b2(i),u_saturation_factor:new e.b2(i),u_contrast_factor:new e.b2(i),u_spin_weights:new e.b7(i),u_perspective_transform:new e.b0(i),u_raster_elevation:new e.b2(i),u_zoom_transition:new e.b2(i),u_merc_center:new e.b0(i),u_cutoff_params:new e.b9(i),u_colorization_mix:new e.b9(i),u_colorization_offset:new e.b2(i),u_color_ramp:new e.a$(i),u_texture_offset:new e.b0(i),u_texture_res:new e.b0(i),u_emissive_strength:new e.b2(i)}),symbolIcon:i=>({u_is_size_zoom_constant:new e.a$(i),u_is_size_feature_constant:new e.a$(i),u_size_t:new e.b2(i),u_size:new e.b2(i),u_camera_to_center_distance:new e.b2(i),u_rotate_symbol:new e.a$(i),u_aspect_ratio:new e.b2(i),u_fade_change:new e.b2(i),u_matrix:new e.a_(i),u_label_plane_matrix:new e.a_(i),u_coord_matrix:new e.a_(i),u_is_text:new e.a$(i),u_pitch_with_map:new e.a$(i),u_texsize:new e.b0(i),u_tile_id:new e.b7(i),u_zoom_transition:new e.b2(i),u_inv_rot_matrix:new e.a_(i),u_merc_center:new e.b0(i),u_camera_forward:new e.b7(i),u_tile_matrix:new e.a_(i),u_up_vector:new e.b7(i),u_ecef_origin:new e.b7(i),u_texture:new e.a$(i),u_icon_transition:new e.b2(i),u_icon_saturation:new e.b2(i)}),symbolSDF:i=>({u_is_size_zoom_constant:new e.a$(i),u_is_size_feature_constant:new e.a$(i),u_size_t:new e.b2(i),u_size:new e.b2(i),u_camera_to_center_distance:new e.b2(i),u_rotate_symbol:new e.a$(i),u_aspect_ratio:new e.b2(i),u_fade_change:new e.b2(i),u_matrix:new e.a_(i),u_label_plane_matrix:new e.a_(i),u_coord_matrix:new e.a_(i),u_is_text:new e.a$(i),u_pitch_with_map:new e.a$(i),u_texsize:new e.b0(i),u_texture:new e.a$(i),u_gamma_scale:new e.b2(i),u_device_pixel_ratio:new e.b2(i),u_tile_id:new e.b7(i),u_zoom_transition:new e.b2(i),u_inv_rot_matrix:new e.a_(i),u_merc_center:new e.b0(i),u_camera_forward:new e.b7(i),u_tile_matrix:new e.a_(i),u_up_vector:new e.b7(i),u_ecef_origin:new e.b7(i),u_is_halo:new e.a$(i)}),symbolTextAndIcon:i=>({u_is_size_zoom_constant:new e.a$(i),u_is_size_feature_constant:new e.a$(i),u_size_t:new e.b2(i),u_size:new e.b2(i),u_camera_to_center_distance:new e.b2(i),u_rotate_symbol:new e.a$(i),u_aspect_ratio:new e.b2(i),u_fade_change:new e.b2(i),u_matrix:new e.a_(i),u_label_plane_matrix:new e.a_(i),u_coord_matrix:new e.a_(i),u_is_text:new e.a$(i),u_pitch_with_map:new e.a$(i),u_texsize:new e.b0(i),u_texsize_icon:new e.b0(i),u_texture:new e.a$(i),u_texture_icon:new e.a$(i),u_gamma_scale:new e.b2(i),u_device_pixel_ratio:new e.b2(i),u_is_halo:new e.a$(i)}),background:i=>({u_matrix:new e.a_(i),u_emissive_strength:new e.b2(i),u_opacity:new e.b2(i),u_color:new e.b1(i)}),backgroundPattern:i=>({u_matrix:new e.a_(i),u_emissive_strength:new e.b2(i),u_opacity:new e.b2(i),u_image:new e.a$(i),u_pattern_tl:new e.b0(i),u_pattern_br:new e.b0(i),u_texsize:new e.b0(i),u_pattern_size:new e.b0(i),u_pixel_coord_upper:new e.b0(i),u_pixel_coord_lower:new e.b0(i),u_tile_units_to_pixels:new e.b2(i)}),terrainRaster:tH,terrainDepth:tH,skybox:i=>({u_matrix:new e.a_(i),u_sun_direction:new e.b7(i),u_cubemap:new e.a$(i),u_opacity:new e.b2(i),u_temporal_offset:new e.b2(i)}),skyboxGradient:i=>({u_matrix:new e.a_(i),u_color_ramp:new e.a$(i),u_center_direction:new e.b7(i),u_radius:new e.b2(i),u_opacity:new e.b2(i),u_temporal_offset:new e.b2(i)}),skyboxCapture:i=>({u_matrix_3f:new e.b8(i),u_sun_direction:new e.b7(i),u_sun_intensity:new e.b2(i),u_color_tint_r:new e.b9(i),u_color_tint_m:new e.b9(i),u_luminance:new e.b2(i)}),globeRaster:i=>({u_proj_matrix:new e.a_(i),u_globe_matrix:new e.a_(i),u_normalize_matrix:new e.a_(i),u_merc_matrix:new e.a_(i),u_zoom_transition:new e.b2(i),u_merc_center:new e.b0(i),u_image0:new e.a$(i),u_grid_matrix:new e.b8(i),u_skirt_height:new e.b2(i),u_frustum_tl:new e.b7(i),u_frustum_tr:new e.b7(i),u_frustum_br:new e.b7(i),u_frustum_bl:new e.b7(i),u_globe_pos:new e.b7(i),u_globe_radius:new e.b2(i),u_viewport:new e.b0(i)}),globeAtmosphere:i=>({u_frustum_tl:new e.b7(i),u_frustum_tr:new e.b7(i),u_frustum_br:new e.b7(i),u_frustum_bl:new e.b7(i),u_horizon:new e.b2(i),u_transition:new e.b2(i),u_fadeout_range:new e.b2(i),u_color:new e.b9(i),u_high_color:new e.b9(i),u_space_color:new e.b9(i),u_temporal_offset:new e.b2(i),u_horizon_angle:new e.b2(i)}),model:i=>({u_matrix:new e.a_(i),u_lighting_matrix:new e.a_(i),u_normal_matrix:new e.a_(i),u_lightpos:new e.b7(i),u_lightintensity:new e.b2(i),u_lightcolor:new e.b7(i),u_camera_pos:new e.b7(i),u_opacity:new e.b2(i),u_baseColorFactor:new e.b9(i),u_emissiveFactor:new e.b9(i),u_metallicFactor:new e.b2(i),u_roughnessFactor:new e.b2(i),u_baseTextureIsAlpha:new e.a$(i),u_alphaMask:new e.a$(i),u_alphaCutoff:new e.b2(i),u_baseColorTexture:new e.a$(i),u_metallicRoughnessTexture:new e.a$(i),u_normalTexture:new e.a$(i),u_occlusionTexture:new e.a$(i),u_emissionTexture:new e.a$(i),u_color_mix:new e.b9(i),u_aoIntensity:new e.b2(i),u_emissive_strength:new e.b2(i)}),modelDepth:i=>({u_matrix:new e.a_(i),u_instance:new e.a_(i),u_node_matrix:new e.a_(i)}),groundShadow:i=>({u_matrix:new e.a_(i),u_ground_shadow_factor:new e.b7(i)}),stars:i=>({u_matrix:new e.a_(i),u_up:new e.b7(i),u_right:new e.b7(i),u_intensity_multiplier:new e.b2(i)})};function iw(i,n,a,s,o,l,u){let h=i.context,c=h.gl,d=i.transform,f=i.getOrCreateProgram("collisionBox"),p=[],m=0,_=0;for(let r=0;r<s.length;r++){let h=s[r],g=n.getTile(h),y=g.getBucket(a);if(!y)continue;let v=function(e,i,r){if(i.projection.name===r.projection.name)return e.projMatrix;let n=r.clone();return n.setProjection(i.projection),ti(n,i.getProjection(),e)}(h,y,d),x=v;0===o[0]&&0===o[1]||(x=i.translatePosMatrix(v,g,o,l));let b=u?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){let i=e.m.create(),r=x;e.m.mul(i,y.placementInvProjMatrix,d.glCoordMatrix),e.m.mul(i,i,y.placementViewportMatrix),p.push({circleArray:w,circleOffset:_,transform:r,invTransform:i,projection:y.getProjection()}),m+=w.length/4,_=m}b&&(i.terrain&&i.terrain.setupElevationDraw(g,f),f.draw(i,c.LINES,e.b4.disabled,e.b6.disabled,i.colorModeForRenderPass(),e.b5.disabled,ia(x,d,g,y.getProjection()),a.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,d.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}if(!u||!p.length)return;let g=i.getOrCreateProgram("collisionCircle"),y=new e.bE;y.resize(4*m),y._trim();let v=0;for(let e of p)for(let i=0;i<e.circleArray.length/4;i++){let r=4*i,n=e.circleArray[r+0],a=e.circleArray[r+1],s=e.circleArray[r+2],o=e.circleArray[r+3];y.emplace(v++,n,a,s,o,0),y.emplace(v++,n,a,s,o,1),y.emplace(v++,n,a,s,o,2),y.emplace(v++,n,a,s,o,3)}(!r||r.length<2*m)&&(r=function(i){let r=2*i,n=new e.bp;n.resize(r),n._trim();for(let e=0;e<r;e++){let i=6*e;n.uint16[i+0]=4*e+0,n.uint16[i+1]=4*e+1,n.uint16[i+2]=4*e+2,n.uint16[i+3]=4*e+2,n.uint16[i+4]=4*e+3,n.uint16[i+5]=4*e+0}return n}(m));let x=h.createIndexBuffer(r,!0),b=h.createVertexBuffer(y,e.bF.members,!0);for(let r of p){let n={u_matrix:r.transform,u_inv_matrix:r.invTransform,u_camera_to_center_distance:d.getCameraToCenterDistance(r.projection),u_viewport_size:[d.width,d.height]};g.draw(i,c.TRIANGLES,e.b4.disabled,e.b6.disabled,i.colorModeForRenderPass(),e.b5.disabled,n,a.id,b,x,e.bm.simpleSegment(0,2*r.circleOffset,r.circleArray.length,r.circleArray.length/2),null,d.zoom)}b.destroy(),x.destroy()}let iM=e.m.create();function iT(i,r,n,a,s,o,l,u,h,c,d,f,p){let m=i.context,_=m.gl,g=i.transform,y="map"===u,v="map"===h,x=y&&"point"!==n.layout.get("symbol-placement"),b=y&&!v&&!x,w=void 0!==n.layout.get("symbol-sort-key").constantOr(1),M=!1,T=i.depthModeForSublayer(0,e.b4.ReadOnly),L=[e.E(g.center.lng),e.H(g.center.lat)],S=n.layout.get("text-variable-anchor"),k="globe"===g.projection.name,D=[],E=[0,-1,0],A=E;for(let u of((k||g.mercatorFromTransition)&&!y&&(A=function(i){let r=i._camera.getWorldToCamera(i.worldSize,1),n=e.m.multiply([],r,i.globeMatrix);e.m.invert(n,n);let a=[0,0,0],s=[0,1,0,0];return e.e.transformMat4(s,s,n),a[0]=s[0],a[1]=s[1],a[2]=s[2],e.v.normalize(a,a),a}(g)),a)){let a;let h=r.getTile(u),f=h.getBucket(n);if(!f||"mercator"===f.projection.name&&k)continue;let p=s?f.text:f.icon;if(!p||f.fullyClipped||!p.segments.get().length)continue;let m=p.programConfigurations.get(n.id),T=s||f.sdfIcons,P=s?f.textSizeData:f.iconSizeData,C=v||0!==g.pitch,I=e.i(P,g.zoom),O,z,R,Y,F=[0,0],j=null;if(s)z=h.glyphAtlasTexture?h.glyphAtlasTexture:null,R=_.LINEAR,O=h.glyphAtlasTexture?h.glyphAtlasTexture.size:[0,0],f.iconsInText&&(F=h.imageAtlasTexture?h.imageAtlasTexture.size:[0,0],j=h.imageAtlasTexture?h.imageAtlasTexture:null,Y=C||i.options.rotating||i.options.zooming||"composite"===P.kind||"camera"===P.kind?_.LINEAR:_.NEAREST);else{let e=1!==n.layout.get("icon-size").constantOr(0)||f.iconsNeedLinear;z=h.imageAtlasTexture?h.imageAtlasTexture:null,R=T||i.options.rotating||i.options.zooming||e||C?_.LINEAR:_.NEAREST,O=h.imageAtlasTexture?h.imageAtlasTexture.size:[0,0]}let B="globe"===f.projection.name,N=B?A:E,H=B?e.ao(g.zoom):0,V=tr(u,f.getProjection(),g),U=g.calculatePixelsToTileUnitsMatrix(h),$=em(V,h.tileID.canonical,v,y,g,f.getProjection(),U),W=i.terrain&&v&&x?e.m.invert(e.m.create(),$):iM,G=eg(V,h.tileID.canonical,v,y,g,f.getProjection(),U),q=S&&f.hasTextData(),Z=f.hasIconTextFit()&&q&&f.hasIconData();if(x){let r=g.elevation,n=r?r.getAtTileOffsetFunc(u,g.center.lat,g.worldSize,f.getProjection()):null,a=e_(V,h.tileID.canonical,v,y,g,f.getProjection(),U);!function(i,r,n,a,s,o,l,u,h,c){let d=n.transform,f=a?i.textSizeData:i.iconSizeData,p=e.i(f,n.transform.zoom),m="globe"===d.projection.name,_=[256/n.width*2+1,256/n.height*2+1],g=a?i.text.dynamicLayoutVertexArray:i.icon.dynamicLayoutVertexArray;g.clear();let y=null;m&&(y=a?i.text.globeExtVertexArray:i.icon.globeExtVertexArray);let v=i.lineVertexArray,x=a?i.text.placedSymbolArray:i.icon.placedSymbolArray,b=n.transform.width/n.transform.height,w,M=!1;for(let a=0;a<x.length;a++){let m=x.get(a),{numGlyphs:T,writingMode:L}=m;if(L!==e.W.vertical||M||w===e.W.horizontal||(M=!0),w=L,(m.hidden||L===e.W.vertical)&&!M){eS(T,g);continue}M=!1;let S=new e.P(m.tileAnchorX,m.tileAnchorY),{x:k,y:D,z:E}=d.projection.projectTilePoint(S.x,S.y,c.canonical);if(h){let[e,i,r]=h(S);k+=e,D+=i,E+=r}let A=[k,D,E,1];if(e.e.transformMat4(A,A,r),!function(e,i){let r=e[0]/e[3],n=e[1]/e[3];return r>=-i[0]&&r<=i[0]&&n>=-i[1]&&n<=i[1]}(A,_)){eS(T,g);continue}let P=A[3],C=ev(n.transform.getCameraToCenterDistance(d.projection),P),I=e.j(f,p,m),O=l?I/C:I*C,z=ey(k,D,E,s);if(z[3]<=0){eS(T,g);continue}let R={},Y=l?null:h,F=ew(m,O,!1,u,r,s,o,i.glyphOffsetArray,v,g,y,z,S,R,b,Y,d.projection,c,l);M=F.useVertical,Y&&F.needsFlipping&&(R={}),(F.notEnoughRoom||M||F.needsFlipping&&ew(m,O,!0,u,r,s,o,i.glyphOffsetArray,v,g,y,z,S,R,b,Y,d.projection,c,l).notEnoughRoom)&&eS(T,g)}a?(i.text.dynamicLayoutVertexBuffer.updateData(g),y&&i.text.globeExtVertexBuffer&&i.text.globeExtVertexBuffer.updateData(y)):(i.icon.dynamicLayoutVertexBuffer.updateData(g),y&&i.icon.globeExtVertexBuffer&&i.icon.globeExtVertexBuffer.updateData(y))}(f,V,i,s,a,G,v,c,n,u)}let X=x||s&&S||Z,J=i.translatePosMatrix(V,h,o,l),K=X?iM:$,Q=i.translatePosMatrix(G,h,o,l,!0),ee=f.getProjection().createInversionMatrix(g,u.canonical),et=n.paint.get("icon-image-cross-fade").constantOr(0),ei=[];i.terrainRenderModeElevated()&&v&&ei.push("PITCH_WITH_MAP_TERRAIN"),B&&(ei.push("PROJECTION_GLOBE_VIEW"),X&&ei.push("PROJECTED_POS_ON_VIEWPORT")),et>0&&ei.push("ICON_TRANSITION"),p.zOffsetVertexBuffer&&ei.push("Z_OFFSET");let er=T&&0!==n.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1);T?a=f.iconsInText?ip(P.kind,I,b,v,i,J,K,Q,O,F,u,H,L,ee,N,f.getProjection()):id(P.kind,I,b,v,i,J,K,Q,s,O,!0,u,H,L,ee,N,f.getProjection()):(d<1&&ei.push("SATURATION"),a=ic(P.kind,I,b,v,i,J,K,Q,s,O,u,H,L,ee,N,f.getProjection(),d,et));let en={program:i.getOrCreateProgram(f.iconsInText&&s?"symbolTextAndIcon":T?"symbolSDF":"symbolIcon",{config:m,defines:ei}),buffers:p,uniformValues:a,atlasTexture:z,atlasTextureIcon:j,atlasInterpolation:R,atlasInterpolationIcon:Y,isSDF:T,hasHalo:er,tile:h,labelPlaneMatrixInv:W};if(w&&f.canOverlap)for(let i of(M=!0,p.segments.get()))D.push({segments:new e.bm([i]),sortKey:i.sortKey,state:en});else D.push({segments:p.segments,sortKey:0,state:en})}for(let e of(M&&D.sort((e,i)=>e.sortKey-i.sortKey),D)){let r=e.state;if(i.terrain&&i.terrain.setupElevationDraw(r.tile,r.program,{useDepthForOcclusion:g.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:r.labelPlaneMatrixInv}),m.activeTexture.set(_.TEXTURE0),r.atlasTexture&&r.atlasTexture.bind(r.atlasInterpolation,_.CLAMP_TO_EDGE,!0),r.atlasTextureIcon&&(m.activeTexture.set(_.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,_.CLAMP_TO_EDGE,!0)),i.uploadCommonLightUniforms(i.context,r.program),r.hasHalo){let a=r.uniformValues;a.u_is_halo=1,iL(r.buffers,e.segments,n,i,r.program,T,f,p,a,2),a.u_is_halo=0}else{if(r.isSDF){let a=r.uniformValues;r.hasHalo&&(a.u_is_halo=1,iL(r.buffers,e.segments,n,i,r.program,T,f,p,a,1)),a.u_is_halo=0}iL(r.buffers,e.segments,n,i,r.program,T,f,p,r.uniformValues,1)}}}function iL(i,r,n,a,s,o,l,u,h,c){let d=[i.dynamicLayoutVertexBuffer,i.opacityVertexBuffer,i.iconTransitioningVertexBuffer,i.globeExtVertexBuffer,i.zOffsetVertexBuffer];s.draw(a,a.context.gl.TRIANGLES,o,l,u,e.b5.disabled,h,n.id,i.layoutVertexBuffer,i.indexBuffer,r,n.paint,a.transform.zoom,i.programConfigurations.get(n.id),d,c)}function iS(i,r,n,a,s,o,l){let u,h,c,d,f;let p=i.context.gl,m=n.paint.get("fill-pattern"),_=m&&m.constantOr(1);for(let g of(l?(h=_&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",u=p.LINES):(h=_?"fillPattern":"fill",u=p.TRIANGLES),a)){let a=r.getTile(g);if(_&&!a.patternsLoaded())continue;let y=a.getBucket(n);if(!y)continue;i.prepareDrawTile();let v=y.programConfigurations.get(n.id),x=i.isTileAffectedByFog(g),b=i.getOrCreateProgram(h,{config:v,overrideFog:x});_&&(i.context.activeTexture.set(p.TEXTURE0),a.imageAtlasTexture&&a.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),v.updatePaintBuffers());let w=m.constantOr(null);if(w&&a.imageAtlas){let e=a.imageAtlas.patternPositions[w.toString()];e&&v.setConstantPatternPositions(e)}let M=i.translatePosMatrix(g.projMatrix,a,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor")),T=n.paint.get("fill-emissive-strength");if(l){d=y.indexBuffer2,f=y.segments2;let e=i.terrain&&i.terrain.renderingToTexture?i.terrain.drapeBufferSize:[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===h&&_?ir(M,T,i,a,e):ii(M,T,e)}else d=y.indexBuffer,f=y.segments,c=_?it(M,T,i,a):ie(M,T);i.uploadCommonUniforms(i.context,b,g.toUnwrapped()),b.draw(i,u,s,i.stencilModeForClipping(g),o,e.b5.disabled,c,n.id,y.layoutVertexBuffer,d,f,n.paint,i.transform.zoom,v,void 0)}}function ik(i,r,n,a,s,o,l,u){let h;n.resetLayerRenderingStats();let c=i.context,d=c.gl,f=i.transform,p=n.paint.get("fill-extrusion-pattern"),m=p.constantOr(1),_=n.paint.get("fill-extrusion-opacity"),g=i.style.enable3dLights(),y=n.paint.get(g&&!m?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),v=[n.paint.get("fill-extrusion-ambient-occlusion-intensity"),y],x=n.layout.get("fill-extrusion-edge-radius"),b=x>0&&!n.paint.get("fill-extrusion-rounded-roof"),w=b?0:x,M="globe"===f.projection.name?e.bO():0,T="globe"===f.projection.name,L=T?e.ao(f.zoom):0,S=[e.E(f.center.lng),e.H(f.center.lat)],k=n.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),D=n.paint.get("fill-extrusion-flood-light-intensity"),E=n.paint.get("fill-extrusion-vertical-scale"),A=t$(i,n.paint.get("fill-extrusion-cutoff-fade-range")),P=n.paint.get("fill-extrusion-emissive-strength"),C=[];T&&C.push("PROJECTION_GLOBE_VIEW"),v[0]>0&&C.push("FAUX_AO"),b&&C.push("ZERO_ROOF_RADIUS"),u&&C.push("HAS_CENTROID"),D>0&&C.push("FLOOD_LIGHT"),A.shouldRenderCutoff&&C.push("RENDER_CUTOFF");let I="shadow"===i.renderPass,O=i.shadowRenderer;i.shadowRenderer&&(i.shadowRenderer.useNormalOffset=!0);let z=[0,0,0];if(O){let e=i.style.directionalLight,r=i.style.ambientLight;e&&r&&(z=rn(e,r)),h=C.concat(["SHADOWS_SINGLE_CASCADE"])}let R=I&&O?"fillExtrusionDepth":m?"fillExtrusionPattern":"fillExtrusion",Y=n.getLayerRenderingStats();for(let g of a){let a;let y=r.getTile(g),x=y.getBucket(n);if(!x||x.projection.name!==f.projection.name)continue;let b=!1;O&&(b=0===O.getMaxCascadeForTile(g.toUnwrapped()));let F=i.isTileAffectedByFog(g),j=x.programConfigurations.get(n.id),B=i.getOrCreateProgram(R,{config:j,defines:b?h:C,overrideFog:F});if(i.terrain&&i.terrain.setupElevationDraw(y,B,{useMeterToDem:!0}),!x.centroidVertexBuffer){let e=B.attributes.a_centroid_pos;void 0!==e&&d.vertexAttrib2f(e,0,0)}!I&&O&&O.setupShadows(y.tileID.toUnwrapped(),B,"vector-tile",y.tileID.overscaledZ),m&&(i.context.activeTexture.set(d.TEXTURE0),y.imageAtlasTexture&&y.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),j.updatePaintBuffers());let N=p.constantOr(null);if(N&&y.imageAtlas){let e=y.imageAtlas.patternPositions[N.toString()];e&&j.setConstantPatternPositions(e)}let H=n.paint.get("fill-extrusion-vertical-gradient");if(I&&O){if(function(i,r,n){let a=n.transform,s=n.shadowRenderer;if(!s)return!0;let o=i.toUnwrapped(),l=a.tileSize*s._cascades[n.currentShadowCascade].scale,u=r.maxHeight;if(a.elevation){let e=a.elevation.getMinMaxForTile(i);e&&(u+=e.max)}let h=[...s.shadowDirection];h[2]=-h[2];let c=s.computeSimplifiedTileShadowVolume(o,u,l,h);if(!c)return!1;let d=[iE,iA,iP,h,[h[0],0,h[2]],[0,h[1],h[2]]],f="globe"===a.projection.name,p=a.scaleZoom(l),m=e.F.fromInvProjectionMatrix(a.invProjMatrix,a.worldSize,p,!f),_=s.getCurrentCascadeFrustum();return 0===m.intersectsPrecise(c.vertices,c.planes,d)||0===_.intersectsPrecise(c.vertices,c.planes,d)}(y.tileID,x,i))continue;a=t7(O.calculateShadowPassMatrixFromTile(y.tileID.toUnwrapped()),w,E)}else{let e=i.translatePosMatrix(g.expandedProjMatrix,y,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),r=f.projection.createInversionMatrix(f,g.canonical);a=m?t9(e,i,H,_,v,w,g,y,M,L,S,r,k,E):t8(e,i,H,_,v,w,g,M,L,S,r,k,E,D,z,P)}i.uploadCommonUniforms(c,B,g.toUnwrapped(),null,A);let V=x.segments;if("mercator"===f.projection.name&&!I&&!(V=x.getVisibleSegments(y.tileID,i.terrain,i.transform.getFrustum(0))).get().length)continue;if(Y){if(I)for(let e of V.get())Y.numRenderedVerticesInShadowPass+=e.primitiveLength;else for(let e of V.get())Y.numRenderedVerticesInTransparentPass+=e.primitiveLength}let U=[];(i.terrain||u)&&U.push(x.centroidVertexBuffer),T&&U.push(x.layoutVertexExtBuffer),B.draw(i,c.gl.TRIANGLES,s,o,l,e.b5.backCCW,a,n.id,x.layoutVertexBuffer,x.indexBuffer,V,n.paint,i.transform.zoom,j,U)}i.shadowRenderer&&(i.shadowRenderer.useNormalOffset=!1)}function iD(i,r,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x){let b=i.context,w=b.gl,M=i.transform,T=i.transform.zoom,L=[],S=t$(i,n.paint.get("fill-extrusion-cutoff-fade-range"));"clear"===c?(L.push("CLEAR_SUBPASS"),x&&(L.push("CLEAR_FROM_TEXTURE"),b.activeTexture.set(w.TEXTURE0),x.bind(w.LINEAR,w.CLAMP_TO_EDGE))):"sdf"===c&&L.push("SDF_SUBPASS"),y&&L.push("HAS_CENTROID"),S.shouldRenderCutoff&&L.push("RENDER_CUTOFF");let k=n.layout.get("fill-extrusion-edge-radius"),D=(e,r,a,c,v)=>{let w=r.programConfigurations.get(n.id),M=i.isTileAffectedByFog(e),D=i.getOrCreateProgram("fillExtrusionGroundEffect",{config:w,defines:L,overrideFog:M}),E={u_matrix:c,u_opacity:d,u_ao_pass:h?1:0,u_meter_to_tile:v,u_ao:[f,p*v],u_flood_light_intensity:m,u_flood_light_color:_,u_attenuation:g,u_edge_radius:T>=17?0:k*v,u_fb:0,u_fb_size:x?x.size[0]:0},A=[];y&&A.push(r.hiddenByLandmarkVertexBuffer),i.uploadCommonUniforms(b,D,e.toUnwrapped(),null,S),D.draw(i,b.gl.TRIANGLES,s,o,l,u,E,n.id,r.vertexBuffer,r.indexBuffer,a,n.paint,T,w,A)};for(let s of a){let a=r.getTile(s),o=a.getBucket(n);if(!o||o.projection.name!==M.projection.name||!o.groundEffect||o.groundEffect&&!o.groundEffect.hasData())continue;let l=o.groundEffect,u=1/o.tileToMeter;{let e=i.translatePosMatrix(s.projMatrix,a,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),r=l.getDefaultSegment();D(s,l,r,e,u)}if(v)for(let o=0;o<4;o++){let l,h;let c=e.bP[o](s),d=r.getTile(c);if(!d)continue;let f=d.getBucket(n);if(!f||f.projection.name!==M.projection.name||!f.groundEffect||f.groundEffect&&!f.groundEffect.hasData())continue;let p=f.groundEffect;0===o?(l=[-e.J,0,0],h=1):1===o?(l=[e.J,0,0],h=0):2===o?(l=[0,-e.J,0],h=3):(l=[0,e.J,0],h=2);let m=p.regionSegments[h];if(!m)continue;let _=new Float32Array(16);e.m.translate(_,s.projMatrix,l),D(s,p,m,i.translatePosMatrix(_,a,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),u)}}}let iE=[1,0,0],iA=[0,1,0],iP=[0,0,1],iC=new e.C(1,0,0,1),iI=new e.C(0,1,0,1),iO=new e.C(0,0,1,1),iz=new e.C(1,0,1,1),iR=new e.C(0,1,1,1);function iY(i,r,n,a,s,o){let l=i.context,u=i.transform,h=l.gl,c="globe"===u.projection.name,d=e.m.clone(n.projMatrix);if(c&&e.ao(u.zoom)>0){let i=e.bU(n.canonical,u),r=e.bV(i);d=e.m.multiply(new Float32Array(16),u.globeMatrix,r),e.m.multiply(d,u.projMatrix,d)}let f=e.m.create();f[12]+=2*s/(e.a4.devicePixelRatio*u.width),f[13]+=2*o/(e.a4.devicePixelRatio*u.height),e.m.multiply(d,f,d);let p=i.getOrCreateProgram("debug",{defines:c?["PROJECTION_GLOBE_VIEW"]:[]}),m=r.getTileByID(n.key);i.terrain&&i.terrain.setupElevationDraw(m,p);let _=e.b4.disabled,g=e.b6.disabled,y=i.colorModeForRenderPass(),v="$debug";l.activeTexture.set(h.TEXTURE0),i.emptyTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),c?m._makeGlobeTileDebugBuffers(i.context,u):m._makeDebugTileBoundsBuffers(i.context,u.projection);let x=m._tileDebugBuffer||i.debugBuffer,b=m._tileDebugIndexBuffer||i.debugIndexBuffer,w=m._tileDebugSegments||i.debugSegments;p.draw(i,h.LINE_STRIP,_,g,y,e.b5.disabled,is(d,a),v,x,b,w,null,null,null,[m._globeTileDebugBorderBuffer]);let M=m.latestRawTileData,T=Math.floor((M&&M.byteLength||0)/1024),L=512/Math.min(r.getTile(n).tileSize,512)*(n.overscaledZ/u.zoom)*.5,S=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(S+=` => ${n.overscaledZ}`),function(e,i){e.initDebugOverlayCanvas();let r=e.debugOverlayCanvas,n=e.context.gl,a=e.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,r.width,r.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(i,5,5),a.strokeText(i,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(i,S+=` ${T}kb`);let k=m._tileDebugTextBuffer||i.debugBuffer,D=m._tileDebugTextIndexBuffer||i.quadTriangleIndexBuffer,E=m._tileDebugTextSegments||i.debugSegments;p.draw(i,h.TRIANGLES,_,g,e.a.alphaBlended,e.b5.disabled,is(d,e.C.transparent,L),v,k,D,E,null,null,null,[m._globeTileDebugTextBuffer])}function iF(e,i,r,n){iB(e,0,i+r/2,e.transform.width,r,n)}function ij(e,i,r,n){iB(e,i-r/2,0,r,e.transform.height,n)}function iB(i,r,n,a,s,o){let l=i.context,u=l.gl;u.enable(u.SCISSOR_TEST),u.scissor(r*e.a4.devicePixelRatio,n*e.a4.devicePixelRatio,a*e.a4.devicePixelRatio,s*e.a4.devicePixelRatio),l.clear({color:o}),u.disable(u.SCISSOR_TEST)}let{members:iN}=e.bW([{name:"a_pos_3f",components:3,type:"Float32"}]);function iH(e,i,r,n){e.emplaceBack(i,r,n)}class iV{constructor(i){this.vertexArray=new e.bX,this.indices=new e.bp,iH(this.vertexArray,-1,-1,1),iH(this.vertexArray,1,-1,1),iH(this.vertexArray,-1,1,1),iH(this.vertexArray,1,1,1),iH(this.vertexArray,-1,-1,-1),iH(this.vertexArray,1,-1,-1),iH(this.vertexArray,-1,1,-1),iH(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,iN),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=e.bm.simpleSegment(0,0,36,12)}}function iU(i,r,n,a,s,o){let l=i.context.gl,u=r.paint.get("sky-atmosphere-color"),h=r.paint.get("sky-atmosphere-halo-color"),c=r.paint.get("sky-atmosphere-sun-intensity"),d={u_matrix_3f:e.bx.fromMat4(e.bx.create(),a),u_sun_direction:s,u_sun_intensity:c,u_color_tint_r:[u.r,u.g,u.b,u.a],u_color_tint_m:[h.r,h.g,h.b,h.a],u_luminance:5e-5};l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_CUBE_MAP_POSITIVE_X+o,r.skyboxTexture,0),n.draw(i,l.TRIANGLES,e.b4.disabled,e.b6.disabled,e.a.unblended,e.b5.frontCW,d,"skyboxCapture",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}let i$=e.bW([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class iW{constructor(i){let r=new e.bY;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);let n=new e.bp;n.emplaceBack(0,1,2),n.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(r,i$.members),this.indexBuffer=i.createIndexBuffer(n),this.segments=e.bm.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}let iG=e.bW([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class iq{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15}}class iZ{constructor(i){this.colorModeAlphaBlendedWriteRGB=new e.a([e.bZ,e.b_,e.bZ,e.b_],e.C.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new e.a([e.bZ,e.b$,e.bZ,e.b$],e.C.transparent,[!1,!1,!1,!0]),this.params=new iq,this.allocatedStarsCount=0,i.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1}),i.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01})}update(i){let r=i.context;if(!this.atmosphereBuffer||this.allocatedStarsCount!==this.params.starsCount){this.atmosphereBuffer=new iW(r),this.allocatedStarsCount=this.params.starsCount;let i=function(i){let r=e.c2(30),n=[];for(let a=0;a<i;++a){let i=2*Math.PI*r(),a=Math.acos(1-2*r())-.5*Math.PI;n.push(e.v.fromValues(Math.cos(a)*Math.cos(i),Math.cos(a)*Math.sin(i),Math.sin(a)))}return n}(this.allocatedStarsCount),n=e.c2(300),a=new e.c0,s=new e.bp,o=0;for(let r=0;r<i.length;++r){let l=e.v.scale([],i[r],200),u=Math.max(0,1+1*(1*n()-.5)),h=Math.max(0,1+2*(1*n()-.5));a.emplaceBack(l[0],l[1],l[2],-1,-1,u,h),a.emplaceBack(l[0],l[1],l[2],1,-1,u,h),a.emplaceBack(l[0],l[1],l[2],1,1,u,h),a.emplaceBack(l[0],l[1],l[2],-1,1,u,h),s.emplaceBack(o+0,o+1,o+2),s.emplaceBack(o+0,o+2,o+3),o+=4}this.starsVx=r.createVertexBuffer(a,iG.members),this.starsIdx=r.createIndexBuffer(s),this.starsSegments=e.bm.simpleSegment(0,0,a.length,s.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(i,r){let n=i.context,a=n.gl,s=i.transform,o=new e.b4(a.LEQUAL,e.b4.ReadOnly,[0,1]),l=e.ao(s.zoom),u=r.properties.get("color").toArray01(),h=r.properties.get("high-color").toArray01(),c=r.properties.get("space-color").toArray01PremultipliedAlpha(),d=e.c1(r.properties.get("horizon-blend"),0,1,5e-4,.25),f=e.bb(i,n,s)&&5e-4===d?s.worldSize/(2*Math.PI*1.025)-1:s.globeRadius,p=i.frameCounter/1e3%1,m=e.v.length(s.globeCenterInViewSpace),_=Math.acos(Math.sqrt(Math.pow(m,2)-Math.pow(f,2))/m),g=r=>{var f,m,g;let y="globe"===s.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];r&&y.push("ALPHA_PASS");let v=i.getOrCreateProgram("globeAtmosphere",{defines:y}),x=(f=s.frustumCorners.TL,m=s.frustumCorners.TR,g=s.frustumCorners.BR,{u_frustum_tl:f,u_frustum_tr:m,u_frustum_br:g,u_frustum_bl:s.frustumCorners.BL,u_horizon:s.frustumCorners.horizon,u_transition:l,u_fadeout_range:d,u_color:u,u_high_color:h,u_space_color:c,u_temporal_offset:p,u_horizon_angle:_});i.uploadCommonUniforms(n,v);let b=this.atmosphereBuffer;b&&v.draw(i,a.TRIANGLES,o,e.b6.disabled,r?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,e.b5.backCW,x,r?"atmosphere_glow_alpha":"atmosphere_glow",b.vertexBuffer,b.indexBuffer,b.segments)};g(!1),g(!0)}drawStars(i,r){let n=e.c(r.properties.get("star-intensity"),0,1);if(0===n)return;let a=i.context,s=a.gl,o=i.transform,l=i.getOrCreateProgram("stars"),u=e.q.identity([]);e.q.rotateX(u,u,-o._pitch),e.q.rotateZ(u,u,-o.angle),e.q.rotateX(u,u,e.d(o._center.lat)),e.q.rotateY(u,u,-e.d(o._center.lng));let h=e.m.fromQuat(new Float32Array(16),u),c=e.m.multiply([],o.starsProjMatrix,h),d=e.bx.fromMat4([],h),f=e.bx.invert([],d),p=[0,1,0];e.v.transformMat3(p,p,f),e.v.scale(p,p,this.params.sizeMultiplier);let m=[1,0,0];e.v.transformMat3(m,m,f),e.v.scale(m,m,this.params.sizeMultiplier);let _={u_matrix:Float32Array.from(c),u_up:p,u_right:m,u_intensity_multiplier:n};i.uploadCommonUniforms(a,l),this.starsVx&&this.starsIdx&&l.draw(i,s.TRIANGLES,e.b4.disabled,e.b6.disabled,this.colorModeAlphaBlendedWriteRGB,e.b5.disabled,_,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function iX(i,r){let n=[...i],a=r.cameraWorldSizeForFog/r.worldSize,s=e.m.identity([]);return e.m.scale(s,s,[a,a,1]),e.m.multiply(n,s,n),e.m.multiply(n,r.worldToFogMatrix,n),n}function iJ(e,i,r,n){let a=r.material,s=n.context,{baseColorTexture:o,metallicRoughnessTexture:l}=a.pbrMetallicRoughness,{normalTexture:u,occlusionTexture:h,emissionTexture:c}=a;function d(i,r,n){if(i&&(e.push(r),s.activeTexture.set(s.gl.TEXTURE0+n),i.gfxTexture)){let{minFilter:e,magFilter:r,wrapS:n,wrapT:a}=i.sampler;i.gfxTexture.bindExtraParam(e,r,n,a)}}d(o,"HAS_TEXTURE_u_baseColorTexture",ig.BaseColor),d(l,"HAS_TEXTURE_u_metallicRoughnessTexture",ig.MetallicRoughness),d(u,"HAS_TEXTURE_u_normalTexture",ig.Normal),d(h,"HAS_TEXTURE_u_occlusionTexture",ig.Occlusion),d(c,"HAS_TEXTURE_u_emissionTexture",ig.Emission),r.texcoordBuffer&&(e.push("HAS_ATTRIBUTE_a_uv_2f"),i.push(r.texcoordBuffer)),r.colorBuffer&&(e.push(12===r.colorBuffer.itemSize?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),i.push(r.colorBuffer)),r.normalBuffer&&(e.push("HAS_ATTRIBUTE_a_normal_3f"),i.push(r.normalBuffer)),r.pbrBuffer&&(e.push("HAS_ATTRIBUTE_a_pbr"),e.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),i.push(r.pbrBuffer)),"OPAQUE"!==a.alphaMode&&"MASK"!==a.alphaMode||e.push("UNPREMULT_TEXTURE_IN_SHADER"),a.defined||e.push("DIFFUSE_SHADED"),e.push("USE_STANDARD_DERIVATIVES")}function iK(i,r,n,a,s,o){let l;let u=n.paint.get("model-opacity"),h=r.context,c=new e.b4(r.context.gl.LEQUAL,e.b4.ReadWrite,r.depthRangeFor3D),d=r.transform,f=i.mesh,p=f.material,m=p.pbrMetallicRoughness,_=r.style.fog;l="pixels"===r.transform.projection.zAxisUnit?[...i.nodeModelMatrix]:e.m.multiply([],a.zScaleMatrix,i.nodeModelMatrix),e.m.multiply(l,a.negCameraPosMatrix,l);let g=e.m.invert([],l);e.m.transpose(g,g);let y=n.paint.get("model-emissive-strength").constantOr(0),v=iy(new Float32Array(i.worldViewProjection),new Float32Array(l),new Float32Array(g),r,u,m.baseColorFactor,p.emissiveFactor,m.metallicFactor,m.roughnessFactor,p,y,n),x={defines:[]},b=[];iJ(x.defines,b,f,r);let w=r.shadowRenderer;w&&(w.useNormalOffset=!1);let M=null;if(_){let e=iX(i.nodeModelMatrix,r.transform);if(M=new Float32Array(e),"globe"!==d.projection.name){let i=f.aabb.min,r=f.aabb.max,[n,a]=_.getOpacityForBounds(e,i[0],i[1],r[0],r[1]);x.overrideFog=n>=.05||a>=.05}}let T=t$(r,n.paint.get("model-cutoff-fade-range"));T.shouldRenderCutoff&&x.defines.push("RENDER_CUTOFF");let L=r.getOrCreateProgram("model",x);r.uploadCommonUniforms(h,L,null,M,T),"shadow"!==r.renderPass&&w&&w.setupShadowsFromMatrix(i.nodeModelMatrix,L),L.draw(r,h.gl.TRIANGLES,c,s,o,f.material.doubleSided?e.b5.disabled:e.b5.backCCW,v,n.id,f.vertexBuffer,f.indexBuffer,f.segments,n.paint,r.transform.zoom,void 0,b)}function iQ(i,r,n,a){let s=n.shadowRenderer;if(!s)return;let o=s.getShadowPassDepthMode(),l=s.getShadowPassColorMode(),u=ix(s.calculateShadowPassMatrixFromMatrix(r));n.getOrCreateProgram("modelDepth",{defines:["DEPTH_TEXTURE"]}).draw(n,n.context.gl.TRIANGLES,o,e.b6.disabled,l,e.b5.backCCW,u,a.id,i.vertexBuffer,i.indexBuffer,i.segments,a.paint,n.transform.zoom,void 0,void 0)}let i0={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new e.c3([0,0,0],[e.J,e.J,0])},i1=[1,-1,1];class i2{}class i3{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(i,r,n){{let e=this._storage.get(r.id);if(e)return e.lastUsedFrameIdx=i,e.buf}let a=n.gl,s=a.getBufferParameter(a.ELEMENT_ARRAY_BUFFER,a.BUFFER_SIZE),o=new ArrayBuffer(s),l=new Int16Array(o);a.getBufferSubData(a.ELEMENT_ARRAY_BUFFER,0,new Int16Array(o));let u=new e.c9;for(let e=0;e<s/2;e+=3){let i=l[e],r=l[e+1],n=l[e+2];u.emplaceBack(i,r),u.emplaceBack(r,n),u.emplaceBack(n,i)}let h=n.bindVertexArrayOES.current,c=new i2;return c.buf=new e.I(n,u),c.lastUsedFrameIdx=i,this._storage.set(r.id,c),n.bindVertexArrayOES.set(h),c.buf}update(e){for(let[i,r]of this._storage)e-r.lastUsedFrameIdx>30&&(r.buf.destroy(),this._storage.delete(i))}destroy(){for(let[e,i]of this._storage)i.buf.destroy(),this._storage.delete(e)}}class i4{registerParameter(e,i,r,n,a){}registerButton(e,i,r){}}let i5={symbol:function(i,r,n,a,s){if("translucent"!==i.renderPass)return;let o=e.b6.disabled,l=i.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(i,r,n,a,s,o,l){let u=r.transform,h="map"===s,c="map"===o;for(let r of i){let i=a.getTile(r),s=i.getBucket(n);if(!s||!s.text||!s.text.segments.get().length)continue;let o=e.i(s.textSizeData,u.zoom),d=tr(r,s.getProjection(),u),f=u.calculatePixelsToTileUnitsMatrix(i),p=em(d,i.tileID.canonical,c,h,u,s.getProjection(),f),m=s.hasIconTextFit()&&s.hasIconData();if(o){let n=Math.pow(2,u.zoom-i.tileID.overscaledZ);(function(i,r,n,a,s,o,l,u,h,c,d){let f=i.text.placedSymbolArray,p=i.text.dynamicLayoutVertexArray,m=i.icon.dynamicLayoutVertexArray,_={},g=i.getProjection(),y=tr(u,g,o),v=o.elevation,x=g.upVectorScale(u.canonical,o.center.lat,o.worldSize).metersToTile;p.clear();for(let m=0;m<f.length;m++){let b=f.get(m),{tileAnchorX:w,tileAnchorY:M,numGlyphs:T}=b,L=b.hidden||!b.crossTileID||i.allowVerticalPlacement&&!b.placedOrientation?null:a[b.crossTileID];if(L){let a=0,f=0,m=0;if(v){let e=v?v.getAtTileOffset(u,w,M):0,[i,r,n]=g.upVector(u.canonical,w,M);a=e*i*x,f=e*r*x,m=e*n*x}let[S,k,D,E]=ey(b.projectedAnchorX+a,b.projectedAnchorY+f,b.projectedAnchorZ+m,n?y:l),A=ev(o.getCameraToCenterDistance(g),E),P=s.evaluateSizeForFeature(i.textSizeData,c,b)*A/e.aV;n&&(P*=i.tilePixelRatio/h);let C=function({width:i,height:r,anchor:n,textOffset:a,textScale:s},o){let{horizontalAlign:l,verticalAlign:u}=e.aY(n),h=e.aW(n,a);return new e.P((-(l-.5)*i/s+h[0])*o,(-(u-.5)*r/s+h[1])*o)}(L,P);n?({x:S,y:k,z:D}=g.projectTilePoint(w+C.x,M+C.y,u.canonical),[S,k,D]=ey(S+a,k+f,D+m,l)):(r&&C._rotate(-o.angle),S+=C.x,k+=C.y,D=0);let I=i.allowVerticalPlacement&&b.placedOrientation===e.W.vertical?Math.PI/2:0;for(let i=0;i<T;i++)e.k(p,S,k,D,I);d&&b.associatedIconIndex>=0&&(_[b.associatedIconIndex]={x:S,y:k,z:D,angle:I})}else eS(T,p)}if(d){m.clear();let r=i.icon.placedSymbolArray;for(let i=0;i<r.length;i++){let n=r.get(i),{numGlyphs:a}=n,s=_[i];if(n.hidden||!s)eS(a,m);else{let{x:i,y:r,z:n,angle:o}=s;for(let s=0;s<a;s++)e.k(m,i,r,n,o)}}i.icon.dynamicLayoutVertexBuffer.updateData(m)}i.text.dynamicLayoutVertexBuffer.updateData(p)})(s,h,c,l,e.bG,u,p,r,n,o,m)}}}(a,i,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),s),0!==n.paint.get("icon-opacity").constantOr(1)&&iT(i,r,n,a,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),n.paint.get("icon-color-saturation"),o,l),0!==n.paint.get("text-opacity").constantOr(1)&&iT(i,r,n,a,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),n.paint.get("icon-color-saturation"),o,l),r.map.showCollisionBoxes&&(iw(i,r,n,a,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),iw(i,r,n,a,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(i,r,n,a){if("translucent"!==i.renderPass)return;let s=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),l=n.paint.get("circle-stroke-opacity"),u=void 0!==n.layout.get("circle-sort-key").constantOr(1),h=n.paint.get("circle-emissive-strength");if(0===s.constantOr(1)&&(0===o.constantOr(1)||0===l.constantOr(1)))return;let c=i.context,d=c.gl,f=i.transform,p=i.depthModeForSublayer(0,e.b4.ReadOnly),m=e.b6.disabled,_=i.colorModeForDrapableLayerRenderPass(h),g="globe"===f.projection.name,y=[e.E(f.center.lng),e.H(f.center.lat)],v=[];for(let s=0;s<a.length;s++){let o=a[s],l=r.getTile(o),h=l.getBucket(n);if(!h||h.projection.name!==f.projection.name)continue;let c=h.programConfigurations.get(n.id),d=e.bH(n),p=i.isTileAffectedByFog(o);g&&d.push("PROJECTION_GLOBE_VIEW");let m=i.getOrCreateProgram("circle",{config:c,defines:d,overrideFog:p}),_=h.layoutVertexBuffer,x=h.globeExtVertexBuffer,b=h.indexBuffer,w=f.projection.createInversionMatrix(f,o.canonical),M={programConfiguration:c,program:m,layoutVertexBuffer:_,globeExtVertexBuffer:x,indexBuffer:b,uniformValues:e.bI(i,o,l,w,y,n),tile:l};if(u)for(let i of h.segments.get())v.push({segments:new e.bm([i]),sortKey:i.sortKey,state:M});else v.push({segments:h.segments,sortKey:0,state:M})}u&&v.sort((e,i)=>e.sortKey-i.sortKey);let x={useDepthForOcclusion:f.depthOcclusionForSymbolsAndCircles};for(let r of v){let{programConfiguration:a,program:s,layoutVertexBuffer:o,globeExtVertexBuffer:l,indexBuffer:u,uniformValues:h,tile:g}=r.state,y=r.segments;i.terrain&&i.terrain.setupElevationDraw(g,s,x),i.uploadCommonUniforms(c,s,g.tileID.toUnwrapped()),s.draw(i,d.TRIANGLES,p,m,_,e.b5.disabled,h,n.id,o,u,y,n.paint,f.zoom,a,[l])}},heatmap:function(i,r,n,a){if(0!==n.paint.get("heatmap-opacity")){if("offscreen"===i.renderPass){let s=i.context,o=s.gl,l=e.b6.disabled,u=new e.a([o.ONE,o.ONE,o.ONE,o.ONE],e.C.transparent,[!0,!0,!0,!0]);(function(e,i,r,n){let a=e.gl,s=i.width*n,o=i.height*n;e.activeTexture.set(a.TEXTURE1),e.viewport.set([0,0,s,o]);let l=r.heatmapFbo;if(!l||l&&(l.width!==s||l.height!==o)){l&&l.destroy();let i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),l=r.heatmapFbo=e.createFramebuffer(s,o,!0,null),function(e,i,r,n,a,s){let o=e.gl;o.texImage2D(o.TEXTURE_2D,0,e.extRenderToTextureHalfFloat?o.RGBA16F:o.RGBA,a,s,0,o.RGBA,e.extRenderToTextureHalfFloat?o.HALF_FLOAT:o.UNSIGNED_BYTE,null),n.colorAttachment.set(r)}(e,0,i,l,s,o)}else a.bindTexture(a.TEXTURE_2D,l.colorAttachment.get()),e.bindFramebuffer.set(l.framebuffer)})(s,i,n,"globe"===i.transform.projection.name?.5:.25),s.clear({color:e.C.transparent});let h=i.transform,c="globe"===h.projection.name,d=c?["PROJECTION_GLOBE_VIEW"]:[],f=c?e.b5.frontCCW:e.b5.disabled,p=[e.E(h.center.lng),e.H(h.center.lat)];for(let m=0;m<a.length;m++){let _=a[m];if(r.hasRenderableParent(_))continue;let g=r.getTile(_),y=g.getBucket(n);if(!y||y.projection.name!==h.projection.name)continue;let v=i.isTileAffectedByFog(_),x=y.programConfigurations.get(n.id),b=i.getOrCreateProgram("heatmap",{config:x,defines:d,overrideFog:v}),{zoom:w}=i.transform;i.terrain&&i.terrain.setupElevationDraw(g,b),i.uploadCommonUniforms(s,b,_.toUnwrapped());let M=h.projection.createInversionMatrix(h,_.canonical);b.draw(i,o.TRIANGLES,e.b4.disabled,l,u,f,il(i,_,g,M,p,w,n.paint.get("heatmap-intensity")),n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,i.transform.zoom,x,c?[y.globeExtVertexBuffer]:null)}s.viewport.set([0,0,i.width,i.height])}else"translucent"===i.renderPass&&(i.context.setColorMode(i.colorModeForRenderPass()),function(i,r){let n=i.context,a=n.gl,s=r.heatmapFbo;if(!s)return;n.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,s.colorAttachment.get()),n.activeTexture.set(a.TEXTURE1);let o=r.colorRampTexture;o||(o=r.colorRampTexture=new e.a9(n,r.colorRamp,a.RGBA)),o.bind(a.LINEAR,a.CLAMP_TO_EDGE),i.getOrCreateProgram("heatmapTexture").draw(i,a.TRIANGLES,e.b4.disabled,e.b6.disabled,i.colorModeForRenderPass(),e.b5.disabled,{u_image:0,u_color_ramp:1,u_opacity:r.paint.get("heatmap-opacity")},r.id,i.viewportBuffer,i.quadTriangleIndexBuffer,i.viewportSegments,r.paint,i.transform.zoom)}(i,n))}},line:function(i,r,n,a){if("translucent"!==i.renderPass)return;let s=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0===s.constantOr(1)||0===o.constantOr(1))return;let l=n.paint.get("line-emissive-strength"),u=i.depthModeForSublayer(0,e.b4.ReadOnly),h=i.colorModeForDrapableLayerRenderPass(l),c=i.terrain&&i.terrain.renderingToTexture?1:e.a4.devicePixelRatio,d=n.paint.get("line-dasharray"),f=d.constantOr(1),p=n.layout.get("line-cap"),m=n.paint.get("line-pattern"),_=m.constantOr(1),g=n.paint.get("line-pattern").constantOr(1),y=1!==n.paint.get("line-opacity").constantOr(1),v=!g&&y,x=n.paint.get("line-gradient"),b=_?"linePattern":"line",w=i.context,M=w.gl,T=e.bJ(n);for(let s of(i.terrain&&i.terrain.clipOrMaskOverlapStencilType()&&(v=!1),a)){let a=r.getTile(s);if(_&&!a.patternsLoaded())continue;let o=a.getBucket(n);if(!o)continue;i.prepareDrawTile();let l=o.programConfigurations.get(n.id),g=i.isTileAffectedByFog(s),y=i.getOrCreateProgram(b,{config:l,defines:T,overrideFog:g}),L=m.constantOr(null);if(L&&a.imageAtlas){let e=a.imageAtlas.patternPositions[L.toString()];e&&l.setConstantPatternPositions(e)}let S=d.constantOr(null),k=p.constantOr(null);if(!_&&S&&k&&a.lineAtlas){let e=a.lineAtlas.getDash(S,k);e&&l.setConstantPatternPositions(e)}let[D,E]=n.paint.get("line-trim-offset");("round"===k||"square"===k)&&D!==E&&(0===D&&(D-=1),1===E&&(E+=1));let A=i.terrain?s.projMatrix:null,P=_?e.bK(i,a,n,A,c):e.bL(i,a,n,A,o.lineClipsArray.length,c,[D,E]);if(x){let a=o.gradients[n.id],l=a.texture;if(n.gradientVersion!==a.version){let u=256;if(n.stepInterpolant){let n=r.getSource().maxzoom,a=s.canonical.z===n?Math.ceil(1<<i.transform.maxZoom-s.canonical.z):1;u=e.c(e.bM(o.maxLineLength/e.J*1024*a),256,w.maxTextureSize)}a.gradient=e.bN({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:u,image:a.gradient||void 0,clips:o.lineClipsArray}),a.texture?a.texture.update(a.gradient):a.texture=new e.a9(w,a.gradient,M.RGBA),a.version=n.gradientVersion,l=a.texture}w.activeTexture.set(M.TEXTURE1),l.bind(n.stepInterpolant?M.NEAREST:M.LINEAR,M.CLAMP_TO_EDGE)}f&&(w.activeTexture.set(M.TEXTURE0),a.lineAtlasTexture&&a.lineAtlasTexture.bind(M.LINEAR,M.REPEAT),l.updatePaintBuffers()),_&&(w.activeTexture.set(M.TEXTURE0),a.imageAtlasTexture&&a.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),l.updatePaintBuffers()),i.uploadCommonUniforms(w,y,s.toUnwrapped());let C=r=>{y.draw(i,M.TRIANGLES,u,r,h,e.b5.disabled,P,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,n.paint,i.transform.zoom,l,[o.layoutVertexBuffer2])};if(v){let r=i.stencilModeForClipping(s).ref;0===r&&i.terrain&&w.clear({stencil:0});let n={func:M.EQUAL,mask:255};P.u_alpha_discard_threshold=.8,C(new e.b6(n,r,255,M.KEEP,M.KEEP,M.INVERT)),P.u_alpha_discard_threshold=0,C(new e.b6(n,r,255,M.KEEP,M.KEEP,M.KEEP))}else C(i.stencilModeForClipping(s))}v&&(i.resetStencilClippingMasks(),i.terrain&&w.clear({stencil:0}))},fill:function(i,r,n,a){let s=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0===o.constantOr(1))return;let l=n.paint.get("fill-emissive-strength"),u=i.colorModeForDrapableLayerRenderPass(l),h=n.paint.get("fill-pattern"),c=i.opaquePassEnabledForLayer()&&!h.constantOr(1)&&1===s.constantOr(e.C.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(i.renderPass===c){let s=i.depthModeForSublayer(1,"opaque"===i.renderPass?e.b4.ReadWrite:e.b4.ReadOnly);iS(i,r,n,a,s,u,!1)}if("translucent"===i.renderPass&&n.paint.get("fill-antialias")){let s=i.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,e.b4.ReadOnly);iS(i,r,n,a,s,u,!0)}},"fill-extrusion":function(i,r,n,a){let s=n.paint.get("fill-extrusion-opacity"),o=i.context,l=o.gl,u=i.terrain,h=u&&u.renderingToTexture;if(0===s)return;let c=i.conflationActive&&i.layerUsedInConflation(n,r.getSource());if(c&&function(e,i,r,n){for(let a of n){let n=i.getTile(a).getBucket(r);n&&(n.updateReplacement(a,e.replacementSource),n.uploadCentroid(e.context))}}(i,r,n,a),u||c)for(let s of a){let a=r.getTile(s).getBucket(n);a&&function(i,r,n,a,s,o,l){0===a.centroidVertexArray.length&&a.createCentroidsBuffer();let u=o?o.findDEMTileFor(n):null;if(!(u&&u.dem||l))return;let h=i=>new e.P(Math.ceil((i+e.bS)*e.bT),0),c=e=>{let i=r.getSource().minzoom,n=e=>{let i=r.getTileByID(e);if(i&&i.hasData())return i.getBucket(s)};for(let r of[0,-1,1]){if(e.overscaledZ+r<i)continue;let a=n(e.calculateScaledKey(e.overscaledZ+r));if(a)return a}},d=[0,0,0],f=(i,r)=>(d[0]=Math.min(i.min.y,r.min.y),d[1]=Math.max(i.max.y,r.max.y),d[2]=e.J-r.min.x>i.max.x?r.min.x-e.J:i.max.x,d),p=(i,r)=>(d[0]=Math.min(i.min.x,r.min.x),d[1]=Math.max(i.max.x,r.max.x),d[2]=e.J-r.min.y>i.max.y?r.min.y-e.J:i.max.y,d),m=[(e,i)=>f(e,i),(e,i)=>f(i,e),(e,i)=>p(e,i),(e,i)=>p(i,e)],_=(i,r,a,s,l,h,c)=>{if(!o)return 0;let d=[[h?a:i,h?i:a,0],[h?a:r,h?r:a,0]],f=c<0?e.J+c:c,p=[h?f:(i+r)/2,h?(i+r)/2:f,0];return 0===a&&c<0||0!==a&&c>0?o.getForTilePoints(l,[p],!0,s):d.push(p),o.getForTilePoints(n,d,!0,u),Math.max(d[0][2],d[1][2],p[2])/o.exaggeration()};for(let i=0;i<4;i++){let r=a.borderFeatureIndices[i];if(0===r.length)continue;let s=e.bP[i](n),u=c(s);if(!(u&&u instanceof e.bQ)||a.borderDoneWithNeighborZ[i]===u.canonical.z)continue;0===u.centroidVertexArray.length&&u.createCentroidsBuffer();let d=o?o.findDEMTileFor(s):null;if(!(d&&d.dem||l))continue;let f=(i<2?1:5)-i,p=u.borderDoneWithNeighborZ[f]!==a.canonical.z,g=u.borderFeatureIndices[f],y=0;if(a.canonical.z!==u.canonical.z){for(let e of r)a.showCentroid(a.featuresOnBorder[e]);if(p)for(let e of g)u.showCentroid(u.featuresOnBorder[e]);a.borderDoneWithNeighborZ[i]=u.canonical.z,u.borderDoneWithNeighborZ[f]=a.canonical.z}for(let n of r){let r;let o=a.featuresOnBorder[n],c=a.centroidData[o.centroidDataIndex],p=o.borders[i];for(;y<g.length;){let e=(r=u.featuresOnBorder[g[y]]).borders[f];if(e[1]>p[0]+3||e[0]>p[0]-3)break;u.showCentroid(r),y++}if(r&&y<g.length){let n=y,v=0;for(;!(r.borders[f][0]>p[1]-3)&&(v++,++y!==g.length);)r=u.featuresOnBorder[g[y]];if(r=u.featuresOnBorder[g[n]],v>1){let e=r.borders[f];3>Math.abs(p[0]-e[0])&&3>Math.abs(p[1]-e[1])&&(v=1,y=n+1)}else if(0===v){a.showCentroid(o);continue}let x=u.centroidData[r.centroidDataIndex];l&&1===v&&((c.flags|x.flags)&e.bR?(c.flags|=e.bR,x.flags|=e.bR):(c.flags&=~e.bR,x.flags&=~e.bR));let b=o.intersectsCount()>1||r.intersectsCount()>1;if(v>1)y=n,c.centroidXY=x.centroidXY=new e.P(0,0);else if(d&&d.dem&&!b){let r=m[i](c,x),n=i%2?e.J-1:0,a=_(r[0],Math.min(e.J-1,r[1]),n,d,s,i<2,r[2]);c.centroidXY=x.centroidXY=h(a)}else b?c.centroidXY=x.centroidXY=new e.P(0,0):(c.centroidXY=a.encodeBorderCentroid(o),x.centroidXY=u.encodeBorderCentroid(r));a.writeCentroidToBuffer(c),u.writeCentroidToBuffer(x)}else a.showCentroid(o)}a.borderDoneWithNeighborZ[i]=u.canonical.z,u.borderDoneWithNeighborZ[f]=a.canonical.z}(a.needsCentroidUpdate||!a.centroidVertexBuffer&&0!==a.centroidVertexArray.length)&&a.uploadCentroid(i)}(i.context,r,s,a,n,u,c)}if("shadow"===i.renderPass&&i.shadowRenderer){let o=i.shadowRenderer;if(u&&s<.65&&n._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof e.am)return;let l=o.getShadowPassDepthMode(),h=o.getShadowPassColorMode();ik(i,r,n,a,l,e.b6.disabled,h,c)}else if("translucent"===i.renderPass){let d=!n.paint.get("fill-extrusion-pattern").constantOr(1),f=n.paint.get("fill-extrusion-color").constantOr(e.C.white);if(!h&&0!==f.a){let o=new e.b4(i.context.gl.LEQUAL,e.b4.ReadWrite,i.depthRangeFor3D);1===s&&d?ik(i,r,n,a,o,e.b6.disabled,e.a.unblended,c):(ik(i,r,n,a,o,e.b6.disabled,e.a.disabled,c),ik(i,r,n,a,o,i.stencilModeFor3D(),i.colorModeForRenderPass(),c),i.resetStencilClippingMasks())}if(i.style.enable3dLights()&&d&&(!u&&"globe"!==i.transform.projection.name||h)){let s=n.paint.get("fill-extrusion-opacity"),d=n.paint.get("fill-extrusion-ambient-occlusion-intensity"),f=n.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),p=n.paint.get("fill-extrusion-flood-light-intensity"),m=n.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),_=d>0&&f>0,g=p>0,y=(e,i,r)=>(1-r)*e+r*i,v=o=>{let u=i.depthModeForSublayer(1,e.b4.ReadOnly,l.LEQUAL,!0),h=y(.1,3,n.paint.get(o?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation")),_=i._showOverdrawInspector;_||iD(i,r,n,a,u,new e.b6({func:l.ALWAYS,mask:255},255,255,l.KEEP,l.KEEP,l.REPLACE),new e.a([l.ONE,l.ONE,l.ONE,l.ONE],e.C.transparent,[!1,!1,!1,!0],l.MIN),e.b5.disabled,o,"sdf",s,d,f,p,m,h,c,!1);{let g=_?e.b6.disabled:new e.b6({func:l.EQUAL,mask:255},255,255,l.KEEP,l.DECR,l.DECR),y=_?i.colorModeForRenderPass():new e.a([l.ONE_MINUS_DST_ALPHA,l.DST_ALPHA,l.ONE,l.ONE],e.C.transparent,[!0,!0,!0,!0]);iD(i,r,n,a,u,g,y,e.b5.disabled,o,"color",s,d,f,p,m,h,c,!1)}};if(h){let h=(o,u,h)=>{let _=i.depthModeForSublayer(1,e.b4.ReadOnly,l.LEQUAL,!1),g=y(.1,3,n.paint.get(o?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"));{let h=new e.a([l.ONE,l.ONE,l.ONE,l.ONE],e.C.transparent,[!1,!1,!1,!0]);iD(i,r,n,a,_,e.b6.disabled,h,e.b5.disabled,o,"clear",s,d,f,p,m,g,c,u)}iD(i,r,n,a,_,new e.b6({func:l.ALWAYS,mask:255},255,255,l.KEEP,l.KEEP,l.REPLACE),new e.a([l.ONE,l.ONE,l.ONE,l.ONE],e.C.transparent,[!1,!1,!1,!0],l.MIN),e.b5.disabled,o,"sdf",s,d,f,p,m,g,c,u);{let h=o?l.ZERO:l.ONE_MINUS_DST_ALPHA;iD(i,r,n,a,_,new e.b6({func:l.EQUAL,mask:255},255,255,l.KEEP,l.DECR,l.DECR),new e.a([h,l.DST_ALPHA,l.ONE_MINUS_DST_ALPHA,l.ZERO],e.C.transparent,[!0,!0,!0,!0]),e.b5.disabled,o,"color",s,d,f,p,m,g,c,u)}{let y=new e.a([l.ONE,l.ONE,l.ONE,o?l.ZERO:l.ONE],e.C.transparent,[!1,!1,!1,!0],o?l.FUNC_ADD:l.MAX);iD(i,r,n,a,_,e.b6.disabled,y,e.b5.disabled,o,"clear",s,d,f,p,m,g,c,u,h)}};if(_||g){let r;if(i.prepareDrawTile(),u){let i=u.drapeBufferSize[0],n=u.drapeBufferSize[1];(r=u.framebufferCopyTexture)&&(!r||r.size[0]===i&&r.size[1]===n)||(r&&r.destroy(),r=u.framebufferCopyTexture=new e.a9(o,new e.a5({width:i,height:n}),l.RGBA)),r.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,i,n,0)}_&&h(!0,!1,r),g&&h(!1,!0,r)}}else _&&v(!0),g&&v(!1)}}},hillshade:function(i,r,n,a){if("offscreen"!==i.renderPass&&"translucent"!==i.renderPass||i.style.disableElevatedTerrain)return;let s=i.context,o=i.terrain&&i.terrain.renderingToTexture,[l,u]="translucent"!==i.renderPass||o?[{},a]:i.stencilConfigForOverlap(a);for(let a of u){let s=r.getTile(a);if(s.needsHillshadePrepare&&"offscreen"===i.renderPass)!function(i,r,n){let a=i.context,s=a.gl;if(!r.dem)return;let o=r.dem;if(a.activeTexture.set(s.TEXTURE1),tN(i,r,o),!r.demTexture)return;r.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE);let l=o.dim;a.activeTexture.set(s.TEXTURE0);let u=r.hillshadeFBO;if(!u){let i=new e.a9(a,{width:l,height:l,data:null},s.RGBA);i.bind(s.LINEAR,s.CLAMP_TO_EDGE),(u=r.hillshadeFBO=a.createFramebuffer(l,l,!0,"renderbuffer")).colorAttachment.set(i.texture)}a.bindFramebuffer.set(u.framebuffer),a.viewport.set([0,0,l,l]);let{tileBoundsBuffer:h,tileBoundsIndexBuffer:c,tileBoundsSegments:d}=i.getMercatorTileBoundsBuffers(),f=[];i.linearFloatFilteringSupported()&&f.push("TERRAIN_DEM_FLOAT_FORMAT"),i.getOrCreateProgram("hillshadePrepare",{defines:f}).draw(i,s.TRIANGLES,e.b4.disabled,e.b6.disabled,e.a.unblended,e.b5.disabled,((i,r)=>{let n=r.stride,a=e.m.create();return e.m.ortho(a,0,e.J,-e.J,0,0,1),e.m.translate(a,a,[0,-e.J,0]),{u_matrix:a,u_image:1,u_dimension:[n,n],u_zoom:i.overscaledZ}})(r.tileID,o),n.id,h,c,d),r.needsHillshadePrepare=!1}(i,s,n);else if("translucent"===i.renderPass){let r=i.depthModeForSublayer(0,e.b4.ReadOnly),u=n.paint.get("hillshade-emissive-strength"),h=i.colorModeForDrapableLayerRenderPass(u),c=o&&i.terrain?i.terrain.stencilModeForRTTOverlap(a):l[a.overscaledZ];!function(i,r,n,a,s,o,l){let u=i.context,h=u.gl,c=n.hillshadeFBO;if(!c)return;i.prepareDrawTile();let d=i.isTileAffectedByFog(r),f=i.getOrCreateProgram("hillshade",{overrideFog:d});u.activeTexture.set(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,c.colorAttachment.get());let p=((i,r,n,a)=>{let s=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),l=n.paint.get("hillshade-accent-color"),u=n.paint.get("hillshade-emissive-strength"),h=e.d(n.paint.get("hillshade-illumination-direction"));if("viewport"===n.paint.get("hillshade-illumination-anchor"))h-=i.transform.angle;else if(i.style&&i.style.enable3dLights()&&i.style.directionalLight){let r=i.style.directionalLight.properties.get("direction"),n=e.b3(r.x,r.y,r.z);h=e.d(n[1])}let c=!i.options.moving;return{u_matrix:a||i.transform.calculateProjMatrix(r.tileID.toUnwrapped(),c),u_image:0,u_latrange:function(i,r){let n=Math.pow(2,r.canonical.z),a=r.canonical.y;return[new e.M(0,a/n).toLngLat().lat,new e.M(0,(a+1)/n).toLngLat().lat]}(0,r.tileID),u_light:[n.paint.get("hillshade-exaggeration"),h],u_shadow:s,u_highlight:o,u_emissive_strength:u,u_accent:l}})(i,n,a,i.terrain?r.projMatrix:null);i.uploadCommonUniforms(u,f,r.toUnwrapped());let{tileBoundsBuffer:m,tileBoundsIndexBuffer:_,tileBoundsSegments:g}=i.getTileBoundsBuffers(n);f.draw(i,h.TRIANGLES,s,o,l,e.b5.disabled,p,a.id,m,_,g)}(i,a,s,n,r,c,h)}}s.viewport.set([0,0,i.width,i.height]),i.resetStencilClippingMasks()},raster:function(i,r,n,a,s,o){if("translucent"!==i.renderPass||0===n.paint.get("raster-opacity"))return;let l=i.context,u=l.gl,h=r.getSource(),c=function(i,r,n){let a=i.paint.get("raster-color"),s=[],o=i.paint.get("raster-resampling"),l=i.paint.get("raster-color-mix"),u=i.paint.get("raster-color-range"),h=[l[0],l[1],l[2],0],c=l[3],d="nearest"===o?n.NEAREST:n.LINEAR;if(a&&s.push("RASTER_COLOR"),a){r.activeTexture.set(n.TEXTURE2);let a=i.colorRampTexture;a||(a=i.colorRampTexture=new e.a9(r,i.colorRamp,n.RGBA)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE)}return{mix:h,range:u,offset:c,defines:s,resampling:d}}(n,l,u),d=c.defines,f="globe"===i.transform.projection.name,p=!1;if(h instanceof e.aK&&!a.length){if(!f)return;if(h.onNorthPole)p=!0,d.push("GLOBE_POLES");else{if(!h.onSouthPole)return;p=!0,d.push("GLOBE_POLES")}}let m=n.paint.get("raster-emissive-strength"),_=i.colorModeForDrapableLayerRenderPass(m),g=i.terrain&&i.terrain.renderingToTexture,y=h instanceof e.aK&&0!==n.paint.get("raster-elevation"),v=!i.options.moving,x="nearest"===n.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;if(p){var b,w,M,T,L;let a;let s=r.getSource();if(!(s instanceof e.aK))return;let o=s.texture;if(!o)return;let h=i.globeSharedBuffers;if(!h)return;let d=new e.b4(u.LEQUAL,e.b4.ReadWrite,i.depthRangeFor3D),f=Float32Array.from(i.transform.expandedFarZProjMatrix),p=e.bj(0,0,i.transform),g=Float32Array.from(e.bh(e.bi(new e.t(0,0,0))));i.terrain&&i.terrain.prepareDrawTile(),l.activeTexture.set(u.TEXTURE0),o.bind(x,u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE1),o.bind(x,u.CLAMP_TO_EDGE),o.useMipmap&&l.extTextureFilterAnisotropic&&i.transform.pitch>20&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax);let[y,v,S,k]=h.getPoleBuffers(0,!0);s.onNorthPole?(a=y,i.renderDefaultNorthPole=!1):(p=e.m.scale(e.m.create(),p,[1,-1,1]),a=v,i.renderDefaultSouthPole=!1);let D=(b=p,w=n.paint.get("raster-elevation"),M=c.mix,T=c.offset,L=c.range,iu(f,g,b,new Float32Array(16),new Float32Array(9),[0,0],0,[0,0],[0,0,0,0],1,{opacity:1,mix:0},n,[0,0],w,2,M,T,L,1,0,m)),E=i.getOrCreateProgram("raster",{defines:c.defines});return i.uploadCommonUniforms(l,E,null),void E.draw(i,u.TRIANGLES,d,e.b6.disabled,_,e.b5.disabled,D,n.id,a,S,k)}if(!a.length)return;let[S,k]=h instanceof e.aK||g?[{},a]:i.stencilConfigForOverlap(a),D=k[k.length-1].overscaledZ,E=y&&f;for(let a of(E&&c.defines.push("PROJECTION_GLOBE_VIEW"),y&&c.defines.push("RENDER_CUTOFF"),k)){let s,d,p,b,w,M,T,L,k,A;let P=a.toUnwrapped(),C=r.getTile(a);if(g&&(!C||!C.hasData())||!C.texture)continue;g?(s=e.b4.disabled,d=a.projMatrix):y?(s=new e.b4(u.LEQUAL,e.b4.ReadWrite,i.depthRangeFor3D),d=f?Float32Array.from(i.transform.expandedFarZProjMatrix):i.transform.calculateProjMatrix(P,v)):(s=i.depthModeForSublayer(a.overscaledZ-D,1===n.paint.get("raster-opacity")?e.b4.ReadWrite:e.b4.ReadOnly,u.LESS),d=i.transform.calculateProjMatrix(P,v));let I=i.terrain&&g?i.terrain.stencilModeForRTTOverlap(a):S[a.overscaledZ],O=o?0:n.paint.get("raster-fade-duration");C.registerFadeDuration(O);let z=r.findLoadedParent(a,0),R=tJ(C,z,r,i.transform,O);i.terrain&&i.terrain.prepareDrawTile(),l.activeTexture.set(u.TEXTURE0),C.texture&&C.texture.bind(x,u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE1),z?(z.texture&&z.texture.bind(x,u.CLAMP_TO_EDGE),p=Math.pow(2,z.tileID.overscaledZ-C.tileID.overscaledZ),b=[C.tileID.canonical.x*p%1,C.tileID.canonical.y*p%1]):C.texture&&C.texture.bind(x,u.CLAMP_TO_EDGE),C.texture&&C.texture.useMipmap&&l.extTextureFilterAnisotropic&&i.transform.pitch>20&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax);let Y=i.transform,F=y?function(e){let i=e._nearZ,r=e.projection.farthestPixelDistance(e),n=r-i,a=.2*e.height,s=i+a;return[i,r,(s-a-i)/n,(s-i)/n]}(Y):[0,0,0,0];E&&h instanceof e.aK&&h.coordinates.length>3?(M=Float32Array.from(e.bh(e.bi(new e.t(0,0,0)))),T=Float32Array.from(Y.globeMatrix),L=Float32Array.from(e.bc(Y)),k=[e.E(Y.center.lng),e.H(Y.center.lat)],w=h.elevatedGlobePerspectiveTransform,A=h.elevatedGlobeGridMatrix||new Float32Array(9)):(w=h instanceof e.aK?h.perspectiveTransform:[0,0],M=new Float32Array(16),T=new Float32Array(9),L=new Float32Array(16),k=[0,0],A=new Float32Array(9));let j=iu(d,M,T,L,A,b||[0,0],e.ao(i.transform.zoom),k,F,p||1,R,n,w,y?n.paint.get("raster-elevation"):0,2,c.mix,c.offset,c.range,1,0,m),B=i.isTileAffectedByFog(a),N=i.getOrCreateProgram("raster",{defines:c.defines,overrideFog:B});if(i.uploadCommonUniforms(l,N,P),h instanceof e.aK){let r=h.elevatedGlobeVertexBuffer,a=h.elevatedGlobeIndexBuffer;if(g||!f)h.boundsBuffer&&h.boundsSegments&&N.draw(i,u.TRIANGLES,s,e.b6.disabled,_,e.b5.disabled,j,n.id,h.boundsBuffer,i.quadTriangleIndexBuffer,h.boundsSegments);else if(r&&a){let o=Y.zoom<=e.Z?h.elevatedGlobeSegments:h.getSegmentsForLongitude(Y.center.lng);o&&(N.draw(i,u.TRIANGLES,s,e.b6.disabled,_,e.b5.backCW,j,n.id,r,a,o),N.draw(i,u.TRIANGLES,s,e.b6.disabled,_,e.b5.frontCW,j,n.id,r,a,o))}}else{let{tileBoundsBuffer:r,tileBoundsIndexBuffer:a,tileBoundsSegments:o}=i.getTileBoundsBuffers(C);N.draw(i,u.TRIANGLES,s,I,_,e.b5.disabled,j,n.id,r,a,o)}}i.resetStencilClippingMasks()},background:function(i,r,n,a){let s=n.paint.get("background-color"),o=n.paint.get("background-opacity"),l=n.paint.get("background-emissive-strength");if(0===o)return;let u=i.context,h=u.gl,c=i.transform,d=c.tileSize,f=n.paint.get("background-pattern");if(i.isPatternMissing(f,n.scope))return;let p=!f&&1===s.a&&1===o&&i.opaquePassEnabledForLayer()?"opaque":"translucent";if(i.renderPass!==p)return;let m=e.b6.disabled,_=i.depthModeForSublayer(0,"opaque"===p?e.b4.ReadWrite:e.b4.ReadOnly),g=i.colorModeForDrapableLayerRenderPass(l),y=f?"backgroundPattern":"background",v,x=a;for(let p of(x||(x=Object.values(v=i.getBackgroundTiles()).map(e=>e.tileID)),f&&(u.activeTexture.set(h.TEXTURE0),i.imageManager.bind(i.context,n.scope)),x)){let x=i.isTileAffectedByFog(p),b=i.getOrCreateProgram(y,{overrideFog:x}),w=p.toUnwrapped(),M=a?p.projMatrix:i.transform.calculateProjMatrix(w);i.prepareDrawTile();let T=r?r.getTile(p):v?v[p.key]:new e.bt(p,d,c.zoom,i),L=f?i_(M,l,o,i,f,n.scope,{tileID:p,tileSize:d}):im(M,l,o,s);i.uploadCommonUniforms(u,b,w);let{tileBoundsBuffer:S,tileBoundsIndexBuffer:k,tileBoundsSegments:D}=i.getTileBoundsBuffers(T);b.draw(i,h.TRIANGLES,_,m,g,e.b5.disabled,L,n.id,S,k,D)}},sky:function(i,r,n){let a=i._atmosphere?e.ao(i.transform.zoom):1,s=n.paint.get("sky-opacity")*a;if(0===s)return;let o=i.context,l=n.paint.get("sky-type"),u=new e.b4(o.gl.LEQUAL,e.b4.ReadOnly,[0,1]),h=i.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===i.renderPass?n.needsSkyboxCapture(i)&&(function(i,r,n,a){let s=i.context,o=s.gl,l=r.skyboxFbo;if(!l){l=r.skyboxFbo=s.createFramebuffer(32,32,!0,null),r.skyboxGeometry=new iV(s),r.skyboxTexture=s.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,r.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let e=0;e<6;++e)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}s.bindFramebuffer.set(l.framebuffer),s.viewport.set([0,0,32,32]);let u=r.getCenter(i,!0),h=i.getOrCreateProgram("skyboxCapture"),c=new Float64Array(16);e.m.identity(c),e.m.rotateY(c,c,-(.5*Math.PI)),iU(i,r,h,c,u,0),e.m.identity(c),e.m.rotateY(c,c,.5*Math.PI),iU(i,r,h,c,u,1),e.m.identity(c),e.m.rotateX(c,c,-(.5*Math.PI)),iU(i,r,h,c,u,2),e.m.identity(c),e.m.rotateX(c,c,.5*Math.PI),iU(i,r,h,c,u,3),e.m.identity(c),iU(i,r,h,c,u,4),e.m.identity(c),e.m.rotateY(c,c,Math.PI),iU(i,r,h,c,u,5),s.viewport.set([0,0,i.width,i.height])}(i,n),n.markSkyboxValid(i)):"sky"===i.renderPass&&function(i,r,n,a,s){let o=i.context,l=o.gl,u=i.transform,h=i.getOrCreateProgram("skybox");o.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_CUBE_MAP,r.skyboxTexture);let c={u_matrix:u.skyboxMatrix,u_sun_direction:r.getCenter(i,!1),u_cubemap:0,u_opacity:a,u_temporal_offset:s};i.uploadCommonUniforms(o,h),h.draw(i,l.TRIANGLES,n,e.b6.disabled,i.colorModeForRenderPass(),e.b5.backCW,c,"skybox",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(i,n,u,s,h):"gradient"===l&&"sky"===i.renderPass&&function(i,r,n,a,s){var o,l,u;let h=i.context,c=h.gl,d=i.transform,f=i.getOrCreateProgram("skyboxGradient");r.skyboxGeometry||(r.skyboxGeometry=new iV(h)),h.activeTexture.set(c.TEXTURE0);let p=r.colorRampTexture;p||(p=r.colorRampTexture=new e.a9(h,r.colorRamp,c.RGBA)),p.bind(c.LINEAR,c.CLAMP_TO_EDGE);let m=(o=d.skyboxMatrix,l=r.getCenter(i,!1),u=r.paint.get("sky-gradient-radius"),{u_matrix:o,u_color_ramp:0,u_center_direction:l,u_radius:e.d(u),u_opacity:a,u_temporal_offset:s});i.uploadCommonUniforms(h,f),f.draw(i,c.TRIANGLES,n,e.b6.disabled,i.colorModeForRenderPass(),e.b5.backCW,m,"skyboxGradient",r.skyboxGeometry.vertexBuffer,r.skyboxGeometry.indexBuffer,r.skyboxGeometry.segment)}(i,n,u,s,h)},debug:function(i,r,n,a,s){for(let o=0;o<n.length;o++)if(s){let s=new e.C(.8*a.r,.8*a.g,.8*a.b,1);iY(i,r,n[o],a,-1,-1),iY(i,r,n[o],a,-1,1),iY(i,r,n[o],a,1,1),iY(i,r,n[o],a,1,-1),iY(i,r,n[o],s,0,0)}else iY(i,r,n[o],a,0,0)},custom:function(i,r,n,a){let s=i.context,o=n.implementation;if(!i.transform.projection.unsupportedLayers||!i.transform.projection.unsupportedLayers.includes("custom")||i.terrain&&(i.terrain.renderingToTexture||"offscreen"===i.renderPass)&&n.isLayerDraped(r)){if("offscreen"===i.renderPass){let r=o.prerender;if(r){if(i.setCustomLayerDefaults(),s.setColorMode(i.colorModeForRenderPass()),"globe"===i.transform.projection.name){let n=i.transform.pointMerc;r.call(o,s.gl,i.transform.customLayerMatrix(),i.transform.getProjection(),i.transform.globeToMercatorMatrix(),e.ao(i.transform.zoom),[n.x,n.y],i.transform.pixelsPerMeterRatio)}else r.call(o,s.gl,i.transform.customLayerMatrix());s.setDirty(),i.setBaseState()}}else if("translucent"===i.renderPass){if(i.terrain&&i.terrain.renderingToTexture){let r=o.renderToTile;if(r){let n=a[0].canonical,l=new e.M(n.x+a[0].wrap*(1<<n.z),n.y,n.z);s.setDepthMode(e.b4.disabled),s.setStencilMode(e.b6.disabled),s.setColorMode(i.colorModeForRenderPass()),i.setCustomLayerDefaults(),r.call(o,s.gl,l),s.setDirty(),i.setBaseState()}return}i.setCustomLayerDefaults(),s.setColorMode(i.colorModeForRenderPass()),s.setStencilMode(e.b6.disabled);let r="3d"===o.renderingMode?new e.b4(i.context.gl.LEQUAL,e.b4.ReadWrite,i.depthRangeFor3D):i.depthModeForSublayer(0,e.b4.ReadOnly);if(s.setDepthMode(r),"globe"===i.transform.projection.name){let r=i.transform.pointMerc;o.render(s.gl,i.transform.customLayerMatrix(),i.transform.getProjection(),i.transform.globeToMercatorMatrix(),e.ao(i.transform.zoom),[r.x,r.y],i.transform.pixelsPerMeterRatio)}else o.render(s.gl,i.transform.customLayerMatrix());s.setDirty(),i.setBaseState(),s.bindFramebuffer.set(null)}}else e.X("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(i,r,n,a){if("opaque"===i.renderPass)return;let s=n.paint.get("model-opacity");if(0===s)return;let o=n.paint.get("model-cast-shadows");if("shadow"===i.renderPass&&(!o||i.terrain&&s<.65&&n._transitionablePaint._values["model-opacity"].value.expression instanceof e.am))return;let l=i.shadowRenderer,u=n.paint.get("model-receive-shadows");l&&(l.useNormalOffset=!0,u||(l.enabled=!1));let h=()=>{l&&(l.useNormalOffset=!0,u||(l.enabled=!0))},c=r.getSource();if("light-beam"===i.renderPass&&"batched-model"!==c.type)return;if("vector"===c.type||"geojson"===c.type)return function(i,r,n,a){let s=i.transform;if("mercator"!==s.projection.name)return void e.X(`Drawing 3D models for ${s.projection.name} projection is not yet implemented`);let o=s.getFreeCameraOptions().position;if(!i.modelManager)return;let l=i.modelManager,u=i.shadowRenderer;if(!n._unevaluatedLayout._values.hasOwnProperty("model-id"))return;let h=n._unevaluatedLayout._values["model-id"],c={...n.layout.get("model-id").parameters};for(let d of a){let a=r.getTile(d).getBucket(n);if(!a||a.projection.name!==s.projection.name)continue;let f=function(i,r){let n=1<<i.canonical.z,a=r.getFreeCameraOptions().position,s=r.elevation,o=i.canonical.x/n,l=(i.canonical.x+1)/n,u=i.canonical.y/n,h=(i.canonical.y+1)/n,c=r._centerAltitude;if(s){let e=s.getMinMaxForTile(i);e&&e.max>c&&(c=e.max)}let d=e.c(a.x,o,l)-a.x,f=e.c(a.y,u,h)-a.y,p=e.b(c,r.center.lat)-a.z;return r._zoomFromMercatorZ(Math.sqrt(d*d+f*f+p*p))}(d,s);c.zoom=f;let p=h.possiblyEvaluate(c);if(function(i,r,n){let a=r.updateZoomBasedPaintProperties(),s=function(i,r,n){let a,s,o,l=i.terrain?i.terrain.exaggeration():0;if(i.terrain&&l>0){let r=i.terrain,s=r.findDEMTileFor(n);s&&s.dem?a=e.c7.create(r,n,s):l=0}if(0===l&&(r.terrainElevationMin=0,r.terrainElevationMax=0),l===r.validForExaggeration&&(0===l||a&&a._demTile&&a._demTile.tileID===r.validForDEMTile.id&&a._dem._timestamp===r.validForDEMTile.timestamp))return!1;for(let e in r.instancesPerModel){let i=r.instancesPerModel[e];for(let e=0;e<i.instancedDataArray.length;++e){let n=(a?l*a.getElevationAt(0|i.instancedDataArray.float32[16*e],0|i.instancedDataArray.float32[16*e+1],!0,!0):0)+i.instancesEvaluatedElevation[e];i.instancedDataArray.float32[16*e+6]=n,s=s?Math.min(r.terrainElevationMin,n):n,o=o?Math.max(r.terrainElevationMax,n):n}}return r.terrainElevationMin=s||0,r.terrainElevationMax=o||0,r.validForExaggeration=l,r.validForDEMTile=a&&a._demTile?{id:a._demTile.tileID,timestamp:a._dem._timestamp}:{id:void 0,timestamp:0},!0}(i,r,n);(a||s)&&(r.uploaded=!1,r.upload(i.context))}(i,a,d),i0.shadowUniformsInitialized=!1,i0.useSingleShadowCascade=!!u&&0===u.getMaxCascadeForTile(d.toUnwrapped()),"shadow"===i.renderPass&&u){if(1===i.currentShadowCascade&&a.isInsideFirstShadowMapFrustum)continue;let r=s.calculatePosMatrix(d.toUnwrapped(),s.worldSize);if(i0.tileMatrix.set(r),i0.shadowTileMatrix=Float32Array.from(u.calculateShadowPassMatrixFromMatrix(r)),i0.aabb.min.fill(0),i0.aabb.max[0]=i0.aabb.max[1]=e.J,i0.aabb.max[2]=0,function(i,r,n,a){if(!n.modelManager)return!0;let s=n.modelManager;if(!n.shadowRenderer)return!0;let o=n.shadowRenderer,l=r.aabb,u=!0,h=i.maxHeight;if(0===h){let e=0;for(let r in i.instancesPerModel){let i=s.getModel(r,a);i?e=Math.max(e,Math.max(Math.max(i.aabb.max[0],i.aabb.max[1]),i.aabb.max[2])):u=!1}h=i.maxScale*e*1.41+i.maxVerticalOffset,u&&(i.maxHeight=h)}l.max[2]=h,l.min[2]+=i.terrainElevationMin,l.max[2]+=i.terrainElevationMax,e.v.transformMat4(l.min,l.min,r.tileMatrix),e.v.transformMat4(l.max,l.max,r.tileMatrix);let c=l.intersects(o.getCurrentCascadeFrustum());return 0===n.currentShadowCascade&&(i.isInsideFirstShadowMapFrustum=2===c),0===c}(a,i0,i,n.scope))continue}let m=1<<d.canonical.z,_=[((o.x-d.wrap)*m-d.canonical.x)*e.J,(o.y*m-d.canonical.y)*e.J,o.z*m*e.J];for(let r in a.instancesPerModel){let s=a.instancesPerModel[r];s.features.length>0&&(r=p.evaluate(s.features[0].feature,{}));let o=l.getModel(r,n.scope);if(o&&o.uploaded)for(let r of o.nodes)(function i(r,n,a,s,o,l,u){let h=r.context,c="shadow"===r.renderPass,d=r.shadowRenderer,f=c&&d?d.getShadowPassDepthMode():new e.b4(h.gl.LEQUAL,e.b4.ReadWrite,r.depthRangeFor3D),p=r.isTileAffectedByFog(l);if(a.meshes)for(let i of a.meshes){let m,_,g;let y=["MODEL_POSITION_ON_GPU"],v=[];s.instancedDataArray.length>20&&y.push("INSTANCED_ARRAYS");let x=t$(r,n.paint.get("model-cutoff-fade-range"));if(x.shouldRenderCutoff&&y.push("RENDER_CUTOFF"),c&&d)m=r.getOrCreateProgram("modelDepth",{defines:y}),_=ix(u.shadowTileMatrix,u.shadowTileMatrix,Float32Array.from(a.matrix)),g=d.getShadowPassColorMode();else{iJ(y,v,i,r),m=r.getOrCreateProgram("model",{defines:y,overrideFog:p});let s=i.material,c=s.pbrMetallicRoughness,f=n.paint.get("model-opacity"),b=n.paint.get("model-emissive-strength").constantOr(0);_=iy(l.expandedProjMatrix,Float32Array.from(a.matrix),new Float32Array(16),r,f,c.baseColorFactor,s.emissiveFactor,c.metallicFactor,c.roughnessFactor,s,b,n,o),d&&(u.shadowUniformsInitialized?m.setShadowUniformValues(h,d.getShadowUniformValues()):(d.setupShadows(l.toUnwrapped(),m,"model-tile",l.overscaledZ),u.shadowUniformsInitialized=!0)),g=x.shouldRenderCutoff||f<1||"OPAQUE"!==s.alphaMode?e.a.alphaBlended:e.a.unblended}r.uploadCommonUniforms(h,m,l.toUnwrapped(),null,x);let b=i.material.doubleSided?e.b5.disabled:e.b5.backCCW;if(s.instancedDataArray.length>20)v.push(s.instancedDataBuffer),m.draw(r,h.gl.TRIANGLES,f,e.b6.disabled,g,b,_,n.id,i.vertexBuffer,i.indexBuffer,i.segments,n.paint,r.transform.zoom,void 0,v,s.instancedDataArray.length);else{let a=c?"u_instance":"u_normal_matrix";for(let o=0;o<s.instancedDataArray.length;++o)_[a]=new Float32Array(s.instancedDataArray.arrayBuffer,64*o,16),m.draw(r,h.gl.TRIANGLES,f,e.b6.disabled,g,b,_,n.id,i.vertexBuffer,i.indexBuffer,i.segments,n.paint,r.transform.zoom,void 0,v)}}if(a.children)for(let e of a.children)i(r,n,e,s,o,l,u)})(i,n,r,s,_,d,i0)}}}(i,r,n,a),void h();if(!c.loaded())return;if("batched-model"===c.type)return function(i,r,n,a){let s=i.context,o=i.transform,l=i.style.fog,u=i.shadowRenderer;if("mercator"!==o.projection.name)return void e.X(`Drawing 3D landmark models for ${o.projection.name} projection is not yet implemented`);let h=i.transform.getFreeCameraOptions().position,c=e.v.scale([],[h.x,h.y,h.z],i.transform.worldSize);e.v.negate(c,c);let d=e.m.identity([]),f=e.c4(o.center.lat,o.zoom),p=e.m.fromScaling([],[1,1,1/f]);e.m.translate(d,d,c);let m=n.paint.get("model-opacity"),_=new e.b4(s.gl.LEQUAL,e.b4.ReadWrite,i.depthRangeFor3D),g=new e.b4(s.gl.LEQUAL,e.b4.ReadOnly,i.depthRangeFor3D),y=function(h,c){for(let f of a){let a=r.getTile(f).getBucket(n);if(!a||!a.uploaded)continue;let y=!1;u&&(y=0===u.getMaxCascadeForTile(f.toUnwrapped()));let v=o.calculatePosMatrix(f.toUnwrapped(),o.worldSize),x=a.modelTraits;for(let r of a.getNodesInfo()){if(r.hiddenByReplacement||!r.node.meshes)continue;let a=r.node,b="light-beam"===i.renderPass,w=[...v],M=r.evaluatedScale,T=0;i.terrain&&a.elevation&&(T=a.elevation*i.terrain.exaggeration()),e.m.translate(w,w,[(a.anchor?a.anchor[0]:0)*(M[0]-1),(a.anchor?a.anchor[1]:0)*(M[1]-1),T]),M!==e.c6&&e.m.scale(w,w,M),e.m.multiply(w,w,a.matrix);let L=e.m.multiply([],p,w);e.m.multiply(L,d,L);let S=e.m.invert([],L);e.m.transpose(S,S),e.m.scale(S,S,i1);let k=e.m.multiply([],o.expandedFarZProjMatrix,w),D=x&e.c8.HasMapboxMeshFeatures,E=D?0:r.evaluatedRMEA[0][2];for(let d=0;d<a.meshes.length;++d){let p=a.meshes[d],v=d===a.lightMeshIndex;if(v){if(!b&&!i.terrain&&i.shadowRenderer){i.currentLayer<i.firstLightBeamLayer&&(i.firstLightBeamLayer=i.currentLayer);continue}}else if(b)continue;let x={defines:[]},M=[];iJ(x.defines,M,p,i),D||x.defines.push("DIFFUSE_SHADED"),y&&x.defines.push("SHADOWS_SINGLE_CASCADE");let T="shadow"===i.renderPass;if(T){iQ(p,w,i,n);continue}let A=null;if(l){let e=iX(w,i.transform);if(A=new Float32Array(e),"globe"!==o.projection.name){let i=p.aabb.min,r=p.aabb.max,[n,a]=l.getOpacityForBounds(e,i[0],i[1],r[0],r[1]);x.overrideFog=n>=.05||a>=.05}}let P=i.getOrCreateProgram("model",x);!T&&u&&(u.useNormalOffset=!!p.normalBuffer,u.setupShadowsFromMatrix(w,P,u.useNormalOffset)),i.uploadCommonUniforms(s,P,f.toUnwrapped(),A);let C=p.material,I=C.pbrMetallicRoughness;I.metallicFactor=.9,I.roughnessFactor=.5;let O=iy(new Float32Array(k),new Float32Array(L),new Float32Array(S),i,m,I.baseColorFactor,C.emissiveFactor,I.metallicFactor,I.roughnessFactor,C,E,n);P.draw(i,s.gl.TRIANGLES,c&&!v?_:g,e.b6.disabled,h?v||m<1||r.hasTranslucentParts?e.a.alphaBlended:e.a.unblended:e.a.disabled,e.b5.backCCW,O,n.id,p.vertexBuffer,p.indexBuffer,p.segments,n.paint,i.transform.zoom,void 0,M)}}}};(function(e,i,r,n){let a=e.terrain?e.terrain.exaggeration():0,s=e.transform.zoom;for(let o of n){let n=i.getTile(o).getBucket(r);n&&(e.conflationActive&&n.updateReplacement(o,e.replacementSource),n.evaluateScale(e,r),e.terrain&&a>0&&n.elevationUpdate(e.terrain,a,o,r.source),n.needsReEvaluation(e,s,r)&&n.evaluate(r))}})(i,r,n,a),1===m?y(!0,!0):(y(!1,!0),y(!0,!1))}(i,r,n,a),void h();let d=c.getModels(),f=[],p=i.transform.getFreeCameraOptions().position,m=e.v.scale([],[p.x,p.y,p.z],i.transform.worldSize);e.v.negate(m,m);let _=[],g=[],y=0;for(let r of d){let a=n.paint.get("model-rotation").constantOr(null),s=n.paint.get("model-scale").constantOr(null),o=n.paint.get("model-translation").constantOr(null);r.computeModelMatrix(i,a,s,o,!0,!0,!1);let l=e.m.identity([]),u=e.c4(r.position.lat,i.transform.zoom),h=e.m.fromScaling([],[1,1,1/u]);for(let n of(e.m.translate(l,l,m),f.push({zScaleMatrix:h,negCameraPosMatrix:l}),r.nodes))!function i(r,n,a,s,o,l,u){let h;h="globe"===r.projection.name?e.c5(a,r):[...a],e.m.multiply(h,h,n.matrix);let c=e.m.multiply([],s,h);if(n.meshes)for(let i of n.meshes){if("BLEND"!==i.material.alphaMode){u.push({mesh:i,depth:0,modelIndex:o,worldViewProjection:c,nodeModelMatrix:h});continue}let r=e.v.transformMat4([],i.centroid,c);r[2]>0&&l.push({mesh:i,depth:r[2],modelIndex:o,worldViewProjection:c,nodeModelMatrix:h})}if(n.children)for(let e of n.children)i(r,e,a,s,o,l,u)}(i.transform,n,r.matrix,i.transform.expandedFarZProjMatrix,y,_,g);y++}if(_.sort((e,i)=>i.depth-e.depth),"shadow"!==i.renderPass){if(1===s)for(let r of g)iK(r,i,n,f[r.modelIndex],e.b6.disabled,i.colorModeForRenderPass());else{for(let r of g)iK(r,i,n,f[r.modelIndex],e.b6.disabled,e.a.disabled);for(let e of g)iK(e,i,n,f[e.modelIndex],i.stencilModeFor3D(),i.colorModeForRenderPass());i.resetStencilClippingMasks()}for(let r of _)iK(r,i,n,f[r.modelIndex],e.b6.disabled,i.colorModeForRenderPass());h()}else{for(let e of g)iQ(e.mesh,e.nodeModelMatrix,i,n);for(let e of _)iQ(e.mesh,e.nodeModelMatrix,i,n);h()}}},i6={modelUpload:function(e,i,r){let n=i.getSource();if(n.loaded()){if("vector"===n.type||"geojson"===n.type)return void(e.modelManager&&e.modelManager.upload(e,r));if("batched-model"!==n.type)for(let i of n.getModels())i.upload(e.context)}}};class i8{constructor(i,r,n,a){this.context=new es(i,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=a,this._debugParams={showTerrainProxyTiles:!1},a.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=e.bq.maxUnderzooming+e.bq.maxOverzooming+1,this.depthEpsilon=1/65536,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new e.ca,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new rt(this),this._wireframeDebugCache=new i3,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(e,i){let r=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(r||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new t1(this,e));let n=this._terrain;this.transform.elevation=r?n:null,n.update(e,this.transform,i),this.transform.elevation&&!n.enabled&&(this.transform.elevation=null)}_updateFog(e){let i=e.fog;if(!i||"globe"===this.transform.projection.name||1>i.getOpacity(this.transform.pitch)||.03>i.properties.get("horizon-blend"))return void(this.transform.fogCullDistSq=null);let[r,n]=i.getFovAdjustedRange(this.transform._fov);if(r>n)return void(this.transform.fogCullDistSq=null);let a=r+.78*(n-r);this.transform.fogCullDistSq=a*a}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(i,r){if(this.width=i*e.a4.devicePixelRatio,this.height=r*e.a4.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let e of this.style.order)this.style._mergedLayers[e].resize()}setup(){let i=this.context,r=new e.bo;r.emplaceBack(0,0),r.emplaceBack(e.J,0),r.emplaceBack(0,e.J),r.emplaceBack(e.J,e.J),this.tileExtentBuffer=i.createVertexBuffer(r,e.bl.members),this.tileExtentSegments=e.bm.simpleSegment(0,0,4,2);let n=new e.bo;n.emplaceBack(0,0),n.emplaceBack(e.J,0),n.emplaceBack(0,e.J),n.emplaceBack(e.J,e.J),this.debugBuffer=i.createVertexBuffer(n,e.bl.members),this.debugSegments=e.bm.simpleSegment(0,0,4,5);let a=new e.bo;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(-1,1),a.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(a,e.bl.members),this.viewportSegments=e.bm.simpleSegment(0,0,4,2);let s=new e.cb;s.emplaceBack(0,0,0,0),s.emplaceBack(e.J,0,e.J,0),s.emplaceBack(0,e.J,0,e.J),s.emplaceBack(e.J,e.J,e.J,e.J),this.mercatorBoundsBuffer=i.createVertexBuffer(s,e.cc.members),this.mercatorBoundsSegments=e.bm.simpleSegment(0,0,4,2);let o=new e.bp;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(o);let l=new e.cd;for(let e of[0,1,3,2,0])l.emplaceBack(e);this.debugIndexBuffer=i.createIndexBuffer(l),this.emptyTexture=new e.a9(i,new e.a5({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=e.m.create();let u=this.context.gl;this.stencilClearMode=new e.b6({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){let i=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,i.TRIANGLES,e.b4.disabled,this.stencilClearMode,e.a.disabled,e.b5.disabled,tX(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,r,n){if(!r||this.currentStencilSource===r.id||!i.isTileClipped()||!n||0===n.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(let i of n)if(void 0===this._tileClippingMaskIDs[i.key]){e=!0;break}if(!e)return}this.currentStencilSource=r.id;let a=this.context,s=a.gl;this.nextStencilID+n.length>256&&this.clearStencil(),a.setColorMode(e.a.disabled),a.setDepthMode(e.b4.disabled);let o=this.getOrCreateProgram("clippingMask");for(let i of(this._tileClippingMaskIDs={},n)){let n=r.getTile(i),a=this._tileClippingMaskIDs[i.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:u,tileBoundsSegments:h}=this.getTileBoundsBuffers(n);o.draw(this,s.TRIANGLES,e.b4.disabled,new e.b6({func:s.ALWAYS,mask:0},a,255,s.KEEP,s.KEEP,s.REPLACE),e.a.disabled,e.b5.disabled,tX(i.projMatrix),"$clipping",l,u,h)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let i=this.nextStencilID++,r=this.context.gl;return new e.b6({func:r.NOTEQUAL,mask:255},i,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);let r=this.context.gl;return new e.b6({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,r.KEEP,r.KEEP,r.REPLACE)}stencilConfigForOverlap(i){let r=this.context.gl,n=i.sort((e,i)=>i.overscaledZ-e.overscaledZ),a=n[n.length-1].overscaledZ,s=n[0].overscaledZ-a+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();let i={};for(let n=0;n<s;n++)i[n+a]=new e.b6({func:r.GEQUAL,mask:255},n+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=s,[i,n]}return[{[a]:e.b6.disabled},n]}colorModeForRenderPass(){let i=this.context.gl;if(this._showOverdrawInspector){let r=1/8;return new e.a([i.CONSTANT_COLOR,i.ONE,i.CONSTANT_COLOR,i.ONE],new e.C(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.a.unblended:e.a.alphaBlended}colorModeForDrapableLayerRenderPass(i){let r=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&"translucent"===this.renderPass?new e.a([r.ONE,r.ONE_MINUS_SRC_ALPHA,r.CONSTANT_ALPHA,r.ONE_MINUS_SRC_ALPHA],new e.C(0,0,0,void 0===i?0:i),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(i,r,n,a=!1){if(!this.opaquePassEnabledForLayer()&&!a)return e.b4.disabled;let s=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new e.b4(n||this.context.gl.LEQUAL,r,[s,s])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,r){this._wireframeDebugCache.update(this.frameCounter),this.style=i,this.options=r;let n=this.style._mergedLayers,a=this.style.order,s=a.map(e=>n[e]),o=this.style._mergedSourceCaches;this.imageManager=i.imageManager,this.modelManager=i.modelManager,this.symbolFadeChange=i.placement.symbolFadeChange(e.a4.now()),this.imageManager.beginFrame();let l=0,u=!1;for(let e in o){let i=o[e];i.used&&(i.prepare(this.context),i.getSource().usedInConflation&&++l)}let h={},c={},d={},f={},p={};for(let e in o){let i=o[e];h[e]=i.getVisibleCoordinates(),c[e]=h[e].slice().reverse(),d[e]=i.getVisibleCoordinates(!0).reverse(),f[e]=i.getShadowCasterCoordinates(),p[e]=i.sortCoordinatesByDistance(h[e])}let m=e=>{let i=this.style.getLayerSourceCache(e);return i&&i.used?i.getSource():null};if(l){let e=[];for(let i of s)this.layerUsedInConflation(i,m(i))&&e.push(i);if(e&&e.length>1){let i=[];for(let r of e){let e=this.style.getLayerSourceCache(r);e&&e.used&&e.getSource().usedInConflation&&i.push({layer:r.fqid,cache:e})}this.replacementSource.setSources(i),u=!0}}for(let e of(u||this.replacementSource.clear(),this.conflationActive=u,this.minCutoffZoom=0,this.longestCutoffRange=0,s)){let i=e.cutoffRange();if(this.longestCutoffRange=Math.max(i,this.longestCutoffRange),i>0){let i=m(e);i&&(this.minCutoffZoom=Math.max(i.minzoom,this.minCutoffZoom)),e.minzoom&&(this.minCutoffZoom=Math.max(e.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let e=0;e<s.length;e++)if(s[e].is3D()){this.opaquePassCutoff=e;break}let _=this.style&&this.style.fog;_?(this._fogVisible=0!==_.getOpacity(this.transform.pitch),this._fogVisible&&"globe"!==this.transform.projection.name&&(this._fogVisible=_.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(d),this.opaquePassCutoff=0);let g=this._shadowRenderer;if(g)for(let e in g.updateShadowParameters(this.transform,this.style.directionalLight),o)for(let i of h[e]){let e={min:0,max:0};this.terrain&&(e=this.terrain.getMinMaxForTile(i)||e),g.addShadowReceiver(i.toUnwrapped(),e.min,e.max)}for(let r of("globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.ce(this.context)),s)){if(r.isHidden(this.transform.zoom))continue;let e=i.getLayerSourceCache(r);this.uploadLayer(this,r,e)}if(this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new iZ(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!e.cf(this.context.gl))return;for(let e of(this.renderPass="offscreen",s)){let r=i.getLayerSourceCache(e);if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;let n=r?c[r.id]:void 0;("custom"===e.type||"raster"===e.type||e.isSky()||n&&n.length)&&this.renderLayer(this,r,e,n)}this.depthRangeFor3D=[0,1-(s.length+2)*this.numSublayers*this.depthEpsilon];let y=this.terrain;y&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&y.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,f)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let v="globe"===this.transform.projection.name||this.transform.isHorizonVisible(),x=(()=>{if(r.showOverdrawInspector)return e.C.black;if(this.style.fog&&this.transform.projection.supportsFog&&!v){let i=this.style.fog.properties.get("color").toArray01();return new e.C(...i)}if(this.style.fog&&this.transform.projection.supportsFog&&v){let i=this.style.fog.properties.get("space-color").toArray01();return new e.C(...i)}return e.C.transparent})();if(this.context.clear({color:x,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&v&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){let e=s[this.currentLayer],r=i.getLayerSourceCache(e);if(e.isSky())continue;let n=r?(e.is3D()?p:c)[r.id]:void 0;this._renderTileClippingMasks(e,r,n),this.renderLayer(this,r,e,n)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&v&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||e.ao(this.transform.zoom)>0)&&("globe"===this.transform.projection.name||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){let e=s[this.currentLayer],r=i.getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,r,e,r?c[r.id]:void 0)}this.renderPass="translucent",this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let b=0;for(g&&(b=g.getShadowCastingLayerCount());this.currentLayer<a.length;){let e;let r=s[this.currentLayer],n=i.getLayerSourceCache(r);if(r.isSky()){++this.currentLayer;continue}if(y&&this.style.isLayerDraped(r)){if(r.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=y.renderBatch(this.currentLayer);continue}if(n&&(e=("symbol"===r.type?d:r.is3D()?p:c)[n.id]),this._renderTileClippingMasks(r,n,n?h[n.id]:void 0),this.renderLayer(this,n,r,e),!y&&g&&b>0&&r.hasShadowPass()&&0==--b&&(g.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){let e=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=e;this.currentLayer++){let e=s[this.currentLayer];if(!e.hasLightBeamPass())continue;let r=i.getLayerSourceCache(e);this.renderLayer(this,r,e,r?c[r.id]:void 0)}this.currentLayer=e,this.renderPass="translucent"}++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let r=null;s.forEach(e=>{let n=i.getLayerSourceCache(e);n&&!e.isHidden(this.transform.zoom)&&n.getVisibleCoordinates().length&&(!r||r.getSource().maxzoom<n.getSource().maxzoom)&&(r=n)}),r&&this.options.showTileBoundaries&&i5.debug(this,r,r.getVisibleCoordinates(),e.C.red,!1)}this.terrain&&this._debugParams.showTerrainProxyTiles&&i5.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new e.C(1,.8,.1,1),!0),this.options.showPadding&&function(e){var i,r;let n=e.transform.padding;iF(e,e.transform.height-(n.top||0),3,iC),iF(e,n.bottom||0,3,iI),ij(e,n.left||0,3,iO),ij(e,e.transform.width-(n.right||0),3,iz);let a=e.transform.centerPoint;i=a.x,r=e.transform.height-a.y,iB(e,i-1,r-10,2,20,iR),iB(e,i-10,r-1,20,2,iR)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),u||(this.conflationActive=!1)}uploadLayer(e,i,r){this.gpuTimingStart(i),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(i.type)||e.terrain&&"custom"===i.type)&&i6[`${i.type}Upload`]&&i6[`${i.type}Upload`](e,r,i.scope),this.gpuTimingEnd()}renderLayer(e,i,r,n){r.isHidden(this.transform.zoom)||("background"===r.type||"sky"===r.type||"custom"===r.type||"model"===r.type||"raster"===r.type||n&&n.length)&&(this.id=r.id,this.gpuTimingStart(r),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(r.type)&&(!e.terrain||"custom"!==r.type)||i5[r.type](e,i,r,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;let i=this.context.extTimerQuery,r=this.context.gl,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:r.createQuery()}),n.calls++,r.beginQuery(i.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){let e=this.context.extTimerQuery,i=this.context.gl,r=i.createQuery();this.deferredRenderGpuTimeQueries.push(r),i.beginQuery(e.TIME_ELAPSED_EXT,r)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){let e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){let e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){let i={};for(let r in e){let n=e[r],a=this.context.extTimerQuery,s=a.getQueryParameter(n.query,this.context.gl.QUERY_RESULT)/1e6;a.deleteQueryEXT(n.query),i[r]=s}return i}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;let i=this.context.extTimerQuery,r=this.context.gl,n=0;for(let a of e)n+=i.getQueryParameter(a,r.QUERY_RESULT)/1e6,i.deleteQueryEXT(a);return n}translatePosMatrix(i,r,n,a,s){if(!n[0]&&!n[1])return i;let o=s?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(o){let e=Math.sin(o),i=Math.cos(o);n=[n[0]*i-n[1]*e,n[0]*e+n[1]*i]}let l=[s?n[0]:e.ay(r,n[0],this.transform.zoom),s?n[1]:e.ay(r,n[1],this.transform.zoom),0],u=new Float32Array(16);return e.m.translate(u,i,l),u}saveTileTexture(e){let i=e.size[0],r=this._tileTextures[i];r?r.push(e):this._tileTextures[i]=[e]}getTileTexture(e){let i=this._tileTextures[e];return i&&i.length>0?i.pop():null}isPatternMissing(e,i){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString(),i)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return null!=this.context.extTextureFloatLinear}currentGlobalDefines(e,i,r){let n=void 0===r?this.terrain&&this.terrain.renderingToTexture:r,a=this.terrain&&0===this.terrain.exaggeration(),s=[];return this.style&&this.style.enable3dLights()&&("globeRaster"===e||"terrainRaster"===e?(s.push("LIGHTING_3D_MODE"),s.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):n||s.push("LIGHTING_3D_MODE")),"shadow"===this.renderPass?this._shadowMapDebug||s.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?s.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):s.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(s.push("TERRAIN"),this.linearFloatFilteringSupported()&&s.push("TERRAIN_DEM_FLOAT_FORMAT"),a&&s.push("ZERO_EXAGGERATION")),"globe"===this.transform.projection.name&&s.push("GLOBE"),this._fogVisible&&!n&&(void 0===i||i)&&s.push("FOG","FOG_DITHERING"),n&&s.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&s.push("OVERDRAW_INSPECTOR"),s}getOrCreateProgram(e,i){this.cache=this.cache||{};let r=i&&i.defines||[],n=i&&i.config,a=this.currentGlobalDefines(e,i&&i.overrideFog,i&&i.overrideRtt).concat(r),s=t4.cacheKey(tY[e],e,a,n);return this.cache[s]||(this.cache[s]=new t4(this.context,e,tY[e],n,ib[e],a)),this.cache[s]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.a9(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(i,r){if(this.style.enable3dLights()){let n=this.style.directionalLight,a=this.style.ambientLight;if(n&&a){let s=((i,r)=>{let n=i.properties.get("direction"),a=i.properties.get("color").toArray01(),s=i.properties.get("intensity"),o=r.properties.get("color").toArray01(),l=r.properties.get("intensity"),u=[n.x,n.y,n.z],h=e.bv(o,l),c=e.bv(a,s);return{u_lighting_ambient_color:h,u_lighting_directional_dir:u,u_lighting_directional_color:c,u_ground_radiance:function(i,r,n){let a=function(i,r,n){var a,s,o;let l=e.v.dot(r,i),u=(a=1-.3*Math.min(e.v.dot(n,[.2126,.7152,.0722]),1),(1-(s=Math.min(l+1,1)))*a+1*s);return((1-(o=Math.asin(e.c(r[2],-1,1))/Math.PI+.5))*.92+1*o)*u}(i,[0,0,1],r),s=[0,0,0];e.v.scale(s,n.slice(0,3),a);let o=[0,0,0];e.v.scale(o,r.slice(0,3),i[2]);let l=[0,0,0];return e.v.add(l,s,o),e.bw(l)}(u,c,h)}})(n,a);r.setLightsUniformValues(i,s)}}}uploadCommonUniforms(i,r,n,a,s){if(this.uploadCommonLightUniforms(i,r),this.terrain&&this.terrain.renderingToTexture)return;let o=this.style.fog;if(o){let s=o.getOpacity(this.transform.pitch),l=((i,r,n,a,s,o,l,u,h,c,d,f)=>{let p=i.transform,m=r.properties.get("color").toArray01();m[3]=a;let _=i.frameCounter/1e3%1,[g,y]=r.properties.get("vertical-range");return{u_fog_matrix:n?p.calculateFogTileMatrix(n):f||i.identityMat,u_fog_range:r.getFovAdjustedRange(p._fov),u_fog_color:m,u_fog_horizon_blend:r.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(g,y),y],u_fog_temporal_offset:_,u_frustum_tl:s,u_frustum_tr:o,u_frustum_br:l,u_frustum_bl:u,u_globe_pos:h,u_globe_radius:c,u_viewport:d,u_globe_transition:e.ao(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,o,n,s,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.a4.devicePixelRatio,this.transform.height*e.a4.devicePixelRatio],a);r.setFogUniformValues(i,l)}s&&r.setCutoffUniformValues(i,s.uniformValues)}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){let e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){let e=this.context.gl,i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),i}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;let e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){let i=this._backgroundTiles,r=this._backgroundTiles={};for(let n of this.transform.coveringTiles({tileSize:512}))r[n.key]=i[n.key]||new e.bt(n,512,this.transform.tileZoom,this);return r}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(e,i){return!(!e.is3D()||e.minzoom&&e.minzoom>this.transform.zoom||"building"!==e.sourceLayer&&(!i||"batched-model"!==i.type))}isTileAffectedByFog(e){if(!this.style||!this.style.fog)return!1;if("globe"===this.transform.projection.name)return!0;let i=this._cachedTileFogOpacities[e.key];return i||(this._cachedTileFogOpacities[e.key]=i=this.style.fog.getOpacityForTile(e)),i[0]>=.05||i[1]>=.05}}let i7={cascadeCount:2,shadowMapResolution:2048};class i9{constructor(e,i){this.aabb=e,this.lastCascade=i}}class re{add(e,i){let r=this.receivers[e.key];void 0!==r?(r.aabb.min[0]=Math.min(r.aabb.min[0],i.min[0]),r.aabb.min[1]=Math.min(r.aabb.min[1],i.min[1]),r.aabb.min[2]=Math.min(r.aabb.min[2],i.min[2]),r.aabb.max[0]=Math.max(r.aabb.max[0],i.max[0]),r.aabb.max[1]=Math.max(r.aabb.max[1],i.max[1]),r.aabb.max[2]=Math.max(r.aabb.max[2],i.max[2])):this.receivers[e.key]=new i9(i,null)}clear(){this.receivers={}}get(e){return this.receivers[e.key]}computeRequiredCascades(i,r,n){let a=e.c3.fromPoints(i.points),s=0;for(let i in this.receivers){let o=this.receivers[i];if(!o||!a.intersectsAabb(o.aabb))continue;o.aabb.min=a.closestPoint(o.aabb.min),o.aabb.max=a.closestPoint(o.aabb.max);let l=o.aabb.getCorners();for(let i=0;i<n.length;i++){let a=!0;for(let s of l){let o=[s[0]*r,s[1]*r,s[2]];if(e.v.transformMat4(o,o,n[i].matrix),o[0]<-1||o[0]>1||o[1]<-1||o[1]>1){a=!1;break}}if(o.lastCascade=i,s=Math.max(s,i),a)break}}return s+1}}class rt{constructor(i){this.painter=i,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new re,this._depthMode=new e.b4(i.context.gl.LEQUAL,e.b4.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,i.tp.registerParameter(i7,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),i.tp.registerParameter(i7,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(let e of this._cascades)e.texture.destroy(),e.framebuffer.destroy();this._cascades=[]}updateShadowParameters(i,r){let n=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!r||!r.properties)return;let a=r.properties.get("shadow-intensity");if(!r.shadowsEnabled()||a<=0||(this._shadowLayerCount=n.style.order.reduce((e,r)=>{let a=n.style._mergedLayers[r];return e+(a.hasShadowPass()&&!a.isHidden(i.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;let s=n.context,o=i7.shadowMapResolution,l=i7.shadowMapResolution;if(0===this._cascades.length||i7.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let i=0;i<i7.cascadeCount;++i){let i=n._shadowMapDebug,r=s.gl,a=s.createFramebuffer(o,l,i,"texture"),u=new e.a9(s,{width:o,height:l,data:null},r.DEPTH_COMPONENT);if(a.depthAttachment.set(u.texture),i){let i=new e.a9(s,{width:o,height:l,data:null},r.RGBA);a.colorAttachment.set(i.texture)}this._cascades.push({framebuffer:a,texture:u,matrix:[],far:0,boundingSphereRadius:0,frustum:new e.F,scale:0})}}this.shadowDirection=rr(r);let u=0;if(i.elevation){let e=i.elevation,r=[1e4,-1e4];e.visibleDemTiles.filter(e=>e.dem).forEach(e=>{let i=e.dem.tree;r[0]=Math.min(r[0],i.minimums[0]),r[1]=Math.max(r[1],i.maximums[0])}),1e4!==r[0]&&(u=(r[1]-r[0])*e.exaggeration())}let h=1.5*i.cameraToCenterDistance,c=3*h,d=new Float64Array(16);for(let r=0;r<this._cascades.length;++r){let n=this._cascades[r],a=i.height/50,s=1;1===i7.cascadeCount?s=c:0===r?s=h:(a=h,s=c);let[o,l]=function(i,r,n,a,s,o){let l,u;let h=i.zoom,c=i.scale,d=i.worldSize,f=1/d,p=i.aspect,m=Math.sqrt(1+p*p)*Math.tan(.5*i.fovX),_=m*m,g=a-n,y=a+n;_>g/y?(l=a,u=a*m):(l=.5*y*(1+_),u=.5*Math.sqrt(g*g+2*(a*a+n*n)*_+y*y*_*_));let v=i.projection.pixelsPerMeter(i.center.lat,d),x=i._camera.getCameraToWorldMercator(),b=[0,0,-l*f];e.v.transformMat4(b,b,x);let w=u*f,M=i._edgeInsets;if(!(0===M.left&&0===M.top&&0===M.right&&0===M.bottom||M.left===M.right&&M.top===M.bottom)){let r=i._camera.getWorldToCamera(i.worldSize,"meters"===i.projection.zAxisUnit?v:1),s=i._camera.getCameraToClipPerspective(i._fov,i.width/i.height,n,a);s[8]=-(2*i.centerOffset.x)/i.width,s[9]=2*i.centerOffset.y/i.height;let o=new Float64Array(16);e.m.mul(o,s,r);let l=new Float64Array(16);for(let r of(e.m.invert(l,o),e.F.fromInvProjectionMatrix(l,d,h,!0).points)){let n=(r[0]/=c,r[1]/=c,r[2]=e.b(r[2],i._center.lat),r);w=Math.max(w,e.v.len(e.v.subtract([],b,n)))}}w*=s/(s-1);let T=Math.acos(r[2]),L=Math.atan2(-r[0],-r[1]),S=new ed;S.position=b,S.setPitchBearing(T,L);let k=S.getWorldToCamera(d,v),D=w*d,E=Math.min(-(i._mercatorZfromZoom(17)*d*2),-2*D),A=S.getCameraToClipOrthographic(-D,D,-D,D,E,(D+o*v)/r[2]),P=new Float64Array(16);e.m.multiply(P,A,k);let C=e.v.fromValues(Math.floor(1e6*b[0])/1e6*d,Math.floor(1e6*b[1])/1e6*d,0),I=.5*s,O=[0,0,0];e.v.transformMat4(O,C,P),e.v.scale(O,O,I);let z=[Math.floor(O[0]),Math.floor(O[1]),Math.floor(O[2])],R=[0,0,0];e.v.sub(R,O,z),e.v.scale(R,R,-1/I);let Y=new Float64Array(16);return e.m.identity(Y),e.m.translate(Y,Y,R),e.m.multiply(P,Y,P),[P,D]}(i,this.shadowDirection,a,s,i7.shadowMapResolution,u);n.scale=i.scale,n.matrix=o,n.boundingSphereRadius=l,e.m.invert(d,n.matrix),n.frustum=e.F.fromInvProjectionMatrix(d,1,0,!0),n.far=s}let f=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[f].far,this._cascades[f].far],this._uniformValues.u_shadow_intensity=a,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/i7.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=i7.shadowMapResolution,this._uniformValues.u_shadowmap_0=ig.ShadowMap0,this._uniformValues.u_shadowmap_1=ig.ShadowMap0+1,this._groundShadowTiles=n.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});let p=n.transform.elevation;for(let e of this._groundShadowTiles){let i={min:0,max:0};if(p){let r=p.getMinMaxForTile(e);r&&(i=r)}this.addShadowReceiver(e.toUnwrapped(),i.min,i.max)}}get enabled(){return this._enabled}set enabled(e){this._enabled=e}drawShadowPass(i,r){if(!this._enabled)return;let n=this.painter,a=n.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(n.transform.getFrustum(0),n.transform.worldSize,this._cascades),a.viewport.set([0,0,i7.shadowMapResolution,i7.shadowMapResolution]);for(let s=0;s<this._numCascadesToRender;++s)for(let o of(n.currentShadowCascade=s,a.bindFramebuffer.set(this._cascades[s].framebuffer.framebuffer),a.clear({color:e.C.white,depth:1}),i.order)){let e=i._mergedLayers[o];if(!e.hasShadowPass()||e.isHidden(n.transform.zoom))continue;let a=i.getLayerSourceCache(e),s=a?r[a.id]:void 0;("model"===e.type||s&&s.length)&&n.renderLayer(n,a,e,s)}n.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;let i=this.painter,r=i.style,n=i.context,a=r.directionalLight,s=r.ambientLight;if(!a||!s)return;let o=[],l=t$(i,i.longestCutoffRange);l.shouldRenderCutoff&&o.push("RENDER_CUTOFF");let u=rn(a,s),h=new e.b4(n.gl.LEQUAL,e.b4.ReadOnly,i.depthRangeFor3D);for(let r of this._groundShadowTiles){let a=r.toUnwrapped(),s=i.isTileAffectedByFog(r),c=i.getOrCreateProgram("groundShadow",{defines:o,overrideFog:s});this.setupShadows(a,c),i.uploadCommonUniforms(n,c,a,null,l);let d={u_matrix:i.transform.calculateProjMatrix(a),u_ground_shadow_factor:u};c.draw(i,n.gl.TRIANGLES,h,e.b6.disabled,e.a.multiply,e.b5.disabled,d,"ground_shadow",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments,{},i.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?e.a.unblended:e.a.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(i){let r=this.painter.transform,n=r.calculatePosMatrix(i,r.worldSize);return e.m.multiply(n,this._cascades[this.painter.currentShadowCascade].matrix,n),Float32Array.from(n)}calculateShadowPassMatrixFromMatrix(i){return e.m.multiply(i,this._cascades[this.painter.currentShadowCascade].matrix,i),Float32Array.from(i)}setupShadows(i,r,n,a=0){if(!this._enabled)return;let s=this.painter.transform,o=this.painter.context,l=o.gl,u=this._uniformValues,h=new Float64Array(16),c=s.calculatePosMatrix(i,s.worldSize);for(let i=0;i<this._cascades.length;i++)e.m.multiply(h,this._cascades[i].matrix,c),u[0===i?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(h),o.activeTexture.set(l.TEXTURE0+ig.ShadowMap0+i),this._cascades[i].texture.bind(l.NEAREST,l.CLAMP_TO_EDGE);if(this.useNormalOffset=!!n,this.useNormalOffset){let r=e.cg(i.canonical),o=2/s.tileSize*e.J/i7.shadowMapResolution,l=o*this._cascades[0].boundingSphereRadius,h=o*this._cascades[this._cascades.length-1].boundingSphereRadius,c=("vector-tile"===n?1:3)/Math.pow(2,a-i.canonical.z-(1-s.zoom+Math.floor(s.zoom)));u.u_shadow_normal_offset=[r,l*c,h*c],u.u_shadow_bias=[6e-5,.0012,.012]}else u.u_shadow_bias=[36e-5,.0012,.012];r.setShadowUniformValues(o,u)}setupShadowsFromMatrix(i,r,n=!1){if(!this._enabled)return;let a=this.painter.context,s=a.gl,o=this._uniformValues,l=new Float64Array(16);for(let r=0;r<i7.cascadeCount;r++)e.m.multiply(l,this._cascades[r].matrix,i),o[0===r?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(l),a.activeTexture.set(s.TEXTURE0+ig.ShadowMap0+r),this._cascades[r].texture.bind(s.NEAREST,s.CLAMP_TO_EDGE);(this.useNormalOffset=n,n)?(o.u_shadow_normal_offset=[1,5,5],o.u_shadow_bias=[6e-5,.0012,.012]):o.u_shadow_bias=[36e-5,.0012,.012],r.setShadowUniformValues(a,o)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(i,r,n,a){if(a[2]>=0)return{};let s=(function(i,r,n){let a=n/(1<<i.canonical.z);return new e.c3([i.canonical.x*a+i.wrap*n,i.canonical.y*a+i.wrap*n,0],[(i.canonical.x+1)*a+i.wrap*n,(i.canonical.y+1)*a+i.wrap*n,r])})(i,r,n).getCorners(),o=-(r/a[2]);a[0]<0?(e.v.add(s[0],s[0],[a[0]*o,0,0]),e.v.add(s[3],s[3],[a[0]*o,0,0])):a[0]>0&&(e.v.add(s[1],s[1],[a[0]*o,0,0]),e.v.add(s[2],s[2],[a[0]*o,0,0])),a[1]<0?(e.v.add(s[0],s[0],[0,a[1]*o,0]),e.v.add(s[1],s[1],[0,a[1]*o,0])):a[1]>0&&(e.v.add(s[2],s[2],[0,a[1]*o,0]),e.v.add(s[3],s[3],[0,a[1]*o,0]));let l={};return l.vertices=s,l.planes=[ri(s[1],s[0],s[4]),ri(s[2],s[1],s[5]),ri(s[3],s[2],s[6]),ri(s[0],s[3],s[7])],l}addShadowReceiver(i,r,n){this._receivers.add(i,e.c3.fromTileIdAndHeight(i,r,n))}getMaxCascadeForTile(e){let i=this._receivers.get(e);return i&&i.lastCascade?i.lastCascade:0}}function ri(i,r,n){let a=e.v.sub([],n,r),s=e.v.sub([],i,r),o=e.v.cross([],a,s),l=e.v.length(o);return 0===l?[0,0,1,0]:(e.v.scale(o,o,1/l),[o[0],o[1],o[2],-e.v.dot(o,r)])}function rr(i){let r=i.properties.get("direction"),n=e.b3(r.x,r.y,r.z);n[2]=e.c(n[2],0,75);let a=e.ch([n[0],n[1],n[2]]);return e.v.fromValues(a.x,a.y,a.z)}function rn(i,r){let n=i.properties.get("color"),a=i.properties.get("intensity"),s=i.properties.get("direction"),o=[s.x,s.y,s.z],l=r.properties.get("color"),u=r.properties.get("intensity"),h=Math.max(e.v.dot([0,0,1],o),0),c=[0,0,0];e.v.scale(c,l.toArray01Linear().slice(0,3),u);let d=[0,0,0];return e.v.scale(d,n.toArray01Linear().slice(0,3),h*a),e.bw([c[0]>0?c[0]/(c[0]+d[0]):0,c[1]>0?c[1]/(c[1]+d[1]):0,c[2]>0?c[2]/(c[2]+d[2]):0])}class ra extends e.a6{constructor(e){super(),this.requestManager=e,this.models={"":{}},this.numModelsLoading={}}loadModel(i,r){return e.aO(this.requestManager.transformRequest(r,e.a2.Model).url).then(r=>{if(!r)return;let n=e.aP(r),a=new e.aQ(i,void 0,void 0,n);return a.computeBoundsAndApplyParent(),a}).catch(n=>{this.fire(new e.a7(Error(`Could not load model ${i} from ${r}: ${n.message}`)))})}load(i,r){this.models[r]||(this.models[r]={});let n=Object.keys(i);this.numModelsLoading[r]=(this.numModelsLoading[r]||0)+n.length;let a=[];for(let e of n)a.push(this.loadModel(e,i[e]));Promise.allSettled(a).then(i=>{for(let e=0;e<i.length;e++){let{status:a,value:s}=i[e];"fulfilled"===a&&s&&(this.models[r][n[e]]=s)}this.numModelsLoading[r]-=n.length,this.fire(new e.a8("data",{dataType:"style"}))}).catch(i=>{this.fire(new e.a7(Error(`Could not load models: ${i.message}`)))})}isLoaded(){for(let e in this.numModelsLoading)if(this.numModelsLoading[e]>0)return!1;return!0}hasModel(e,i){return!!this.getModel(e,i)}getModel(e,i){return this.models[i]||(this.models[i]={}),this.models[i][e]}addModel(e,i,r){this.models[r]||(this.models[r]={}),this.hasModel(e,r)&&this.removeModel(e,r),this.load({[e]:this.requestManager.normalizeModelURL(i)},r)}addModels(e,i){let r={};for(let i in e)r[i]=this.requestManager.normalizeModelURL(e[i]);this.load(r,i)}removeModel(e,i){this.models[i]||(this.models[i]={});let r=this.models[i][e];delete this.models[i][e],r.destroy()}listModels(e){return this.models[e]||(this.models[e]={}),Object.keys(this.models[e])}upload(e,i){for(let r in this.models[i]||(this.models[i]={}),this.models[i])this.models[i][r].upload(e.context)}}let rs=(i,r)=>e.ai(i,r&&r.filter(e=>"source.canvas"!==e.identifier)),ro=e.p(e3,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","setImportUrl","setImportData","setImportConfig"]),rl=e.p(e3,["setCenter","setZoom","setBearing","setPitch"]),ru={version:8,layers:[],sources:{}},rh={duration:300,delay:0},rc=new Set(["fill","line","background","hillshade","raster"]);class rd extends e.a6{constructor(i,r={}){super(),this.map=i,this.scope=r.scope||"",this.fragments=[],this.importDepth=r.importDepth||0,this.importsCache=r.importsCache||new Map,this.resolvedImports=r.resolvedImports||new Set,this.transition=e.ak({},rh),this._buildingIndex=new e1(this),this.crossTileSymbolIndex=new tw,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=r.styleChanges||new v,this.dispatcher=r.dispatcher?r.dispatcher:new e.br(e.bs(),this),r.imageManager?this.imageManager=r.imageManager:(this.imageManager=new eP,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=r.glyphManager?r.glyphManager:new e.cj(i._requestManager,r.localFontFamily?e.ck.all:r.localIdeographFontFamily?e.ck.ideographs:e.ck.none,r.localFontFamily||r.localIdeographFontFamily),r.modelManager?this.modelManager=r.modelManager:(this.modelManager=new ra(i._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=r.configOptions?r.configOptions:new Map,this._configDependentLayers=r.configDependentLayers?r.configDependentLayers:new Set,this._config=r.config,this.dispatcher.broadcast("setReferrer",e.cl());let n=this;this._rtlTextPluginCallback=rd.registerForPluginStateChange(i=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:i.pluginStatus,pluginURL:i.pluginURL},(i,r)=>{if(e.cm(i),r&&r.every(e=>e))for(let e in n._sourceCaches){let i=n._sourceCaches[e],r=i.getSource().type;"vector"!==r&&"geojson"!==r||i.reload()}})}),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;let i=this.getOwnSource(e.sourceId);if(i&&i.vectorLayerIds)for(let e in this._layers){let r=this._layers[e];r.source===i.id&&this._validateLayer(r)}})}loadURL(i,r={}){this.fire(new e.a8("dataloading",{dataType:"style"}));let n="boolean"==typeof r.validate?r.validate:!e.cn(i);i=this.map._requestManager.normalizeStyleURL(i,r.accessToken),this.resolvedImports.add(i);let a=this.importsCache.get(i);if(a)return this._load(a,n);let s=this.map._requestManager.transformRequest(i,e.a2.Style);this._request=e.a1(s,(r,a)=>{if(this._request=null,r)this.fire(new e.a7(r));else if(a)return this.importsCache.set(i,a),this._load(a,n)})}loadJSON(i,r={}){this.fire(new e.a8("dataloading",{dataType:"style"})),this._request=e.a4.frame(()=>{this._request=null,this._load(i,!1!==r.validate)})}loadEmpty(){this.fire(new e.a8("dataloading",{dataType:"style"})),this._load(ru,!1)}_loadImports(i,r){if(this.importDepth>=4)return e.X("Style doesn't support nesting deeper than 5"),Promise.resolve();let n=[];for(let e of i){let i=this._createFragmentStyle(e),a=new Promise(e=>{i.once("style.import.load",e),i.once("error",e)}).then(()=>this.mergeAll());if(n.push(a),this.resolvedImports.has(e.url)){i.loadEmpty();continue}let s=e.data||this.importsCache.get(e.url);s?i.loadJSON(s,{validate:r}):e.url?i.loadURL(e.url,{validate:r}):i.loadEmpty(),this.fragments.push({style:i,id:e.id,config:e.config})}return Promise.allSettled(n)}_createFragmentStyle(i){let r=this.scope?e.aE(i.id,this.scope):i.id,n=new rd(this.map,{scope:r,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:i.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return n.setEventedParent(this.map,{style:n}),n}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});let i=this.isRootStyle();this._shouldPrecompile=i,this.fire(new e.a8(i?"style.load":"style.import.load"))}_load(i,r){let n=i.schema;if(this.isRootStyle()&&(i.fragment||n&&!1!==i.fragment)){let n=e.ak({},ru,{imports:[{id:"basemap",data:i,url:""}]});return void this._load(n,r)}if(this.setConfig(this._config,n),r&&rs(this,e.aj(i)))return;for(let r in this._loaded=!0,this.stylesheet=e.co(i),i.sources)this.addSource(r,i.sources[r],{validate:!1,isInitialLoad:!0});i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(i.glyphs,this.scope);let a=e2(this.stylesheet.layers);if(this._order=a.map(e=>e.id),this.stylesheet.light&&e.X("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights){if(1===this.stylesheet.lights.length&&"flat"===this.stylesheet.lights[0].type){let e=this.stylesheet.lights[0];this.light=new eI(e.properties,e.id)}else this.setLights(this.stylesheet.lights)}for(let i of(this.light||(this.light=new eI(this.stylesheet.light)),this._layers={},this._serializedLayers={},a)){let r=e.cp(i,this.scope,this.options);r.isConfigDependent&&this._configDependentLayers.add(r.fqid),r.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=r,this._serializedLayers[r.id]=r.serialize();let n=this.getOwnLayerSourceCache(r),a=!!this.directionalLight&&this.directionalLight.shadowsEnabled();n&&r.canCastShadows()&&a&&(n.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);let s=this.stylesheet.terrain;s&&(void 0===this.disableElevatedTerrain&&(this.disableElevatedTerrain=e.a4.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?e.X("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(s,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new e.a8("data",{dataType:"style"})),i.imports?this._loadImports(i.imports,r).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return 0===this.importDepth}mergeAll(){let i,r,n,a,s,o,l,u;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(e=>{if(e.stylesheet){if(null!=e.light&&(i=e.light),e.stylesheet.lights)for(let i of e.stylesheet.lights)"ambient"===i.type&&null!=e.ambientLight&&(r=e.ambientLight),"directional"===i.type&&null!=e.directionalLight&&(n=e.directionalLight);a=this._prioritizeTerrain(a,e.terrain,e.stylesheet.terrain),e.stylesheet.fog&&null!=e.fog&&(s=e.fog),null!=e.stylesheet.camera&&(u=e.stylesheet.camera),null!=e.stylesheet.projection&&(o=e.stylesheet.projection),null!=e.stylesheet.transition&&(l=e.stylesheet.transition)}}),this.light=i,this.ambientLight=r,this.directionalLight=n,this.fog=s,null===a?delete this.terrain:this.terrain=a,this.camera=u||{"camera-projection":"perspective"},this.projection=o||{name:"mercator"},this.transition=e.ak({},rh,l),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(e){let i=r=>{for(let e of r.fragments)i(e.style);e(r)};i(this)}_prioritizeTerrain(e,i,r){let n=e&&0===e.drapeRenderMode;return null===r?i&&0===i.drapeRenderMode?i:n?e:null:null!=i&&(!e||n||i&&1===i.drapeRenderMode)?i:e}mergeTerrain(){let e;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(i=>{e=this._prioritizeTerrain(e,i.terrain,i.stylesheet.terrain)}),null===e?delete this.terrain:this.terrain=e}mergeProjection(){let e;this.forEachFragmentStyle(i=>{null!=i.stylesheet.projection&&(e=i.stylesheet.projection)}),this.projection=e||{name:"mercator"}}mergeSources(){let i={},r={},n={};this.forEachFragmentStyle(a=>{for(let r in a._sourceCaches)i[e.aE(r,a.scope)]=a._sourceCaches[r];for(let i in a._otherSourceCaches)r[e.aE(i,a.scope)]=a._otherSourceCaches[i];for(let i in a._symbolSourceCaches)n[e.aE(i,a.scope)]=a._symbolSourceCaches[i]}),this._mergedSourceCaches=i,this._mergedOtherSourceCaches=r,this._mergedSymbolSourceCaches=n}mergeLayers(){let i={},r=[],n={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(n=>{for(let a of n._order){let s=n._layers[a];if("slot"===s.type){let r=e.cq(a);if(i[r])continue;i[r]=[]}s.slot&&i[s.slot]?i[s.slot].push(s):r.push(s)}}),this._mergedOrder=[];let a=(r=[])=>{for(let s of r)if("slot"===s.type){let r=e.cq(s.id);i[r]&&a(i[r])}else{let i=e.aE(s.id,s.scope);this._mergedOrder.push(i),n[i]=s,s.is3D()&&(this._has3DLayers=!0),"circle"===s.type&&(this._hasCircleLayers=!0),"symbol"===s.type&&(this._hasSymbolLayers=!0)}};a(r),this._mergedLayers=n,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}getCamera(){return this.stylesheet.camera}setCamera(i){return this.stylesheet.camera=e.ak({},this.stylesheet.camera,i),this.camera=this.stylesheet.camera,this}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(i){this._spriteRequest=function(i,r,n){let a,s,o;let l=e.a4.devicePixelRatio>1?"@2x":"",u=e.a1(r.transformRequest(r.normalizeSpriteURL(i,l,".json"),e.a2.SpriteJSON),(e,i)=>{u=null,o||(o=e,a=i,c())}),h=e.a3(r.transformRequest(r.normalizeSpriteURL(i,l,".png"),e.a2.SpriteImage),(e,i)=>{h=null,o||(o=e,s=i,c())});function c(){if(o)n(o);else if(a&&s){let i=e.a4.getImageData(s),r={};for(let n in a){let{width:s,height:o,x:l,y:u,sdf:h,pixelRatio:c,stretchX:d,stretchY:f,content:p}=a[n],m=new e.a5({width:s,height:o});e.a5.copy(i,m,{x:l,y:u},{x:0,y:0},{width:s,height:o}),r[n]={data:m,pixelRatio:c,sdf:h,stretchX:d,stretchY:f,content:p}}n(null,r)}}return{cancel(){u&&(u.cancel(),u=null),h&&(h.cancel(),h=null)}}}(i,this.map._requestManager,(i,r)=>{if(this._spriteRequest=null,i)this.fire(new e.a7(i));else if(r)for(let e in r)this.imageManager.addImage(e,this.scope,r[e]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new e.a8("data",{dataType:"style"}))})}_validateLayer(i){let r=this.getOwnSource(i.source);if(!r)return;let n=i.sourceLayer;n&&("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new e.a7(Error(`Source layer "${n}" does not exist on source "${r.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(let e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(let{style:e}of this.fragments)if(!e.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((e,i)=>{let r=this.fragments[i];return r&&r.style&&(e.data=r.style.serialize()),e})}_serializeSources(){let e={};for(let i in this._sourceCaches){let r=this._sourceCaches[i].getSource();e[r.id]||(e[r.id]=r.serialize())}return e}_serializeLayers(e){let i=[];for(let r of e){let e=this._layers[r];e&&"custom"!==e.type&&i.push(e.serialize())}return i}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(let e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(let e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped(this.getLayerSourceCache(e)):rc.has(e.type))}_checkLoaded(){if(!this._loaded)throw Error("Style is not done loading")}_checkLayer(i){let r=this.getOwnLayer(i);if(r)return r;this.fire(new e.a7(Error(`The layer '${i}' does not exist in the map's style.`)))}_checkSource(i){let r=this.getOwnSource(i);if(r)return r;this.fire(new e.a7(Error(`The source '${i}' does not exist in the map's style.`)))}update(i){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(i),this.directionalLight&&this.directionalLight.recalculate(i);let r=this.calculateLightsBrightness();i.brightness=r||0,r!==this._brightness&&(this._brightness=r,this.dispatcher.broadcast("setBrightness",r));let n=this._changes.isDirty();if(this._changes.isDirty()){let e=this._changes.getLayerUpdatesByScope();for(let i in e){let{updatedIds:r,removedIds:n}=e[i];(r||n)&&this._updateWorkerLayers(i,r,n)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(i),this.light&&this.light.updateTransitions(i),this.ambientLight&&this.ambientLight.updateTransitions(i),this.directionalLight&&this.directionalLight.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._changes.reset()}let a={};for(let e in this._mergedSourceCaches){let i=this._mergedSourceCaches[e];a[e]=i.used,i.used=!1}for(let e of this._mergedOrder){let r=this._mergedLayers[e];if(r.recalculate(i,this._availableImages),!r.isHidden(i.zoom)){let e=this.getLayerSourceCache(r);e&&(e.used=!0)}if(!this._precompileDone&&this._shouldPrecompile)for(let e=r.minzoom||0;e<(r.maxzoom||25.5);e++){let e=this.map.painter;if(e){let n=r.getProgramIds();if(!n)continue;for(let a of n){let n=r.getDefaultProgramParams(a,i.zoom);n&&(e.style=this,this.fog&&(e._fogVisible=!0,n.overrideFog=!0,e.getOrCreateProgram(a,n)),e._fogVisible=!1,n.overrideFog=!1,e.getOrCreateProgram(a,n),(this.stylesheet.terrain||this.stylesheet.projection&&"globe"===this.stylesheet.projection.name)&&(n.overrideRtt=!0,e.getOrCreateProgram(a,n)))}}}}for(let i in this._shouldPrecompile&&(this._precompileDone=!0),a){let r=this._mergedSourceCaches[i];a[i]!==r.used&&r.getSource().fire(new e.a8("data",{sourceDataType:"visibility",dataType:"source",sourceId:r.getSource().id}))}this.light&&this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.a8("data",{dataType:"style"}))}_updateTilesForChangedImages(){let e=this._changes.getUpdatedImages();if(e.length){for(let i in this._sourceCaches)this._sourceCaches[i].reloadTilesForDependencies(["icons","patterns"],e);this._changes.resetUpdatedImages()}}_updateWorkerLayers(e,i,r){let n=this.getFragmentStyle(e);n&&this.dispatcher.broadcast("updateLayers",{layers:i?n._serializeLayers(i):[],scope:e,removedIds:r||[],options:n.options})}setState(i){if(this._checkLoaded(),rs(this,e.aj(i)))return!1;(i=e.co(i)).layers=e2(i.layers);let r=(function(e,i){if(!e)return[{command:e3.setStyle,args:[i]}];let r=[];try{if(!n(e.version,i.version))return[{command:e3.setStyle,args:[i]}];n(e.center,i.center)||r.push({command:e3.setCenter,args:[i.center]}),n(e.zoom,i.zoom)||r.push({command:e3.setZoom,args:[i.zoom]}),n(e.bearing,i.bearing)||r.push({command:e3.setBearing,args:[i.bearing]}),n(e.pitch,i.pitch)||r.push({command:e3.setPitch,args:[i.pitch]}),n(e.sprite,i.sprite)||r.push({command:e3.setSprite,args:[i.sprite]}),n(e.glyphs,i.glyphs)||r.push({command:e3.setGlyphs,args:[i.glyphs]}),n(e.imports,i.imports)||function(e=[],i=[],r){let a,s,o,l;i=i||[];let u=(e=e||[]).map(e8),h=i.map(e8),c=e.reduce(e7,{}),d=i.reduce(e7,{}),f=u.slice();for(a=0,s=0;a<u.length;a++)o=u[a],d.hasOwnProperty(o)?s++:(r.push({command:e3.removeImport,args:[o]}),f.splice(f.indexOf(o,s),1));for(a=0,s=0;a<h.length;a++)o=h[h.length-1-a],f[f.length-1-a]!==o&&(c.hasOwnProperty(o)?(r.push({command:e3.removeImport,args:[o]}),f.splice(f.lastIndexOf(o,f.length-s),1)):s++,l=f[f.length-a],r.push({command:e3.addImport,args:[d[o],l]}),f.splice(f.length-a,0,o));for(let e of i){let i=c[e.id];if(!i||n(i,e))continue;n(i.config,e.config)||r.push({command:e3.setImportConfig,args:[e.id,e.config]}),n(i.url,e.url)||r.push({command:e3.setImportUrl,args:[e.id,e.url]});let a=e.data;n(i&&i.data,a)||r.push({command:e3.setImportData,args:[e.id,a]})}}(e.imports,i.imports,r),n(e.transition,i.transition)||r.push({command:e3.setTransition,args:[i.transition]}),n(e.light,i.light)||r.push({command:e3.setLight,args:[i.light]}),n(e.fog,i.fog)||r.push({command:e3.setFog,args:[i.fog]}),n(e.projection,i.projection)||r.push({command:e3.setProjection,args:[i.projection]}),n(e.lights,i.lights)||r.push({command:e3.setLights,args:[i.lights]}),n(e.camera,i.camera)||r.push({command:e3.setCamera,args:[i.camera]});let a={},s=[];!function(e,i,r,a){let s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(i.hasOwnProperty(s)||e5(s,r,a));for(s in i){var o,l;if(!i.hasOwnProperty(s))continue;let u=i[s];e.hasOwnProperty(s)?n(e[s],u)||("geojson"===e[s].type&&"geojson"===u.type&&function(e,i,r){let a;for(a in e[r])if(e[r].hasOwnProperty(a)&&"data"!==a&&!n(e[r][a],i[r][a]))return!1;for(a in i[r])if(i[r].hasOwnProperty(a)&&"data"!==a&&!n(e[r][a],i[r][a]))return!1;return!0}(e,i,s)?r.push({command:e3.setGeoJSONSourceData,args:[s,u.data]}):(o=s,l=i,e5(o,r,a),e4(o,l,r))):e4(s,i,r)}}(e.sources,i.sources,s,a);let o=[];e.layers&&e.layers.forEach(e=>{e.source&&a[e.source]?r.push({command:e3.removeLayer,args:[e.id]}):o.push(e)});let l=e.terrain;l&&a[l.source]&&(r.push({command:e3.setTerrain,args:[void 0]}),l=void 0),r=r.concat(s),n(l,i.terrain)||r.push({command:e3.setTerrain,args:[i.terrain]}),function(e,i,r){let a,s,o,l,u,h,c;i=i||[];let d=(e=e||[]).map(e8),f=i.map(e8),p=e.reduce(e7,{}),m=i.reduce(e7,{}),_=d.slice(),g=Object.create(null);for(a=0,s=0;a<d.length;a++)o=d[a],m.hasOwnProperty(o)?s++:(r.push({command:e3.removeLayer,args:[o]}),_.splice(_.indexOf(o,s),1));for(a=0,s=0;a<f.length;a++)o=f[f.length-1-a],_[_.length-1-a]!==o&&(p.hasOwnProperty(o)?(r.push({command:e3.removeLayer,args:[o]}),_.splice(_.lastIndexOf(o,_.length-s),1)):s++,h=_[_.length-a],r.push({command:e3.addLayer,args:[m[o],h]}),_.splice(_.length-a,0,o),g[o]=!0);for(a=0;a<f.length;a++)if(l=p[o=f[a]],u=m[o],!g[o]&&!n(l,u)){if(n(l.source,u.source)&&n(l["source-layer"],u["source-layer"])&&n(l.type,u.type)){for(c in e6(l.layout,u.layout,r,o,null,e3.setLayoutProperty),e6(l.paint,u.paint,r,o,null,e3.setPaintProperty),n(l.slot,u.slot)||r.push({command:e3.setSlot,args:[o,u.slot]}),n(l.filter,u.filter)||r.push({command:e3.setFilter,args:[o,u.filter]}),n(l.minzoom,u.minzoom)&&n(l.maxzoom,u.maxzoom)||r.push({command:e3.setLayerZoomRange,args:[o,u.minzoom,u.maxzoom]}),l)l.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&"slot"!==c&&(0===c.indexOf("paint.")?e6(l[c],u[c],r,o,c.slice(6),e3.setPaintProperty):n(l[c],u[c])||r.push({command:e3.setLayerProperty,args:[o,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!l.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&"slot"!==c&&(0===c.indexOf("paint.")?e6(l[c],u[c],r,o,c.slice(6),e3.setPaintProperty):n(l[c],u[c])||r.push({command:e3.setLayerProperty,args:[o,c,u[c]]}))}else r.push({command:e3.removeLayer,args:[o]}),h=_[_.lastIndexOf(o)+1],r.push({command:e3.addLayer,args:[u,h]})}}(o,i.layers,r)}catch(a){r=[{command:e3.setStyle,args:[i]}]}return r})(this.serialize(),i).filter(e=>!(e.command in rl));if(0===r.length)return!1;let a=r.filter(e=>!(e.command in ro));if(a.length>0)throw Error(`Unimplemented: ${a.map(e=>e.command).join(", ")}.`);return r.forEach(e=>{this[e.command].apply(this,e.args)}),this.stylesheet=i,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(i,r){return this.getImage(i)?this.fire(new e.a7(Error("An image with this name already exists."))):(this.imageManager.addImage(i,this.scope,r),this._afterImageUpdated(i),this)}updateImage(e,i){this.imageManager.updateImage(e,this.scope,i)}getImage(e){return this.imageManager.getImage(e,this.scope)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i,this.scope),this._afterImageUpdated(i),this):this.fire(new e.a7(Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(i),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new e.a8("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(i,r,n={}){return this._checkLoaded(),this._validate(e.cr,`models.${i}`,r,null,n)||(this.modelManager.addModel(i,r,this.scope),this._changes.setDirty()),this}hasModel(e){return this.modelManager.hasModel(e,this.scope)}removeModel(i){return this.hasModel(i)?(this.modelManager.removeModel(i,this.scope),this):this.fire(new e.a7(Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(i,r,n={}){if(this._checkLoaded(),void 0!==this.getOwnSource(i))throw Error(`There is already a source with ID "${i}".`);if(!r.type)throw Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(e.cs,`sources.${i}`,r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);let a=eQ(i,r,this.dispatcher,this);a.scope=this.scope,a.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(a.id),source:a.serialize(),sourceId:a.id}));let s=i=>{let r=(i?"symbol:":"other:")+a.id,n=e.aE(r,this.scope),s=this._sourceCaches[r]=new e.bq(n,a,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[a.id]=s,s.onAdd(this.map)};s(!1),"vector"!==r.type&&"geojson"!==r.type||s(!0),a.onAdd&&a.onAdd(this.map),n.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(i){this._checkLoaded();let r=this.getOwnSource(i);if(!r)throw Error("There is no source with this ID");for(let r in this._layers)if(this._layers[r].source===i)return this.fire(new e.a7(Error(`Source "${i}" cannot be removed while layer "${r}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===i)return this.fire(new e.a7(Error(`Source "${i}" cannot be removed while terrain is using it.`)));for(let r of this.getOwnSourceCaches(i)){let i=e.cq(r.id);delete this._sourceCaches[i],this._changes.discardSourceCacheUpdate(r.id),r.fire(new e.a8("data",{sourceDataType:"metadata",dataType:"source",sourceId:r.getSource().id})),r.setEventedParent(null),r.clearTiles()}return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],this.mergeSources(),r.setEventedParent(null),r.onRemove&&r.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(e,i){this._checkLoaded(),this.getOwnSource(e).setData(i),this._changes.setDirty()}getOwnSource(e){let i=this.getOwnSourceCache(e);return i&&i.getSource()}getOwnSources(){let e=[];for(let i in this._otherSourceCaches){let r=this.getOwnSourceCache(i);r&&e.push(r.getSource())}return e}areTilesLoaded(){let e=this._mergedSourceCaches;for(let i in e){let r=e[i]._tiles;for(let e in r){let i=r[e];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}setLights(i){if(this._checkLoaded(),!i)return delete this.ambientLight,void delete this.directionalLight;let r=this._getTransitionParameters();for(let n of i){if(this._validate(e.ct,"lights",n))return;switch(n.type){case"ambient":if(this.ambientLight){let e=this.ambientLight;e.set(n),e.updateTransitions(r)}else this.ambientLight=new eH(n,eV,this.scope,this.options);break;case"directional":if(this.directionalLight){let e=this.directionalLight;e.set(n),e.updateTransitions(r)}else this.directionalLight=new eH(n,eU,this.scope,this.options)}}let n=new e.al(this.z||0,r);this.ambientLight&&this.ambientLight.recalculate(n),this.directionalLight&&this.directionalLight.recalculate(n),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){let i=this.directionalLight,r=this.ambientLight;if(!i||!r)return;let n=e=>.2126*(e[0]<=.03928?e[0]/12.92:Math.pow((e[0]+.055)/1.055,2.4))+.7152*(e[1]<=.03928?e[1]/12.92:Math.pow((e[1]+.055)/1.055,2.4))+.0722*(e[2]<=.03928?e[2]/12.92:Math.pow((e[2]+.055)/1.055,2.4)),a=i.properties.get("color").toArray01(),s=i.properties.get("intensity"),o=i.properties.get("direction"),l=1-e.b3(o.x,o.y,o.z)[2]/90,u=n(a)*s*l,h=r.properties.get("color").toArray01(),c=r.properties.get("intensity");return(u+n(h)*c)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;let e=[];return this.directionalLight&&e.push(this.directionalLight.get()),this.ambientLight&&e.push(this.ambientLight.get()),e}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(i){if(!i)return this;if(e.cu(i)){let r=e.cv(i),n=this.fragments.find(({id:e})=>e===r);if(!n)throw Error(`Style import not found: ${i}`);let a=e.cq(i);return n.style.getFragmentStyle(a)}{let e=this.fragments.find(({id:e})=>e===i);if(!e)throw Error(`Style import not found: ${i}`);return e.style}}getConfigProperty(i,r){let n=this.getFragmentStyle(i);if(!n)return null;let a=e.aE(r,n.scope),s=n.options.get(a),o=s?s.value||s.default:null;return o?o.serialize():null}setConfigProperty(i,r,n){let a=e.cw(n);if("success"!==a.result)return void rs(this,a.value);let s=a.value.expression,o=this.getFragmentStyle(i);if(!o)return;let l=e.aE(r,o.scope),u=o.options.get(l);u&&(this.options.set(l,{...u,value:s}),this.updateConfigDependencies())}setConfig(i,r){if(this._config=i,i||r){if(r)for(let n in r){let a,s;let o=e.cw(r[n].default);if("success"===o.result&&(a=o.value.expression),i&&void 0!==i[n]){let r=e.cw(i[n]);"success"===r.result&&(s=r.value.expression)}let{minValue:l,maxValue:u,stepValue:h,type:c,values:d}=r[n];if(a){let i=e.aE(n,this.scope);this.options.set(i,{default:a,value:s,minValue:l,maxValue:u,stepValue:h,type:c,values:d})}else this.fire(new e.a7(Error(`No schema defined for config option "${n}".`)))}else this.fire(new e.a7(Error("Attempting to set config for a style without schema.")))}}updateConfigDependencies(){for(let e of this._configDependentLayers){let i=this.getLayer(e);i&&(i.possiblyEvaluateVisibility(),this._updateLayer(i))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this._changes.setDirty()}addLayer(i,r,n={}){let a;this._checkLoaded();let s=i.id;if(this._layers[s])return void this.fire(new e.a7(Error(`Layer with id "${s}" already exists on this map`)));if("custom"===i.type){if(rs(this,e.cx(i)))return;a=e.cp(i,this.scope,this.options)}else{if("object"==typeof i.source&&(this.addSource(s,i.source),i=e.co(i),i=e.ak(i,{source:s})),this._validate(e.cy,`layers.${s}`,i,{arrayIndex:-1},n))return;a=e.cp(i,this.scope,this.options),this._validateLayer(a),a.setEventedParent(this,{layer:{id:s}}),this._serializedLayers[a.id]=a.serialize()}a.isConfigDependent&&this._configDependentLayers.add(a.fqid);let o=this._order.length;if(r){let i=this._order.indexOf(r);if(-1===i)return void this.fire(new e.a7(Error(`Layer with id "${r}" does not exist on this map.`)));a.slot===this._layers[r].slot?o=i:e.X(`Layer with id "${r}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(o,0,s),this._layerOrderChanged=!0,this._layers[s]=a;let l=this.getOwnLayerSourceCache(a),u=!!this.directionalLight&&this.directionalLight.shadowsEnabled();l&&a.canCastShadows()&&u&&(l.castsShadows=!0);let h=this._changes.getRemovedLayer(a);if(h&&a.source&&l&&"custom"!==a.type){this._changes.discardLayerRemoval(a);let i=e.aE(a.source,a.scope);h.type!==a.type?this._changes.updateSourceCache(i,"clear"):(this._changes.updateSourceCache(i,"reload"),l.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),a.scope=this.scope,this.mergeLayers()}moveLayer(i,r){this._checkLoaded();let n=this._checkLayer(i);if(!n||i===r)return;let a=this._order.indexOf(i);this._order.splice(a,1);let s=this._order.length;if(r){let i=this._order.indexOf(r);if(-1===i)return void this.fire(new e.a7(Error(`Layer with id "${r}" does not exist on this map.`)));n.slot===this._layers[r].slot?s=i:e.X(`Layer with id "${r}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(s,0,i),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(e){this._checkLoaded();let i=this._checkLayer(e);if(!i)return;i.setEventedParent(null);let r=this._order.indexOf(e);this._order.splice(r,1),delete this._layers[e],delete this._serializedLayers[e],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(i.fqid),this._changes.removeLayer(i);let n=this.getOwnLayerSourceCache(i);if(n&&n.castsShadows){let e=!1;for(let r in this._layers)if(this._layers[r].source===i.source&&this._layers[r].canCastShadows()){e=!0;break}n.castsShadows=e}i.onRemove&&i.onRemove(this.map),this.mergeLayers()}getOwnLayer(e){return this._layers[e]}hasLayer(e){return e in this._mergedLayers}hasLayerType(e){for(let i in this._layers)if(this._layers[i].type===e)return!0;return!1}setLayerZoomRange(e,i,r){this._checkLoaded();let n=this._checkLayer(e);n&&(n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)))}setSlot(e,i){this._checkLoaded();let r=this._checkLayer(e);r&&r.slot!==i&&(r.slot=i,this._updateLayer(r))}setFilter(i,r,a={}){this._checkLoaded();let s=this._checkLayer(i);if(s&&!n(s.filter,r))return null==r?(s.filter=void 0,void this._updateLayer(s)):void(this._validate(e.cz,`layers.${s.id}.filter`,r,{layerType:s.type},a)||(s.filter=e.co(r),this._updateLayer(s)))}getFilter(i){let r=this._checkLayer(i);if(r)return e.co(r.filter)}setLayoutProperty(e,i,r,a={}){this._checkLoaded();let s=this._checkLayer(e);s&&(n(s.getLayoutProperty(i),r)||(s.setLayoutProperty(i,r,a),s.isConfigDependent&&this._configDependentLayers.add(s.fqid),this._updateLayer(s)))}getLayoutProperty(e,i){let r=this._checkLayer(e);if(r)return r.getLayoutProperty(i)}setPaintProperty(e,i,r,a={}){this._checkLoaded();let s=this._checkLayer(e);if(!s||n(s.getPaintProperty(i),r))return;let o=s.setPaintProperty(i,r,a);s.isConfigDependent&&this._configDependentLayers.add(s.fqid),o&&this._updateLayer(s),this._changes.updatePaintProperties(s)}getPaintProperty(e,i){let r=this._checkLayer(e);if(r)return r.getPaintProperty(i)}setFeatureState(i,r){this._checkLoaded();let n=i.source,a=i.sourceLayer,s=this._checkSource(n);if(!s)return;let o=s.type;if("geojson"===o&&a)return void this.fire(new e.a7(Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===o&&!a)return void this.fire(new e.a7(Error("The sourceLayer parameter must be provided for vector source types.")));for(let s of(void 0===i.id&&this.fire(new e.a7(Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(n)))s.setFeatureState(a,i.id,r)}removeFeatureState(i,r){this._checkLoaded();let n=i.source,a=this._checkSource(n);if(!a)return;let s=a.type,o="vector"===s?i.sourceLayer:void 0;if("vector"===s&&!o)return void this.fire(new e.a7(Error("The sourceLayer parameter must be provided for vector source types.")));if(r&&"string"!=typeof i.id&&"number"!=typeof i.id)return void this.fire(new e.a7(Error("A feature id is required to remove its specific state property.")));for(let e of this.getOwnSourceCaches(n))e.removeFeatureState(o,i.id,r)}getFeatureState(i){this._checkLoaded();let r=i.source,n=i.sourceLayer,a=this._checkSource(r);if(a){if("vector"!==a.type||n)return void 0===i.id&&this.fire(new e.a7(Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(r)[0].getFeatureState(n,i.id);this.fire(new e.a7(Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(i){return this.stylesheet.transition=e.ak({},this.stylesheet.transition,i),this.transition=this.stylesheet.transition,this}getTransition(){return e.ak({},this.stylesheet.transition)}serialize(){this._checkLoaded();let i=this.getTerrain(),r=i&&this.terrain&&this.terrain.scope===this.scope?i:this.stylesheet.terrain;return e.cA({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:r,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},e=>void 0!==e)}_updateLayer(i){this._changes.updateLayer(i);let r=this.getLayerSourceCache(i),n=e.aE(i.source,i.scope),a=this._changes.getUpdatedSourceCaches();i.source&&!a[n]&&r&&"raster"!==r.getSource().type&&(this._changes.updateSourceCache(n,"reload"),r.pause()),i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){let i=e=>"fill-extrusion"===this._mergedLayers[e].type,r=this.order,n={},a=[];for(let s=r.length-1;s>=0;s--){let o=r[s];if(i(o))for(let i of(n[o]=s,e)){let e=i[o];if(e)for(let i of e)a.push(i)}}a.sort((e,i)=>i.intersectionZ-e.intersectionZ);let s=[];for(let o=r.length-1;o>=0;o--){let l=r[o];if(i(l))for(let e=a.length-1;e>=0;e--){let i=a[e].feature;if(n[i.layer.id]<o)break;s.push(i),a.pop()}else for(let i of e){let e=i[l];if(e)for(let i of e)s.push(i.feature)}}return s}queryRenderedFeatures(i,r,n){r&&r.filter&&this._validate(e.cz,"queryRenderedFeatures.filter",r.filter,null,r),r.scope=this.scope,r.availableImages=this._availableImages,r.serializedLayers=this._serializedLayers;let a={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new e.a7(Error("parameters.layers must be an Array."))),[];for(let i of r.layers){let r=this._mergedLayers[i];if(!r)return this.fire(new e.a7(Error(`The layer '${i}' does not exist in the map's style and cannot be queried for features.`))),[];a[r.source]=!0}}let s=[],o=r.serializedLayers||{},l=r&&r.layers?r.layers.some(e=>{let i=this.getLayer(e);return i&&i.is3D()}):this.has3DLayers(),u=e$.createFromScreenPoints(i,n);for(let i in this._mergedSourceCaches){let h=this._mergedSourceCaches[i].getSource();if(!h||h.scope!==r.scope)continue;let c=this._mergedSourceCaches[i].getSource().id;r.layers&&!a[c]||s.push(function(i,r,n,a,s,o,l,u=!1){let h=i.tilesIn(a,l,u);h.sort(e0);let c=[];for(let a of h)c.push({wrappedTileID:a.tile.tileID.wrapped().key,queryResults:a.tile.queryRenderedFeatures(r,n,i._state,a,s,o,function(i,r){let n=e.m.identity([]);return e.m.scale(n,n,[.5*i.width,-(.5*i.height),1]),e.m.translate(n,n,[1,-1,0]),e.m.multiply(n,n,i.calculateProjMatrix(r.toUnwrapped())),Float32Array.from(n)}(i.transform,a.tile.tileID),u)});let d=function(e){let i={},r={};for(let n of e){let e=n.queryResults,a=n.wrappedTileID,s=r[a]=r[a]||{};for(let r in e){let n=e[r],a=s[r]=s[r]||{},o=i[r]=i[r]||[];for(let e of n)a[e.featureIndex]||(a[e.featureIndex]=!0,o.push(e))}}return i}(c);for(let e in d)d[e].forEach(e=>{let r=e.feature,n=r.layer;n&&"background"!==n.type&&"sky"!==n.type&&"slot"!==n.type&&(r.source=n.source,n["source-layer"]&&(r.sourceLayer=n["source-layer"]),r.state=void 0!==r.id?i.getFeatureState(n["source-layer"],r.id):{})});return d}(this._mergedSourceCaches[i],this._mergedLayers,o,u,r,n,l,!!this.map._showQueryGeometry))}return this.placement&&s.push(function(e,i,r,n,a,s,o){let l={},u=s.queryRenderedSymbols(n),h=[];for(let e of Object.keys(u).map(Number))h.push(o[e]);for(let r of(h.sort(e0),h)){let n=r.featureIndex.lookupSymbolFeatures(u[r.bucketInstanceId],i,r.bucketIndex,r.sourceLayerIndex,a.filter,a.layers,a.availableImages,e);for(let e in n){let i=l[e]=l[e]||[],a=n[e];for(let e of(a.sort((e,i)=>{let n=r.featureSortOrder;if(n){let r=n.indexOf(e.featureIndex);return n.indexOf(i.featureIndex)-r}return i.featureIndex-e.featureIndex}),a))i.push(e)}}for(let i in l)l[i].forEach(n=>{let a=n.feature,s=r(e[i]);if(!s)return;let o=s.getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=o});return l}(this._mergedLayers,o,this.getLayerSourceCache.bind(this),u.screenGeometry,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(s)}querySourceFeatures(i,r){r&&r.filter&&this._validate(e.cz,"querySourceFeatures.filter",r.filter,null,r);let n=this.getOwnSourceCaches(i),a=[];for(let e of n)a=a.concat(function(e,i){let r=e.getRenderableIds().map(i=>e.getTileByID(i)),n=[],a={};for(let e=0;e<r.length;e++){let s=r[e],o=s.tileID.canonical.key;a[o]||(a[o]=!0,s.querySourceFeatures(n,i))}return n}(e,r));return a}addSourceType(e,i,r){return rd.getSourceType(e)?r(Error(`A source type called "${e}" already exists.`)):(rd.setSourceType(e,i),i.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:i.workerSourceURL},r):r(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(e,i,r={}){this._checkLoaded();let a=this.light.getLight(),s=!1;for(let i in e)if(!n(e[i],a[i])){s=!0;break}if(!s)return;let o=this._getTransitionParameters();this.light.setLight(e,i,r),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,r=1){if(this._checkLoaded(),!i)return delete this.terrain,null===i?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let a=i,s=null==i.source;if(1===r){if("object"==typeof a.source){let i="terrain-dem-src";this.addSource(i,a.source),a=e.co(a),a=e.ak(a,{source:i})}let i=e.ak({},a),r={};if(this.terrain&&s){i.source=this.terrain.get().source;let e=this.terrain?this.getFragmentStyle(this.terrain.scope):null;e&&(r.style=e.serialize())}if(this._validate(e.cB,"terrain",i,r))return}if(this.terrain&&(this.terrain.scope===this.scope||s)&&(!this.terrain||r===this.terrain.drapeRenderMode)){let r=this.terrain,s=r.get();for(let i of Object.keys(e.ae.terrain))!a.hasOwnProperty(i)&&e.ae.terrain[i].default&&(a[i]=e.ae.terrain[i].default);for(let a in i)if(!n(i[a],s[a])){r.set(i,this.options),this.stylesheet.terrain=i;let n=this._getTransitionParameters({duration:0});r.updateTransitions(n),this.fire(new e.a8("data",{dataType:"style"}));break}}else{if(!a)return;this._createTerrain(a,r),this.fire(new e.a8("data",{dataType:"style"}))}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){let i=this.fog=new eN(e,this.map.transform);this.stylesheet.fog=i.get();let r=this._getTransitionParameters({duration:0});i.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(let e of this.map._markers)e._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){let i=this.fog;if(!n(i.get(),e)){i.set(e),this.stylesheet.fog=i.get();let r=this._getTransitionParameters({duration:0});i.updateTransitions(r)}}else this._createFog(e);this._markersNeedUpdate=!0}_getTransitionParameters(i){return{now:e.a4.now(),transition:e.ak(this.transition,i)}}updateDrapeFirstLayers(){if(!this.terrain)return;let e=[],i=[];for(let r in this._mergedLayers)this.isLayerDraped(this._mergedLayers[r])?e.push(r):i.push(r);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...i)}_createTerrain(e,i){let r=this.terrain=new ez(e,i,this.scope,this.options);1===i&&(this.stylesheet.terrain=e),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();let n=this._getTransitionParameters({duration:0});r.updateTransitions(n)}_force3DLayerUpdate(){for(let e in this._layers){let i=this._layers[e];"fill-extrusion"===i.type&&this._updateLayer(i)}}_forceSymbolLayerUpdate(){for(let e in this._layers){let i=this._layers[e];"symbol"===i.type&&this._updateLayer(i)}}_validate(i,r,n,a,s={}){if(s&&!1===s.validate)return!1;let o=e.ak({},this.serialize());return rs(this,i.call(e.aj,e.ak({key:r,style:o,value:n,styleSpec:e.ae},a)))}_remove(){for(let i in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.cC.off("pluginStateChange",this._rtlTextPluginCallback),this._mergedLayers)this._mergedLayers[i].setEventedParent(null);for(let e in this._mergedSourceCaches)this._mergedSourceCaches[e].clearTiles(),this._mergedSourceCaches[e].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(e){for(let i of this.getSourceCaches(e))i.clearTiles()}clearSources(){for(let e in this._mergedSourceCaches)this._mergedSourceCaches[e].clearTiles()}reloadSource(e){for(let i of this.getSourceCaches(e))i.resume(),i.reload()}reloadSources(){for(let e of this.getSources())e.reload&&e.reload()}updateSources(e){let i;for(let r in this.directionalLight&&(i=rr(this.directionalLight)),this._mergedSourceCaches)this._mergedSourceCaches[r].update(e,void 0,void 0,i)}_generateCollisionBoxes(){for(let e in this._sourceCaches){let i=this._sourceCaches[e];i.resume(),i.reload()}}_updatePlacement(i,r,n,a,s=!1){let o=!1,l=!1,u={},h={};for(let r of this._mergedOrder){let n=this._mergedLayers[r];if("symbol"!==n.type)continue;let a=e.aE(n.source,n.scope),s=u[a];if(!s){let e=this.getLayerSourceCache(n);if(!e)continue;let i=e.getRenderableIds(!0).map(i=>e.getTileByID(i));h[a]=i.slice(),s=u[a]=i.sort((e,i)=>i.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(i.tileID)?-1:1))}let l=this.crossTileSymbolIndex.addLayer(n,s,i.center.lng,i.projection);o=o||l}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),s=s||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.a8("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.a4.now(),i.zoom))&&(this.pauseablePlacement=new tg(i,this._mergedOrder,s,r,n,a,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,u,h),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.a4.now()),l=!0),o&&this.pauseablePlacement.placement.setStale()),l||o)for(let i of this._mergedOrder){let r=this._mergedLayers[i];"symbol"===r.type&&this.placement.updateLayerOpacities(r,u[e.aE(r.source,r.scope)])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.a4.now())}_releaseSymbolFadeTiles(){for(let e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}addImport(i){this._checkLoaded();let r=this.stylesheet.imports=this.stylesheet.imports||[];return -1!==r.findIndex(({id:e})=>e===i.id)?this.fire(new e.a7(Error(`Import with id '${i.id}' already exists in the map's style.`))):(r.push(i),this._loadImports([i],!0),this)}setImportUrl(e,i){this._checkLoaded();let r=this.stylesheet.imports||[],n=this.getImportIndex(e);if(-1===n)return this;r[n].url=i;let a=this.fragments[n];return a.style=this._createFragmentStyle(r[n]),a.style.on("style.import.load",()=>this.mergeAll()),a.style.loadURL(i),this}setImportData(e,i){this._checkLoaded();let r=this.getImportIndex(e),n=this.stylesheet.imports||[];return -1===r?this:i?(this.fragments[r].style.setState(i),this._reloadImports(),this):(delete n[r].data,this.setImportUrl(e,n[r].url))}setImportConfig(e,i){this._checkLoaded();let r=this.getImportIndex(e),n=this.stylesheet.imports||[];if(-1===r)return this;i?n[r].config=i:delete n[r].config;let a=this.fragments[r],s=a.style.stylesheet&&a.style.stylesheet.schema;return a.config=i,a.style.setConfig(i,s),this.updateConfigDependencies(),this}removeImport(e){this._checkLoaded();let i=this.stylesheet.imports||[],r=this.getImportIndex(e);return -1===r||(i.splice(r,1),this.fragments[r].style._remove(),this.fragments.splice(r,1),this._reloadImports()),this}getImportIndex(i){let r=(this.stylesheet.imports||[]).findIndex(e=>e.id===i);return -1===r&&this.fire(new e.a7(Error(`Import '${i}' does not exist in the map's style and cannot be updated.`))),r}getLayer(e){return this._mergedLayers[e]}getSources(){let e=[];for(let i in this._mergedOtherSourceCaches){let r=this._mergedOtherSourceCaches[i];r&&e.push(r.getSource())}return e}getSource(e,i){let r=this.getSourceCache(e,i);return r&&r.getSource()}getLayerSource(e){let i=this.getLayerSourceCache(e);return i&&i.getSource()}getSourceCache(i,r){let n=e.aE(i,r);return this._mergedOtherSourceCaches[n]}getLayerSourceCache(i){let r=e.aE(i.source,i.scope);return"symbol"===i.type?this._mergedSymbolSourceCaches[r]:this._mergedOtherSourceCaches[r]}getSourceCaches(e){let i=[];return this._mergedOtherSourceCaches[e]&&i.push(this._mergedOtherSourceCaches[e]),this._mergedSymbolSourceCaches[e]&&i.push(this._mergedSymbolSourceCaches[e]),i}updateSourceCaches(){let e=this._changes.getUpdatedSourceCaches();for(let i in e){let r=e[i];"reload"===r?this.reloadSource(i):"clear"===r&&this.clearSource(i)}}updateLayers(e){for(let i of this._changes.getUpdatedPaintProperties()){let r=this.getLayer(i);r&&r.updateTransitions(e)}}getImages(e,i,r){this.imageManager.getImages(i.icons,i.scope,r),this._updateTilesForChangedImages();let n=e=>{e&&e.setDependencies(i.tileID.key,i.type,i.icons)};n(this._otherSourceCaches[i.source]),n(this._symbolSourceCaches[i.source])}getGlyphs(e,i,r){this.glyphManager.getGlyphs(i.stacks,i.scope,r)}getResource(i,r,n){return e.cD(r,n)}getOwnSourceCache(e){return this._otherSourceCaches[e]}getOwnLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}getOwnSourceCaches(e){let i=[];return this._otherSourceCaches[e]&&i.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&i.push(this._symbolSourceCaches[e]),i}_isSourceCacheLoaded(i){let r=this.getOwnSourceCaches(i);return 0===r.length?(this.fire(new e.a7(Error(`There is no source with ID '${i}'`))),!1):r.every(e=>e.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}function rf(e,i){let r=!1,n=null,a=()=>{n=null,r&&(e(),n=setTimeout(a,i),r=!1)};return()=>(r=!0,n||a(),n)}rd.getSourceType=function(e){return eK[e]},rd.setSourceType=function(e,i){eK[e]=i},rd.registerForPluginStateChange=e.ci;class rp{constructor(i){this._hashName=i&&encodeURIComponent(i),e.aR(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=rf(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map&&(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0),this}getHashString(){let e=this._map;if(!e)return"";let i=rm(e);if(this._hashName){let e=this._hashName,r=!1,n=location.hash.slice(1).split("&").map(n=>{let a=n.split("=")[0];return a===e?(r=!0,`${a}=${i}`):n}).filter(e=>e);return r||n.push(`${e}=${i}`),`#${n.join("&")}`}return`#${i}`}_getCurrentHash(){let e=location.hash.replace("#","");if(this._hashName){let i;return e.split("&").map(e=>e.split("=")).forEach(e=>{e[0]===this._hashName&&(i=e)}),(i&&i[1]||"").split("/")}return e.split("/")}_onHashChange(){let e=this._map;if(!e)return!1;let i=this._getCurrentHash();if(i.length>=3&&!i.some(e=>isNaN(e))){let r=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(i[3]||0):e.getBearing();return e.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:r,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function rm(e,i){let r=e.getCenter(),n=Math.round(100*e.getZoom())/100,a=Math.pow(10,Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10)),s=Math.round(r.lng*a)/a,o=Math.round(r.lat*a)/a,l=e.getBearing(),u=e.getPitch(),h=i?`/${s}/${o}/${n}`:`${n}/${o}/${s}`;return(l||u)&&(h+="/"+Math.round(10*l)/10),u&&(h+=`/${Math.round(u)}`),h}let r_={linearity:.3,easing:e.cE(0,0,.3,1)},rg=e.ak({deceleration:2500,maxSpeed:1400},r_),ry=e.ak({deceleration:20,maxSpeed:1400},r_),rv=e.ak({deceleration:1e3,maxSpeed:360},r_),rx=e.ak({deceleration:1e3,maxSpeed:90},r_);class rb{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.a4.now(),settings:i})}_drainInertiaBuffer(){let i=this._inertiaBuffer,r=e.a4.now();for(;i.length>0&&r-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;let r={zoom:0,bearing:0,pitch:0,pan:new e.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:e}of this._inertiaBuffer)r.zoom+=e.zoomDelta||0,r.bearing+=e.bearingDelta||0,r.pitch+=e.pitchDelta||0,e.panDelta&&r.pan._add(e.panDelta),e.around&&(r.around=e.around),e.pinchAround&&(r.pinchAround=e.pinchAround);let n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(r.pan.mag()){let s=rM(r.pan.mag(),n,e.ak({},rg,i||{}));a.offset=r.pan.mult(s.amount/r.pan.mag()),a.center=this._map.transform.center,rw(a,s)}if(r.zoom){let e=rM(r.zoom,n,ry);a.zoom=this._map.transform.zoom+e.amount,rw(a,e)}if(r.bearing){let i=rM(r.bearing,n,rv);a.bearing=this._map.transform.bearing+e.c(i.amount,-179,179),rw(a,i)}if(r.pitch){let e=rM(r.pitch,n,rx);a.pitch=this._map.transform.pitch+e.amount,rw(a,e)}if(a.zoom||a.bearing){let e=void 0===r.pinchAround?r.around:r.pinchAround;a.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),a.noMoveStart=!0,a}}function rw(e,i){(!e.duration||e.duration<i.duration)&&(e.duration=i.duration,e.easing=i.easing)}function rM(i,r,n){let{maxSpeed:a,linearity:s,deceleration:o}=n,l=e.c(i*s/(r/1e3),-a,a),u=Math.abs(l)/(o*s);return{easing:n.easing,duration:1e3*u,amount:u/2*l}}class rT extends e.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,r,n,a={}){let s=m(r.getCanvasContainer(),n);super(i,e.ak({point:s,lngLat:r.unproject(s),originalEvent:n},a)),this._defaultPrevented=!1,this.target=r}}class rL extends e.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,r,n){let a="touchend"===i?n.changedTouches:n.touches,s=_(r.getCanvasContainer(),a),o=s.map(e=>r.unproject(e)),l=s.reduce((e,i,r,n)=>e.add(i.div(n.length)),new e.P(0,0));super(i,{points:s,point:l,lngLats:o,lngLat:r.unproject(l),originalEvent:n}),this._defaultPrevented=!1}}class rS extends e.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class rk{constructor(e,i){this._map=e,this._clickTolerance=i.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new rS(e.type,this._map,e))}mousedown(e,i){return this._mousedownPos=i,this._firePreventable(new rT(e.type,this._map,e))}mouseup(e){this._map.fire(new rT(e.type,this._map,e))}preclick(i){let r=e.ak({},i);r.type="preclick",this._map.fire(new rT(r.type,this._map,r))}click(e,i){this._mousedownPos&&this._mousedownPos.dist(i)>=this._clickTolerance||(this.preclick(e),this._map.fire(new rT(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new rT(e.type,this._map,e))}mouseover(e){this._map.fire(new rT(e.type,this._map,e))}mouseout(e){this._map.fire(new rT(e.type,this._map,e))}touchstart(e){return this._firePreventable(new rL(e.type,this._map,e))}touchmove(e){this._map.fire(new rL(e.type,this._map,e))}touchend(e){this._map.fire(new rL(e.type,this._map,e))}touchcancel(e){this._map.fire(new rL(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rD{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new rT(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rT("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new rT(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rE{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,i){this.isEnabled()&&e.shiftKey&&0===e.button&&(c(),this._startPos=this._lastPos=i,this._active=!0)}mousemoveWindow(e,i){if(!this._active)return;let r=this._startPos,n=this._lastPos;if(!r||!n||n.equals(i)||!this._box&&i.dist(r)<this._clickTolerance)return;this._lastPos=i,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));let a=Math.min(r.x,i.x),s=Math.max(r.x,i.x),l=Math.min(r.y,i.y),u=Math.max(r.y,i.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${a}px,${l}px)`,this._box.style.width=s-a+"px",this._box.style.height=u-l+"px")})}mouseupWindow(i,r){if(!this._active)return;let n=this._startPos;if(n&&0===i.button){if(this.reset(),p(),n.x!==r.x||n.y!==r.y)return this._map.fire(new e.a8("boxzoomend",{originalEvent:i})),{cameraAnimation:e=>e.fitScreenCoordinates(n,r,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),d(),delete this._startPos,delete this._lastPos}_fireEvent(i,r){return this._map.fire(new e.a8(i,{originalEvent:r}))}}function rA(e,i){let r={};for(let n=0;n<e.length;n++)r[e[n].identifier]=i[n];return r}class rP{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=i.timeStamp),n.length===this.numTouches&&(this.centroid=function(i){let r=new e.P(0,0);for(let e of i)r._add(e);return r.div(i.length)}(r),this.touches=rA(n,r)))}touchmove(e,i,r){if(this.aborted||!this.centroid)return;let n=rA(r,i);for(let e in this.touches){let i=n[e];(!i||i.dist(this.touches[e])>30)&&(this.aborted=!0)}}touchend(e,i,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){let e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class rC{constructor(e){this.singleTap=new rP(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,i,r){this.singleTap.touchstart(e,i,r)}touchmove(e,i,r){this.singleTap.touchmove(e,i,r)}touchend(e,i,r){let n=this.singleTap.touchend(e,i,r);if(n){let i=e.timeStamp-this.lastTime<500,r=!this.lastTap||30>this.lastTap.dist(n);if(i&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class rI{constructor(){this._zoomIn=new rC({numTouches:1,numTaps:2}),this._zoomOut=new rC({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,i,r){this._zoomIn.touchstart(e,i,r),this._zoomOut.touchstart(e,i,r)}touchmove(e,i,r){this._zoomIn.touchmove(e,i,r),this._zoomOut.touchmove(e,i,r)}touchend(e,i,r){let n=this._zoomIn.touchend(e,i,r),a=this._zoomOut.touchend(e,i,r);return n?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:i=>i.easeTo({duration:300,zoom:i.getZoom()+1,around:i.unproject(n)},{originalEvent:e})}):a?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:i=>i.easeTo({duration:300,zoom:i.getZoom()-1,around:i.unproject(a)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}let rO={0:1,2:2};class rz{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,i){return!1}_move(e,i){return{}}mousedown(e,i){if(this._lastPoint)return;let r=g(e);this._correctButton(e,r)&&(this._lastPoint=i,this._eventButton=r)}mousemoveWindow(e,i){let r=this._lastPoint;if(r){if(e.preventDefault(),null!=this._eventButton&&function(e,i){let r=rO[i];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton))this.reset();else if(this._moved||!(i.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=i,this._move(r,i)}}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&p(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rR extends rz{mousedown(e,i){super.mousedown(e,i),this._lastPoint&&(this._active=!0)}_correctButton(e,i){return 0===i&&!e.ctrlKey}_move(e,i){return{around:i,panDelta:i.sub(e)}}}class rY extends rz{_correctButton(e,i){return 0===i&&e.ctrlKey||2===i}_move(e,i){let r=.8*(i.x-e.x);if(r)return this._active=!0,{bearingDelta:r}}contextmenu(e){e.preventDefault()}}class rF extends rz{_correctButton(e,i){return 0===i&&e.ctrlKey||2===i}_move(e,i){let r=-.5*(i.y-e.y);if(r)return this._active=!0,{pitchDelta:r}}contextmenu(e){e.preventDefault()}}class rj{constructor(i,r){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.aR(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.P(0,0)}touchstart(e,i,r){return this._calculateTransform(e,i,r)}touchmove(i,r,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length&&!e.cF())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,r,n)}}touchend(e,i,r){this._calculateTransform(e,i,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,r,n){n.length>0&&(this._active=!0);let a=rA(n,r),s=new e.P(0,0),o=new e.P(0,0),l=0;for(let e in a){let i=a[e],r=this._touches[e];r&&(s._add(i),o._add(i.sub(r)),l++,a[e]=i)}if(this._touches=a,l<this._minTouches||!o.mag())return;let u=o.div(l);return this._sum._add(u),this._sum.mag()<this._clickTolerance?void 0:{around:s.div(l),panDelta:u}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class rB{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,i,r){return{}}touchstart(e,i,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([i[0],i[1]]))}touchmove(e,i,r){let n=this._firstTwoTouches;if(!n)return;e.preventDefault();let[a,s]=n,o=rN(r,i,a),l=rN(r,i,s);if(!o||!l)return;let u=this._aroundCenter?null:o.add(l).div(2);return this._move([o,l],u,e)}touchend(e,i,r){if(!this._firstTwoTouches)return;let[n,a]=this._firstTwoTouches,s=rN(r,i,n),o=rN(r,i,a);s&&o||(this._active&&p(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function rN(e,i,r){for(let n=0;n<e.length;n++)if(e[n].identifier===r)return i[n]}function rH(e,i){return Math.log(e/i)/Math.LN2}class rV extends rB{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,i){let r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(.1>Math.abs(rH(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:rH(this._distance,r),pinchAround:i}}}function rU(e,i){return 180*e.angleWith(i)/Math.PI}class r$ extends rB{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,i){let r=this._vector;if(this._vector=e[0].sub(e[1]),r&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:rU(this._vector,r),pinchAround:i}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());let i=25/(Math.PI*this._minDiameter)*360,r=this._startVector;return!!r&&Math.abs(rU(e,r))<i}}function rW(e){return Math.abs(e.y)>Math.abs(e.x)}class rG extends rB{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,rW(e[0].sub(e[1]))&&(this._valid=!1)}_move(i,r,n){let a=this._lastPoints;if(!a)return;let s=i[0].sub(a[0]),o=i[1].sub(a[1]);return this._map._cooperativeGestures&&!e.cF()&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(s,o,n.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:-((s.y+o.y)/2*.5)})}gestureBeginsVertically(e,i,r){if(void 0!==this._valid)return this._valid;let n=e.mag()>=2,a=i.mag()>=2;if(!n&&!a)return;if(!n||!a)return null==this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;let s=e.y>0==i.y>0;return rW(e)&&rW(i)&&s}}class rq{constructor(){this._panStep=100,this._bearingStep=15,this._pitchStep=10,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let i=0,r=0,n=0,a=0,s=0;switch(e.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),s=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:o=>{let l=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:rZ,zoom:i?Math.round(l)+i*(e.shiftKey?2:1):l,bearing:o.getBearing()+r*this._bearingStep,pitch:o.getPitch()+n*this._pitchStep,offset:[-a*this._panStep,-s*this._panStep],center:o.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rZ(e){return e*(2-e)}class rX{constructor(i,r){this._map=i,this._el=i.getCanvasContainer(),this._handler=r,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.aR(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||e.cF()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let r=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,n=e.a4.now(),a=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==r&&r%4.000244140625==0?this._type="wheel":0!==r&&4>Math.abs(r)?this._type="trackpad":a>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=200>Math.abs(a*r)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),i.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=i,this._delta-=r,this._active||this._start(i)),i.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let i=m(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:i,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let i=this._map.transform;"wheel"===this._type&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);let r=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(0!==this._delta){let e="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);let a=r(),s=Math.pow(2,a),o="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(o*n))),"wheel"===this._type&&(this._startZoom=a,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}let n="number"==typeof this._targetZoom?this._targetZoom:r(),a=this._startZoom,s=this._easing,o,l=!1;if("wheel"===this._type&&a&&s){let i=Math.min((e.a4.now()-this._lastWheelEventTime)/200,1),r=s(i);o=e.n(a,n,r),i<1?this._frameId||(this._frameId=!0):l=!0}else o=n,l=!0;this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let u=o-r();return u*this._lastDelta<0&&(u=0),{noInertia:!0,needsRenderFrame:!l,zoomDelta:u,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let r=e.cG;if(this._prevEase){let i=this._prevEase,n=(e.a4.now()-i.start)/i.duration,a=i.easing(n+.01)-i.easing(n),s=.27/Math.sqrt(a*a+1e-4)*.01;r=e.cE(s,Math.sqrt(.0729-s*s),.25,1)}return this._prevEase={start:e.a4.now(),duration:i,easing:r},r}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class rJ{constructor(e,i){this._clickZoom=e,this._tapZoom=i}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class rK{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,i){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:r.getZoom()+(e.shiftKey?-1:1),around:r.unproject(i)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rQ{constructor(){this._tap=new rC({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,i,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=i[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,i,r))}touchmove(e,i,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;let n=i[0],a=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(e,i,r)}touchend(e,i,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,i,r)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class r0{constructor(e,i,r){this._el=e,this._mousePan=i,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class r1{constructor(e,i,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=i,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class r2{constructor(e,i,r,n){this._el=e,this._touchZoom=i,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}let r3=e=>e.zoom||e.drag||e.pitch||e.rotate;class r4 extends e.a8{}class r5{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,r){let n=e.v.sub([],r,i);this.radius=e.v.length(n[2]<0?e.v.div([],n,this.constants):[n[0],n[1],0])}projectRay(i){e.v.div(i,i,this.constants),e.v.normalize(i,i),e.v.mul(i,i,this.constants);let r=e.v.scale([],i,this.radius);if(r[2]>0){let i=e.v.scale([],[0,0,1],e.v.dot(r,[0,0,1])),n=e.v.scale([],e.v.normalize([],[r[0],r[1],0]),this.radius),a=e.v.add([],r,e.v.scale([],e.v.sub([],e.v.add([],n,i),r),2));r[0]=a[0],r[1]=a[1]}return r}}function r6(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class r8{constructor(i,r){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rb(i),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new r5,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.aR(["handleEvent","handleWindowEvent"],this);let n=this._el;for(let[e,i,r]of(this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]],this._listeners)){let n=e===document?this.handleWindowEvent:this.handleEvent;e.addEventListener(i,n,r)}}destroy(){for(let[e,i,r]of this._listeners){let n=e===document?this.handleWindowEvent:this.handleEvent;e.removeEventListener(i,n,r)}}_addDefaultHandlers(e){let i=this._map,r=i.getCanvasContainer();this._add("mapEvent",new rk(i,e));let n=i.boxZoom=new rE(i,e);this._add("boxZoom",n);let a=new rI,s=new rK;i.doubleClickZoom=new rJ(s,a),this._add("tapZoom",a),this._add("clickZoom",s);let o=new rQ;this._add("tapDragZoom",o);let l=i.touchPitch=new rG(i);this._add("touchPitch",l);let u=new rY(e),h=new rF(e);i.dragRotate=new r1(e,u,h),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",h,["mouseRotate"]);let c=new rR(e),d=new rj(i,e);i.dragPan=new r0(r,c,d),this._add("mousePan",c),this._add("touchPan",d,["touchZoom","touchRotate"]);let f=new r$,p=new rV;i.touchZoomRotate=new r2(r,p,f,o),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new rD(i));let m=i.scrollZoom=new rX(i,this);this._add("scrollZoom",m,["mousePan"]);let _=i.keyboard=new rq;for(let r of(this._add("keyboard",_),["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"]))e.interactive&&e[r]&&i[r].enable(e[r])}_add(e,i,r){this._handlers.push({handlerName:e,handler:i,allowed:r}),this._handlersById[e]=i}stop(e){if(!this._updatingCamera){for(let{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[],this._originalZoom=void 0}}isActive(){for(let{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!r3(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,i,r){for(let n in e)if(n!==r&&(!i||0>i.indexOf(n)))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){let i=[];for(let r of e)this._el.contains(r.target)&&i.push(r);return i}handleEvent(e,i){this._updatingCamera=!0;let r="renderFrame"===e.type,n=r?void 0:e,a={needsRenderFrame:!1},s={},o={},l=e.touches?this._getMapTouches(e.touches):void 0,u=l?_(this._el,l):r?void 0:m(this._el,e);for(let{handlerName:r,handler:h,allowed:c}of this._handlers){let d;h.isEnabled()&&(this._blockedByActive(o,c,r)?h.reset():h[i||e.type]&&(d=h[i||e.type](e,u,l),this.mergeHandlerResult(a,s,d,r,n),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||h.isActive())&&(o[r]=h))}let h={};for(let e in this._previousActiveHandlers)o[e]||(h[e]=n);this._previousActiveHandlers=o,(Object.keys(h).length||r6(a))&&(this._changes.push([a,s,h]),this._triggerRenderFrame()),(Object.keys(o).length||r6(a))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:c}=a;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))}mergeHandlerResult(i,r,n,a,s){if(!n)return;e.ak(i,n);let o={handlerName:a,originalEvent:n.originalEvent||s};void 0!==n.zoomDelta&&(r.zoom=o),void 0!==n.panDelta&&(r.drag=o),void 0!==n.pitchDelta&&(r.pitch=o),void 0!==n.bearingDelta&&(r.rotate=o)}_applyChanges(){let i={},r={},n={};for(let[a,s,o]of this._changes)a.panDelta&&(i.panDelta=(i.panDelta||new e.P(0,0))._add(a.panDelta)),a.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(i.around=a.around),void 0!==a.aroundCoord&&(i.aroundCoord=a.aroundCoord),void 0!==a.pinchAround&&(i.pinchAround=a.pinchAround),a.noInertia&&(i.noInertia=a.noInertia),e.ak(r,s),e.ak(n,o);this._updateMapTransform(i,r,n),this._changes=[]}_updateMapTransform(i,r,n){var a;let s=this._map,o=s.transform,l=e=>[e.x,e.y,e.z];if((e=>{let i=this._eventsInProgress.drag;return i&&!this._handlersById[i.handlerName].isActive()})()&&!r6(i)){let e=o.zoom;o.cameraElevationReference="sea",null!=this._originalZoom&&o._orthographicProjectionAtLowPitch&&"globe"!==o.projection.name&&0===o.pitch?(o.cameraElevationReference="ground",o.zoom=this._originalZoom):(o.recenterOnTerrain(),o.cameraElevationReference="ground"),e!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&s._stop(!0),!r6(i))return void this._fireEvents(r,n,!0);let{panDelta:u,zoomDelta:h,bearingDelta:c,pitchDelta:d,around:f,aroundCoord:p,pinchAround:m}=i;o._isCameraConstrained&&(h>0&&(h=0),o._isCameraConstrained=!1),void 0!==m&&(f=m),(h||r[a="drag"]&&!this._eventsInProgress[a])&&f&&(this._dragOrigin=l(o.pointCoordinate3D(f)),this._originalZoom=o.zoom,this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",s._stop(!0),f=f||s.transform.centerPoint,c&&(o.bearing+=c),d&&(o.pitch+=d),o._updateCameraState();let _=[0,0,0];if(u){if("mercator"===o.projection.name){let e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f).dir),i=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f.sub(u)).dir);_[0]=i[0]-e[0],_[1]=i[1]-e[1]}else{let i=o.pointCoordinate(f);if("globe"===o.projection.name){u=u.rotate(-o.angle);let r=o._pixelsPerMercatorPixel/o.worldSize;_[0]=-u.x*e.cH(e.l(i.y))*r,_[1]=-u.y*e.cH(o.center.lat)*r}else{let e=o.pointCoordinate(f.sub(u));i&&e&&(_[0]=e.x-i.x,_[1]=e.y-i.y)}}}let g=o.zoom,y=[0,0,0];if(h){let i=l(p||o.pointCoordinate3D(f)),r={dir:e.v.normalize([],e.v.sub([],i,o._camera.position))};if(r.dir[2]<0){let n=o.zoomDeltaToMovement(i,h);e.v.scale(y,r.dir,n)}}let v=e.v.add(_,_,y);o._translateCameraConstrained(v),h&&Math.abs(o.zoom-g)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(r,n,!0)}_fireEvents(i,r,n){let a;let s=r3(this._eventsInProgress),o=r3(i),l={};for(let e in i){let{originalEvent:r}=i[e];this._eventsInProgress[e]||(l[`${e}start`]=r),this._eventsInProgress[e]=i[e]}for(let e in!s&&o&&this._fireEvent("movestart",o.originalEvent),l)this._fireEvent(e,l[e]);for(let e in o&&this._fireEvent("move",o.originalEvent),i){let{originalEvent:r}=i[e];this._fireEvent(e,r)}let u={};for(let e in this._eventsInProgress){let{handlerName:i,originalEvent:n}=this._eventsInProgress[e];this._handlersById[i].isActive()||(delete this._eventsInProgress[e],a=r[i]||n,u[`${e}end`]=a)}for(let e in u)this._fireEvent(e,u[e]);let h=r3(this._eventsInProgress);if(n&&(s||o)&&!h){var c,d;this._updatingCamera=!0;let i=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions);i?(0!==(c=i.bearing||this._map.getBearing())&&-this._bearingSnap<c&&c<this._bearingSnap&&(i.bearing=0),this._map.easeTo(i,{originalEvent:a})):(this._map.fire(new e.a8("moveend",{originalEvent:a})),0!==(d=this._map.getBearing())&&-this._bearingSnap<d&&d<this._bearingSnap&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,r){this._map.fire(new e.a8(i,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{this._frameId=void 0,this.handleEvent(new r4("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}let r7="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class r9 extends e.a6{constructor(i,r){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=r.bearingSnap,this._respectPrefersReducedMotion=!1!==r.respectPrefersReducedMotion,e.aR(["_renderFrameCallback"],this)}getCenter(){return new e.L(this.transform.center.lng,this.transform.center.lat)}setCenter(e,i){return this.jumpTo({center:e},i)}panBy(i,r,n){return i=e.P.convert(i).mult(-1),this.panTo(this.transform.center,e.ak({offset:i},r),n)}panTo(i,r,n){return this.easeTo(e.ak({center:i},r),n)}getZoom(){return this.transform.zoom}setZoom(e,i){return this.jumpTo({zoom:e},i),this}zoomTo(i,r,n){return this.easeTo(e.ak({zoom:i},r),n)}zoomIn(e,i){return this.zoomTo(this.getZoom()+1,e,i),this}zoomOut(e,i){return this.zoomTo(this.getZoom()-1,e,i),this}getBearing(){return this.transform.bearing}setBearing(e,i){return this.jumpTo({bearing:e},i),this}getPadding(){return this.transform.padding}setPadding(e,i){return this.jumpTo({padding:e},i),this}rotateTo(i,r,n){return this.easeTo(e.ak({bearing:i},r),n)}resetNorth(i,r){return this.rotateTo(0,e.ak({duration:1e3},i),r),this}resetNorthPitch(i,r){return this.easeTo(e.ak({bearing:0,pitch:0,duration:1e3},i),r),this}snapToNorth(e,i){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,i):this}getPitch(){return this.transform.pitch}setPitch(e,i){return this.jumpTo({pitch:e},i),this}cameraForBounds(i,r){i=e.D.convert(i);let n=r&&r.bearing||0,a=r&&r.pitch||0,s=i.getNorthWest(),o=i.getSouthEast();return this._cameraForBounds(this.transform,s,o,n,a,r)}_extendCameraOptions(i){let r={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=e.ak({padding:r,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){let e=i.padding;i.padding={top:e,bottom:e,right:e,left:e}}return i.padding=e.ak(r,i.padding),i}_minimumAABBFrustumDistance(e,i){let r=i.max[0]-i.min[0],n=i.max[1]-i.min[1];return r/n>e.aspect?r/(2*Math.tan(.5*e.fovX)*e.aspect):n/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(i,r,n,a,s,o){let l=i.clone(),u=this._extendCameraOptions(o);l.bearing=a,l.pitch=s;let h=e.L.convert(r),c=e.L.convert(n),d=.5*(h.lat+c.lat),f=.5*(h.lng+c.lng),p=e.cI(d,f),m=e.v.normalize([],p),_=e.v.normalize([],e.v.cross([],m,[0,1,0])),g=e.v.cross([],_,m),y=[_[0],_[1],_[2],0,g[0],g[1],g[2],0,m[0],m[1],m[2],0,0,0,0,1],v=[p,e.cI(h.lat,h.lng),e.cI(c.lat,h.lng),e.cI(c.lat,c.lng),e.cI(h.lat,c.lng),e.cI(d,h.lng),e.cI(d,c.lng),e.cI(h.lat,f),e.cI(c.lat,f)],x=e.c3.fromPoints(v.map(i=>[e.v.dot(_,i),e.v.dot(g,i),e.v.dot(m,i)])),b=e.v.transformMat4([],x.center,y);0===e.v.squaredLength(b)&&e.v.set(b,0,0,1),e.v.normalize(b,b),e.v.scale(b,b,e.aC),l.center=e.cJ(b);let w=l.getWorldToCameraMatrix(),M=e.m.invert(new Float64Array(16),w);x=e.c3.applyTransform(x,e.m.multiply([],w,y)),e.v.transformMat4(b,b,w);let T=.5*(x.max[2]-x.min[2]),L=this._minimumAABBFrustumDistance(l,x),S=e.v.scale([],[0,0,1],T),k=e.v.add(S,b,S),D=L+(0===l.pitch?0:e.v.distance(b,k)),E=l.globeCenterInViewSpace,A=e.v.sub([],b,[E[0],E[1],E[2]]);e.v.normalize(A,A),e.v.scale(A,A,D);let P=e.v.add([],b,A);e.v.transformMat4(P,P,M);let C=e.cL/e.aC,I=e.v.length(P),O=e.b(Math.max(I*C-e.cL,Number.EPSILON),0),z=Math.min(l.zoomFromMercatorZAdjusted(O),u.maxZoom);return z>.5*(e.Z+e.G)?(l.setProjection({name:"mercator"}),l.zoom=z,this._cameraForBounds(l,r,n,a,s,o)):{center:l.center,zoom:z,bearing:a,pitch:s}}queryTerrainElevation(i,r){let n=this.transform.elevation;return n?(r=e.ak({},{exaggerated:!0},r),n.getAtPoint(e.M.fromLngLat(i),null,r.exaggerated)):null}_cameraForBounds(i,r,n,a,s,o){if("globe"===i.projection.name)return this._cameraForBoundsOnGlobe(i,r,n,a,s,o);let l=i.clone(),u=this._extendCameraOptions(o),h=l.padding;l.bearing=a,l.pitch=s;let c=e.L.convert(r),d=e.L.convert(n),f=new e.L(c.lng,d.lat),p=new e.L(d.lng,c.lat),m=l.project(c),_=l.project(d),g=this.queryTerrainElevation(c),y=this.queryTerrainElevation(d),v=this.queryTerrainElevation(f),x=this.queryTerrainElevation(p),b=[[m.x,m.y,Math.min(g||0,y||0,v||0,x||0)],[_.x,_.y,Math.max(g||0,y||0,v||0,x||0)]],w=e.c3.fromPoints(b),M=l.getWorldToCameraMatrix(),T=e.m.invert(new Float64Array(16),M);w=e.c3.applyTransform(w,M);let L=e.v.sub([],w.max,w.min),S=h.left||0,k=h.right||0,D=h.bottom||0,E=h.top||0,{left:A,right:P,top:C,bottom:I}=u.padding,O=.5*(S+k),z=.5*(E+D),R=Math.min(l.scaleZoom(l.scale*Math.min((l.width-(S+k+A+P))/L[0],(l.height-(D+E+I+C))/L[1])),u.maxZoom),Y=l.scale/l.zoomScale(R);w=new e.c3([w.min[0]-(A+O)*Y,w.min[1]-(I+z)*Y,w.min[2]],[w.max[0]+(P+O)*Y,w.max[1]+(C+z)*Y,w.max[2]]);let F=.5*L[2],j=this._minimumAABBFrustumDistance(l,w),B=[0,0,1,0];e.e.transformMat4(B,B,M),e.e.normalize(B,B);let N=e.v.scale([],B,j+F),H=e.v.add([],w.center,N),V=("number"==typeof u.offset.x&&"number"==typeof u.offset.y?new e.P(u.offset.x,u.offset.y):e.P.convert(u.offset)).rotate(-e.d(a));w.center[0]-=V.x*Y,w.center[1]+=V.y*Y,e.v.transformMat4(w.center,w.center,T),e.v.transformMat4(H,H,T);let U=[w.center[0],w.center[1],H[2]*l.pixelsPerMeter];e.v.scale(U,U,1/l.worldSize);let $=e.cK(U[0]),W=e.l(U[1]),G=Math.min(l._zoomFromMercatorZ(U[2]),u.maxZoom),q=new e.L($,W);return l.mercatorFromTransition&&G<.5*(e.Z+e.G)?(l.setProjection({name:"globe"}),l.zoom=G,this._cameraForBounds(l,r,n,a,s,o)):{center:q,zoom:G,bearing:a,pitch:s}}fitBounds(e,i,r){let n=this.cameraForBounds(e,i);return this._fitInternal(n,i,r)}fitScreenCoordinates(i,r,n,a,s){let o=e.P.convert(i),l=e.P.convert(r),u=new e.P(Math.min(o.x,l.x),Math.min(o.y,l.y)),h=new e.P(Math.max(o.x,l.x),Math.max(o.y,l.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,l))return this;let c=this.transform.pointLocation3D(u),d=this.transform.pointLocation3D(h),f=this.transform.pointLocation3D(new e.P(u.x,h.y)),p=this.transform.pointLocation3D(new e.P(h.x,u.y)),m=[Math.min(c.lng,d.lng,f.lng,p.lng),Math.min(c.lat,d.lat,f.lat,p.lat)],_=[Math.max(c.lng,d.lng,f.lng,p.lng),Math.max(c.lat,d.lat,f.lat,p.lat)],g=a&&a.pitch?a.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,m,_,n,g,a);return this._fitInternal(y,a,s)}_fitInternal(i,r,n){return i?(delete(r=e.ak(i,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(i,r){this.stop();let n=i.preloadOnly?this.transform.clone():this.transform,a=!1,s=!1,o=!1;return"zoom"in i&&n.zoom!==+i.zoom&&(a=!0,n.zoom=+i.zoom),void 0!==i.center&&(n.center=e.L.convert(i.center)),"bearing"in i&&n.bearing!==+i.bearing&&(s=!0,n.bearing=+i.bearing),"pitch"in i&&n.pitch!==+i.pitch&&(o=!0,n.pitch=+i.pitch),null==i.padding||n.isPaddingEqual(i.padding)||(n.padding=i.padding),i.preloadOnly?(this._preloadTiles(n),this):(this.fire(new e.a8("movestart",r)).fire(new e.a8("move",r)),a&&this.fire(new e.a8("zoomstart",r)).fire(new e.a8("zoom",r)).fire(new e.a8("zoomend",r)),s&&this.fire(new e.a8("rotatestart",r)).fire(new e.a8("rotate",r)).fire(new e.a8("rotateend",r)),o&&this.fire(new e.a8("pitchstart",r)).fire(new e.a8("pitch",r)).fire(new e.a8("pitchend",r)),this.fire(new e.a8("moveend",r)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.X(r7),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,r){let n=this.transform;if(!n.projection.supportsFreeCamera)return e.X(r7),this;this.stop();let a=n.zoom,s=n.pitch,o=n.bearing;n.setFreeCameraOptions(i);let l=a!==n.zoom,u=s!==n.pitch,h=o!==n.bearing;return this.fire(new e.a8("movestart",r)).fire(new e.a8("move",r)),l&&this.fire(new e.a8("zoomstart",r)).fire(new e.a8("zoom",r)).fire(new e.a8("zoomend",r)),h&&this.fire(new e.a8("rotatestart",r)).fire(new e.a8("rotate",r)).fire(new e.a8("rotateend",r)),u&&this.fire(new e.a8("pitchstart",r)).fire(new e.a8("pitch",r)).fire(new e.a8("pitchend",r)),this.fire(new e.a8("moveend",r)),this}easeTo(i,r){let n,a,s,o,l;this._stop(!1,i.easeId),(!1===(i=e.ak({offset:[0,0],duration:500,easing:e.cG},i)).animate||this._prefersReducedMotion(i))&&(i.duration=0);let u=this.transform,h=this.getZoom(),c=this.getBearing(),d=this.getPitch(),f=this.getPadding(),p="zoom"in i?+i.zoom:h,m="bearing"in i?this._normalizeBearing(i.bearing,c):c,_="pitch"in i?+i.pitch:d,g="padding"in i?i.padding:u.padding,y=e.P.convert(i.offset);if("globe"===u.projection.name){let r=e.M.fromLngLat(u.center),o=y.rotate(-u.angle);r.x+=o.x/u.worldSize,r.y+=o.y/u.worldSize;let l=r.toLngLat(),h=e.L.convert(i.center||l);this._normalizeCenter(h),n=u.centerPoint.add(o),a=new e.P(r.x,r.y).mult(u.worldSize),s=new e.P(e.E(h.lng),e.H(h.lat)).mult(u.worldSize).sub(a)}else{n=u.centerPoint.add(y);let r=u.pointLocation(n),o=e.L.convert(i.center||r);this._normalizeCenter(o),a=u.project(r),s=u.project(o).sub(a)}let v=u.zoomScale(p-h);i.around&&(o=e.L.convert(i.around),l=u.locationPoint(o));let x=this._zooming||p!==h,b=this._rotating||c!==m,w=this._pitching||_!==d,M=!u.isPaddingEqual(g),T=u=>T=>{if(x&&(u.zoom=e.n(h,p,T)),b&&(u.bearing=e.n(c,m,T)),w&&(u.pitch=e.n(d,_,T)),M&&(u.interpolatePadding(f,g,T),n=u.centerPoint.add(y)),o)u.setLocationAtPoint(o,l);else{let e=u.zoomScale(u.zoom-h),i=Math.pow(p>h?Math.min(2,v):Math.max(.5,v),1-T),r=u.unproject(a.add(s.mult(T*i)).mult(e));u.setLocationAtPoint(u.renderWorldCopies?r.wrap():r,n)}return i.preloadOnly||this._fireMoveEvents(r),u};if(i.preloadOnly){let e=this._emulate(T,i.duration,u);return this._preloadTiles(e),this}let L={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=x,this._rotating=b,this._pitching=w,this._easeId=i.easeId,this._prepareEase(r,i.noMoveStart,L),this._ease(T(u),e=>{"sea"===u.cameraElevationReference&&u.recenterOnTerrain(),this._afterEase(r,e)},i),this}_prepareEase(i,r,n={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&0===this.transform.pitch&&"globe"!==this.transform.projection.name&&(this.transform.cameraElevationReference="ground"),r||n.moving||this.fire(new e.a8("movestart",i)),this._zooming&&!n.zooming&&this.fire(new e.a8("zoomstart",i)),this._rotating&&!n.rotating&&this.fire(new e.a8("rotatestart",i)),this._pitching&&!n.pitching&&this.fire(new e.a8("pitchstart",i))}_fireMoveEvents(i){this.fire(new e.a8("move",i)),this._zooming&&this.fire(new e.a8("zoom",i)),this._rotating&&this.fire(new e.a8("rotate",i)),this._pitching&&this.fire(new e.a8("pitch",i))}_afterEase(i,r){if(this._easeId&&r&&this._easeId===r)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";let n=this._zooming,a=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new e.a8("zoomend",i)),a&&this.fire(new e.a8("rotateend",i)),s&&this.fire(new e.a8("pitchend",i)),this.fire(new e.a8("moveend",i))}flyTo(i,r){if(this._prefersReducedMotion(i)){let n=e.p(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),i=e.ak({offset:[0,0],speed:1.2,curve:1.42,easing:e.cG},i);let n=this.transform,a=this.getZoom(),s=this.getBearing(),o=this.getPitch(),l="zoom"in i?e.c(+i.zoom,n.minZoom,n.maxZoom):a,u="bearing"in i?this._normalizeBearing(i.bearing,s):s,h="pitch"in i?+i.pitch:o,c=n.zoomScale(l-a),d=e.P.convert(i.offset),f=n.centerPoint.add(d),p=n.pointLocation(f),m=i.center;if(m&&i.padding){let e=this._cameraForBounds(this.transform,m,m,u,h,i);e&&(m=e.center)}m=e.L.convert(m||p),this._normalizeCenter(m);let _=n.project(p),g=n.project(m).sub(_),y=i.curve,v=Math.max(n.width,n.height),x=v/c,b=g.mag();if("minZoom"in i){let r=e.c(Math.min(i.minZoom,a,l),n.minZoom,n.maxZoom);y=Math.sqrt(v/n.zoomScale(r-a)/b*2)}let w=y*y;function M(e){let i=(x*x-v*v+(e?-1:1)*w*w*b*b)/(2*(e?x:v)*w*b);return Math.log(Math.sqrt(i*i+1)-i)}function T(e){return(Math.exp(e)-Math.exp(-e))/2}function L(e){return(Math.exp(e)+Math.exp(-e))/2}let S=M(0),k=function(e){return L(S)/L(S+y*e)},D=function(e){var i;return(L(S)*(T(i=S+y*e)/L(i))-T(S))/w*v/b},E=(M(1)-S)/y;if(1e-6>Math.abs(b)||!isFinite(E)){if(1e-6>Math.abs(v-x))return this.easeTo(i,r);let e=x<v?-1:1;E=Math.abs(Math.log(x/v))/y,D=function(){return 0},k=function(i){return Math.exp(e*y*i)}}i.duration="duration"in i?+i.duration:1e3*E/("screenSpeed"in i?+i.screenSpeed/y:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);let A=s!==u,P=h!==o,C=n=>c=>{let d=c*E,p=1/k(d);n.zoom=1===c?l:a+n.scaleZoom(p),A&&(n.bearing=e.n(s,u,c)),P&&(n.pitch=e.n(o,h,c));let y=1===c?m:n.unproject(_.add(g.mult(D(d))).mult(p));return n.setLocationAtPoint(n.renderWorldCopies?y.wrap():y,f),n._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(r),n};if(i.preloadOnly){let e=this._emulate(C,i.duration,n);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=A,this._pitching=P,this._prepareEase(r,!1),this._ease(C(n),()=>this._afterEase(r),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,i){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){let e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,i)}if(!e){let e=this.handlers;e&&e.stop(!1)}return this}_ease(i,r,n){!1===n.animate||0===n.duration?(i(1),r()):(this._easeStart=e.a4.now(),this._easeOptions=n,this._onEaseFrame=i,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){let i=Math.min((e.a4.now()-this._easeStart)/this._easeOptions.duration,1),r=this._onEaseFrame;r&&r(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,r){let n=Math.abs((i=e.w(i,-180,180))-r);return Math.abs(i-360-r)<n&&(i-=360),Math.abs(i+360-r)<n&&(i+=360),i}_normalizeCenter(e){let i=this.transform;if(i.maxBounds||"globe"!==i.projection.name&&!i.renderWorldCopies)return;let r=e.lng-i.center.lng;e.lng+=r>180?-360:r<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&e.a4.prefersReducedMotion&&!(i&&i.essential)}_emulate(e,i,r){let n=Math.ceil(15*i/1e3),a=[],s=e(r.clone());for(let e=0;e<=n;e++){let i=s(e/n);a.push(i.clone())}return a}}class ne{constructor(i={}){this.options=i,e.aR(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){let i=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),i&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===i&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,i){let r=this._map._getUIString(`AttributionControl.${i}`);e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));let r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.cM.ACCESS_TOKEN}];if(i){let n=r.reduce((e,i,n)=>(i.value&&(e+=`${i.key}=${i.value}${n<r.length-1?"&":""}`),e),"?");i.href=`${e.cM.FEEDBACK_URL}/${n}#${rm(this._map,!0)}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(e){e&&("metadata"===e.sourceDataType||"visibility"===e.sourceDataType||"style"===e.dataType)&&(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){let e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}let i=this._map.style._mergedSourceCaches;for(let r in i){let n=i[r];if(n.used){let i=n.getSource();i.attribution&&0>e.indexOf(i.attribution)&&e.push(i.attribution)}}e.sort((e,i)=>e.length-i.length),e=e.filter((i,r)=>{for(let n=r+1;n<e.length;n++)if(e[n].indexOf(i)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));let r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class nt{constructor(){e.aR(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");let i=o("a","mapboxgl-ctrl-logo");return i.target="_blank",i.rel="noopener nofollow",i.href="https://www.mapbox.com/",i.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),i.setAttribute("rel","noopener nofollow"),this._container.appendChild(i),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;let e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(let i in e){let r=e[i].getSource();if(r.hasOwnProperty("mapbox_logo")&&!r.mapbox_logo)return!1}return!0}_updateCompact(){let e=this._container.children;if(e.length){let i=e[0];this._map.getCanvasContainer().offsetWidth<250?i.classList.add("mapboxgl-compact"):i.classList.remove("mapboxgl-compact")}}}class ni{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){let i=++this._id;return this._queue.push({callback:e,id:i,cancelled:!1}),i}remove(e){let i=this._currentlyRunning;for(let r of i?this._queue.concat(i):this._queue)if(r.id===e)return void(r.cancelled=!0)}run(e=0){let i=this._currentlyRunning=this._queue;for(let r of(this._queue=[],i))if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function nr(i,r,n){if(i=new e.L(i.lng,i.lat),r){let a=new e.L(i.lng-360,i.lat),s=new e.L(i.lng+360,i.lat),o=360*Math.ceil(Math.abs(i.lng-n.center.lng)/360),l=n.locationPoint(i).distSqr(r),u=r.x<0||r.y<0||r.x>n.width||r.y>n.height;n.locationPoint(a).distSqr(r)<l&&(u||Math.abs(a.lng-n.center.lng)<o)?i=a:n.locationPoint(s).distSqr(r)<l&&(u||Math.abs(s.lng-n.center.lng)<o)&&(i=s)}for(;Math.abs(i.lng-n.center.lng)>180;){let e=n.locationPoint(i);if(e.x>=0&&e.y>=0&&e.x<=n.width&&e.y<=n.height)break;i.lng>n.center.lng?i.lng-=360:i.lng+=360}return i}let nn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class na extends e.a6{constructor(i,r){if(super(),(i instanceof HTMLElement||r)&&(i=e.ak({element:i},r)),e.aR(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=e.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");let r=l("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},this._element),n=l("radialGradient",{id:"shadowGradient"},l("defs",{},r));l("stop",{offset:"10%","stop-opacity":.4},n),l("stop",{offset:"100%","stop-opacity":.05},n),l("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},r),l("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},r),l("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},r),l("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},r),this._offset=e.P.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()});let n=this._element.classList;for(let e in nn)n.remove(`mapboxgl-marker-anchor-${e}`);n.add(`mapboxgl-marker-anchor-${this._anchor}`);let a=i&&i.className?i.className.trim().split(/\s+/):[];n.add(...a),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){let e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=e.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){let i=Math.sqrt(91.125);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[i,-1*(24.6+i)],"bottom-right":[-i,-1*(24.6+i)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){let i=e.code,r=e.charCode||e.keyCode;"Space"!==i&&"Enter"!==i&&32!==r&&13!==r||this.togglePopup()}_onMapClick(e){let i=e.originalEvent.target,r=this._element;this._popup&&(i===r||r.contains(i))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){let e=this._popup;return e&&(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true"))),this}_behindTerrain(){let e=this._map,i=this._pos;if(!e||!i)return!1;let r=e.unproject(i),n=e.getFreeCameraOptions();if(!n.position)return!1;let a=n.position.toLngLat();return a.distanceTo(r)<.9*a.distanceTo(this._lngLat)}_evaluateOpacity(){let i;let r=this._map;if(!r)return;let n=this._pos;if(!n||n.x<0||n.x>r.transform.width||n.y<0||n.y>r.transform.height)return void this._clearFadeTimer();let a=r.unproject(n);r._showingGlobe()&&e.cN(r.transform,this._lngLat)?i=0:(i=1-r._queryFogOpacity(a),r.transform._terrainEnabled()&&r.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){let e=this._pos;if(!e||!this._map)return;let i=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${e.x}px,${e.y}px)
            ${nn[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${i.x}px,${i.y}px)
        `}_calculateXYTransform(){let i=this._pos,r=this._map,n=this.getPitchAlignment();if(!r||!i||"map"!==n)return"";if(!r._showingGlobe()){let e=r.getPitch();return e?`rotateX(${e}deg)`:""}let a=e.Y(e.cO(r.transform,this._lngLat)),s=i.sub(e.cP(r.transform)),o=Math.abs(s.x)+Math.abs(s.y);if(0===o)return"";let l=a/o;return`rotateX(${-s.y*l}deg) rotateY(${s.x*l}deg)`}_calculateZTransform(){let i=this._pos,r=this._map;if(!r||!i)return"";let n=0,a=this.getRotationAlignment();if("map"===a){if(r._showingGlobe()){let i=r.project(new e.L(this._lngLat.lng,this._lngLat.lat+.001)),a=r.project(new e.L(this._lngLat.lng,this._lngLat.lat-.001)).sub(i);n=e.Y(Math.atan2(a.y,a.x))-90}else n=-r.getBearing()}else if("horizon"===a){let a=e.an(4,6,r.getZoom()),s=e.cP(r.transform);s.y+=a*r.transform.height;let o=i.sub(s),l=e.Y(Math.atan2(o.y,o.x));n=(l>90?l-270:l+90)*(1-a)}return(n+=this._rotation)?`rotateZ(${n}deg)`:""}_update(e){cancelAnimationFrame(this._updateFrameId);let i=this._map;i&&(i.transform.renderWorldCopies&&(this._lngLat=nr(this._lngLat,this._pos,i.transform)),this._pos=i.project(this._lngLat),!0===e?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),i._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(i._showingGlobe()||i.getTerrain()||i.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=e.P.convert(i),this._update(),this}addClassName(e){return this._element.classList.add(e),this}removeClassName(e){return this._element.classList.remove(e),this}toggleClassName(e){return this._element.classList.toggle(e)}_onMove(i){let r=this._map;if(!r)return;let n=this._pointerdownPos,a=this._positionDelta;if(n&&a){if(!this._isDragging){let e=this._clickTolerance||r._clickTolerance;if(i.point.dist(n)<e)return;this._isDragging=!0}this._pos=i.point.sub(a),this._lngLat=r.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.a8("dragstart"))),this.fire(new e.a8("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;let i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.a8("dragend")),this._state="inactive"}_addDragHandler(e){let i=this._map,r=this._pos;i&&r&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(r),this._pointerdownPos=e.point,this._state="pending",i.on("mousemove",this._onMove),i.on("touchmove",this._onMove),i.once("mouseup",this._onUp),i.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;let i=this._map;return i&&(e?(i.on("mousedown",this._addDragHandler),i.on("touchstart",this._addDragHandler)):(i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}let ns={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"};function no(i=new e.P(0,0),r="bottom"){if("number"==typeof i){let n=Math.round(Math.sqrt(.5*Math.pow(i,2)));switch(r){case"top":return new e.P(0,i);case"top-left":return new e.P(n,n);case"top-right":return new e.P(-n,n);case"bottom":return new e.P(0,-i);case"bottom-left":return new e.P(n,-n);case"bottom-right":return new e.P(-n,-n);case"left":return new e.P(i,0);case"right":return new e.P(-i,0)}return new e.P(0,0)}return i instanceof e.P||Array.isArray(i)?e.P.convert(i):e.P.convert(i[r]||[0,0])}class nl{constructor(e){this.jumpTo(e)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;let r=e.ba((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-r)+this._end*r}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,i,r){this._start=this.getValue(i),this._end=e,this._startTime=i,this._endTime=i+r}}let nu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},nh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class nc{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.continuousRedraw=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}let nd={showCompass:!0,showZoom:!0,visualizePitch:!1};class nf{constructor(i,r,n=!1){this._clickTolerance=10,this.element=r,this.mouseRotate=new rY({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,n&&(this.mousePitch=new rF({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),e.aR(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}down(e,i){this.mouseRotate.mousedown(e,i),this.mousePitch&&this.mousePitch.mousedown(e,i),c()}move(e,i){let r=this.map,n=this.mouseRotate.mousemoveWindow(e,i),a=n&&n.bearingDelta;if(a&&r.setBearing(r.getBearing()+a),this.mousePitch){let n=this.mousePitch.mousemoveWindow(e,i),a=n&&n.pitchDelta;a&&r.setPitch(r.getPitch()+a)}}off(){let e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){d(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(e.ak({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),m(this.element,i)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,m(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=_(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=_(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let np={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},nm={maxWidth:100,unit:"metric"},n_={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:e.c$,supported:a,setRTLTextPlugin:e.d1,getRTLTextPluginStatus:e.d2,Map:class extends r9{constructor(i){let r=i;if(null!=(i=e.ak({},nh,i)).minZoom&&null!=i.maxZoom&&i.minZoom>i.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=i.minPitch&&null!=i.maxPitch&&i.minPitch>i.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=i.minPitch&&i.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=i.maxPitch&&i.maxPitch>85)throw Error("maxPitch must be less than or equal to 85");if(i.antialias&&e.cQ(window)&&(i.antialias=!1,e.X("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new eA(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),i),this._repaint=!1,this._interactive=i.interactive,this._minTileCacheSize=i.minTileCacheSize,this._maxTileCacheSize=i.maxTileCacheSize,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=i.preserveDrawingBuffer,this._antialias=i.antialias,this._trackResize=i.trackResize,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles,this._fadeDuration=i.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=i.crossSourceCollisions,this._collectResourceTiming=i.collectResourceTiming,this._language=this._parseLanguage(i.language),this._worldview=i.worldview,this._renderTaskQueue=new ni,this._domRenderTaskQueue=new ni,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.cR(),this._locale=e.ak({},nu,i.locale),this._clickTolerance=i.clickTolerance,this._cooperativeGestures=i.cooperativeGestures,this._performanceMetricsCollection=i.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new nl(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.cS(i.transformRequest,i.accessToken,i.testMode),this._silenceAuthErrors=!!i.testMode,this._contextCreateOptions=i.contextCreateOptions?{...i.contextCreateOptions}:{},"string"==typeof i.container){let e=document.getElementById(i.container);if(!e)throw Error(`Container '${i.container.toString()}' not found.`);this._container=e}else{if(!(i.container instanceof HTMLElement))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(this._container.childNodes.length>0&&e.X("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),i.maxBounds&&this.setMaxBounds(i.maxBounds),e.aR(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new nc,this._tp=i.devtools?new i4(this):new i4,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,e=>{this.repaint=e}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new r8(this,i),this._localFontFamily=i.localFontFamily,this._localIdeographFontFamily=i.localIdeographFontFamily,(i.style||!i.testMode)&&this.setStyle(i.style||e.cM.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),i.projection&&this.setProjection(i.projection),i.hash&&(this._hash=new rp("string"==typeof i.hash&&i.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){null==r.center&&null==r.zoom||(this.transform._unmodified=!1),this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch});let n=i.bounds;n&&(this.resize(),this.fitBounds(n,e.ak({},i.fitBoundsOptions,{duration:0})))}this.resize(),i.attributionControl&&this.addControl(new ne({customAttribution:i.customAttribution})),this._logoControl=new nt,this.addControl(this._logoControl,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update("style"===i.dataType),this.fire(new e.a8(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new e.a8(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(i,r){if(void 0===r&&(r=i.getDefaultPosition?i.getDefaultPosition():"top-right"),!i||!i.onAdd)return this.fire(new e.a7(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let n=i.onAdd(this);this._controls.push(i);let a=this._controlPositions[r];return -1!==r.indexOf("bottom")?a.insertBefore(n,a.firstChild):a.appendChild(n),this}removeControl(i){if(!i||!i.onRemove)return this.fire(new e.a7(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(i);return r>-1&&this._controls.splice(r,1),i.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(i){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));let r=!this._moving;return r&&this.fire(new e.a8("movestart",i)).fire(new e.a8("move",i)),this.fire(new e.a8("resize",i)),r&&this.fire(new e.a8("moveend",i)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(i){return this.transform.setMaxBounds(e.D.convert(i)),this._update()}setMinZoom(i){if((i=null==i?-2:i)>=-2&&i<=this.transform.maxZoom)return this.transform.minZoom=i,this._update(),this.getZoom()<i?this.setZoom(i):this.fire(new e.a8("zoomstart")).fire(new e.a8("zoom")).fire(new e.a8("zoomend")),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(i){if((i=null==i?22:i)>=this.transform.minZoom)return this.transform.maxZoom=i,this._update(),this.getZoom()>i?this.setZoom(i):this.fire(new e.a8("zoomstart")).fire(new e.a8("zoom")).fire(new e.a8("zoomend")),this;throw Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(i){if((i=null==i?0:i)<0)throw Error("minPitch must be greater than or equal to 0");if(i>=0&&i<=this.transform.maxPitch)return this.transform.minPitch=i,this._update(),this.getPitch()<i?this.setPitch(i):this.fire(new e.a8("pitchstart")).fire(new e.a8("pitch")).fire(new e.a8("pitchend")),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(i){if((i=null==i?85:i)>85)throw Error("maxPitch must be less than or equal to 85");if(i>=this.transform.minPitch)return this.transform.maxPitch=i,this._update(),this.getPitch()>i?this.setPitch(i):this.fire(new e.a8("pitchstart")).fire(new e.a8("pitch")).fire(new e.a8("pitchend")),this;throw Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(e){return"auto"===e?navigator.language:Array.isArray(e)?0===e.length?void 0:e.map(e=>"auto"===e?navigator.language:e):e}setLanguage(e){let i=this._parseLanguage(e);if(!this.style||i===this._language)return this;for(let e of(this._language=i,this.style.reloadSources(),this._controls))e._setLanguage&&e._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview&&(this._worldview=e,this.style.reloadSources()),this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.projection)}_updateProjectionTransition(){let i;if("globe"!==this.getProjection().name)return;let r=this.transform,n=r.projection.name;"globe"===n&&r.zoom>=e.G?(r.setMercatorFromTransition(),i=!0):"mercator"===n&&r.zoom<e.G&&(r.setProjection({name:"globe"}),i=!0),i&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,i){return this._updateProjection(e||i||{name:"mercator"})}_updateProjection(i){let r;return r="globe"===i.name&&this.transform.zoom>=e.G?this.transform.setMercatorFromTransition():this.transform.setProjection(i),this.style.applyProjectionUpdate(),r&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(i){return this.transform.locationPoint3D(e.L.convert(i))}unproject(i){return this.transform.pointLocation3D(e.P.convert(i))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,i,r){if("mouseenter"===e||"mouseover"===e){let n=!1;return{layers:new Set(i),listener:r,delegates:{mousemove:a=>{let s=i.filter(e=>this.getLayer(e)),o=s.length?this.queryRenderedFeatures(a.point,{layers:s}):[];o.length?n||(n=!0,r.call(this,new rT(e,this,a.originalEvent,{features:o}))):n=!1},mouseout:()=>{n=!1}}}}if("mouseleave"===e||"mouseout"===e){let n=!1;return{layers:new Set(i),listener:r,delegates:{mousemove:a=>{let s=i.filter(e=>this.getLayer(e));(s.length?this.queryRenderedFeatures(a.point,{layers:s}):[]).length?n=!0:n&&(n=!1,r.call(this,new rT(e,this,a.originalEvent)))},mouseout:i=>{n&&(n=!1,r.call(this,new rT(e,this,i.originalEvent)))}}}}return{layers:new Set(i),listener:r,delegates:{[e]:e=>{let n=i.filter(e=>this.getLayer(e)),a=n.length?this.queryRenderedFeatures(e.point,{layers:n}):[];a.length&&(e.features=a,r.call(this,e),delete e.features)}}}}on(e,i,r){if(void 0===r)return super.on(e,i);if(Array.isArray(i)||(i=[i]),i){for(let e of i)if(!this._isValidId(e))return this}let n=this._createDelegatedListener(e,i,r);for(let i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n),n.delegates)this.on(i,n.delegates[i]);return this}once(e,i,r){if(void 0===r)return super.once(e,i);if(Array.isArray(i)||(i=[i]),i){for(let e of i)if(!this._isValidId(e))return this}let n=this._createDelegatedListener(e,i,r);for(let e in n.delegates)this.once(e,n.delegates[e]);return this}off(e,i,r){if(void 0===r)return super.off(e,i);for(let e of i=new Set(Array.isArray(i)?i:[i]))if(!this._isValidId(e))return this;let n=(e,i)=>{if(e.size!==i.size)return!1;for(let r of e)if(!i.has(r))return!1;return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&(e=>{for(let a=0;a<e.length;a++){let s=e[a];if(s.listener===r&&n(s.layers,i)){for(let e in s.delegates)this.off(e,s.delegates[e]);return e.splice(a,1),this}}})(a),this}queryRenderedFeatures(i,r){if(!this.style)return[];if(void 0!==r||void 0===i||i instanceof e.P||Array.isArray(i)||(r=i,i=void 0),i=i||[[0,0],[this.transform.width,this.transform.height]],(r=r||{}).layers&&Array.isArray(r.layers)){for(let e of r.layers)if(!this._isValidId(e))return[]}return this.style.queryRenderedFeatures(i,r,this.transform)}querySourceFeatures(e,i){return this._isValidId(e)?this.style.querySourceFeatures(e,i):[]}isPointOnSurface(i){let{name:r}=this.transform.projection;return"globe"!==r&&"mercator"!==r&&e.X(`${r} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(e.P.convert(i))}setStyle(i,r){return!1!==(r=e.ak({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&r.localFontFamily===this._localFontFamily&&this.style&&i?(this._diffStyle(i,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._localFontFamily=r.localFontFamily,this._updateStyle(i,r))}_getUIString(e){let i=this._locale[e];if(null==i)throw Error(`Missing UI string '${e}'`);return i}_updateStyle(e,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new rd(this,i||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new rd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(i,r){if("string"==typeof i){let n=this._requestManager.normalizeStyleURL(i),a=this._requestManager.transformRequest(n,e.a2.Style);e.a1(a,(i,n)=>{i?this.fire(new e.a7(i)):n&&this._updateDiff(n,r)})}else"object"==typeof i&&this._updateDiff(i,r)}_updateDiff(i,r){try{this.style.setState(i)&&this._update(!0)}catch(n){e.X(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(i,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.X("There is no style added to the map."),!1)}_isValidId(i){return null==i?(this.fire(new e.a7(Error("IDs can't be empty."))),!1):!e.cu(i)||(this.fire(new e.a7(Error(`IDs can't contain special symbols: "${i}".`))),!1)}addSource(e,i){return this._isValidId(e)?(this._lazyInitEmptyStyle(),this.style.addSource(e,i),this._update(!0)):this}isSourceLoaded(e){return!!this._isValidId(e)&&!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(e,i,r){this._lazyInitEmptyStyle(),this.style.addSourceType(e,i,r)}removeSource(e){return this._isValidId(e)?(this.style.removeSource(e),this._updateTerrain(),this._update(!0)):this}getSource(e){return this._isValidId(e)?this.style.getOwnSource(e):null}addImage(i,r,{pixelRatio:n=1,sdf:a=!1,stretchX:s,stretchY:o,content:l}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap){let{width:u,height:h,data:c}=e.a4.getImageData(r);this.style.addImage(i,{data:new e.a5({width:u,height:h},c),pixelRatio:n,stretchX:s,stretchY:o,content:l,sdf:a,version:0})}else if(void 0===r.width||void 0===r.height)this.fire(new e.a7(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{let{width:u,height:h}=r;this.style.addImage(i,{data:new e.a5({width:u,height:h},new Uint8Array(r.data)),pixelRatio:n,stretchX:s,stretchY:o,content:l,sdf:a,version:0,userImage:r}),r.onAdd&&r.onAdd(this,i)}}updateImage(i,r){this._lazyInitEmptyStyle();let n=this.style.getImage(i);if(!n)return void this.fire(new e.a7(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let a=r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap?e.a4.getImageData(r):r,{width:s,height:o}=a,l=a.data;if(void 0===s||void 0===o)return void this.fire(new e.a7(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(s!==n.data.width||o!==n.data.height)return void this.fire(new e.a7(Error(`The width and height of the updated image (${s}, ${o})
                must be that same as the previous version of the image
                (${n.data.width}, ${n.data.height})`)));let u=!(r instanceof HTMLImageElement||ImageBitmap&&r instanceof ImageBitmap);n.data.replace(l,u),this.style.updateImage(i,n)}hasImage(i){return i?!!this.style&&!!this.style.getImage(i):(this.fire(new e.a7(Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(i,r){e.a3(this._requestManager.transformRequest(i,e.a2.Image),(i,n)=>{r(i,n instanceof HTMLImageElement?e.a4.getImageData(n):n)})}listImages(){return this.style.listImages()}addModel(e,i){this._lazyInitEmptyStyle(),this.style.addModel(e,i)}hasModel(i){return i?this.style.hasModel(i):(this.fire(new e.a7(Error("Missing required model id"))),!1)}removeModel(e){this.style.removeModel(e)}listModels(){return this.style.listModels()}addLayer(e,i){return this._isValidId(e.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(e,i),this._update(!0)):this}moveLayer(e,i){return this._isValidId(e)?(this.style.moveLayer(e,i),this._update(!0)):this}removeLayer(e){return this._isValidId(e)?(this.style.removeLayer(e),this._update(!0)):this}getLayer(e){return this._isValidId(e)?this.style.getOwnLayer(e):null}setLayerZoomRange(e,i,r){return this._isValidId(e)?(this.style.setLayerZoomRange(e,i,r),this._update(!0)):this}setFilter(e,i,r={}){return this._isValidId(e)?(this.style.setFilter(e,i,r),this._update(!0)):this}getFilter(e){return this._isValidId(e)?this.style.getFilter(e):null}setPaintProperty(e,i,r,n={}){return this._isValidId(e)?(this.style.setPaintProperty(e,i,r,n),this._update(!0)):this}getPaintProperty(e,i){return this._isValidId(e)?this.style.getPaintProperty(e,i):null}setLayoutProperty(e,i,r,n={}){return this._isValidId(e)?(this.style.setLayoutProperty(e,i,r,n),this._update(!0)):this}getLayoutProperty(e,i){return this._isValidId(e)?this.style.getLayoutProperty(e,i):null}getConfigProperty(e,i){return this.style.getConfigProperty(e,i)}setConfigProperty(e,i,r){return this.style.setConfigProperty(e,i,r),this._update(!0)}setLights(e){if(this._lazyInitEmptyStyle(),e&&1===e.length&&"flat"===e[0].type){let i=e[0];i.properties?this.style.setFlatLight(i.properties,i.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(e),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){let e=this.style.getLights()||[];return 0===e.length&&e.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),e}setLight(e,i={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:e}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(e){return this.style.setCamera(e),this._triggerCameraUpdate(e)}_triggerCameraUpdate(e){return this._update(this.transform.setOrthographicProjectionAtLowPitch("orthographic"===e["camera-projection"]))}getCamera(){return this.style.camera}_queryFogOpacity(i){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.L.convert(i),this.transform):0}setFeatureState(e,i){return this._isValidId(e.source)?(this.style.setFeatureState(e,i),this._update()):this}removeFeatureState(e,i){return this._isValidId(e.source)?(this.style.removeFeatureState(e,i),this._update()):this}getFeatureState(e){return this._isValidId(e.source)?this.style.getFeatureState(e):null}_updateContainerDimensions(){if(!this._container)return;let e=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300,r,n,a,s=this._container;for(;s&&(!n||!a);){let e=window.getComputedStyle(s).transform;e&&"none"!==e&&((r=e.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==r[0]&&"1"!==r[0]&&(n=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(a=r[3])),s=s.parentElement}this._containerWidth=n?Math.abs(e/n):e,this._containerHeight=a?Math.abs(i/a):i}_detectMissingCSS(){"rgb(250, 128, 114)"!==window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.X("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){let e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();let i=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._canvas=o("canvas","mapboxgl-canvas",i),this._interactive&&(i.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);let r=this._controlContainer=o("div","mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{n[e]=o("div",`mapboxgl-ctrl-${e}`,r)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(i,r){let n=e.a4.devicePixelRatio||1;this._canvas.width=n*Math.ceil(i),this._canvas.height=n*Math.ceil(r),this._canvas.style.width=`${i}px`,this._canvas.style.height=`${r}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){let i=this._markers.indexOf(e);-1!==i&&this._markers.splice(i,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){let i=this._popups.indexOf(e);-1!==i&&this._popups.splice(i,1)}_setupPainter(){let i=e.ak({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl2",i);r?(e.cT(r,!0),this.painter=new i8(r,this._contextCreateOptions,this.transform,this._tp),this.on("data",e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)}),e.cU.testSupport(r)):this.fire(new e.a7(Error("Failed to initialize WebGL")))}_contextLost(i){i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.a8("webglcontextlost",{originalEvent:i}))}_contextRestored(i){this._setupPainter(),this.resize(),this._update(),this.fire(new e.a8("webglcontextrestored",{originalEvent:i}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint()),this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(i){let r;this.fire(new e.a8("renderstart"));let n=this.painter.context.extTimerQuery,a=e.a4.now(),s=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(r=s.createQuery(),s.beginQuery(n.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(i),this._domRenderTaskQueue.run(i),this._removed)return;this._updateProjectionTransition();let o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;let i=this.transform.zoom,r=this.transform.pitch,n=e.a4.now(),a=new e.al(i,{now:n,fadeDuration:o,pitch:r,transition:this.style.transition});this.style.update(a)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let l=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),l=this._updateAverageElevation(a),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):l=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.a8("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.a8("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){let i=e.a4.now()-a;s.endQuery(n.TIME_ELAPSED_EXT),setTimeout(()=>{let n=s.getQueryParameter(r,s.QUERY_RESULT)/1e6;s.deleteQuery(r),this.fire(new e.a8("gpu-timing-frame",{cpuTime:i,gpuTime:n}))},50)}if(this.listens("gpu-timing-layer")){let i=this.painter.collectGpuTimers();setTimeout(()=>{let r=this.painter.queryGpuTimers(i);this.fire(new e.a8("gpu-timing-layer",{layerTimes:r}))},50)}if(this.listens("gpu-timing-deferred-render")){let i=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{let r=this.painter.queryGpuTimeDeferredRender(i);this.fire(new e.a8("gpu-timing-deferred-render",{gpuTime:r}))},50)}let u=this._sourcesDirty||this._styleDirty||this._placementDirty||l;if(u||this._repaint)this.triggerRepaint();else{let i=!this.isMoving()&&this.loaded();if(i&&(l=this._updateAverageElevation(a,!0)),l)this.triggerRepaint();else if(this._triggerFrame(!1),i&&(this.fire(new e.a8("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){let i=this._calculateSpeedIndex();this.fire(new e.a8("speedindexcompleted",{speedIndex:i})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||u||(this._fullyLoaded=!0,this._performanceMetricsCollection&&e.cV(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(let i of this._markers)e&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(let i of this._popups)!e||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(e,i=!1){let r=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);let n=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(n||(i||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){let i=this.transform.averageElevation,a=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(a)?a=0:this._averageElevationLastSampledAt=e;let s=Math.abs(i-a);if(s>1){if(this._isInitialLoad||n)return this._averageElevation.jumpTo(a),r(a);this._averageElevation.easeTo(a,e,300)}else if(s>1e-4)return this._averageElevation.jumpTo(a),r(a)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}_authenticate(){e.cW(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,i=>{if(i&&(i.message===e.cX||401===i.status)){let i=this.painter.context.gl;e.cT(i,!1),this._logoControl instanceof nt&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.a7(Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),e.cY(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){let e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){let e=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());let r=this.painter.context.gl,n=r.createFramebuffer();function a(e){r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);let i=new Uint8Array(r.drawingBufferWidth*r.drawingBufferHeight*4);return r.readPixels(0,0,r.drawingBufferWidth,r.drawingBufferHeight,r.RGBA,r.UNSIGNED_BYTE,i),i}return r.bindFramebuffer(r.FRAMEBUFFER,n),this._canvasPixelComparison(a(e),i.canvasCopies.map(a),i.timeStamps)}_canvasPixelComparison(e,i,r){let n=r[1]-r[0],a=e.length/4;for(let s=0;s<i.length;s++){let o=i[s],l=0;for(let i=0;i<o.length;i+=4)o[i]===e[i]&&o[i+1]===e[i+1]&&o[i+2]===e[i+2]&&o[i+3]===e[i+3]&&(l+=1);n+=(r[s+2]-r[s+1])*(1-l/a)}return n}remove(){for(let e of(this._hash&&this._hash.remove(),this._controls))e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);let i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.cZ(this.painter.context.gl),this._removed=!0,this.fire(new e.a8("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(i){this._renderNextFrame=this._renderNextFrame||i,this.style&&!this._frame&&(this._frame=e.a4.frame(e=>{let i=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,i&&this._render(e)}))}_preloadTiles(i){let r=this.style?Object.values(this.style._sourceCaches):[];return e.c_(r,(e,r)=>e._preloadTiles(i,r),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(e){this._showLayers2DWireframe!==e&&(this._showLayers2DWireframe=e,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(e){this._showLayers3DWireframe!==e&&(this._showLayers3DWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(i,r){e.d0(i,r)}get version(){return e.c$}},NavigationControl:class{constructor(i){this.options=e.ak({},nd,i),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(e.aR(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",e=>{this._map&&this._map.zoomIn({},{originalEvent:e})}),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",e=>{this._map&&this._map.zoomOut({},{originalEvent:e})}),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.aR(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",e=>{let i=this._map;i&&(this.options.visualizePitch?i.resetNorthPitch({},{originalEvent:e}):i.resetNorth({},{originalEvent:e}))}),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){let e=this._map;if(!e)return;let i=e.getZoom(),r=i===e.getMaxZoom(),n=i===e.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){let e=this._map;if(!e)return;let i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nf(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){let e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,i){let r=o("button",e,this._container);return r.type="button",r.addEventListener("click",i),r}_setButtonTitle(e,i){if(!this._map)return;let r=this._map._getUIString(`NavigationControl.${i}`);e.setAttribute("aria-label",r),e.firstElementChild&&e.firstElementChild.setAttribute("title",r)}},GeolocateControl:class extends e.a6{constructor(i){super();let r=navigator.geolocation;this.options=e.ak({geolocation:r},np,i),e.aR(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=rf(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){let i=(i=!!this.options.geolocation)=>{this._supportsGeolocation=i,e(i)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(e=>i("denied"!==e.state)).catch(()=>i()):i()}_isOutOfMapMaxBounds(e){let i=this._map.getMaxBounds(),r=e.coords;return!!i&&(r.longitude<i.getWest()||r.longitude>i.getEast()||r.latitude<i.getSouth()||r.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(i){if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new e.a8("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(i),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(i),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new e.a8("geolocate",i)),this._finish()}}_updateCamera(i){let r=new e.L(i.coords.longitude,i.coords.latitude),n=i.coords.accuracy,a=this._map.getBearing(),s=e.ak({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(n),s,{geolocateSource:!0})}_updateMarker(i){if(i){let r=new e.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){let i=this._map.transform,r=e.b(1,i._center.lat)*i.worldSize,n=Math.ceil(2*this._accuracy*r);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(i){if(this._map){if(this.options.trackUserLocation){if(1===i.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===i.code&&this._noTimeout)return;this._setErrorState()}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new e.a8("error",i)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(i){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===i){e.X("Geolocation support is not available so the GeolocateControl will be disabled.");let i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{let e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new na({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new na({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i.originalEvent&&"resize"===i.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.a8("trackuserlocationend")))})}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.X("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.a8("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.a8("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.a8("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){let e=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};"undefined"!=typeof DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(i=>{"granted"===i&&e()}).catch(console.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ne,ScaleControl:class{constructor(i){this.options=e.ak({},nm,i),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.aR(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){let e=this.options.maxWidth||100,i=this._map,r=i._containerHeight/2,n=i._containerWidth/2-e/2,a=i.unproject([n,r]),s=i.unproject([n+e,r]),o=a.distanceTo(s);if("imperial"===this.options.unit){let i=3.2808*o;i>5280?this._setScale(e,i/5280,"mile"):this._setScale(e,i,"foot")}else"nautical"===this.options.unit?this._setScale(e,o/1852,"nautical-mile"):o>=1e3?this._setScale(e,o/1e3,"kilometer"):this._setScale(e,o,"meter")}_setScale(e,i,r){this._map._requestDomTask(()=>{let n=function(e){let i=Math.pow(10,`${Math.floor(e)}`.length-1),r=e/i;return i*(r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){let i=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*i)/i}(r))}(i),a=n/i;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==r?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:r}).format(n):`${n}&nbsp;${n_[r]}`,this._container.style.width=e*a+"px"})}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(i){this._fullscreen=!1,i&&i.container&&(i.container instanceof HTMLElement?this._container=i.container:e.X("Full screen control 'container' must be a DOM element.")),e.aR(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(i){return this._map=i,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.X("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){let e=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){let e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.a6{constructor(i){super(),this.options=e.ak(Object.create(ns),i),e.aR(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(i&&i.className?i.className.trim().split(/\s+/):[])}addTo(i){return this._map&&this.remove(),this._map=i,this.options.closeOnClick&&i.on("preclick",this._onClose),this.options.closeOnMove&&i.on("move",this._onClose),i.on("remove",this.remove),this._update(),i._addPopup(this),this._focusFirstElement(),this._trackPointer?(i.on("mousemove",this._onMouseEvent),i.on("mouseup",this._onMouseEvent),i._canvasContainer.classList.add("mapboxgl-track-pointer")):i.on("move",this._update),this.fire(new e.a8("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);let i=this._map;return i&&(i.off("move",this._update),i.off("move",this._onClose),i.off("preclick",this._onClose),i.off("click",this._onClose),i.off("remove",this.remove),i.off("mousemove",this._onMouseEvent),i.off("mouseup",this._onMouseEvent),i.off("drag",this._onMouseEvent),i._canvasContainer&&i._canvasContainer.classList.remove("mapboxgl-track-pointer"),i._removePopup(this),this._map=void 0),this.fire(new e.a8("close")),this}getLngLat(){return this._lngLat}setLngLat(i){this._lngLat=e.L.convert(i),this._pos=null,this._trackPointer=!1,this._update();let r=this._map;return r&&(r.on("move",this._update),r.off("mousemove",this._onMouseEvent),r._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();let e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){let i;let r=document.createDocumentFragment(),n=document.createElement("body");for(n.innerHTML=e;i=n.firstChild;)r.appendChild(i);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(e),this.options.closeButton){let e=this._closeButton=o("button","mapboxgl-popup-close-button",i);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let i;return this._classList.delete(e)?i=!1:(this._classList.add(e),i=!0),this._updateClassList(),i}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;let i=this._map,r=this._container,n=this._pos;if(!i||!r||!n)return"bottom";let a=r.offsetWidth,s=r.offsetHeight,o=n.x<a/2,l=n.x>i.transform.width-a/2;if(n.y+e<s)return o?"top-left":l?"top-right":"top";if(n.y>i.transform.height-s){if(o)return"bottom-left";if(l)return"bottom-right"}return o?"left":l?"right":"bottom"}_updateClassList(){let e=this._container;if(!e)return;let i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),e.className=i.join(" ")}_update(i){let r=this._map,n=this._content;if(!r||!this._lngLat&&!this._trackPointer||!n)return;let a=this._container;if(a||(a=this._container=o("div","mapboxgl-popup",r.getContainer()),this._tip=o("div","mapboxgl-popup-tip",a),a.appendChild(n)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nr(this._lngLat,this._pos,r.transform)),!this._trackPointer||i){let e=this._pos=this._trackPointer&&i?i:r.project(this._lngLat),n=no(this.options.offset),a=this._anchor=this._getAnchor(n.y),s=no(this.options.offset,a),o=e.add(s).round();r._requestDomTask(()=>{this._container&&a&&(this._container.style.transform=`${nn[a]} translate(${o.x}px,${o.y}px)`)})}if(!this._marker&&r._showingGlobe()){let i=e.cN(r.transform,this._lngLat)?0:1;this._setOpacity(i)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let e=this._container.querySelector("a[href], [tabindex]:not([tabindex='-1']), [contenteditable]:not([contenteditable='false']), button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled])");e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:na,Style:rd,LngLat:e.L,LngLatBounds:e.D,Point:e.P,MercatorCoordinate:e.M,FreeCameraOptions:ec,Evented:e.a6,config:e.cM,prewarm:e.d3,clearPrewarmedResources:e.d4,get accessToken(){return e.cM.ACCESS_TOKEN},set accessToken(t){e.cM.ACCESS_TOKEN=t},get baseApiUrl(){return e.cM.API_URL},set baseApiUrl(t){e.cM.API_URL=t},get workerCount(){return e.d5.workerCount},set workerCount(t){e.d5.workerCount=t},get maxParallelImageRequests(){return e.cM.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.cM.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(i){e.d6(i)},get workerUrl(){return e.d7.workerUrl},set workerUrl(t){e.d7.workerUrl=t},get workerClass(){return e.d7.workerClass},set workerClass(t){e.d7.workerClass=t},get workerParams(){return e.d7.workerParams},set workerParams(t){e.d7.workerParams=t},get dracoUrl(){return e.d8()},set dracoUrl(t){e.d9(t)},setNow:e.a4.setNow,restoreNow:e.a4.restoreNow}}),r}()},2786:function(e,i,r){!function(e){e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,i,r){return e<12?r?"vm":"VM":r?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(r(381))},4130:function(e,i,r){!function(e){"use strict";var i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},n=function(e){return function(n,a,s,o){var l=i(n),u=r[e][i(n)];return 2===l&&(u=u[a?0:1]),u.replace(/%d/i,n)}},a=["","","","","","","","","","","",""];e.defineLocale("ar-dz",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:n("s"),ss:n("s"),m:n("m"),mm:n("m"),h:n("h"),hh:n("h"),d:n("d"),dd:n("d"),M:n("M"),MM:n("M"),y:n("y"),yy:n("y")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:0,doy:4}})}(r(381))},6135:function(e,i,r){!function(e){e.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(r(381))},6440:function(e,i,r){!function(e){"use strict";var i={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},a=function(e){return function(i,a,s,o){var l=r(i),u=n[e][r(i)];return 2===l&&(u=u[a?0:1]),u.replace(/%d/i,i)}},s=["","","","","","","","","","","",""];e.defineLocale("ar-ly",{months:s,monthsShort:s,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:a("s"),ss:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})}(r(381))},7702:function(e,i,r){!function(e){e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(r(381))},315:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ar-ps",{months:" _________ _ _ ".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]}).split("").reverse().join("").replace(/[](?![\u062a\u0643])/g,function(e){return r[e]}).split("").reverse().join("").replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]}).replace(/,/g,"")},week:{dow:0,doy:6}})}(r(381))},6040:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]}).replace(/,/g,"")},week:{dow:0,doy:6}})}(r(381))},7100:function(e,i,r){!function(e){e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(r(381))},867:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},a={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},s=function(e){return function(i,r,s,o){var l=n(i),u=a[e][n(i)];return 2===l&&(u=u[r?0:1]),u.replace(/%d/i,i)}},o=["","","","","","","","","","","",""];e.defineLocale("ar",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:s("s"),ss:s("s"),m:s("m"),mm:s("m"),h:s("h"),hh:s("h"),d:s("d"),dd:s("d"),M:s("M"),MM:s("M"),y:s("y"),yy:s("y")},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})}(r(381))},1083:function(e,i,r){!function(e){"use strict";var i={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"bir ne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,i,r){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var r=e%10;return e+(i[r]||i[e%100-r]||i[e>=100?100:null])},week:{dow:1,doy:7}})}(r(381))},9808:function(e,i,r){!function(e){"use strict";function i(e,i,r){var n,a;return"m"===r?i?"":"":"h"===r?i?"":"":e+" "+(n=+e,a=({ss:i?"__":"__",mm:i?"__":"__",hh:i?"__":"__",dd:"__",MM:"__",yy:"__"})[r].split("_"),n%10==1&&n%100!=11?a[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?a[1]:a[2])}e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:i,mm:i,h:i,hh:i,d:"",dd:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,i,r){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,i){switch(i){case"M":case"d":case"DDD":case"w":case"W":return(e%10==2||e%10==3)&&e%100!=12&&e%100!=13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(r(381))},8338:function(e,i,r){!function(e){e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",w:"",ww:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var i=e%10,r=e%100;return 0===e?e+"-":0===r?e+"-":r>10&&r<20?e+"-":1===i?e+"-":2===i?e+"-":7===i||8===i?e+"-":e+"-"},week:{dow:1,doy:7}})}(r(381))},7438:function(e,i,r){!function(e){e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(r(381))},6225:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn-bd",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/||||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i||""===i?e:""===i?e>=3?e:e+12:""===i?e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<6?"":e<12?"":e<15?"":e<18?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},8905:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i&&e>=4||""===i&&e<5||""===i)?e+12:e},meridiem:function(e,i,r){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},1560:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShortRegex:/^(\d{1,2})/,monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i&&e>=4||""===i&&e<5||""===i)?e+12:e},meridiem:function(e,i,r){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},1278:function(e,i,r){!function(e){"use strict";function i(e,i,r){var n,a;return e+" "+(n=({mm:"munutenn",MM:"miz",dd:"devezh"})[r],2===e?void 0===(a={m:"v",b:"v",d:"z"})[n.charAt(0)]?n:a[n.charAt(0)]+n.substring(1):n)}var r=[/^gen/i,/^c[\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],n=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,a=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Chwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Chwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:a,fullWeekdaysParse:[/^sul/i,/^lun/i,/^meurzh/i,/^merc[\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],shortWeekdaysParse:[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],minWeekdaysParse:a,monthsRegex:n,monthsShortRegex:n,monthsStrictRegex:/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,monthsShortStrictRegex:/^(gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warchoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dech da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:i,h:"un eur",hh:"%d eur",d:"un devezh",dd:i,M:"ur miz",MM:i,y:"ur bloaz",yy:function(e){switch(function e(i){return i>9?e(i%10):i}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,i,r){return e<12?"a.m.":"g.m."}})}(r(381))},622:function(e,i,r){!function(e){"use strict";function i(e,i,r){var n=e+" ";switch(r){case"ss":return 1===e?n+="sekunda":2===e||3===e||4===e?n+="sekunde":n+="sekundi",n;case"mm":return 1===e?n+="minuta":2===e||3===e||4===e?n+="minute":n+="minuta",n;case"h":return"jedan sat";case"hh":return 1===e?n+="sat":2===e||3===e||4===e?n+="sata":n+="sati",n;case"dd":return 1===e?n+="dan":n+="dana",n;case"MM":return 1===e?n+="mjesec":2===e||3===e||4===e?n+="mjeseca":n+="mjeseci",n;case"yy":return 1===e?n+="godina":2===e||3===e||4===e?n+="godine":n+="godina",n}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:i,m:function(e,i,r,n){if("m"===r)return i?"jedna minuta":n?"jednu minutu":"jedne minute"},mm:i,h:i,hh:i,d:"dan",dd:i,M:"mjesec",MM:i,y:"godinu",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(r(381))},2468:function(e,i,r){!function(e){e.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,i){var r=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return("w"===i||"W"===i)&&(r="a"),e+r},week:{dow:1,doy:4}})}(r(381))},5822:function(e,i,r){!function(e){"use strict";var i=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],r=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function n(e){return e>1&&e<5&&1!=~~(e/10)}function a(e,i,r,a){var s=e+" ";switch(r){case"s":return i||a?"pr sekund":"pr sekundami";case"ss":if(i||a)return s+(n(e)?"sekundy":"sekund");return s+"sekundami";case"m":return i?"minuta":a?"minutu":"minutou";case"mm":if(i||a)return s+(n(e)?"minuty":"minut");return s+"minutami";case"h":return i?"hodina":a?"hodinu":"hodinou";case"hh":if(i||a)return s+(n(e)?"hodiny":"hodin");return s+"hodinami";case"d":return i||a?"den":"dnem";case"dd":if(i||a)return s+(n(e)?"dny":"dn");return s+"dny";case"M":return i||a?"msc":"mscem";case"MM":if(i||a)return s+(n(e)?"msce":"msc");return s+"msci";case"y":return i||a?"rok":"rokem";case"yy":if(i||a)return s+(n(e)?"roky":"let");return s+"lety"}}e.defineLocale("cs",{months:{standalone:"leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),format:"ledna_nora_bezna_dubna_kvtna_ervna_ervence_srpna_z_jna_listopadu_prosince".split("_"),isFormat:/DD?[o.]?(\[[^\[\]]*\]|\s)+MMMM/},monthsShort:"led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},877:function(e,i,r){!function(e){e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){var i=/$/i.exec(e)?"":/$/i.exec(e)?"":"";return e+i},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(r(381))},7373:function(e,i,r){!function(e){e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var i="";return e>20?i=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(i=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+i},week:{dow:1,doy:4}})}(r(381))},4780:function(e,i,r){!function(e){e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},217:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return i?a[r][0]:a[r][1]}e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,w:i,ww:"%d Wochen",M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},894:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return i?a[r][0]:a[r][1]}e.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,w:i,ww:"%d Wochen",M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},9740:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return i?a[r][0]:a[r][1]}e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:i,mm:"%d Minuten",h:i,hh:"%d Stunden",d:i,dd:i,w:i,ww:"%d Wochen",M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},5300:function(e,i,r){!function(e){"use strict";var i=["","","","","","","","","","","",""],r=["","","","","","",""];e.defineLocale("dv",{months:i,monthsShort:i,weekdays:r,weekdaysShort:r,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}})}(r(381))},837:function(e,i,r){!function(e){e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,i){return e?"string"==typeof i&&/D/.test(i.substring(0,i.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,i,r){return e>11?r?"":"":r?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){return 6===this.day()?"[ ] dddd [{}] LT":"[ ] dddd [{}] LT"},sameElse:"L"},calendar:function(e,i){var r,n=this._calendarEl[e],a=i&&i.hours();return r=n,("undefined"!=typeof Function&&r instanceof Function||"[object Function]"===Object.prototype.toString.call(r))&&(n=n.apply(i)),n.replace("{}",a%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},8348:function(e,i,r){!function(e){e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:0,doy:4}})}(r(381))},7925:function(e,i,r){!function(e){e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")}})}(r(381))},2243:function(e,i,r){!function(e){e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:1,doy:4}})}(r(381))},6436:function(e,i,r){!function(e){e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:1,doy:4}})}(r(381))},7207:function(e,i,r){!function(e){e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")}})}(r(381))},4175:function(e,i,r){!function(e){e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:0,doy:6}})}(r(381))},6319:function(e,i,r){!function(e){e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:1,doy:4}})}(r(381))},1662:function(e,i,r){!function(e){e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:1,doy:4}})}(r(381))},2915:function(e,i,r){!function(e){e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_ag_sept_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,i,r){return e>11?r?"p.t.m.":"P.T.M.":r?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(r(381))},2088:function(e,i,r){!function(e){"use strict";var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),r="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?r[e.month()]:i[e.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},6112:function(e,i,r){!function(e){"use strict";var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),r="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?r[e.month()]:i[e.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:4},invalidDate:"Fecha invlida"})}(r(381))},1146:function(e,i,r){!function(e){"use strict";var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),r="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?r[e.month()]:i[e.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(r(381))},5655:function(e,i,r){!function(e){"use strict";var i="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),r="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),n=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],a=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?r[e.month()]:i[e.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"})}(r(381))},5603:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={s:["mne sekundi","mni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return i?a[r][2]?a[r][2]:a[r][1]:n?a[r][0]:a[r][1]}e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:"%d peva",M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},7763:function(e,i,r){!function(e){e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(r(381))},6959:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,i,r){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,function(e){return r[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]}).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(r(381))},1897:function(e,i,r){!function(e){"use strict";var i="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),r=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",i[7],i[8],i[9]];function n(e,n,a,s){var o="";switch(a){case"s":return s?"muutaman sekunnin":"muutama sekunti";case"ss":o=s?"sekunnin":"sekuntia";break;case"m":return s?"minuutin":"minuutti";case"mm":o=s?"minuutin":"minuuttia";break;case"h":return s?"tunnin":"tunti";case"hh":o=s?"tunnin":"tuntia";break;case"d":return s?"pivn":"piv";case"dd":o=s?"pivn":"piv";break;case"M":return s?"kuukauden":"kuukausi";case"MM":o=s?"kuukauden":"kuukautta";break;case"y":return s?"vuoden":"vuosi";case"yy":o=s?"vuoden":"vuotta"}return(e<10?s?r[e]:i[e]:e)+" "+o}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},2549:function(e,i,r){!function(e){e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(r(381))},4694:function(e,i,r){!function(e){e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},3049:function(e,i,r){!function(e){e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,i){switch(i){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(r(381))},2330:function(e,i,r){!function(e){e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,i){switch(i){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(r(381))},4470:function(e,i,r){!function(e){"use strict";var i=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,r=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i];e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,monthsShortStrictRegex:/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,i){switch(i){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(r(381))},5044:function(e,i,r){!function(e){"use strict";var i="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),r="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?r[e.month()]:i[e.month()]:i},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(r(381))},9295:function(e,i,r){!function(e){e.defineLocale("ga",{months:["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Meitheamh","Iil","Lnasa","Men Fmhair","Deireadh Fmhair","Samhain","Nollaig"],monthsShort:["Ean","Feabh","Mrt","Aib","Beal","Meith","Iil","Ln","M.F.","D.F.","Samh","Noll"],monthsParseExact:!0,weekdays:["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Sathairn"],weekdaysShort:["Domh","Luan","Mirt","Cad","Dar","Aoine","Sath"],weekdaysMin:["Do","Lu","M","C","D","A","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d monna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(r(381))},2101:function(e,i,r){!function(e){e.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(r(381))},8794:function(e,i,r){!function(e){e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},7884:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={s:[" "," "],ss:[e+" ",e+" "],m:[" "," "],mm:[e+" ",e+" "],h:[" "," "],hh:[e+" ",e+" "],d:[" "," "],dd:[e+" ",e+" "],M:[" "," "],MM:[e+" ",e+" "],y:[" "," "],yy:[e+" ",e+" "]};return n?a[r][0]:a[r][1]}e.defineLocale("gom-deva",{months:{standalone:"___________".split("_"),format:"___________".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm []",LTS:"A h:mm:ss []",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm []",LLLL:"dddd, MMMM Do, YYYY, A h:mm []",llll:"ddd, D MMM YYYY, A h:mm []"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e,i){return"D"===i?e+"":e},week:{dow:0,doy:3},meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>12?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<12?"":e<16?"":e<20?"":""}})}(r(381))},3168:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return n?a[r][0]:a[r][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,i){return"D"===i?e+"er":e},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,i){return(12===e&&(e=0),"rati"===i)?e<4?e:e+12:"sokallim"===i?e:"donparam"===i?e>12?e:e+12:"sanje"===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(r(381))},5349:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>=10?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},4206:function(e,i,r){!function(e){e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,i,r){return e<5?" ":e<10?"":e<12?r?'"':" ":e<18?r?'"':" ":""}})}(r(381))},94:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},n=[/^/i,/^|/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^|/i,/^/i,/^|/i,/^|/i];e.defineLocale("hi",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},monthsParse:n,longMonthsParse:n,shortMonthsParse:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],monthsRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsShortRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsStrictRegex:/^(?||?|?|?|?|?|?|?|||?\.?||\.?||?||?)/i,monthsShortStrictRegex:/^(\.?|\.?|?|\.?|?|?|\.?|\.?|\.?|\.?|\.?|\.?)/i,calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>=10?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},316:function(e,i,r){!function(e){"use strict";function i(e,i,r){var n=e+" ";switch(r){case"ss":return 1===e?n+="sekunda":2===e||3===e||4===e?n+="sekunde":n+="sekundi",n;case"m":return i?"jedna minuta":"jedne minute";case"mm":return 1===e?n+="minuta":2===e||3===e||4===e?n+="minute":n+="minuta",n;case"h":return i?"jedan sat":"jednog sata";case"hh":return 1===e?n+="sat":2===e||3===e||4===e?n+="sata":n+="sati",n;case"dd":return 1===e?n+="dan":n+="dana",n;case"MM":return 1===e?n+="mjesec":2===e||3===e||4===e?n+="mjeseca":n+="mjeseci",n;case"yy":return 1===e?n+="godina":2===e||3===e||4===e?n+="godine":n+="godina",n}}e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prolu] [nedjelju] [u] LT";case 3:return"[prolu] [srijedu] [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:i,m:i,mm:i,h:i,hh:i,d:"dan",dd:i,M:"mjesec",MM:i,y:"godinu",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(r(381))},2138:function(e,i,r){!function(e){"use strict";var i="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function r(e,i,r,n){switch(r){case"s":return n||i?"nhny msodperc":"nhny msodperce";case"ss":return e+(n||i)?" msodperc":" msodperce";case"m":return"egy"+(n||i?" perc":" perce");case"mm":return e+(n||i?" perc":" perce");case"h":return"egy"+(n||i?" ra":" rja");case"hh":return e+(n||i?" ra":" rja");case"d":return"egy"+(n||i?" nap":" napja");case"dd":return e+(n||i?" nap":" napja");case"M":return"egy"+(n||i?" hnap":" hnapja");case"MM":return e+(n||i?" hnap":" hnapja");case"y":return"egy"+(n||i?" v":" ve");case"yy":return e+(n||i?" v":" ve")}return""}function n(e){return(e?"":"[mlt] ")+"["+i[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan._feb._mrc._pr._mj._jn._jl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,i,r){return e<12?!0===r?"de":"DE":!0===r?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return n.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return n.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},1423:function(e,i,r){!function(e){e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,i){switch(i){case"DDD":case"w":case"W":case"DDDo":if(1===e)return e+"-";return e+"-";default:return e}},week:{dow:1,doy:7}})}(r(381))},9218:function(e,i,r){!function(e){e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,i){return(12===e&&(e=0),"pagi"===i)?e:"siang"===i?e>=11?e:e+12:"sore"===i||"malam"===i?e+12:void 0},meridiem:function(e,i,r){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(r(381))},135:function(e,i,r){!function(e){"use strict";function i(e){if(e%100==11);else if(e%10==1)return!1;return!0}function r(e,r,n,a){var s=e+" ";switch(n){case"s":return r||a?"nokkrar sekndur":"nokkrum sekndum";case"ss":if(i(e))return s+(r||a?"sekndur":"sekndum");return s+"seknda";case"m":return r?"mnta":"mntu";case"mm":if(i(e))return s+(r||a?"mntur":"mntum");if(r)return s+"mnta";return s+"mntu";case"hh":if(i(e))return s+(r||a?"klukkustundir":"klukkustundum");return s+"klukkustund";case"d":if(r)return"dagur";return a?"dag":"degi";case"dd":if(i(e)){if(r)return s+"dagar";return s+(a?"daga":"dgum")}if(r)return s+"dagur";return s+(a?"dag":"degi");case"M":if(r)return"mnuur";return a?"mnu":"mnui";case"MM":if(i(e)){if(r)return s+"mnuir";return s+(a?"mnui":"mnuum")}if(r)return s+"mnuur";return s+(a?"mnu":"mnui");case"y":return r||a?"r":"ri";case"yy":if(i(e))return s+(r||a?"r":"rum");return s+(r||a?"r":"ri")}}e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:r,ss:r,m:r,mm:r,h:"klukkustund",hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},150:function(e,i,r){!function(e){e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},626:function(e,i,r){!function(e){e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},9183:function(e,i,r){!function(e){e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(e,i){return""===i[1]?1:parseInt(i[1]||e,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e,i){switch(i){case"y":return 1===e?"":e+"";case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(r(381))},4286:function(e,i,r){!function(e){e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,i){return(12===e&&(e=0),"enjing"===i)?e:"siyang"===i?e>=11?e:e+12:"sonten"===i||"ndalu"===i?e+12:void 0},meridiem:function(e,i,r){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(r(381))},2105:function(e,i,r){!function(e){e.defineLocale("ka",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(|||||)(|)/,function(e,i,r){return""===r?i+"":i+r+""})},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):e},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}})}(r(381))},7772:function(e,i,r){!function(e){"use strict";var i={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(i[e]||i[e%10]||i[e>=100?100:null])},week:{dow:1,doy:7}})}(r(381))},8758:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},week:{dow:1,doy:4}})}(r(381))},9282:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>=10?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<10?"":e<17?"":e<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e){return e+""},week:{dow:0,doy:6}})}(r(381))},3730:function(e,i,r){!function(e){e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,i){switch(i){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""}})}(r(381))},563:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={s:["end sanye","end sanyeyan"],ss:[e+" sanye",e+" sanyeyan"],m:["deqqeyek","deqqeyek"],mm:[e+" deqqe",e+" deqqeyan"],h:["saetek","saetek"],hh:[e+" saet",e+" saetan"],d:["rojek","rojek"],dd:[e+" roj",e+" rojan"],w:["hefteyek","hefteyek"],ww:[e+" hefte",e+" hefteyan"],M:["mehek","mehek"],MM:[e+" meh",e+" mehan"],y:["salek","salek"],yy:[e+" sal",e+" salan"]};return i?a[r][0]:a[r][1]}e.defineLocale("ku-kmr",{months:"Rbendan_Sibat_Adar_Nsan_Gulan_Hezran_Trmeh_Tebax_lon_Cotmeh_Mijdar_Berfanbar".split("_"),monthsShort:"Rb_Sib_Ada_Ns_Gul_Hez_Tr_Teb_lo_Cot_Mij_Ber".split("_"),monthsParseExact:!0,weekdays:"Yekem_Duem_Sem_arem_Pncem_n_em".split("_"),weekdaysShort:"Yek_Du_S_ar_Pn_n_em".split("_"),weekdaysMin:"Ye_Du_S_a_P_n_e".split("_"),meridiem:function(e,i,r){return e<12?r?"bn":"BN":r?"pn":"PN"},meridiemParse:/bn|BN|pn|PN/,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM[a] YYYY[an]",LLL:"Do MMMM[a] YYYY[an] HH:mm",LLLL:"dddd, Do MMMM[a] YYYY[an] HH:mm",ll:"Do MMM[.] YYYY[an]",lll:"Do MMM[.] YYYY[an] HH:mm",llll:"ddd[.], Do MMM[.] YYYY[an] HH:mm"},calendar:{sameDay:"[ro di saet] LT [de]",nextDay:"[Sib di saet] LT [de]",nextWeek:"dddd [di saet] LT [de]",lastDay:"[Duh di saet] LT [de]",lastWeek:"dddd[a bor di saet] LT [de]",sameElse:"L"},relativeTime:{future:"di %s de",past:"ber %s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,w:i,ww:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}(?:y||\.)/,ordinal:function(e,i){var r,n,a,s=i.toLowerCase();return s.includes("w")||s.includes("m")?e+".":e+(n=(r=""+(r=e)).substring(r.length-1),12==(a=r.length>1?r.substring(r.length-2):"")||13==a||"2"!=n&&"3"!=n&&"50"!=a&&"70"!=n&&"80"!=n?"":"y")},week:{dow:1,doy:4}})}(r(381))},1408:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},n=[" ","","","","","","","",""," "," "," "];e.defineLocale("ku",{months:n,monthsShort:n,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return//.test(e)},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})}(r(381))},3291:function(e,i,r){!function(e){"use strict";var i={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(e){return e+(i[e]||i[e%10]||i[e>=100?100:null])},week:{dow:1,doy:7}})}(r(381))},6841:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return i?a[r][0]:a[r][1]}function r(e){if(isNaN(e=parseInt(e,10)))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var i=e%10,n=e/10;return 0===i?r(n):r(i)}if(!(e<1e4))return r(e/=1e3);for(;e>=10;)e/=10;return r(e)}e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return r(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return r(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:i,mm:"%d Minutten",h:i,hh:"%d Stonnen",d:i,dd:"%d Deeg",M:i,MM:"%d Mint",y:i,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},5466:function(e,i,r){!function(e){e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}})}(r(381))},7010:function(e,i,r){!function(e){"use strict";var i={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function r(e,i,r,n){return i?a(r)[0]:n?a(r)[1]:a(r)[2]}function n(e){return e%10==0||e>10&&e<20}function a(e){return i[e].split("_")}function s(e,i,s,o){var l=e+" ";return 1===e?l+r(e,i,s[0],o):i?l+(n(e)?a(s)[1]:a(s)[0]):o?l+a(s)[1]:l+(n(e)?a(s)[1]:a(s)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(e,i,r,n){return i?"kelios sekunds":n?"keli sekundi":"kelias sekundes"},ss:s,m:r,mm:s,h:r,hh:s,d:r,dd:s,M:r,MM:s,y:r,yy:s},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(r(381))},7595:function(e,i,r){!function(e){"use strict";var i={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function r(e,i,r){return r?i%10==1&&i%100!=11?e[2]:e[3]:i%10==1&&i%100!=11?e[0]:e[1]}function n(e,n,a){return e+" "+r(i[a],e,n)}function a(e,n,a){return r(i[a],e,n)}e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(e,i){return i?"daas sekundes":"dam sekundm"},ss:n,m:a,mm:n,h:a,hh:n,d:a,dd:n,M:a,MM:n,y:a,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},9861:function(e,i,r){!function(e){"use strict";var i={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,i){return 1===e?i[0]:e>=2&&e<=4?i[1]:i[2]},translate:function(e,r,n){var a=i.words[n];return 1===n.length?r?a[0]:a[1]:e+" "+i.correctGrammaticalCase(e,a)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:i.translate,m:i.translate,mm:i.translate,h:i.translate,hh:i.translate,d:"dan",dd:i.translate,M:"mjesec",MM:i.translate,y:"godinu",yy:i.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(r(381))},5493:function(e,i,r){!function(e){e.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},5966:function(e,i,r){!function(e){e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var i=e%10,r=e%100;return 0===e?e+"-":0===r?e+"-":r>10&&r<20?e+"-":1===i?e+"-":2===i?e+"-":7===i||8===i?e+"-":e+"-"},week:{dow:1,doy:7}})}(r(381))},7341:function(e,i,r){!function(e){e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,i){return(12===e&&(e=0),""===i&&e>=4||" "===i||""===i)?e+12:e},meridiem:function(e,i,r){return e<4?"":e<12?"":e<17?" ":e<20?"":""}})}(r(381))},5115:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){switch(r){case"s":return i?" ":" ";case"ss":return e+(i?" ":" ");case"m":case"mm":return e+(i?" ":" ");case"h":case"hh":return e+(i?" ":" ");case"d":case"dd":return e+(i?" ":" ");case"M":case"MM":return e+(i?" ":" ");case"y":case"yy":return e+(i?" ":" ");default:return e}}e.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e,i){switch(i){case"d":case"D":case"DDD":return e+" ";default:return e}}})}(r(381))},370:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function n(e,i,r,n){var a="";if(i)switch(r){case"s":a=" ";break;case"ss":a="%d ";break;case"m":a=" ";break;case"mm":a="%d ";break;case"h":a=" ";break;case"hh":a="%d ";break;case"d":a=" ";break;case"dd":a="%d ";break;case"M":a=" ";break;case"MM":a="%d ";break;case"y":a=" ";break;case"yy":a="%d "}else switch(r){case"s":a=" ";break;case"ss":a="%d ";break;case"m":a=" ";break;case"mm":a="%d ";break;case"h":a=" ";break;case"hh":a="%d ";break;case"d":a=" ";break;case"dd":a="%d ";break;case"M":a=" ";break;case"MM":a="%d ";break;case"y":a=" ";break;case"yy":a="%d "}return a.replace(/%d/i,e)}e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i||""===i)?e:""===i||""===i||""===i?e>=12?e:e+12:void 0},meridiem:function(e,i,r){return e>=0&&e<6?"":e<12?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},1237:function(e,i,r){!function(e){e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,i){return(12===e&&(e=0),"pagi"===i)?e:"tengahari"===i?e>=11?e:e+12:"petang"===i||"malam"===i?e+12:void 0},meridiem:function(e,i,r){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(r(381))},9847:function(e,i,r){!function(e){e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,i){return(12===e&&(e=0),"pagi"===i)?e:"tengahari"===i?e>=11?e:e+12:"petang"===i||"malam"===i?e+12:void 0},meridiem:function(e,i,r){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(r(381))},2126:function(e,i,r){!function(e){e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},6165:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},week:{dow:1,doy:4}})}(r(381))},4924:function(e,i,r){!function(e){e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"n time",hh:"%d timer",d:"n dag",dd:"%d dager",w:"n uke",ww:"%d uker",M:"n mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},6744:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>=10?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(r(381))},9814:function(e,i,r){!function(e){"use strict";var i="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),r="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),n=[/^jan/i,/^feb/i,/^(maart|mrt\.?)$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?r[e.month()]:i[e.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(r(381))},3901:function(e,i,r){!function(e){"use strict";var i="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),r="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),n=[/^jan/i,/^feb/i,/^(maart|mrt\.?)$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],a=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,n){return e?/-MMM-/.test(n)?r[e.month()]:i[e.month()]:i},monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(r(381))},3877:function(e,i,r){!function(e){e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},2135:function(e,i,r){!function(e){e.defineLocale("oc-lnc",{months:{standalone:"genir_febrir_mar_abril_mai_junh_julhet_agost_setembre_octbre_novembre_decembre".split("_"),format:"de genir_de febrir_de mar_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimcres_dijus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[ui a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ir a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,i){var r=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return("w"===i||"W"===i)&&(r="a"),e+r},week:{dow:1,doy:4}})}(r(381))},5858:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>=10?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},4495:function(e,i,r){!function(e){"use strict";var i="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),r="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),n=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function a(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function s(e,i,r){var n=e+" ";switch(r){case"ss":return n+(a(e)?"sekundy":"sekund");case"m":return i?"minuta":"minut";case"mm":return n+(a(e)?"minuty":"minut");case"h":return i?"godzina":"godzin";case"hh":return n+(a(e)?"godziny":"godzin");case"ww":return n+(a(e)?"tygodnie":"tygodni");case"MM":return n+(a(e)?"miesice":"miesicy");case"yy":return n+(a(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,n){return e?/D MMMM/.test(n)?r[e.month()]:i[e.month()]:i},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:s,m:s,mm:s,h:s,hh:s,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:s,M:"miesic",MM:s,y:"rok",yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},7971:function(e,i,r){!function(e){e.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"do_2_3_4_5_6_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",invalidDate:"Data invlida"})}(r(381))},9520:function(e,i,r){!function(e){e.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},6459:function(e,i,r){!function(e){"use strict";function i(e,i,r){var n=" ";return(e%100>=20||e>=100&&e%100==0)&&(n=" de "),e+n+({ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"sptmni",MM:"luni",yy:"ani"})[r]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:i,m:"un minut",mm:i,h:"o or",hh:i,d:"o zi",dd:i,w:"o sptmn",ww:i,M:"o lun",MM:i,y:"un an",yy:i},week:{dow:1,doy:7}})}(r(381))},1793:function(e,i,r){!function(e){"use strict";function i(e,i,r){var n,a;return"m"===r?i?"":"":e+" "+(n=+e,a=({ss:i?"__":"__",mm:i?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"})[r].split("_"),n%10==1&&n%100!=11?a[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?a[1]:a[2])}var r=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:i,m:i,mm:i,h:"",hh:i,d:"",dd:i,w:"",ww:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,i,r){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,i){switch(i){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:4}})}(r(381))},950:function(e,i,r){!function(e){"use strict";var i=["","","","","","","","","","","",""],r=["","","","","","",""];e.defineLocale("sd",{months:i,monthsShort:i,weekdays:r,weekdaysShort:r,weekdaysMin:r,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(r(381))},490:function(e,i,r){!function(e){e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},124:function(e,i,r){!function(e){e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return".."===e||" "===e},meridiem:function(e,i,r){return e>11?r?"..":" ":r?"..":" "}})}(r(381))},4249:function(e,i,r){!function(e){"use strict";function i(e){return e>1&&e<5}function r(e,r,n,a){var s=e+" ";switch(n){case"s":return r||a?"pr seknd":"pr sekundami";case"ss":if(r||a)return s+(i(e)?"sekundy":"seknd");return s+"sekundami";case"m":return r?"minta":a?"mintu":"mintou";case"mm":if(r||a)return s+(i(e)?"minty":"mint");return s+"mintami";case"h":return r?"hodina":a?"hodinu":"hodinou";case"hh":if(r||a)return s+(i(e)?"hodiny":"hodn");return s+"hodinami";case"d":return r||a?"de":"dom";case"dd":if(r||a)return s+(i(e)?"dni":"dn");return s+"dami";case"M":return r||a?"mesiac":"mesiacom";case"MM":if(r||a)return s+(i(e)?"mesiace":"mesiacov");return s+"mesiacmi";case"y":return r||a?"rok":"rokom";case"yy":if(r||a)return s+(i(e)?"roky":"rokov");return s+"rokmi"}}e.defineLocale("sk",{months:"janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),monthsShort:"jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:case 4:case 5:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},4985:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a=e+" ";switch(r){case"s":return i||n?"nekaj sekund":"nekaj sekundami";case"ss":return 1===e?a+=i?"sekundo":"sekundi":2===e?a+=i||n?"sekundi":"sekundah":e<5?a+=i||n?"sekunde":"sekundah":a+="sekund",a;case"m":return i?"ena minuta":"eno minuto";case"mm":return 1===e?a+=i?"minuta":"minuto":2===e?a+=i||n?"minuti":"minutama":e<5?a+=i||n?"minute":"minutami":a+=i||n?"minut":"minutami",a;case"h":return i?"ena ura":"eno uro";case"hh":return 1===e?a+=i?"ura":"uro":2===e?a+=i||n?"uri":"urama":e<5?a+=i||n?"ure":"urami":a+=i||n?"ur":"urami",a;case"d":return i||n?"en dan":"enim dnem";case"dd":return 1===e?a+=i||n?"dan":"dnem":2===e?a+=i||n?"dni":"dnevoma":a+=i||n?"dni":"dnevi",a;case"M":return i||n?"en mesec":"enim mesecem";case"MM":return 1===e?a+=i||n?"mesec":"mesecem":2===e?a+=i||n?"meseca":"mesecema":e<5?a+=i||n?"mesece":"meseci":a+=i||n?"mesecev":"meseci",a;case"y":return i||n?"eno leto":"enim letom";case"yy":return 1===e?a+=i||n?"leto":"letom":2===e?a+=i||n?"leti":"letoma":e<5?a+=i||n?"leta":"leti":a+=i||n?"let":"leti",a}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(r(381))},1104:function(e,i,r){!function(e){e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,i,r){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},9915:function(e,i,r){!function(e){"use strict";var i={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],d:[" "," "],dd:["","",""],M:[" "," "],MM:["","",""],y:[" "," "],yy:["","",""]},correctGrammaticalCase:function(e,i){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?i[0]:i[1]:i[2]},translate:function(e,r,n,a){var s,o=i.words[n];return 1===n.length?"y"===n&&r?" ":a||r?o[0]:o[1]:(s=i.correctGrammaticalCase(e,o),"yy"===n&&r&&""===s)?e+" ":e+" "+s}};e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:i.translate,m:i.translate,mm:i.translate,h:i.translate,hh:i.translate,d:i.translate,dd:i.translate,M:i.translate,MM:i.translate,y:i.translate,yy:i.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(r(381))},9131:function(e,i,r){!function(e){"use strict";var i={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],d:["jedan dan","jednog dana"],dd:["dan","dana","dana"],M:["jedan mesec","jednog meseca"],MM:["mesec","meseca","meseci"],y:["jednu godinu","jedne godine"],yy:["godinu","godine","godina"]},correctGrammaticalCase:function(e,i){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?i[0]:i[1]:i[2]},translate:function(e,r,n,a){var s,o=i.words[n];return 1===n.length?"y"===n&&r?"jedna godina":a||r?o[0]:o[1]:(s=i.correctGrammaticalCase(e,o),"yy"===n&&r&&"godinu"===s)?e+" godina":e+" "+s}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:i.translate,m:i.translate,mm:i.translate,h:i.translate,hh:i.translate,d:i.translate,dd:i.translate,M:i.translate,MM:i.translate,y:i.translate,yy:i.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(r(381))},5606:function(e,i,r){!function(e){e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,i,r){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,i){return(12===e&&(e=0),"ekuseni"===i)?e:"emini"===i?e>=11?e:e+12:"entsambama"===i||"ebusuku"===i?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(r(381))},8760:function(e,i,r){!function(e){e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?":e":1===i?":a":2===i?":a":":e")},week:{dow:1,doy:4}})}(r(381))},1172:function(e,i,r){!function(e){e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(r(381))},7333:function(e,i,r){!function(e){"use strict";var i={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},r={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,function(e){return r[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return i[e]})},meridiemParse:/|||||/,meridiem:function(e,i,r){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<2?e:e+12:""===i||""===i?e:""===i&&e>=10?e:e+12},week:{dow:0,doy:6}})}(r(381))},3110:function(e,i,r){!function(e){e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>=10?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(r(381))},2095:function(e,i,r){!function(e){e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:1,doy:4}})}(r(381))},7321:function(e,i,r){!function(e){"use strict";var i={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("tg",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i)?e<4?e:e+12:""===i?e:""===i?e>=11?e:e+12:""===i?e+12:void 0},meridiem:function(e,i,r){return e<4?"":e<11?"":e<16?"":e<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){return e+(i[e]||i[e%10]||i[e>=100?100:null])},week:{dow:1,doy:7}})}(r(381))},9041:function(e,i,r){!function(e){e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(r(381))},9005:function(e,i,r){!function(e){"use strict";var i={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'nji",4:"'nji",100:"'nji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"anwar_Fewral_Mart_Aprel_Ma_Iun_Iul_Awgust_Sentabr_Oktabr_Noabr_Dekabr".split("_"),monthsShort:"an_Few_Mar_Apr_Ma_In_Il_Awg_Sen_Okt_No_Dek".split("_"),weekdays:"ekenbe_Duenbe_Sienbe_arenbe_Penenbe_Anna_enbe".split("_"),weekdaysShort:"ek_Du_Si_ar_Pen_Ann_en".split("_"),weekdaysMin:"k_D_S_r_Pn_An_n".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s so",past:"%s ",s:"birne sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gn",dd:"%d gn",M:"bir a",MM:"%d a",y:"bir yl",yy:"%d yl"},ordinal:function(e,r){switch(r){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var n=e%10;return e+(i[n]||i[e%100-n]||i[e>=100?100:null])}},week:{dow:1,doy:7}})}(r(381))},5768:function(e,i,r){!function(e){e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(r(381))},9444:function(e,i,r){!function(e){"use strict";var i="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function r(e,r,n,a){var s,o,l,u,h=(s=Math.floor(e%1e3/100),o=Math.floor(e%100/10),l=e%10,u="",s>0&&(u+=i[s]+"vatlh"),o>0&&(u+=(""!==u?" ":"")+i[o]+"maH"),l>0&&(u+=(""!==u?" ":"")+i[l]),""===u?"pagh":u);switch(n){case"ss":return h+" lup";case"mm":return h+" tup";case"hh":return h+" rep";case"dd":return h+" jaj";case"MM":return h+" jar";case"yy":return h+" DIS"}}e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){return -1!==e.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==e.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"},past:function(e){return -1!==e.indexOf("jaj")?e.slice(0,-3)+"Hu":-1!==e.indexOf("jar")?e.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"},s:"puS lup",ss:r,m:"wa tup",mm:r,h:"wa rep",hh:r,d:"wa jaj",dd:r,M:"wa jar",MM:r,y:"wa DIS",yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},2397:function(e,i,r){!function(e){"use strict";var i={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_ar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(e,i,r){return e<12?r?"":"":r?"s":"S"},meridiemParse:/||s|S/,isPM:function(e){return"s"===e||"S"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(e,r){switch(r){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'nc";var n=e%10;return e+(i[n]||i[e%100-n]||i[e>=100?100:null])}},week:{dow:1,doy:7}})}(r(381))},8254:function(e,i,r){!function(e){"use strict";function i(e,i,r,n){var a={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",""+e+" secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",""+e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",""+e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",""+e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",""+e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",""+e+" ars"]};return n?a[r][0]:i?a[r][0]:a[r][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,i,r){return e>11?r?"d'o":"D'O":r?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(r(381))},699:function(e,i,r){!function(e){e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(r(381))},1106:function(e,i,r){!function(e){e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(r(381))},9288:function(e,i,r){!function(e){e.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(e,i){return(12===e&&(e=0)," "===i||""===i||" "===i)?e:" "===i||""===i?e+12:e>=11?e:e+12},meridiem:function(e,i,r){var n=100*e+i;return n<600?" ":n<900?"":n<1130?" ":n<1230?"":n<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(e,i){switch(i){case"d":case"D":case"DDD":return e+"-";case"w":case"W":return e+"-";default:return e}},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:7}})}(r(381))},7691:function(e,i,r){!function(e){"use strict";function i(e,i,r){var n,a;return"m"===r?i?"":"":"h"===r?i?"":"":e+" "+(n=+e,a=({ss:i?"__":"__",mm:i?"__":"__",hh:i?"__":"__",dd:"__",MM:"__",yy:"__"})[r].split("_"),n%10==1&&n%100!=11?a[0]:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?a[1]:a[2])}function r(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(e,i){var r={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===e?r.nominative.slice(1,7).concat(r.nominative.slice(0,1)):e?r[/(\[[]\]) ?dddd/.test(i)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(i)?"genitive":"nominative"][e.day()]:r.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:r("[ "),nextDay:r("[ "),lastDay:r("[ "),nextWeek:r("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[] dddd [").call(this);case 1:case 2:case 4:return r("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:i,m:i,mm:i,h:"",hh:i,d:"",dd:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,i,r){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e,i){switch(i){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(r(381))},3795:function(e,i,r){!function(e){"use strict";var i=["","","","","","","","","","","",""],r=["","","","","","",""];e.defineLocale("ur",{months:i,monthsShort:i,weekdays:r,weekdaysShort:r,weekdaysMin:r,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,i,r){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(r(381))},588:function(e,i,r){!function(e){e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(r(381))},6791:function(e,i,r){!function(e){e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(r(381))},5666:function(e,i,r){!function(e){e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,i,r){return e<12?r?"sa":"SA":r?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(r(381))},4378:function(e,i,r){!function(e){e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var i=e%10;return e+(1==~~(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")},week:{dow:1,doy:4}})}(r(381))},5805:function(e,i,r){!function(e){e.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(r(381))},3839:function(e,i,r){!function(e){e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i||""===i||""===i)?e:""===i||""===i?e+12:e>=11?e:e+12},meridiem:function(e,i,r){var n=100*e+i;return n<600?"":n<900?"":n<1130?"":n<1230?"":n<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddLT":"[]dddLT"},lastDay:"[]LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddLT":"[]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,i){switch(i){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(r(381))},5726:function(e,i,r){!function(e){e.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i||""===i||""===i)?e:""===i?e>=11?e:e+12:""===i||""===i?e+12:void 0},meridiem:function(e,i,r){var n=100*e+i;return n<600?"":n<900?"":n<1200?"":1200===n?"":n<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,i){switch(i){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(r(381))},9807:function(e,i,r){!function(e){e.defineLocale("zh-mo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"D/M/YYYY",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i||""===i||""===i)?e:""===i?e>=11?e:e+12:""===i||""===i?e+12:void 0},meridiem:function(e,i,r){var n=100*e+i;return n<600?"":n<900?"":n<1130?"":n<1230?"":n<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,i){switch(i){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(r(381))},4152:function(e,i,r){!function(e){e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,i){return(12===e&&(e=0),""===i||""===i||""===i)?e:""===i?e>=11?e:e+12:""===i||""===i?e+12:void 0},meridiem:function(e,i,r){var n=100*e+i;return n<600?"":n<900?"":n<1130?"":n<1230?"":n<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,i){switch(i){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(r(381))},6700:(e,i,r)=>{var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-ps":315,"./ar-ps.js":315,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":2088,"./es-do.js":2088,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku-kmr":563,"./ku-kmr.js":563,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5606,"./ss.js":5606,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function a(e){return r(s(e))}function s(e){if(!r.o(n,e)){var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id=6700},381:function(e,i,r){(e=r.nmd(e)).exports=function(){"use strict";function i(){return H.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,i){return Object.prototype.hasOwnProperty.call(e,i)}function o(e){var i;if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(i in e)if(s(e,i))return!1;return!0}function l(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,i){var r,n=[],a=e.length;for(r=0;r<a;++r)n.push(i(e[r],r));return n}function d(e,i){for(var r in i)s(i,r)&&(e[r]=i[r]);return s(i,"toString")&&(e.toString=i.toString),s(i,"valueOf")&&(e.valueOf=i.valueOf),e}function f(e,i,r,n){return ts(e,i,r,n,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){var i=null,r=!1,n=e._d&&!isNaN(e._d.getTime());return(n&&(i=p(e),r=V.call(i.parsedDateParts,function(e){return null!=e}),n=i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&r),e._strict&&(n=n&&0===i.charsLeftOver&&0===i.unusedTokens.length&&void 0===i.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e))?n:(e._isValid=n,e._isValid)}function _(e){var i=f(NaN);return null!=e?d(p(i),e):p(i).userInvalidated=!0,i}V=Array.prototype.some?Array.prototype.some:function(e){var i,r=Object(this),n=r.length>>>0;for(i=0;i<n;i++)if(i in r&&e.call(this,r[i],i,r))return!0;return!1};var g,y,v=i.momentProperties=[],x=!1;function b(e,i){var r,n,a,s=v.length;if(l(i._isAMomentObject)||(e._isAMomentObject=i._isAMomentObject),l(i._i)||(e._i=i._i),l(i._f)||(e._f=i._f),l(i._l)||(e._l=i._l),l(i._strict)||(e._strict=i._strict),l(i._tzm)||(e._tzm=i._tzm),l(i._isUTC)||(e._isUTC=i._isUTC),l(i._offset)||(e._offset=i._offset),l(i._pf)||(e._pf=p(i)),l(i._locale)||(e._locale=i._locale),s>0)for(r=0;r<s;r++)l(a=i[n=v[r]])||(e[n]=a);return e}function w(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===x&&(x=!0,i.updateOffset(this),x=!1)}function M(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function T(e){i.suppressDeprecationWarnings}function L(e,r){var n=!0;return d(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var a,o,l,u=[],h=arguments.length;for(o=0;o<h;o++){if(a="","object"==typeof arguments[o]){for(l in a+="\n["+o+"] ",arguments[0])s(arguments[0],l)&&(a+=l+": "+arguments[0][l]+", ");a=a.slice(0,-2)}else a=arguments[o];u.push(a)}T(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+Error().stack),n=!1}return r.apply(this,arguments)},r)}var S={};function k(e,r){null!=i.deprecationHandler&&i.deprecationHandler(e,r),S[e]||(T(r),S[e]=!0)}function D(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e,i){var r,n=d({},e);for(r in i)s(i,r)&&(a(e[r])&&a(i[r])?(n[r]={},d(n[r],e[r]),d(n[r],i[r])):null!=i[r]?n[r]=i[r]:delete n[r]);for(r in e)s(e,r)&&!s(i,r)&&a(e[r])&&(n[r]=d({},n[r]));return n}function A(e){null!=e&&this.set(e)}function P(e,i,r){var n=""+Math.abs(e);return(e>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,i-n.length)).toString().substr(1)+n}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,U=Object.keys?Object.keys:function(e){var i,r=[];for(i in e)s(e,i)&&r.push(i);return r};var C=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,O={},z={};function R(e,i,r,n){var a=n;"string"==typeof n&&(a=function(){return this[n]()}),e&&(z[e]=a),i&&(z[i[0]]=function(){return P(a.apply(this,arguments),i[1],i[2])}),r&&(z[r]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function Y(e,i){return e.isValid()?(O[i=F(i,e.localeData())]=O[i]||function(e){var i,r,n,a=e.match(C);for(r=0,n=a.length;r<n;r++)z[a[r]]?a[r]=z[a[r]]:a[r]=(i=a[r]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(i){var r,s="";for(r=0;r<n;r++)s+=D(a[r])?a[r].call(i,e):a[r];return s}}(i),O[i](e)):e.localeData().invalidDate()}function F(e,i){var r=5;function n(e){return i.longDateFormat(e)||e}for(I.lastIndex=0;r>=0&&I.test(e);)e=e.replace(I,n),I.lastIndex=0,r-=1;return e}var j={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function B(e){return"string"==typeof e?j[e]||j[e.toLowerCase()]:void 0}function N(e){var i,r,n={};for(r in e)s(e,r)&&(i=B(r))&&(n[i]=e[r]);return n}var H,V,U,$,W={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1},G=/\d/,q=/\d\d/,Z=/\d{3}/,X=/\d{4}/,J=/[+-]?\d{6}/,K=/\d\d?/,Q=/\d\d\d\d?/,ee=/\d\d\d\d\d\d?/,et=/\d{1,3}/,ei=/\d{1,4}/,er=/[+-]?\d{1,6}/,en=/\d+/,ea=/[+-]?\d+/,es=/Z|[+-]\d\d:?\d\d/gi,eo=/Z|[+-]\d\d(?::?\d\d)?/gi,el=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,eu=/^[1-9]\d?/,eh=/^([1-9]\d|\d)/;function ec(e,i,r){$[e]=D(i)?i:function(e,n){return e&&r?r:i}}function ed(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ef(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ep(e){var i=+e,r=0;return 0!==i&&isFinite(i)&&(r=ef(i)),r}$={};var em={};function e_(e,i){var r,n,a=i;for("string"==typeof e&&(e=[e]),u(i)&&(a=function(e,r){r[i]=ep(e)}),n=e.length,r=0;r<n;r++)em[e[r]]=a}function eg(e,i){e_(e,function(e,r,n,a){n._w=n._w||{},i(e,n._w,n,a)})}function ey(e){return e%4==0&&e%100!=0||e%400==0}function ev(e){return ey(e)?366:365}R("Y",0,0,function(){var e=this.year();return e<=9999?P(e,4):"+"+e}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),ec("Y",ea),ec("YY",K,q),ec("YYYY",ei,X),ec("YYYYY",er,J),ec("YYYYYY",er,J),e_(["YYYYY","YYYYYY"],0),e_("YYYY",function(e,r){r[0]=2===e.length?i.parseTwoDigitYear(e):ep(e)}),e_("YY",function(e,r){r[0]=i.parseTwoDigitYear(e)}),e_("Y",function(e,i){i[0]=parseInt(e,10)}),i.parseTwoDigitYear=function(e){return ep(e)+(ep(e)>68?1900:2e3)};var ex=eb("FullYear",!0);function eb(e,r){return function(n){return null!=n?(eM(this,e,n),i.updateOffset(this,r),this):ew(this,e)}}function ew(e,i){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(i){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function eM(e,i,r){var n,a,s,o;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,a=e._isUTC,i){case"Milliseconds":return void(a?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(a?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(a?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(a?n.setUTCHours(r):n.setHours(r));case"Date":return void(a?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}s=e.month(),o=29!==(o=e.date())||1!==s||ey(r)?o:28,a?n.setUTCFullYear(r,s,o):n.setFullYear(r,s,o)}}function eT(e,i){if(isNaN(e)||isNaN(i))return NaN;var r=(i%12+12)%12;return e+=(i-r)/12,1===r?ey(e)?29:28:31-r%7%2}eU=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var i;for(i=0;i<this.length;++i)if(this[i]===e)return i;return -1},R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),R("MMMM",0,0,function(e){return this.localeData().months(this,e)}),ec("M",K,eu),ec("MM",K,q),ec("MMM",function(e,i){return i.monthsShortRegex(e)}),ec("MMMM",function(e,i){return i.monthsRegex(e)}),e_(["M","MM"],function(e,i){i[1]=ep(e)-1}),e_(["MMM","MMMM"],function(e,i,r,n){var a=r._locale.monthsParse(e,n,r._strict);null!=a?i[1]=a:p(r).invalidMonth=e});var eL="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),eS=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;function ek(e,i,r){var n,a,s,o=e.toLocaleLowerCase();if(!this._monthsParse)for(n=0,this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[];n<12;++n)s=f([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return r?"MMM"===i?-1!==(a=eU.call(this._shortMonthsParse,o))?a:null:-1!==(a=eU.call(this._longMonthsParse,o))?a:null:"MMM"===i?-1!==(a=eU.call(this._shortMonthsParse,o))?a:-1!==(a=eU.call(this._longMonthsParse,o))?a:null:-1!==(a=eU.call(this._longMonthsParse,o))?a:-1!==(a=eU.call(this._shortMonthsParse,o))?a:null}function eD(e,i){if(!e.isValid())return e;if("string"==typeof i){if(/^\d+$/.test(i))i=ep(i);else if(!u(i=e.localeData().monthsParse(i)))return e}var r=i,n=e.date();return n=n<29?n:Math.min(n,eT(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function eE(e){return null!=e?(eD(this,e),i.updateOffset(this,!0),this):ew(this,"Month")}function eA(){function e(e,i){return i.length-e.length}var i,r,n,a,s=[],o=[],l=[];for(i=0;i<12;i++)r=f([2e3,i]),n=ed(this.monthsShort(r,"")),a=ed(this.months(r,"")),s.push(n),o.push(a),l.push(a),l.push(n);s.sort(e),o.sort(e),l.sort(e),this._monthsRegex=RegExp("^("+l.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=RegExp("^("+s.join("|")+")","i")}function eP(e,i,r,n,a,s,o){var l;return e<100&&e>=0?isFinite((l=new Date(e+400,i,r,n,a,s,o)).getFullYear())&&l.setFullYear(e):l=new Date(e,i,r,n,a,s,o),l}function eC(e){var i,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,isFinite((i=new Date(Date.UTC.apply(null,r))).getUTCFullYear())&&i.setUTCFullYear(e)):i=new Date(Date.UTC.apply(null,arguments)),i}function eI(e,i,r){var n=7+i-r;return-((7+eC(e,0,n).getUTCDay()-i)%7)+n-1}function eO(e,i,r,n,a){var s,o,l=1+7*(i-1)+(7+r-n)%7+eI(e,n,a);return l<=0?o=ev(s=e-1)+l:l>ev(e)?(s=e+1,o=l-ev(e)):(s=e,o=l),{year:s,dayOfYear:o}}function ez(e,i,r){var n,a,s=eI(e.year(),i,r),o=Math.floor((e.dayOfYear()-s-1)/7)+1;return o<1?n=o+eR(a=e.year()-1,i,r):o>eR(e.year(),i,r)?(n=o-eR(e.year(),i,r),a=e.year()+1):(a=e.year(),n=o),{week:n,year:a}}function eR(e,i,r){var n=eI(e,i,r),a=eI(e+1,i,r);return(ev(e)-n+a)/7}function eY(e,i){return e.slice(i,7).concat(e.slice(0,i))}R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),ec("w",K,eu),ec("ww",K,q),ec("W",K,eu),ec("WW",K,q),eg(["w","ww","W","WW"],function(e,i,r,n){i[n.substr(0,1)]=ep(e)}),R("d",0,"do","day"),R("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),R("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),R("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),ec("d",K),ec("e",K),ec("E",K),ec("dd",function(e,i){return i.weekdaysMinRegex(e)}),ec("ddd",function(e,i){return i.weekdaysShortRegex(e)}),ec("dddd",function(e,i){return i.weekdaysRegex(e)}),eg(["dd","ddd","dddd"],function(e,i,r,n){var a=r._locale.weekdaysParse(e,n,r._strict);null!=a?i.d=a:p(r).invalidWeekday=e}),eg(["d","e","E"],function(e,i,r,n){i[n]=ep(e)});var eF="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function ej(e,i,r){var n,a,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(n=0,this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[];n<7;++n)s=f([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return r?"dddd"===i?-1!==(a=eU.call(this._weekdaysParse,o))?a:null:"ddd"===i?-1!==(a=eU.call(this._shortWeekdaysParse,o))?a:null:-1!==(a=eU.call(this._minWeekdaysParse,o))?a:null:"dddd"===i?-1!==(a=eU.call(this._weekdaysParse,o))||-1!==(a=eU.call(this._shortWeekdaysParse,o))?a:-1!==(a=eU.call(this._minWeekdaysParse,o))?a:null:"ddd"===i?-1!==(a=eU.call(this._shortWeekdaysParse,o))||-1!==(a=eU.call(this._weekdaysParse,o))?a:-1!==(a=eU.call(this._minWeekdaysParse,o))?a:null:-1!==(a=eU.call(this._minWeekdaysParse,o))||-1!==(a=eU.call(this._weekdaysParse,o))?a:-1!==(a=eU.call(this._shortWeekdaysParse,o))?a:null}function eB(){function e(e,i){return i.length-e.length}var i,r,n,a,s,o=[],l=[],u=[],h=[];for(i=0;i<7;i++)r=f([2e3,1]).day(i),n=ed(this.weekdaysMin(r,"")),a=ed(this.weekdaysShort(r,"")),s=ed(this.weekdays(r,"")),o.push(n),l.push(a),u.push(s),h.push(n),h.push(a),h.push(s);o.sort(e),l.sort(e),u.sort(e),h.sort(e),this._weekdaysRegex=RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=RegExp("^("+l.join("|")+")","i"),this._weekdaysMinStrictRegex=RegExp("^("+o.join("|")+")","i")}function eN(){return this.hours()%12||12}function eH(e,i){R(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),i)})}function eV(e,i){return i._meridiemParse}R("H",["HH",2],0,"hour"),R("h",["hh",2],0,eN),R("k",["kk",2],0,function(){return this.hours()||24}),R("hmm",0,0,function(){return""+eN.apply(this)+P(this.minutes(),2)}),R("hmmss",0,0,function(){return""+eN.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)}),R("Hmm",0,0,function(){return""+this.hours()+P(this.minutes(),2)}),R("Hmmss",0,0,function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)}),eH("a",!0),eH("A",!1),ec("a",eV),ec("A",eV),ec("H",K,eh),ec("h",K,eu),ec("k",K,eu),ec("HH",K,q),ec("hh",K,q),ec("kk",K,q),ec("hmm",Q),ec("hmmss",ee),ec("Hmm",Q),ec("Hmmss",ee),e_(["H","HH"],3),e_(["k","kk"],function(e,i,r){var n=ep(e);i[3]=24===n?0:n}),e_(["a","A"],function(e,i,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),e_(["h","hh"],function(e,i,r){i[3]=ep(e),p(r).bigHour=!0}),e_("hmm",function(e,i,r){var n=e.length-2;i[3]=ep(e.substr(0,n)),i[4]=ep(e.substr(n)),p(r).bigHour=!0}),e_("hmmss",function(e,i,r){var n=e.length-4,a=e.length-2;i[3]=ep(e.substr(0,n)),i[4]=ep(e.substr(n,2)),i[5]=ep(e.substr(a)),p(r).bigHour=!0}),e_("Hmm",function(e,i,r){var n=e.length-2;i[3]=ep(e.substr(0,n)),i[4]=ep(e.substr(n))}),e_("Hmmss",function(e,i,r){var n=e.length-4,a=e.length-2;i[3]=ep(e.substr(0,n)),i[4]=ep(e.substr(n,2)),i[5]=ep(e.substr(a))});var eU,e$,eW=eb("Hours",!0),eG={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:eL,week:{dow:0,doy:6},weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysShort:eF,meridiemParse:/[ap]\.?m?\.?/i},eq={},eZ={};function eX(e){return e?e.toLowerCase().replace("_","-"):e}function eJ(i){var n=null;if(void 0===eq[i]&&e&&e.exports&&i&&i.match("^[^/\\\\]*$"))try{n=e$._abbr,r(6700)("./"+i),eK(n)}catch(a){eq[i]=null}return eq[i]}function eK(e,i){var r;return e&&(r=l(i)?e0(e):eQ(e,i))&&(e$=r),e$._abbr}function eQ(e,i){if(null===i)return delete eq[e],null;var r,n=eG;if(i.abbr=e,null!=eq[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=eq[e]._config;else if(null!=i.parentLocale){if(null!=eq[i.parentLocale])n=eq[i.parentLocale]._config;else{if(null==(r=eJ(i.parentLocale)))return eZ[i.parentLocale]||(eZ[i.parentLocale]=[]),eZ[i.parentLocale].push({name:e,config:i}),null;n=r._config}}return eq[e]=new A(E(n,i)),eZ[e]&&eZ[e].forEach(function(e){eQ(e.name,e.config)}),eK(e),eq[e]}function e0(e){var i;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return e$;if(!n(e)){if(i=eJ(e))return i;e=[e]}return function(e){for(var i,r,n,a,s=0;s<e.length;){for(i=(a=eX(e[s]).split("-")).length,r=(r=eX(e[s+1]))?r.split("-"):null;i>0;){if(n=eJ(a.slice(0,i).join("-")))return n;if(r&&r.length>=i&&function(e,i){var r,n=Math.min(e.length,i.length);for(r=0;r<n;r+=1)if(e[r]!==i[r])return r;return n}(a,r)>=i-1)break;i--}s++}return e$}(e)}function e1(e){var i,r=e._a;return r&&-2===p(e).overflow&&(i=r[1]<0||r[1]>11?1:r[2]<1||r[2]>eT(r[0],r[1])?2:r[3]<0||r[3]>24||24===r[3]&&(0!==r[4]||0!==r[5]||0!==r[6])?3:r[4]<0||r[4]>59?4:r[5]<0||r[5]>59?5:r[6]<0||r[6]>999?6:-1,p(e)._overflowDayOfYear&&(i<0||i>2)&&(i=2),p(e)._overflowWeeks&&-1===i&&(i=7),p(e)._overflowWeekday&&-1===i&&(i=8),p(e).overflow=i),e}var e2=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,e3=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,e4=/Z|[+-]\d\d(?::?\d\d)?/,e5=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],e6=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],e8=/^\/?Date\((-?\d+)/i,e7=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,e9={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function te(e){var i,r,n,a,s,o,l=e._i,u=e2.exec(l)||e3.exec(l),h=e5.length,c=e6.length;if(u){for(i=0,p(e).iso=!0,r=h;i<r;i++)if(e5[i][1].exec(u[1])){a=e5[i][0],n=!1!==e5[i][2];break}if(null==a){e._isValid=!1;return}if(u[3]){for(i=0,r=c;i<r;i++)if(e6[i][1].exec(u[3])){s=(u[2]||" ")+e6[i][0];break}if(null==s){e._isValid=!1;return}}if(!n&&null!=s){e._isValid=!1;return}if(u[4]){if(e4.exec(u[4]))o="Z";else{e._isValid=!1;return}}e._f=a+(s||"")+(o||""),tn(e)}else e._isValid=!1}function tt(e){var i,r,n,a,s,o,l,u,h,c=e7.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(r=c[4],n=c[3],a=c[2],s=c[5],o=c[6],l=c[7],u=[(i=parseInt(r,10))<=49?2e3+i:i<=999?1900+i:i,eL.indexOf(n),parseInt(a,10),parseInt(s,10),parseInt(o,10)],l&&u.push(parseInt(l,10)),(h=c[1])&&eF.indexOf(h)!==new Date(u[0],u[1],u[2]).getDay()&&(p(e).weekdayMismatch=!0,e._isValid=!1,1))return;e._a=u,e._tzm=function(e,i,r){if(e)return e9[e];if(i)return 0;var n=parseInt(r,10),a=n%100;return(n-a)/100*60+a}(c[8],c[9],c[10]),e._d=eC.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0}else e._isValid=!1}function ti(e,i,r){return null!=e?e:null!=i?i:r}function tr(e){var r,n,a,s,o,l,u,h,c,d,f,m,_,g,y,v=[];if(!e._d){for(d=new Date(i.now()),_=e._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()],e._w&&null==e._a[2]&&null==e._a[1]&&(null!=(r=e._w).GG||null!=r.W||null!=r.E?(o=1,l=4,n=ti(r.GG,e._a[0],ez(to(),1,4).year),a=ti(r.W,1),((s=ti(r.E,1))<1||s>7)&&(h=!0)):(o=e._locale._week.dow,l=e._locale._week.doy,c=ez(to(),o,l),n=ti(r.gg,e._a[0],c.year),a=ti(r.w,c.week),null!=r.d?((s=r.d)<0||s>6)&&(h=!0):null!=r.e?(s=r.e+o,(r.e<0||r.e>6)&&(h=!0)):s=o),a<1||a>eR(n,o,l)?p(e)._overflowWeeks=!0:null!=h?p(e)._overflowWeekday=!0:(u=eO(n,a,s,o,l),e._a[0]=u.year,e._dayOfYear=u.dayOfYear)),null!=e._dayOfYear&&(y=ti(e._a[0],_[0]),(e._dayOfYear>ev(y)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),m=eC(y,0,e._dayOfYear),e._a[1]=m.getUTCMonth(),e._a[2]=m.getUTCDate()),f=0;f<3&&null==e._a[f];++f)e._a[f]=v[f]=_[f];for(;f<7;f++)e._a[f]=v[f]=null==e._a[f]?2===f?1:0:e._a[f];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?eC:eP).apply(null,v),g=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&void 0!==e._w.d&&e._w.d!==g&&(p(e).weekdayMismatch=!0)}}function tn(e){if(e._f===i.ISO_8601){te(e);return}if(e._f===i.RFC_2822){tt(e);return}e._a=[],p(e).empty=!0;var r,n,a,o,l,u,h,c,d,f,m,_=""+e._i,g=_.length,y=0;for(l=0,m=(h=F(e._f,e._locale).match(C)||[]).length;l<m;l++)(c=h[l],(u=(_.match(s($,c)?$[c](e._strict,e._locale):new RegExp(ed(c.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,i,r,n,a){return i||r||n||a}))))||[])[0])&&((d=_.substr(0,_.indexOf(u))).length>0&&p(e).unusedInput.push(d),_=_.slice(_.indexOf(u)+u.length),y+=u.length),z[c])?(u?p(e).empty=!1:p(e).unusedTokens.push(c),null!=u&&s(em,c)&&em[c](u,e._a,e,c)):e._strict&&!u&&p(e).unusedTokens.push(c);p(e).charsLeftOver=g-y,_.length>0&&p(e).unusedInput.push(_),e._a[3]<=12&&!0===p(e).bigHour&&e._a[3]>0&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[3]=(r=e._locale,n=e._a[3],null==(a=e._meridiem)?n:null!=r.meridiemHour?r.meridiemHour(n,a):(null!=r.isPM&&((o=r.isPM(a))&&n<12&&(n+=12),o||12!==n||(n=0)),n)),null!==(f=p(e).era)&&(e._a[0]=e._locale.erasConvertYear(f,e._a[0])),tr(e),e1(e)}function ta(e){var r,s=e._i,o=e._f;return(e._locale=e._locale||e0(e._l),null===s||void 0===o&&""===s)?_({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),M(s))?new w(e1(s)):(h(s)?e._d=s:n(o)?function(e){var i,r,n,a,s,o,l=!1,u=e._f.length;if(0===u){p(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<u;a++)s=0,o=!1,i=b({},e),null!=e._useUTC&&(i._useUTC=e._useUTC),i._f=e._f[a],tn(i),m(i)&&(o=!0),s+=p(i).charsLeftOver+10*p(i).unusedTokens.length,p(i).score=s,l?s<n&&(n=s,r=i):(null==n||s<n||o)&&(n=s,r=i,o&&(l=!0));d(e,r||i)}(e):o?tn(e):l(r=e._i)?e._d=new Date(i.now()):h(r)?e._d=new Date(r.valueOf()):"string"==typeof r?function(e){var r=e8.exec(e._i);if(null!==r){e._d=new Date(+r[1]);return}te(e),!1===e._isValid&&(delete e._isValid,tt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))}(e):n(r)?(e._a=c(r.slice(0),function(e){return parseInt(e,10)}),tr(e)):a(r)?function(e){if(!e._d){var i=N(e._i),r=void 0===i.day?i.date:i.day;e._a=c([i.year,i.month,r,i.hour,i.minute,i.second,i.millisecond],function(e){return e&&parseInt(e,10)}),tr(e)}}(e):u(r)?e._d=new Date(r):i.createFromInputFallback(e),m(e)||(e._d=null),e)}function ts(e,i,r,s,l){var u,h={};return(!0===i||!1===i)&&(s=i,i=void 0),(!0===r||!1===r)&&(s=r,r=void 0),(a(e)&&o(e)||n(e)&&0===e.length)&&(e=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=l,h._l=r,h._i=e,h._f=i,h._strict=s,(u=new w(e1(ta(h))))._nextDay&&(u.add(1,"d"),u._nextDay=void 0),u}function to(e,i,r,n){return ts(e,i,r,n,!1)}i.createFromInputFallback=L("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var tl=L("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=to.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),tu=L("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=to.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()});function th(e,i){var r,a;if(1===i.length&&n(i[0])&&(i=i[0]),!i.length)return to();for(a=1,r=i[0];a<i.length;++a)(!i[a].isValid()||i[a][e](r))&&(r=i[a]);return r}var tc=["year","quarter","month","week","day","hour","minute","second","millisecond"];function td(e){var i=N(e),r=i.year||0,n=i.quarter||0,a=i.month||0,o=i.week||i.isoWeek||0,l=i.day||0,u=i.hour||0,h=i.minute||0,c=i.second||0,d=i.millisecond||0;this._isValid=function(e){var i,r,n=!1,a=tc.length;for(i in e)if(s(e,i)&&!(-1!==eU.call(tc,i)&&(null==e[i]||!isNaN(e[i]))))return!1;for(r=0;r<a;++r)if(e[tc[r]]){if(n)return!1;parseFloat(e[tc[r]])!==ep(e[tc[r]])&&(n=!0)}return!0}(i),this._milliseconds=+d+1e3*c+6e4*h+36e5*u,this._days=+l+7*o,this._months=+a+3*n+12*r,this._data={},this._locale=e0(),this._bubble()}function tf(e){return e instanceof td}function tp(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function tm(e,i){R(e,0,0,function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+P(~~(e/60),2)+i+P(~~e%60,2)})}tm("Z",":"),tm("ZZ",""),ec("Z",eo),ec("ZZ",eo),e_(["Z","ZZ"],function(e,i,r){r._useUTC=!0,r._tzm=tg(eo,e)});var t_=/([\+\-]|\d\d)/gi;function tg(e,i){var r,n,a=(i||"").match(e);return null===a?null:0===(n=+(60*(r=((a[a.length-1]||[])+"").match(t_)||["-",0,0])[1])+ep(r[2]))?0:"+"===r[0]?n:-n}function ty(e,r){var n,a;return r._isUTC?(n=r.clone(),a=(M(e)||h(e)?e.valueOf():to(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+a),i.updateOffset(n,!1),n):to(e).local()}function tv(e){return-Math.round(e._d.getTimezoneOffset())}function tx(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var tb=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,tw=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function tM(e,i){var r,n,a,o,l,h,c=e,d=null;return tf(e)?c={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(c={},i?c[i]=+e:c.milliseconds=+e):(d=tb.exec(e))?(o="-"===d[1]?-1:1,c={y:0,d:ep(d[2])*o,h:ep(d[3])*o,m:ep(d[4])*o,s:ep(d[5])*o,ms:ep(tp(1e3*d[6]))*o}):(d=tw.exec(e))?(o="-"===d[1]?-1:1,c={y:tT(d[2],o),M:tT(d[3],o),w:tT(d[4],o),d:tT(d[5],o),h:tT(d[6],o),m:tT(d[7],o),s:tT(d[8],o)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(r=to(c.from),n=to(c.to),h=r.isValid()&&n.isValid()?(n=ty(n,r),r.isBefore(n)?a=tL(r,n):((a=tL(n,r)).milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0},(c={}).ms=h.milliseconds,c.M=h.months),l=new td(c),tf(e)&&s(e,"_locale")&&(l._locale=e._locale),tf(e)&&s(e,"_isValid")&&(l._isValid=e._isValid),l}function tT(e,i){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*i}function tL(e,i){var r={};return r.months=i.month()-e.month()+(i.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(i)&&--r.months,r.milliseconds=+i-+e.clone().add(r.months,"M"),r}function tS(e,i){return function(r,n){var a;return null===n||isNaN(+n)||(k(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=r,r=n,n=a),tk(this,tM(r,n),e),this}}function tk(e,r,n,a){var s=r._milliseconds,o=tp(r._days),l=tp(r._months);e.isValid()&&(a=null==a||a,l&&eD(e,ew(e,"Month")+l*n),o&&eM(e,"Date",ew(e,"Date")+o*n),s&&e._d.setTime(e._d.valueOf()+s*n),a&&i.updateOffset(e,o||l))}tM.fn=td.prototype,tM.invalid=function(){return tM(NaN)};var tD=tS(1,"add"),tE=tS(-1,"subtract");function tA(e){return"string"==typeof e||e instanceof String}function tP(e,i){if(e.date()<i.date())return-tP(i,e);var r,n=(i.year()-e.year())*12+(i.month()-e.month()),a=e.clone().add(n,"months");return r=i-a<0?(i-a)/(a-e.clone().add(n-1,"months")):(i-a)/(e.clone().add(n+1,"months")-a),-(n+r)||0}function tC(e){var i;return void 0===e?this._locale._abbr:(null!=(i=e0(e))&&(this._locale=i),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tI=L("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function tO(){return this._locale}function tz(e,i,r){return e<100&&e>=0?new Date(e+400,i,r)-126227808e5:new Date(e,i,r).valueOf()}function tR(e,i,r){return e<100&&e>=0?Date.UTC(e+400,i,r)-126227808e5:Date.UTC(e,i,r)}function tY(e,i){return i.erasAbbrRegex(e)}function tF(){var e,i,r,n,a,s=[],o=[],l=[],u=[],h=this.eras();for(e=0,i=h.length;e<i;++e)r=ed(h[e].name),n=ed(h[e].abbr),a=ed(h[e].narrow),o.push(r),s.push(n),l.push(a),u.push(r),u.push(n),u.push(a);this._erasRegex=RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=RegExp("^("+l.join("|")+")","i")}function tj(e,i){R(0,[e,e.length],0,i)}function tB(e,i,r,n,a){var s;return null==e?ez(this,n,a).year:(i>(s=eR(e,n,a))&&(i=s),tN.call(this,e,i,r,n,a))}function tN(e,i,r,n,a){var s=eO(e,i,r,n,a),o=eC(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}R("N",0,0,"eraAbbr"),R("NN",0,0,"eraAbbr"),R("NNN",0,0,"eraAbbr"),R("NNNN",0,0,"eraName"),R("NNNNN",0,0,"eraNarrow"),R("y",["y",1],"yo","eraYear"),R("y",["yy",2],0,"eraYear"),R("y",["yyy",3],0,"eraYear"),R("y",["yyyy",4],0,"eraYear"),ec("N",tY),ec("NN",tY),ec("NNN",tY),ec("NNNN",function(e,i){return i.erasNameRegex(e)}),ec("NNNNN",function(e,i){return i.erasNarrowRegex(e)}),e_(["N","NN","NNN","NNNN","NNNNN"],function(e,i,r,n){var a=r._locale.erasParse(e,n,r._strict);a?p(r).era=a:p(r).invalidEra=e}),ec("y",en),ec("yy",en),ec("yyy",en),ec("yyyy",en),ec("yo",function(e,i){return i._eraYearOrdinalRegex||en}),e_(["y","yy","yyy","yyyy"],0),e_(["yo"],function(e,i,r,n){var a;r._locale._eraYearOrdinalRegex&&(a=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?i[0]=r._locale.eraYearOrdinalParse(e,a):i[0]=parseInt(e,10)}),R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100}),tj("gggg","weekYear"),tj("ggggg","weekYear"),tj("GGGG","isoWeekYear"),tj("GGGGG","isoWeekYear"),ec("G",ea),ec("g",ea),ec("GG",K,q),ec("gg",K,q),ec("GGGG",ei,X),ec("gggg",ei,X),ec("GGGGG",er,J),ec("ggggg",er,J),eg(["gggg","ggggg","GGGG","GGGGG"],function(e,i,r,n){i[n.substr(0,2)]=ep(e)}),eg(["gg","GG"],function(e,r,n,a){r[a]=i.parseTwoDigitYear(e)}),R("Q",0,"Qo","quarter"),ec("Q",G),e_("Q",function(e,i){i[1]=(ep(e)-1)*3}),R("D",["DD",2],"Do","date"),ec("D",K,eu),ec("DD",K,q),ec("Do",function(e,i){return e?i._dayOfMonthOrdinalParse||i._ordinalParse:i._dayOfMonthOrdinalParseLenient}),e_(["D","DD"],2),e_("Do",function(e,i){i[2]=ep(e.match(K)[0])});var tH=eb("Date",!0);R("DDD",["DDDD",3],"DDDo","dayOfYear"),ec("DDD",et),ec("DDDD",Z),e_(["DDD","DDDD"],function(e,i,r){r._dayOfYear=ep(e)}),R("m",["mm",2],0,"minute"),ec("m",K,eh),ec("mm",K,q),e_(["m","mm"],4);var tV=eb("Minutes",!1);R("s",["ss",2],0,"second"),ec("s",K,eh),ec("ss",K,q),e_(["s","ss"],5);var tU=eb("Seconds",!1);for(R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return 10*this.millisecond()}),R(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),R(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),R(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),R(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),R(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),ec("S",et,G),ec("SS",et,q),ec("SSS",et,Z),g="SSSS";g.length<=9;g+="S")ec(g,en);function t$(e,i){i[6]=ep(("0."+e)*1e3)}for(g="S";g.length<=9;g+="S")e_(g,t$);y=eb("Milliseconds",!1),R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var tW=w.prototype;function tG(e){return e}tW.add=tD,tW.calendar=function(e,r){if(1==arguments.length){if(arguments[0]){var l,c,d;(l=arguments[0],M(l)||h(l)||tA(l)||u(l)||(c=n(l),d=!1,c&&(d=0===l.filter(function(e){return!u(e)&&tA(l)}).length),c&&d)||function(e){var i,r,n=a(e)&&!o(e),l=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],h=u.length;for(i=0;i<h;i+=1)r=u[i],l=l||s(e,r);return n&&l}(l)||null==l)?(e=arguments[0],r=void 0):function(e){var i,r,n=a(e)&&!o(e),l=!1,u=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(i=0;i<u.length;i+=1)r=u[i],l=l||s(e,r);return n&&l}(arguments[0])&&(r=arguments[0],e=void 0)}else e=void 0,r=void 0}var f=e||to(),p=ty(f,this).startOf("day"),m=i.calendarFormat(this,p)||"sameElse",_=r&&(D(r[m])?r[m].call(this,f):r[m]);return this.format(_||this.localeData().calendar(m,this,to(f)))},tW.clone=function(){return new w(this)},tW.diff=function(e,i,r){var n,a,s;if(!this.isValid()||!(n=ty(e,this)).isValid())return NaN;switch(a=(n.utcOffset()-this.utcOffset())*6e4,i=B(i)){case"year":s=tP(this,n)/12;break;case"month":s=tP(this,n);break;case"quarter":s=tP(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-a)/864e5;break;case"week":s=(this-n-a)/6048e5;break;default:s=this-n}return r?s:ef(s)},tW.endOf=function(e){var r,n;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?tR:tz,e){case"year":r=n(this.year()+1,0,1)-1;break;case"quarter":r=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=n(this.year(),this.month()+1,1)-1;break;case"week":r=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=36e5-((r+(this._isUTC?0:6e4*this.utcOffset()))%36e5+36e5)%36e5-1;break;case"minute":r=this._d.valueOf(),r+=6e4-(r%6e4+6e4)%6e4-1;break;case"second":r=this._d.valueOf(),r+=1e3-(r%1e3+1e3)%1e3-1}return this._d.setTime(r),i.updateOffset(this,!0),this},tW.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var r=Y(this,e);return this.localeData().postformat(r)},tW.from=function(e,i){return this.isValid()&&(M(e)&&e.isValid()||to(e).isValid())?tM({to:this,from:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()},tW.fromNow=function(e){return this.from(to(),e)},tW.to=function(e,i){return this.isValid()&&(M(e)&&e.isValid()||to(e).isValid())?tM({from:this,to:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()},tW.toNow=function(e){return this.to(to(),e)},tW.get=function(e){return D(this[e=B(e)])?this[e]():this},tW.invalidAt=function(){return p(this).overflow},tW.isAfter=function(e,i){var r=M(e)?e:to(e);return!!(this.isValid()&&r.isValid())&&("millisecond"===(i=B(i)||"millisecond")?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(i).valueOf())},tW.isBefore=function(e,i){var r=M(e)?e:to(e);return!!(this.isValid()&&r.isValid())&&("millisecond"===(i=B(i)||"millisecond")?this.valueOf()<r.valueOf():this.clone().endOf(i).valueOf()<r.valueOf())},tW.isBetween=function(e,i,r,n){var a=M(e)?e:to(e),s=M(i)?i:to(i);return!!(this.isValid()&&a.isValid()&&s.isValid())&&("("===(n=n||"()")[0]?this.isAfter(a,r):!this.isBefore(a,r))&&(")"===n[1]?this.isBefore(s,r):!this.isAfter(s,r))},tW.isSame=function(e,i){var r,n=M(e)?e:to(e);return!!(this.isValid()&&n.isValid())&&("millisecond"===(i=B(i)||"millisecond")?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(i).valueOf()<=r&&r<=this.clone().endOf(i).valueOf()))},tW.isSameOrAfter=function(e,i){return this.isSame(e,i)||this.isAfter(e,i)},tW.isSameOrBefore=function(e,i){return this.isSame(e,i)||this.isBefore(e,i)},tW.isValid=function(){return m(this)},tW.lang=tI,tW.locale=tC,tW.localeData=tO,tW.max=tu,tW.min=tl,tW.parsingFlags=function(){return d({},p(this))},tW.set=function(e,i){if("object"==typeof e){var r,n=function(e){var i,r=[];for(i in e)s(e,i)&&r.push({unit:i,priority:W[i]});return r.sort(function(e,i){return e.priority-i.priority}),r}(e=N(e)),a=n.length;for(r=0;r<a;r++)this[n[r].unit](e[n[r].unit])}else if(D(this[e=B(e)]))return this[e](i);return this},tW.startOf=function(e){var r,n;if(void 0===(e=B(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?tR:tz,e){case"year":r=n(this.year(),0,1);break;case"quarter":r=n(this.year(),this.month()-this.month()%3,1);break;case"month":r=n(this.year(),this.month(),1);break;case"week":r=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=n(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=((r+(this._isUTC?0:6e4*this.utcOffset()))%36e5+36e5)%36e5;break;case"minute":r=this._d.valueOf(),r-=(r%6e4+6e4)%6e4;break;case"second":r=this._d.valueOf(),r-=(r%1e3+1e3)%1e3}return this._d.setTime(r),i.updateOffset(this,!0),this},tW.subtract=tE,tW.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},tW.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},tW.toDate=function(){return new Date(this.valueOf())},tW.toISOString=function(e){if(!this.isValid())return null;var i=!0!==e,r=i?this.clone().utc():this;return 0>r.year()||r.year()>9999?Y(r,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?i?this.toDate().toISOString():new Date(this.valueOf()+6e4*this.utcOffset()).toISOString().replace("Z",Y(r,"Z")):Y(r,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},tW.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,i,r,n="moment",a="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+n+'("]',i=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",r=a+'[")]',this.format(e+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(tW[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),tW.toJSON=function(){return this.isValid()?this.toISOString():null},tW.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},tW.unix=function(){return Math.floor(this.valueOf()/1e3)},tW.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},tW.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},tW.eraName=function(){var e,i,r,n=this.localeData().eras();for(e=0,i=n.length;e<i;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""},tW.eraNarrow=function(){var e,i,r,n=this.localeData().eras();for(e=0,i=n.length;e<i;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""},tW.eraAbbr=function(){var e,i,r,n=this.localeData().eras();for(e=0,i=n.length;e<i;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""},tW.eraYear=function(){var e,r,n,a,s=this.localeData().eras();for(e=0,r=s.length;e<r;++e)if(n=s[e].since<=s[e].until?1:-1,a=this.clone().startOf("day").valueOf(),s[e].since<=a&&a<=s[e].until||s[e].until<=a&&a<=s[e].since)return(this.year()-i(s[e].since).year())*n+s[e].offset;return this.year()},tW.year=ex,tW.isLeapYear=function(){return ey(this.year())},tW.weekYear=function(e){return tB.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},tW.isoWeekYear=function(e){return tB.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},tW.quarter=tW.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},tW.month=eE,tW.daysInMonth=function(){return eT(this.year(),this.month())},tW.week=tW.weeks=function(e){var i=this.localeData().week(this);return null==e?i:this.add((e-i)*7,"d")},tW.isoWeek=tW.isoWeeks=function(e){var i=ez(this,1,4).week;return null==e?i:this.add((e-i)*7,"d")},tW.weeksInYear=function(){var e=this.localeData()._week;return eR(this.year(),e.dow,e.doy)},tW.weeksInWeekYear=function(){var e=this.localeData()._week;return eR(this.weekYear(),e.dow,e.doy)},tW.isoWeeksInYear=function(){return eR(this.year(),1,4)},tW.isoWeeksInISOWeekYear=function(){return eR(this.isoWeekYear(),1,4)},tW.date=tH,tW.day=tW.days=function(e){if(!this.isValid())return null!=e?this:NaN;var i,r,n=ew(this,"Day");return null==e?n:(i=e,r=this.localeData(),e="string"!=typeof i?i:isNaN(i)?"number"==typeof(i=r.weekdaysParse(i))?i:null:parseInt(i,10),this.add(e-n,"d"))},tW.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var i=(this.day()+7-this.localeData()._week.dow)%7;return null==e?i:this.add(e-i,"d")},tW.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var i,r=(i=this.localeData(),"string"==typeof e?i.weekdaysParse(e)%7||7:isNaN(e)?null:e);return this.day(this.day()%7?r:r-7)},tW.dayOfYear=function(e){var i=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?i:this.add(e-i,"d")},tW.hour=tW.hours=eW,tW.minute=tW.minutes=tV,tW.second=tW.seconds=tU,tW.millisecond=tW.milliseconds=y,tW.utcOffset=function(e,r,n){var a,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?s:tv(this);if("string"==typeof e){if(null===(e=tg(eo,e)))return this}else 16>Math.abs(e)&&!n&&(e*=60);return!this._isUTC&&r&&(a=tv(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),s===e||(!r||this._changeInProgress?tk(this,tM(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this},tW.utc=function(e){return this.utcOffset(0,e)},tW.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(tv(this),"m")),this},tW.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=tg(es,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},tW.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?to(e).utcOffset():0,(this.utcOffset()-e)%60==0)},tW.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},tW.isLocal=function(){return!!this.isValid()&&!this._isUTC},tW.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},tW.isUtc=tx,tW.isUTC=tx,tW.zoneAbbr=function(){return this._isUTC?"UTC":""},tW.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},tW.dates=L("dates accessor is deprecated. Use date instead.",tH),tW.months=L("months accessor is deprecated. Use month instead",eE),tW.years=L("years accessor is deprecated. Use year instead",ex),tW.zone=L("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,i){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,i),this):-this.utcOffset()}),tW.isDSTShifted=L("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,i={};return b(i,this),(i=ta(i))._a?(e=i._isUTC?f(i._a):to(i._a),this._isDSTShifted=this.isValid()&&function(e,i,r){var n,a=Math.min(e.length,i.length),s=Math.abs(e.length-i.length),o=0;for(n=0;n<a;n++)(r&&e[n]!==i[n]||!r&&ep(e[n])!==ep(i[n]))&&o++;return o+s}(i._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var tq=A.prototype;function tZ(e,i,r,n){var a=e0(),s=f().set(n,i);return a[r](s,e)}function tX(e,i,r){if(u(e)&&(i=e,e=void 0),e=e||"",null!=i)return tZ(e,i,r,"month");var n,a=[];for(n=0;n<12;n++)a[n]=tZ(e,n,r,"month");return a}function tJ(e,i,r,n){"boolean"==typeof e||(r=i=e,e=!1),u(i)&&(r=i,i=void 0),i=i||"";var a,s=e0(),o=e?s._week.dow:0,l=[];if(null!=r)return tZ(i,(r+o)%7,n,"day");for(a=0;a<7;a++)l[a]=tZ(i,(a+o)%7,n,"day");return l}tq.calendar=function(e,i,r){var n=this._calendar[e]||this._calendar.sameElse;return D(n)?n.call(i,r):n},tq.longDateFormat=function(e){var i=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return i||!r?i:(this._longDateFormat[e]=r.match(C).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},tq.invalidDate=function(){return this._invalidDate},tq.ordinal=function(e){return this._ordinal.replace("%d",e)},tq.preparse=tG,tq.postformat=tG,tq.relativeTime=function(e,i,r,n){var a=this._relativeTime[r];return D(a)?a(e,i,r,n):a.replace(/%d/i,e)},tq.pastFuture=function(e,i){var r=this._relativeTime[e>0?"future":"past"];return D(r)?r(i):r.replace(/%s/i,i)},tq.set=function(e){var i,r;for(r in e)s(e,r)&&(D(i=e[r])?this[r]=i:this["_"+r]=i);this._config=e,this._dayOfMonthOrdinalParseLenient=RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},tq.eras=function(e,r){var n,a,s,o=this._eras||e0("en")._eras;for(n=0,a=o.length;n<a;++n)switch("string"==typeof o[n].since&&(s=i(o[n].since).startOf("day"),o[n].since=s.valueOf()),typeof o[n].until){case"undefined":o[n].until=Infinity;break;case"string":s=i(o[n].until).startOf("day").valueOf(),o[n].until=s.valueOf()}return o},tq.erasParse=function(e,i,r){var n,a,s,o,l,u=this.eras();for(n=0,e=e.toUpperCase(),a=u.length;n<a;++n)if(s=u[n].name.toUpperCase(),o=u[n].abbr.toUpperCase(),l=u[n].narrow.toUpperCase(),r)switch(i){case"N":case"NN":case"NNN":if(o===e)return u[n];break;case"NNNN":if(s===e)return u[n];break;case"NNNNN":if(l===e)return u[n]}else if([s,o,l].indexOf(e)>=0)return u[n]},tq.erasConvertYear=function(e,r){var n=e.since<=e.until?1:-1;return void 0===r?i(e.since).year():i(e.since).year()+(r-e.offset)*n},tq.erasAbbrRegex=function(e){return s(this,"_erasAbbrRegex")||tF.call(this),e?this._erasAbbrRegex:this._erasRegex},tq.erasNameRegex=function(e){return s(this,"_erasNameRegex")||tF.call(this),e?this._erasNameRegex:this._erasRegex},tq.erasNarrowRegex=function(e){return s(this,"_erasNarrowRegex")||tF.call(this),e?this._erasNarrowRegex:this._erasRegex},tq.months=function(e,i){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||eS).test(i)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone},tq.monthsShort=function(e,i){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[eS.test(i)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},tq.monthsParse=function(e,i,r){var n,a,s;if(this._monthsParseExact)return ek.call(this,e,i,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++)if(a=f([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(s="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=RegExp(s.replace(".",""),"i")),r&&"MMMM"===i&&this._longMonthsParse[n].test(e)||r&&"MMM"===i&&this._shortMonthsParse[n].test(e)||!r&&this._monthsParse[n].test(e))return n},tq.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||eA.call(this),e)?this._monthsStrictRegex:this._monthsRegex:(s(this,"_monthsRegex")||(this._monthsRegex=el),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},tq.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||eA.call(this),e)?this._monthsShortStrictRegex:this._monthsShortRegex:(s(this,"_monthsShortRegex")||(this._monthsShortRegex=el),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},tq.week=function(e){return ez(e,this._week.dow,this._week.doy).week},tq.firstDayOfYear=function(){return this._week.doy},tq.firstDayOfWeek=function(){return this._week.dow},tq.weekdays=function(e,i){var r=n(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(i)?"format":"standalone"];return!0===e?eY(r,this._week.dow):e?r[e.day()]:r},tq.weekdaysMin=function(e){return!0===e?eY(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},tq.weekdaysShort=function(e){return!0===e?eY(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},tq.weekdaysParse=function(e,i,r){var n,a,s;if(this._weekdaysParseExact)return ej.call(this,e,i,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=f([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=RegExp(s.replace(".",""),"i")),r&&"dddd"===i&&this._fullWeekdaysParse[n].test(e)||r&&"ddd"===i&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===i&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}},tq.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||eB.call(this),e)?this._weekdaysStrictRegex:this._weekdaysRegex:(s(this,"_weekdaysRegex")||(this._weekdaysRegex=el),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},tq.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||eB.call(this),e)?this._weekdaysShortStrictRegex:this._weekdaysShortRegex:(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=el),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},tq.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||eB.call(this),e)?this._weekdaysMinStrictRegex:this._weekdaysMinRegex:(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=el),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},tq.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},tq.meridiem=function(e,i,r){return e>11?r?"pm":"PM":r?"am":"AM"},eK("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var i=e%10,r=1===ep(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th";return e+r}}),i.lang=L("moment.lang is deprecated. Use moment.locale instead.",eK),i.langData=L("moment.langData is deprecated. Use moment.localeData instead.",e0);var tK=Math.abs;function tQ(e,i,r,n){var a=tM(i,r);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function t0(e){return e<0?Math.floor(e):Math.ceil(e)}function t1(e){return 4800*e/146097}function t2(e){return 146097*e/4800}function t3(e){return function(){return this.as(e)}}var t4=t3("ms"),t5=t3("s"),t6=t3("m"),t8=t3("h"),t7=t3("d"),t9=t3("w"),ie=t3("M"),it=t3("Q"),ii=t3("y");function ir(e){return function(){return this.isValid()?this._data[e]:NaN}}var ia=ir("milliseconds"),is=ir("seconds"),io=ir("minutes"),il=ir("hours"),iu=ir("days"),ih=ir("months"),ic=ir("years"),id=Math.round,ip={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function im(e,i,r,n,a){return a.relativeTime(i||1,!!r,e,n)}var i_=Math.abs;function ig(e){return(e>0)-(e<0)||+e}function iy(){if(!this.isValid())return this.localeData().invalidDate();var e,i,r,n,a,s,o,l,u=i_(this._milliseconds)/1e3,h=i_(this._days),c=i_(this._months),d=this.asSeconds();return d?(e=ef(u/60),i=ef(e/60),u%=60,e%=60,r=ef(c/12),c%=12,n=u?u.toFixed(3).replace(/\.?0+$/,""):"",a=d<0?"-":"",s=ig(this._months)!==ig(d)?"-":"",o=ig(this._days)!==ig(d)?"-":"",l=ig(this._milliseconds)!==ig(d)?"-":"",a+"P"+(r?s+r+"Y":"")+(c?s+c+"M":"")+(h?o+h+"D":"")+(i||e||u?"T":"")+(i?l+i+"H":"")+(e?l+e+"M":"")+(u?l+n+"S":"")):"P0D"}var iv=td.prototype;return iv.isValid=function(){return this._isValid},iv.abs=function(){var e=this._data;return this._milliseconds=tK(this._milliseconds),this._days=tK(this._days),this._months=tK(this._months),e.milliseconds=tK(e.milliseconds),e.seconds=tK(e.seconds),e.minutes=tK(e.minutes),e.hours=tK(e.hours),e.months=tK(e.months),e.years=tK(e.years),this},iv.add=function(e,i){return tQ(this,e,i,1)},iv.subtract=function(e,i){return tQ(this,e,i,-1)},iv.as=function(e){if(!this.isValid())return NaN;var i,r,n=this._milliseconds;if("month"===(e=B(e))||"quarter"===e||"year"===e)switch(i=this._days+n/864e5,r=this._months+t1(i),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(i=this._days+Math.round(t2(this._months)),e){case"week":return i/7+n/6048e5;case"day":return i+n/864e5;case"hour":return 24*i+n/36e5;case"minute":return 1440*i+n/6e4;case"second":return 86400*i+n/1e3;case"millisecond":return Math.floor(864e5*i)+n;default:throw Error("Unknown unit "+e)}},iv.asMilliseconds=t4,iv.asSeconds=t5,iv.asMinutes=t6,iv.asHours=t8,iv.asDays=t7,iv.asWeeks=t9,iv.asMonths=ie,iv.asQuarters=it,iv.asYears=ii,iv.valueOf=t4,iv._bubble=function(){var e,i,r,n,a,s=this._milliseconds,o=this._days,l=this._months,u=this._data;return s>=0&&o>=0&&l>=0||s<=0&&o<=0&&l<=0||(s+=864e5*t0(t2(l)+o),o=0,l=0),u.milliseconds=s%1e3,e=ef(s/1e3),u.seconds=e%60,i=ef(e/60),u.minutes=i%60,r=ef(i/60),u.hours=r%24,o+=ef(r/24),l+=a=ef(t1(o)),o-=t0(t2(a)),n=ef(l/12),l%=12,u.days=o,u.months=l,u.years=n,this},iv.clone=function(){return tM(this)},iv.get=function(e){return e=B(e),this.isValid()?this[e+"s"]():NaN},iv.milliseconds=ia,iv.seconds=is,iv.minutes=io,iv.hours=il,iv.days=iu,iv.weeks=function(){return ef(this.days()/7)},iv.months=ih,iv.years=ic,iv.humanize=function(e,i){if(!this.isValid())return this.localeData().invalidDate();var r,n,a,s,o,l,u,h,c,d,f,p,m,_=!1,g=ip;return"object"==typeof e&&(i=e,e=!1),"boolean"==typeof e&&(_=e),"object"==typeof i&&(g=Object.assign({},ip,i),null!=i.s&&null==i.ss&&(g.ss=i.s-1)),p=this.localeData(),r=!_,n=g,a=tM(this).abs(),s=id(a.as("s")),o=id(a.as("m")),l=id(a.as("h")),u=id(a.as("d")),h=id(a.as("M")),c=id(a.as("w")),d=id(a.as("y")),f=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||l<=1&&["h"]||l<n.h&&["hh",l]||u<=1&&["d"]||u<n.d&&["dd",u],null!=n.w&&(f=f||c<=1&&["w"]||c<n.w&&["ww",c]),(f=f||h<=1&&["M"]||h<n.M&&["MM",h]||d<=1&&["y"]||["yy",d])[2]=r,f[3]=+this>0,f[4]=p,m=im.apply(null,f),_&&(m=p.pastFuture(+this,m)),p.postformat(m)},iv.toISOString=iy,iv.toString=iy,iv.toJSON=iy,iv.locale=tC,iv.localeData=tO,iv.toIsoString=L("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iy),iv.lang=tI,R("X",0,0,"unix"),R("x",0,0,"valueOf"),ec("x",ea),ec("X",/[+-]?\d+(\.\d{1,3})?/),e_("X",function(e,i,r){r._d=new Date(1e3*parseFloat(e))}),e_("x",function(e,i,r){r._d=new Date(ep(e))}),i.version="2.30.1",H=to,i.fn=tW,i.min=function(){var e=[].slice.call(arguments,0);return th("isBefore",e)},i.max=function(){var e=[].slice.call(arguments,0);return th("isAfter",e)},i.now=function(){return Date.now?Date.now():+new Date},i.utc=f,i.unix=function(e){return to(1e3*e)},i.months=function(e,i){return tX(e,i,"months")},i.isDate=h,i.locale=eK,i.invalid=_,i.duration=tM,i.isMoment=M,i.weekdays=function(e,i,r){return tJ(e,i,r,"weekdays")},i.parseZone=function(){return to.apply(null,arguments).parseZone()},i.localeData=e0,i.isDuration=tf,i.monthsShort=function(e,i){return tX(e,i,"monthsShort")},i.weekdaysMin=function(e,i,r){return tJ(e,i,r,"weekdaysMin")},i.defineLocale=eQ,i.updateLocale=function(e,i){if(null!=i){var r,n,a=eG;null!=eq[e]&&null!=eq[e].parentLocale?eq[e].set(E(eq[e]._config,i)):(null!=(n=eJ(e))&&(a=n._config),i=E(a,i),null==n&&(i.abbr=e),(r=new A(i)).parentLocale=eq[e],eq[e]=r),eK(e)}else null!=eq[e]&&(null!=eq[e].parentLocale?(eq[e]=eq[e].parentLocale,e===eK()&&eK(e)):null!=eq[e]&&delete eq[e]);return eq[e]},i.locales=function(){return U(eq)},i.weekdaysShort=function(e,i,r){return tJ(e,i,r,"weekdaysShort")},i.normalizeUnits=B,i.relativeTimeRounding=function(e){return void 0===e?id:"function"==typeof e&&(id=e,!0)},i.relativeTimeThreshold=function(e,i){return void 0!==ip[e]&&(void 0===i?ip[e]:(ip[e]=i,"s"===e&&(ip.ss=i-1),!0))},i.calendarFormat=function(e,i){var r=e.diff(i,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},i.prototype=tW,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},4448:(e,i,r)=>{"use strict";var n,a,s,o,l,u,h=r(7294),c=r(3840);function d(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,p={};function m(e,i){_(e,i),_(e+"Capture",i)}function _(e,i){for(p[e]=i,e=0;e<i.length;e++)f.add(i[e])}var g=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},b={};function w(e,i,r,n,a,s,o){this.acceptsBooleans=2===i||3===i||4===i,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=i,this.sanitizeURL=s,this.removeEmptyString=o}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){M[e]=new w(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];M[i]=new w(i,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){M[e]=new w(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){M[e]=new w(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){M[e]=new w(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){M[e]=new w(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){M[e]=new w(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){M[e]=new w(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){M[e]=new w(e,5,!1,e.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}function S(e,i,r,n){var a,s=M.hasOwnProperty(i)?M[i]:null;(null!==s?0!==s.type:n||!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&(function(e,i,r,n){if(null==i||function(e,i,r,n){if(null!==r&&0===r.type)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":if(n)return!1;if(null!==r)return!r.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,i,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!i;case 4:return!1===i;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}(i,r,s,n)&&(r=null),n||null===s?(a=i,(!!y.call(b,a)||!y.call(x,a)&&(v.test(a)?b[a]=!0:(x[a]=!0,!1)))&&(null===r?e.removeAttribute(i):e.setAttribute(i,""+r))):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(i=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(i):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,i,r):e.setAttribute(i,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(T,L);M[i]=new w(i,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(T,L);M[i]=new w(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(T,L);M[i]=new w(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){M[e]=new w(e,1,!1,e.toLowerCase(),null,!1,!1)}),M.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){M[e]=new w(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),O=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var B=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=N&&e[N]||e["@@iterator"])?e:null}var V,U=Object.assign;function $(e){if(void 0===V)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);V=r&&r[1]||""}return"\n"+V+e}var W=!1;function G(e,i){if(!e||W)return"";W=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i){if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(r){var n=r}Reflect.construct(e,[],i)}else{try{i.call()}catch(r){n=r}e.call(i.prototype)}}else{try{throw Error()}catch(i){n=i}e()}}catch(a){if(a&&n&&"string"==typeof a.stack){for(var s=a.stack.split("\n"),o=n.stack.split("\n"),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(1!==l||1!==u)do if(l--,0>--u||s[l]!==o[u]){var h="\n"+s[l].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=l&&0<=u)break}}}finally{W=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$(e):""}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Z(e){var i=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===i||"radio"===i)}function X(e){e._valueTracker||(e._valueTracker=function(e){var i=Z(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),n=""+e[i];if(!e.hasOwnProperty(i)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,i,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}(e))}function J(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var r=i.getValue(),n="";return e&&(n=Z(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(i.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(i){return e.body}}function Q(e,i){var r=i.checked;return U({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,i){var r=null==i.defaultValue?"":i.defaultValue,n=null!=i.checked?i.checked:i.defaultChecked;r=q(null!=i.value?i.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===i.type||"radio"===i.type?null!=i.checked:null!=i.value}}function et(e,i){null!=(i=i.checked)&&S(e,"checked",i,!1)}function ei(e,i){et(e,i);var r=q(i.value),n=i.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n){e.removeAttribute("value");return}i.hasOwnProperty("value")?en(e,i.type,r):i.hasOwnProperty("defaultValue")&&en(e,i.type,q(i.defaultValue)),null==i.checked&&null!=i.defaultChecked&&(e.defaultChecked=!!i.defaultChecked)}function er(e,i,r){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var n=i.type;if(!("submit"!==n&&"reset"!==n||void 0!==i.value&&null!==i.value))return;i=""+e._wrapperState.initialValue,r||i===e.value||(e.value=i),e.defaultValue=i}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function en(e,i,r){("number"!==i||K(e.ownerDocument)!==e)&&(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ea=Array.isArray;function es(e,i,r,n){if(e=e.options,i){i={};for(var a=0;a<r.length;a++)i["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=i.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(a=0,r=""+q(r),i=null;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}null!==i||e[a].disabled||(i=e[a])}null!==i&&(i.selected=!0)}}function eo(e,i){if(null!=i.dangerouslySetInnerHTML)throw Error(d(91));return U({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function el(e,i){var r=i.value;if(null==r){if(r=i.children,i=i.defaultValue,null!=r){if(null!=i)throw Error(d(92));if(ea(r)){if(1<r.length)throw Error(d(93));r=r[0]}i=r}null==i&&(i=""),r=i}e._wrapperState={initialValue:q(r)}}function eu(e,i){var r=q(i.value),n=q(i.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==i.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function eh(e){var i=e.textContent;i===e._wrapperState.initialValue&&""!==i&&null!==i&&(e.value=i)}function ec(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ed(e,i){return null==e||"http://www.w3.org/1999/xhtml"===e?ec(i):"http://www.w3.org/2000/svg"===e&&"foreignObject"===i?"http://www.w3.org/1999/xhtml":e}var ef,ep=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(i,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(i,r,n,a)})}:e}(function(e,i){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=i;else{for((ef=ef||document.createElement("div")).innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ef.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function em(e,i){if(i){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType){r.nodeValue=i;return}}e.textContent=i}var e_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eg=["Webkit","ms","Moz","O"];function ey(e,i,r){return null==i||"boolean"==typeof i||""===i?"":r||"number"!=typeof i||0===i||e_.hasOwnProperty(e)&&e_[e]?(""+i).trim():i+"px"}function ev(e,i){for(var r in e=e.style,i)if(i.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=ey(r,i[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(e_).forEach(function(e){eg.forEach(function(i){e_[i=i+e.charAt(0).toUpperCase()+e.substring(1)]=e_[e]})});var ex=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eb(e,i){if(i){if(ex[e]&&(null!=i.children||null!=i.dangerouslySetInnerHTML))throw Error(d(137,e));if(null!=i.dangerouslySetInnerHTML){if(null!=i.children)throw Error(d(60));if("object"!=typeof i.dangerouslySetInnerHTML||!("__html"in i.dangerouslySetInnerHTML))throw Error(d(61))}if(null!=i.style&&"object"!=typeof i.style)throw Error(d(62))}}function ew(e,i){if(-1===e.indexOf("-"))return"string"==typeof i.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eM=null;function eT(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var eL=null,eS=null,ek=null;function eD(e){if(e=rj(e)){if("function"!=typeof eL)throw Error(d(280));var i=e.stateNode;i&&(i=rN(i),eL(e.stateNode,e.type,i))}}function eE(e){eS?ek?ek.push(e):ek=[e]:eS=e}function eA(){if(eS){var e=eS,i=ek;if(ek=eS=null,eD(e),i)for(e=0;e<i.length;e++)eD(i[e])}}function eP(e,i){return e(i)}function eC(){}var eI=!1;function eO(e,i,r){if(eI)return e(i,r);eI=!0;try{return eP(e,i,r)}finally{eI=!1,(null!==eS||null!==ek)&&(eC(),eA())}}function ez(e,i){var r=e.stateNode;if(null===r)return null;var n=rN(r);if(null===n)return null;switch(r=n[i],i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(d(231,i,typeof r));return r}var eR=!1;if(g)try{var eY={};Object.defineProperty(eY,"passive",{get:function(){eR=!0}}),window.addEventListener("test",eY,eY),window.removeEventListener("test",eY,eY)}catch(eF){eR=!1}function ej(e,i,r,n,a,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{i.apply(r,h)}catch(c){this.onError(c)}}var eB=!1,eN=null,eH=!1,eV=null,eU={onError:function(e){eB=!0,eN=e}};function e$(e,i,r,n,a,s,o,l,u){eB=!1,eN=null,ej.apply(eU,arguments)}function eW(e){var i=e,r=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do 0!=(4098&(i=e).flags)&&(r=i.return),e=i.return;while(e)}return 3===i.tag?r:null}function eG(e){if(13===e.tag){var i=e.memoizedState;if(null===i&&null!==(e=e.alternate)&&(i=e.memoizedState),null!==i)return i.dehydrated}return null}function eq(e){if(eW(e)!==e)throw Error(d(188))}function eZ(e){return null!==(e=function(e){var i=e.alternate;if(!i){if(null===(i=eW(e)))throw Error(d(188));return i!==e?null:e}for(var r=e,n=i;;){var a=r.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(n=a.return)){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return eq(a),e;if(s===n)return eq(a),i;s=s.sibling}throw Error(d(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(d(189))}}if(r.alternate!==n)throw Error(d(190))}if(3!==r.tag)throw Error(d(188));return r.stateNode.current===r?e:i}(e))?function e(i){if(5===i.tag||6===i.tag)return i;for(i=i.child;null!==i;){var r=e(i);if(null!==r)return r;i=i.sibling}return null}(e):null}var eX=c.unstable_scheduleCallback,eJ=c.unstable_cancelCallback,eK=c.unstable_shouldYield,eQ=c.unstable_requestPaint,e0=c.unstable_now,e1=c.unstable_getCurrentPriorityLevel,e2=c.unstable_ImmediatePriority,e3=c.unstable_UserBlockingPriority,e4=c.unstable_NormalPriority,e5=c.unstable_LowPriority,e6=c.unstable_IdlePriority,e8=null,e7=null,e9=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(te(e)/tt|0)|0},te=Math.log,tt=Math.LN2,ti=64,tr=4194304;function tn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ta(e,i){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,o=268435455&r;if(0!==o){var l=o&~a;0!==l?n=tn(l):0!=(s&=o)&&(n=tn(s))}else 0!=(o=r&~a)?n=tn(o):0!==s&&(n=tn(s));if(0===n)return 0;if(0!==i&&i!==n&&0==(i&a)&&((a=n&-n)>=(s=i&-i)||16===a&&0!=(4194240&s)))return i;if(0!=(4&n)&&(n|=16&r),0!==(i=e.entangledLanes))for(e=e.entanglements,i&=n;0<i;)a=1<<(r=31-e9(i)),n|=e[r],i&=~a;return n}function ts(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function to(){var e=ti;return 0==(4194240&(ti<<=1))&&(ti=64),e}function tl(e){for(var i=[],r=0;31>r;r++)i.push(e);return i}function tu(e,i,r){e.pendingLanes|=i,536870912!==i&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[i=31-e9(i)]=r}function th(e,i){var r=e.entangledLanes|=i;for(e=e.entanglements;r;){var n=31-e9(r),a=1<<n;a&i|e[n]&i&&(e[n]|=i),r&=~a}}var tc=0;function td(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var tf,tp,tm,t_,tg,ty=!1,tv=[],tx=null,tb=null,tw=null,tM=new Map,tT=new Map,tL=[],tS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tk(e,i){switch(e){case"focusin":case"focusout":tx=null;break;case"dragenter":case"dragleave":tb=null;break;case"mouseover":case"mouseout":tw=null;break;case"pointerover":case"pointerout":tM.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":tT.delete(i.pointerId)}}function tD(e,i,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:i,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==i&&null!==(i=rj(i))&&tp(i)):(e.eventSystemFlags|=n,i=e.targetContainers,null!==a&&-1===i.indexOf(a)&&i.push(a)),e}function tE(e){var i=rF(e.target);if(null!==i){var r=eW(i);if(null!==r){if(13===(i=r.tag)){if(null!==(i=eG(r))){e.blockedOn=i,tg(e.priority,function(){tm(r)});return}}else if(3===i&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===r.tag?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tA(e){if(null!==e.blockedOn)return!1;for(var i=e.targetContainers;0<i.length;){var r=tN(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(null!==r)return null!==(i=rj(r))&&tp(i),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);eM=n,r.target.dispatchEvent(n),eM=null,i.shift()}return!0}function tP(e,i,r){tA(e)&&r.delete(i)}function tC(){ty=!1,null!==tx&&tA(tx)&&(tx=null),null!==tb&&tA(tb)&&(tb=null),null!==tw&&tA(tw)&&(tw=null),tM.forEach(tP),tT.forEach(tP)}function tI(e,i){e.blockedOn===i&&(e.blockedOn=null,ty||(ty=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,tC)))}function tO(e){function i(i){return tI(i,e)}if(0<tv.length){tI(tv[0],e);for(var r=1;r<tv.length;r++){var n=tv[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==tx&&tI(tx,e),null!==tb&&tI(tb,e),null!==tw&&tI(tw,e),tM.forEach(i),tT.forEach(i),r=0;r<tL.length;r++)(n=tL[r]).blockedOn===e&&(n.blockedOn=null);for(;0<tL.length&&null===(r=tL[0]).blockedOn;)tE(r),null===r.blockedOn&&tL.shift()}var tz=k.ReactCurrentBatchConfig,tR=!0;function tY(e,i,r,n){var a=tc,s=tz.transition;tz.transition=null;try{tc=1,tj(e,i,r,n)}finally{tc=a,tz.transition=s}}function tF(e,i,r,n){var a=tc,s=tz.transition;tz.transition=null;try{tc=4,tj(e,i,r,n)}finally{tc=a,tz.transition=s}}function tj(e,i,r,n){if(tR){var a=tN(e,i,r,n);if(null===a)rh(e,i,n,tB,r),tk(e,n);else if(function(e,i,r,n,a){switch(i){case"focusin":return tx=tD(tx,e,i,r,n,a),!0;case"dragenter":return tb=tD(tb,e,i,r,n,a),!0;case"mouseover":return tw=tD(tw,e,i,r,n,a),!0;case"pointerover":var s=a.pointerId;return tM.set(s,tD(tM.get(s)||null,e,i,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,tT.set(s,tD(tT.get(s)||null,e,i,r,n,a)),!0}return!1}(a,e,i,r,n))n.stopPropagation();else if(tk(e,n),4&i&&-1<tS.indexOf(e)){for(;null!==a;){var s=rj(a);if(null!==s&&tf(s),null===(s=tN(e,i,r,n))&&rh(e,i,n,tB,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else rh(e,i,n,null,r)}}var tB=null;function tN(e,i,r,n){if(tB=null,null!==(e=rF(e=eT(n)))){if(null===(i=eW(e)))e=null;else if(13===(r=i.tag)){if(null!==(e=eG(i)))return e;e=null}else if(3===r){if(i.stateNode.current.memoizedState.isDehydrated)return 3===i.tag?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}return tB=e,null}function tH(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e1()){case e2:return 1;case e3:return 4;case e4:case e5:return 16;case e6:return 536870912;default:return 16}default:return 16}}var tV=null,tU=null,t$=null;function tW(){if(t$)return t$;var e,i,r=tU,n=r.length,a="value"in tV?tV.value:tV.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var o=n-e;for(i=1;i<=o&&r[n-i]===a[s-i];i++);return t$=a.slice(e,1<i?1-i:void 0)}function tG(e){var i=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===i&&(e=13):e=i,10===e&&(e=13),32<=e||13===e?e:0}function tq(){return!0}function tZ(){return!1}function tX(e){function i(i,r,n,a,s){for(var o in this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(i=e[o],this[o]=i?i(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?tq:tZ,this.isPropagationStopped=tZ,this}return U(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tq)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tq)},persist:function(){},isPersistent:tq}),i}var tJ,tK,tQ,t0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t1=tX(t0),t2=U({},t0,{view:0,detail:0}),t3=tX(t2),t4=U({},t2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tQ&&(tQ&&"mousemove"===e.type?(tJ=e.screenX-tQ.screenX,tK=e.screenY-tQ.screenY):tK=tJ=0,tQ=e),tJ)},movementY:function(e){return"movementY"in e?e.movementY:tK}}),t5=tX(t4),t6=tX(U({},t4,{dataTransfer:0})),t8=tX(U({},t2,{relatedTarget:0})),t7=tX(U({},t0,{animationName:0,elapsedTime:0,pseudoElement:0})),t9=tX(U({},t0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ie=tX(U({},t0,{data:0})),it={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ii={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ir={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ia(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):!!(e=ir[e])&&!!i[e]}function is(){return ia}var io=tX(U({},t2,{key:function(e){if(e.key){var i=it[e.key]||e.key;if("Unidentified"!==i)return i}return"keypress"===e.type?13===(e=tG(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ii[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(e){return"keypress"===e.type?tG(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tG(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),il=tX(U({},t4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),iu=tX(U({},t2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is})),ih=tX(U({},t0,{propertyName:0,elapsedTime:0,pseudoElement:0})),ic=tX(U({},t4,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),id=[9,13,27,32],ip=g&&"CompositionEvent"in window,im=null;g&&"documentMode"in document&&(im=document.documentMode);var i_=g&&"TextEvent"in window&&!im,ig=g&&(!ip||im&&8<im&&11>=im),iy=!1;function iv(e,i){switch(e){case"keyup":return -1!==id.indexOf(i.keyCode);case"keydown":return 229!==i.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ix(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ib=!1,iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iM(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===i?!!iw[e.type]:"textarea"===i}function iT(e,i,r,n){eE(n),0<(i=rd(i,"onChange")).length&&(r=new t1("onChange","change",null,r,n),e.push({event:r,listeners:i}))}var iL=null,iS=null;function ik(e){rn(e,0)}function iD(e){if(J(rB(e)))return e}function iE(e,i){if("change"===e)return i}var iA=!1;if(g){if(g){var iP="oninput"in document;if(!iP){var iC=document.createElement("div");iC.setAttribute("oninput","return;"),iP="function"==typeof iC.oninput}n=iP}else n=!1;iA=n&&(!document.documentMode||9<document.documentMode)}function iI(){iL&&(iL.detachEvent("onpropertychange",iO),iS=iL=null)}function iO(e){if("value"===e.propertyName&&iD(iS)){var i=[];iT(i,iS,e,eT(e)),eO(ik,i)}}function iz(e,i,r){"focusin"===e?(iI(),iL=i,iS=r,iL.attachEvent("onpropertychange",iO)):"focusout"===e&&iI()}function iR(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return iD(iS)}function iY(e,i){if("click"===e)return iD(i)}function iF(e,i){if("input"===e||"change"===e)return iD(i)}var ij="function"==typeof Object.is?Object.is:function(e,i){return e===i&&(0!==e||1/e==1/i)||e!=e&&i!=i};function iB(e,i){if(ij(e,i))return!0;if("object"!=typeof e||null===e||"object"!=typeof i||null===i)return!1;var r=Object.keys(e),n=Object.keys(i);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!y.call(i,a)||!ij(e[a],i[a]))return!1}return!0}function iN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iH(e,i){var r,n=iN(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=i&&r>=i)return{node:n,offset:i-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iN(n)}}function iV(){for(var e=window,i=K();i instanceof e.HTMLIFrameElement;){try{var r="string"==typeof i.contentWindow.location.href}catch(n){r=!1}if(r)e=i.contentWindow;else break;i=K(e.document)}return i}function iU(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&("input"===i&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===i||"true"===e.contentEditable)}var i$=g&&"documentMode"in document&&11>=document.documentMode,iW=null,iG=null,iq=null,iZ=!1;function iX(e,i,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;iZ||null==iW||iW!==K(n)||(n="selectionStart"in(n=iW)&&iU(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},iq&&iB(iq,n)||(iq=n,0<(n=rd(iG,"onSelect")).length&&(i=new t1("onSelect","select",null,i,r),e.push({event:i,listeners:n}),i.target=iW)))}function iJ(e,i){var r={};return r[e.toLowerCase()]=i.toLowerCase(),r["Webkit"+e]="webkit"+i,r["Moz"+e]="moz"+i,r}var iK={animationend:iJ("Animation","AnimationEnd"),animationiteration:iJ("Animation","AnimationIteration"),animationstart:iJ("Animation","AnimationStart"),transitionend:iJ("Transition","TransitionEnd")},iQ={},i0={};function i1(e){if(iQ[e])return iQ[e];if(!iK[e])return e;var i,r=iK[e];for(i in r)if(r.hasOwnProperty(i)&&i in i0)return iQ[e]=r[i];return e}g&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete iK.animationend.animation,delete iK.animationiteration.animation,delete iK.animationstart.animation),"TransitionEvent"in window||delete iK.transitionend.transition);var i2=i1("animationend"),i3=i1("animationiteration"),i4=i1("animationstart"),i5=i1("transitionend"),i6=new Map,i8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function i7(e,i){i6.set(e,i),m(i,[e])}for(var i9=0;i9<i8.length;i9++){var re=i8[i9];i7(re.toLowerCase(),"on"+(re[0].toUpperCase()+re.slice(1)))}i7(i2,"onAnimationEnd"),i7(i3,"onAnimationIteration"),i7(i4,"onAnimationStart"),i7("dblclick","onDoubleClick"),i7("focusin","onFocus"),i7("focusout","onBlur"),i7(i5,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ri=new Set("cancel close invalid load scroll toggle".split(" ").concat(rt));function rr(e,i,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,i,r,n,a,s,o,l,u){if(e$.apply(this,arguments),eB){if(eB){var h=eN;eB=!1,eN=null}else throw Error(d(198));eH||(eH=!0,eV=h)}}(n,i,void 0,e),e.currentTarget=null}function rn(e,i){i=0!=(4&i);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(i)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&a.isPropagationStopped())break e;rr(a,l,h),s=u}else for(o=0;o<n.length;o++){if(u=(l=n[o]).instance,h=l.currentTarget,l=l.listener,u!==s&&a.isPropagationStopped())break e;rr(a,l,h),s=u}}}if(eH)throw e=eV,eH=!1,eV=null,e}function ra(e,i){var r=i[rz];void 0===r&&(r=i[rz]=new Set);var n=e+"__bubble";r.has(n)||(ru(i,e,2,!1),r.add(n))}function rs(e,i,r){var n=0;i&&(n|=4),ru(r,e,n,i)}var ro="_reactListening"+Math.random().toString(36).slice(2);function rl(e){if(!e[ro]){e[ro]=!0,f.forEach(function(i){"selectionchange"!==i&&(ri.has(i)||rs(i,!1,e),rs(i,!0,e))});var i=9===e.nodeType?e:e.ownerDocument;null===i||i[ro]||(i[ro]=!0,rs("selectionchange",!1,i))}}function ru(e,i,r,n){switch(tH(i)){case 1:var a=tY;break;case 4:a=tF;break;default:a=tj}r=a.bind(null,i,r,e),a=void 0,eR&&("touchstart"===i||"touchmove"===i||"wheel"===i)&&(a=!0),n?void 0!==a?e.addEventListener(i,r,{capture:!0,passive:a}):e.addEventListener(i,r,!0):void 0!==a?e.addEventListener(i,r,{passive:a}):e.addEventListener(i,r,!1)}function rh(e,i,r,n,a){var s=n;if(0==(1&i)&&0==(2&i)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var l=n.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===o)for(o=n.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==l;){if(null===(o=rF(l)))return;if(5===(u=o.tag)||6===u){n=s=o;continue e}l=l.parentNode}}n=n.return}eO(function(){var n=s,a=eT(r),o=[];e:{var l=i6.get(e);if(void 0!==l){var u=t1,h=e;switch(e){case"keypress":if(0===tG(r))break e;case"keydown":case"keyup":u=io;break;case"focusin":h="focus",u=t8;break;case"focusout":h="blur",u=t8;break;case"beforeblur":case"afterblur":u=t8;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=t5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=t6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=iu;break;case i2:case i3:case i4:u=t7;break;case i5:u=ih;break;case"scroll":u=t3;break;case"wheel":u=ic;break;case"copy":case"cut":case"paste":u=t9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=il}var c=0!=(4&i),d=!c&&"scroll"===e,f=c?null!==l?l+"Capture":null:l;c=[];for(var p,m=n;null!==m;){var _=(p=m).stateNode;if(5===p.tag&&null!==_&&(p=_,null!==f&&null!=(_=ez(m,f))&&c.push(rc(m,_,p))),d)break;m=m.return}0<c.length&&(l=new u(l,h,null,r,a),o.push({event:l,listeners:c}))}}if(0==(7&i)){if(l="mouseover"===e||"pointerover"===e,u="mouseout"===e||"pointerout"===e,!(l&&r!==eM&&(h=r.relatedTarget||r.fromElement)&&(rF(h)||h[rO]))&&(u||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,u?(h=r.relatedTarget||r.toElement,u=n,null!==(h=h?rF(h):null)&&(d=eW(h),h!==d||5!==h.tag&&6!==h.tag)&&(h=null)):(u=null,h=n),u!==h)){if(c=t5,_="onMouseLeave",f="onMouseEnter",m="mouse",("pointerout"===e||"pointerover"===e)&&(c=il,_="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==u?l:rB(u),p=null==h?l:rB(h),(l=new c(_,m+"leave",u,r,a)).target=d,l.relatedTarget=p,_=null,rF(a)===n&&((c=new c(f,m+"enter",h,r,a)).target=p,c.relatedTarget=d,_=c),d=_,u&&h)t:{for(c=u,f=h,m=0,p=c;p;p=rf(p))m++;for(p=0,_=f;_;_=rf(_))p++;for(;0<m-p;)c=rf(c),m--;for(;0<p-m;)f=rf(f),p--;for(;m--;){if(c===f||null!==f&&c===f.alternate)break t;c=rf(c),f=rf(f)}c=null}else c=null;null!==u&&rp(o,l,u,c,!1),null!==h&&null!==d&&rp(o,d,h,c,!0)}e:{if("select"===(u=(l=n?rB(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var g,y=iE;else if(iM(l)){if(iA)y=iF;else{y=iR;var v=iz}}else(u=l.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(y=iY);if(y&&(y=y(e,n))){iT(o,y,r,a);break e}v&&v(e,l,n),"focusout"===e&&(v=l._wrapperState)&&v.controlled&&"number"===l.type&&en(l,"number",l.value)}switch(v=n?rB(n):window,e){case"focusin":(iM(v)||"true"===v.contentEditable)&&(iW=v,iG=n,iq=null);break;case"focusout":iq=iG=iW=null;break;case"mousedown":iZ=!0;break;case"contextmenu":case"mouseup":case"dragend":iZ=!1,iX(o,r,a);break;case"selectionchange":if(i$)break;case"keydown":case"keyup":iX(o,r,a)}if(ip)t:{switch(e){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else ib?iv(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(ig&&"ko"!==r.locale&&(ib||"onCompositionStart"!==x?"onCompositionEnd"===x&&ib&&(g=tW()):(tU="value"in(tV=a)?tV.value:tV.textContent,ib=!0)),0<(v=rd(n,x)).length&&(x=new ie(x,e,null,r,a),o.push({event:x,listeners:v}),g?x.data=g:null!==(g=ix(r))&&(x.data=g))),(g=i_?function(e,i){switch(e){case"compositionend":return ix(i);case"keypress":if(32!==i.which)return null;return iy=!0," ";case"textInput":return" "===(e=i.data)&&iy?null:e;default:return null}}(e,r):function(e,i){if(ib)return"compositionend"===e||!ip&&iv(e,i)?(e=tW(),t$=tU=tV=null,ib=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ig&&"ko"!==i.locale?null:i.data}}(e,r))&&0<(n=rd(n,"onBeforeInput")).length&&(a=new ie("onBeforeInput","beforeinput",null,r,a),o.push({event:a,listeners:n}),a.data=g)}rn(o,i)})}function rc(e,i,r){return{instance:e,listener:i,currentTarget:r}}function rd(e,i){for(var r=i+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=ez(e,r))&&n.unshift(rc(e,s,a)),null!=(s=ez(e,i))&&n.push(rc(e,s,a))),e=e.return}return n}function rf(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag)return e||null}function rp(e,i,r,n,a){for(var s=i._reactName,o=[];null!==r&&r!==n;){var l=r,u=l.alternate,h=l.stateNode;if(null!==u&&u===n)break;5===l.tag&&null!==h&&(l=h,a?null!=(u=ez(r,s))&&o.unshift(rc(r,u,l)):a||null!=(u=ez(r,s))&&o.push(rc(r,u,l))),r=r.return}0!==o.length&&e.push({event:i,listeners:o})}var rm=/\r\n?/g,r_=/\u0000|\uFFFD/g;function rg(e){return("string"==typeof e?e:""+e).replace(rm,"\n").replace(r_,"")}function ry(e,i,r){if(i=rg(i),rg(e)!==i&&r)throw Error(d(425))}function rv(){}var rx=null,rb=null;function rw(e,i){return"textarea"===e||"noscript"===e||"string"==typeof i.children||"number"==typeof i.children||"object"==typeof i.dangerouslySetInnerHTML&&null!==i.dangerouslySetInnerHTML&&null!=i.dangerouslySetInnerHTML.__html}var rM="function"==typeof setTimeout?setTimeout:void 0,rT="function"==typeof clearTimeout?clearTimeout:void 0,rL="function"==typeof Promise?Promise:void 0,rS="function"==typeof queueMicrotask?queueMicrotask:void 0!==rL?function(e){return rL.resolve(null).then(e).catch(rk)}:rM;function rk(e){setTimeout(function(){throw e})}function rD(e,i){var r=i,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType){if("/$"===(r=a.data)){if(0===n){e.removeChild(a),tO(i);return}n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++}r=a}while(r)tO(i)}function rE(e){for(;null!=e;e=e.nextSibling){var i=e.nodeType;if(1===i||3===i)break;if(8===i){if("$"===(i=e.data)||"$!"===i||"$?"===i)break;if("/$"===i)return null}}return e}function rA(e){e=e.previousSibling;for(var i=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===i)return e;i--}else"/$"===r&&i++}e=e.previousSibling}return null}var rP=Math.random().toString(36).slice(2),rC="__reactFiber$"+rP,rI="__reactProps$"+rP,rO="__reactContainer$"+rP,rz="__reactEvents$"+rP,rR="__reactListeners$"+rP,rY="__reactHandles$"+rP;function rF(e){var i=e[rC];if(i)return i;for(var r=e.parentNode;r;){if(i=r[rO]||r[rC]){if(r=i.alternate,null!==i.child||null!==r&&null!==r.child)for(e=rA(e);null!==e;){if(r=e[rC])return r;e=rA(e)}return i}r=(e=r).parentNode}return null}function rj(e){return(e=e[rC]||e[rO])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function rB(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(d(33))}function rN(e){return e[rI]||null}var rH=[],rV=-1;function rU(e){return{current:e}}function r$(e){0>rV||(e.current=rH[rV],rH[rV]=null,rV--)}function rW(e,i){rH[++rV]=e.current,e.current=i}var rG={},rq=rU(rG),rZ=rU(!1),rX=rG;function rJ(e,i){var r=e.type.contextTypes;if(!r)return rG;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===i)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=i[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),s}function rK(e){return null!=(e=e.childContextTypes)}function rQ(){r$(rZ),r$(rq)}function r0(e,i,r){if(rq.current!==rG)throw Error(d(168));rW(rq,i),rW(rZ,r)}function r1(e,i,r){var n=e.stateNode;if(i=i.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in i))throw Error(d(108,function(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=i.render).displayName||e.name||"",i.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(i){if(null==i)return null;if("function"==typeof i)return i.displayName||i.name||null;if("string"==typeof i)return i;switch(i){case A:return"Fragment";case E:return"Portal";case C:return"Profiler";case P:return"StrictMode";case R:return"Suspense";case Y:return"SuspenseList"}if("object"==typeof i)switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case I:return(i._context.displayName||"Context")+".Provider";case z:var r=i.render;return(i=i.displayName)||(i=""!==(i=r.displayName||r.name||"")?"ForwardRef("+i+")":"ForwardRef"),i;case F:return null!==(r=i.displayName||null)?r:e(i.type)||"Memo";case j:r=i._payload,i=i._init;try{return e(i(r))}catch(n){}}return null}(i);case 8:return i===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof i)return i.displayName||i.name||null;if("string"==typeof i)return i}return null}(e)||"Unknown",a));return U({},r,n)}function r2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rG,rX=rq.current,rW(rq,e),rW(rZ,rZ.current),!0}function r3(e,i,r){var n=e.stateNode;if(!n)throw Error(d(169));r?(e=r1(e,i,rX),n.__reactInternalMemoizedMergedChildContext=e,r$(rZ),r$(rq),rW(rq,e)):r$(rZ),rW(rZ,r)}var r4=null,r5=!1,r6=!1;function r8(e){null===r4?r4=[e]:r4.push(e)}function r7(){if(!r6&&null!==r4){r6=!0;var e=0,i=tc;try{var r=r4;for(tc=1;e<r.length;e++){var n=r[e];do n=n(!0);while(null!==n)}r4=null,r5=!1}catch(a){throw null!==r4&&(r4=r4.slice(e+1)),eX(e2,r7),a}finally{tc=i,r6=!1}}return null}var r9=[],ne=0,nt=null,ni=0,nr=[],nn=0,na=null,ns=1,no="";function nl(e,i){r9[ne++]=ni,r9[ne++]=nt,nt=e,ni=i}function nu(e,i,r){nr[nn++]=ns,nr[nn++]=no,nr[nn++]=na,na=e;var n=ns;e=no;var a=32-e9(n)-1;n&=~(1<<a),r+=1;var s=32-e9(i)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ns=1<<32-e9(i)+a|r<<a|n,no=s+e}else ns=1<<s|r<<a|n,no=e}function nh(e){null!==e.return&&(nl(e,1),nu(e,1,0))}function nc(e){for(;e===nt;)nt=r9[--ne],r9[ne]=null,ni=r9[--ne],r9[ne]=null;for(;e===na;)na=nr[--nn],nr[nn]=null,no=nr[--nn],nr[nn]=null,ns=nr[--nn],nr[nn]=null}var nd=null,nf=null,np=!1,nm=null;function n_(e,i){var r=oX(5,null,null,0);r.elementType="DELETED",r.stateNode=i,r.return=e,null===(i=e.deletions)?(e.deletions=[r],e.flags|=16):i.push(r)}function ng(e,i){switch(e.tag){case 5:var r=e.type;return null!==(i=1!==i.nodeType||r.toLowerCase()!==i.nodeName.toLowerCase()?null:i)&&(e.stateNode=i,nd=e,nf=rE(i.firstChild),!0);case 6:return null!==(i=""===e.pendingProps||3!==i.nodeType?null:i)&&(e.stateNode=i,nd=e,nf=null,!0);case 13:return null!==(i=8!==i.nodeType?null:i)&&(r=null!==na?{id:ns,overflow:no}:null,e.memoizedState={dehydrated:i,treeContext:r,retryLane:1073741824},(r=oX(18,null,null,0)).stateNode=i,r.return=e,e.child=r,nd=e,nf=null,!0);default:return!1}}function ny(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function nv(e){if(np){var i=nf;if(i){var r=i;if(!ng(e,i)){if(ny(e))throw Error(d(418));i=rE(r.nextSibling);var n=nd;i&&ng(e,i)?n_(n,r):(e.flags=-4097&e.flags|2,np=!1,nd=e)}}else{if(ny(e))throw Error(d(418));e.flags=-4097&e.flags|2,np=!1,nd=e}}}function nx(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nd=e}function nb(e){if(e!==nd)return!1;if(!np)return nx(e),np=!0,!1;if((i=3!==e.tag)&&!(i=5!==e.tag)&&(i="head"!==(i=e.type)&&"body"!==i&&!rw(e.type,e.memoizedProps)),i&&(i=nf)){if(ny(e))throw nw(),Error(d(418));for(;i;)n_(e,i),i=rE(i.nextSibling)}if(nx(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(d(317));e:{for(i=0,e=e.nextSibling;e;){if(8===e.nodeType){var i,r=e.data;if("/$"===r){if(0===i){nf=rE(e.nextSibling);break e}i--}else"$"!==r&&"$!"!==r&&"$?"!==r||i++}e=e.nextSibling}nf=null}}else nf=nd?rE(e.stateNode.nextSibling):null;return!0}function nw(){for(var e=nf;e;)e=rE(e.nextSibling)}function nM(){nf=nd=null,np=!1}function nT(e){null===nm?nm=[e]:nm.push(e)}var nL=k.ReactCurrentBatchConfig;function nS(e,i){if(e&&e.defaultProps)for(var r in i=U({},i),e=e.defaultProps)void 0===i[r]&&(i[r]=e[r]);return i}var nk=rU(null),nD=null,nE=null,nA=null;function nP(){nA=nE=nD=null}function nC(e){var i=nk.current;r$(nk),e._currentValue=i}function nI(e,i,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,null!==n&&(n.childLanes|=i)):null!==n&&(n.childLanes&i)!==i&&(n.childLanes|=i),e===r)break;e=e.return}}function nO(e,i){nD=e,nA=nE=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&i)&&(su=!0),e.firstContext=null)}function nz(e){var i=e._currentValue;if(nA!==e){if(e={context:e,memoizedValue:i,next:null},null===nE){if(null===nD)throw Error(d(308));nE=e,nD.dependencies={lanes:0,firstContext:e}}else nE=nE.next=e}return i}var nR=null;function nY(e){null===nR?nR=[e]:nR.push(e)}function nF(e,i,r,n){var a=i.interleaved;return null===a?(r.next=r,nY(i)):(r.next=a.next,a.next=r),i.interleaved=r,nj(e,n)}function nj(e,i){e.lanes|=i;var r=e.alternate;for(null!==r&&(r.lanes|=i),r=e,e=e.return;null!==e;)e.childLanes|=i,null!==(r=e.alternate)&&(r.childLanes|=i),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var nB=!1;function nN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nH(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nV(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function nU(e,i,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&s6)){var a=n.pending;return null===a?i.next=i:(i.next=a.next,a.next=i),n.pending=i,nj(e,r)}return null===(a=n.interleaved)?(i.next=i,nY(n)):(i.next=a.next,a.next=i),n.interleaved=i,nj(e,r)}function n$(e,i,r){if(null!==(i=i.updateQueue)&&(i=i.shared,0!=(4194240&r))){var n=i.lanes;n&=e.pendingLanes,r|=n,i.lanes=r,th(e,r)}}function nW(e,i){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=o:s=s.next=o,r=r.next}while(null!==r)null===s?a=s=i:s=s.next=i}else a=s=i;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=i:e.next=i,r.lastBaseUpdate=i}function nG(e,i,r,n){var a=e.updateQueue;nB=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var u=l,h=u.next;u.next=null,null===o?s=h:o.next=h,o=u;var c=e.alternate;null!==c&&(l=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===l?c.firstBaseUpdate=h:l.next=h,c.lastBaseUpdate=u)}if(null!==s){var d=a.baseState;for(o=0,c=h=u=null,l=s;;){var f=l.lane,p=l.eventTime;if((n&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,_=l;switch(f=i,p=r,_.tag){case 1:if("function"==typeof(m=_.payload)){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=_.payload)?m.call(p,d,f):m))break e;d=U({},d,f);break e;case 2:nB=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(h=c=p,u=d):c=c.next=p,o|=f;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(f=l).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===c&&(u=d),a.baseState=u,a.firstBaseUpdate=h,a.lastBaseUpdate=c,null!==(i=a.shared.interleaved)){a=i;do o|=a.lane,a=a.next;while(a!==i)}else null===s&&(a.shared.lanes=0);on|=o,e.lanes=o,e.memoizedState=d}}function nq(e,i,r){if(e=i.effects,i.effects=null,null!==e)for(i=0;i<e.length;i++){var n=e[i],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!=typeof a)throw Error(d(191,a));a.call(n)}}}var nZ=(new h.Component).refs;function nX(e,i,r,n){r=null==(r=r(n,i=e.memoizedState))?i:U({},i,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var nJ={isMounted:function(e){return!!(e=e._reactInternals)&&eW(e)===e},enqueueSetState:function(e,i,r){e=e._reactInternals;var n=ow(),a=oM(e),s=nV(n,a);s.payload=i,null!=r&&(s.callback=r),null!==(i=nU(e,s,a))&&(oT(i,e,a,n),n$(i,e,a))},enqueueReplaceState:function(e,i,r){e=e._reactInternals;var n=ow(),a=oM(e),s=nV(n,a);s.tag=1,s.payload=i,null!=r&&(s.callback=r),null!==(i=nU(e,s,a))&&(oT(i,e,a,n),n$(i,e,a))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var r=ow(),n=oM(e),a=nV(r,n);a.tag=2,null!=i&&(a.callback=i),null!==(i=nU(e,a,n))&&(oT(i,e,n,r),n$(i,e,n))}};function nK(e,i,r,n,a,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!i.prototype||!i.prototype.isPureReactComponent||!iB(r,n)||!iB(a,s)}function nQ(e,i,r){var n=!1,a=rG,s=i.contextType;return"object"==typeof s&&null!==s?s=nz(s):(a=rK(i)?rX:rq.current,s=(n=null!=(n=i.contextTypes))?rJ(e,a):rG),i=new i(r,s),e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=nJ,e.stateNode=i,i._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),i}function n0(e,i,r,n){e=i.state,"function"==typeof i.componentWillReceiveProps&&i.componentWillReceiveProps(r,n),"function"==typeof i.UNSAFE_componentWillReceiveProps&&i.UNSAFE_componentWillReceiveProps(r,n),i.state!==e&&nJ.enqueueReplaceState(i,i.state,null)}function n1(e,i,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=nZ,nN(e);var s=i.contextType;"object"==typeof s&&null!==s?a.context=nz(s):(s=rK(i)?rX:rq.current,a.context=rJ(e,s)),a.state=e.memoizedState,"function"==typeof(s=i.getDerivedStateFromProps)&&(nX(e,i,s,r),a.state=e.memoizedState),"function"==typeof i.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(i=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&nJ.enqueueReplaceState(a,a.state,null),nG(e,r,a,n),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function n2(e,i,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(d(309));var n=r.stateNode}if(!n)throw Error(d(147,e));var a=n,s=""+e;return null!==i&&null!==i.ref&&"function"==typeof i.ref&&i.ref._stringRef===s?i.ref:((i=function(e){var i=a.refs;i===nZ&&(i=a.refs={}),null===e?delete i[s]:i[s]=e})._stringRef=s,i)}if("string"!=typeof e)throw Error(d(284));if(!r._owner)throw Error(d(290,e))}return e}function n3(e,i){throw Error(d(31,"[object Object]"===(e=Object.prototype.toString.call(i))?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function n4(e){return(0,e._init)(e._payload)}function n5(e){function i(i,r){if(e){var n=i.deletions;null===n?(i.deletions=[r],i.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)i(r,n),n=n.sibling;return null}function n(e,i){for(e=new Map;null!==i;)null!==i.key?e.set(i.key,i):e.set(i.index,i),i=i.sibling;return e}function a(e,i){return(e=oK(e,i)).index=0,e.sibling=null,e}function s(i,r,n){return(i.index=n,e)?null!==(n=i.alternate)?(n=n.index)<r?(i.flags|=2,r):n:(i.flags|=2,r):(i.flags|=1048576,r)}function o(i){return e&&null===i.alternate&&(i.flags|=2),i}function l(e,i,r,n){return null===i||6!==i.tag?(i=o2(r,e.mode,n)).return=e:(i=a(i,r)).return=e,i}function u(e,i,r,n){var s=r.type;return s===A?c(e,i,r.props.children,n,r.key):(null!==i&&(i.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===j&&n4(s)===i.type)?(n=a(i,r.props)).ref=n2(e,i,r):(n=oQ(r.type,r.key,r.props,null,e.mode,n)).ref=n2(e,i,r),n.return=e,n)}function h(e,i,r,n){return null===i||4!==i.tag||i.stateNode.containerInfo!==r.containerInfo||i.stateNode.implementation!==r.implementation?(i=o3(r,e.mode,n)).return=e:(i=a(i,r.children||[])).return=e,i}function c(e,i,r,n,s){return null===i||7!==i.tag?(i=o0(r,e.mode,n,s)).return=e:(i=a(i,r)).return=e,i}function f(e,i,r){if("string"==typeof i&&""!==i||"number"==typeof i)return(i=o2(""+i,e.mode,r)).return=e,i;if("object"==typeof i&&null!==i){switch(i.$$typeof){case D:return(r=oQ(i.type,i.key,i.props,null,e.mode,r)).ref=n2(e,null,i),r.return=e,r;case E:return(i=o3(i,e.mode,r)).return=e,i;case j:return f(e,(0,i._init)(i._payload),r)}if(ea(i)||H(i))return(i=o0(i,e.mode,r,null)).return=e,i;n3(e,i)}return null}function p(e,i,r,n){var a=null!==i?i.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==a?null:l(e,i,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case D:return r.key===a?u(e,i,r,n):null;case E:return r.key===a?h(e,i,r,n):null;case j:return p(e,i,(a=r._init)(r._payload),n)}if(ea(r)||H(r))return null!==a?null:c(e,i,r,n,null);n3(e,r)}return null}function m(e,i,r,n,a){if("string"==typeof n&&""!==n||"number"==typeof n)return l(i,e=e.get(r)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case D:return u(i,e=e.get(null===n.key?r:n.key)||null,n,a);case E:return h(i,e=e.get(null===n.key?r:n.key)||null,n,a);case j:return m(e,i,r,(0,n._init)(n._payload),a)}if(ea(n)||H(n))return c(i,e=e.get(r)||null,n,a,null);n3(i,n)}return null}return function l(u,h,c,_){if("object"==typeof c&&null!==c&&c.type===A&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case D:e:{for(var g=c.key,y=h;null!==y;){if(y.key===g){if((g=c.type)===A){if(7===y.tag){r(u,y.sibling),(h=a(y,c.props.children)).return=u,u=h;break e}}else if(y.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===j&&n4(g)===y.type){r(u,y.sibling),(h=a(y,c.props)).ref=n2(u,y,c),h.return=u,u=h;break e}r(u,y);break}i(u,y),y=y.sibling}c.type===A?((h=o0(c.props.children,u.mode,_,c.key)).return=u,u=h):((_=oQ(c.type,c.key,c.props,null,u.mode,_)).ref=n2(u,h,c),_.return=u,u=_)}return o(u);case E:e:{for(y=c.key;null!==h;){if(h.key===y){if(4===h.tag&&h.stateNode.containerInfo===c.containerInfo&&h.stateNode.implementation===c.implementation){r(u,h.sibling),(h=a(h,c.children||[])).return=u,u=h;break e}r(u,h);break}i(u,h),h=h.sibling}(h=o3(c,u.mode,_)).return=u,u=h}return o(u);case j:return l(u,h,(y=c._init)(c._payload),_)}if(ea(c))return function(a,o,l,u){for(var h=null,c=null,d=o,_=o=0,g=null;null!==d&&_<l.length;_++){d.index>_?(g=d,d=null):g=d.sibling;var y=p(a,d,l[_],u);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&i(a,d),o=s(y,o,_),null===c?h=y:c.sibling=y,c=y,d=g}if(_===l.length)return r(a,d),np&&nl(a,_),h;if(null===d){for(;_<l.length;_++)null!==(d=f(a,l[_],u))&&(o=s(d,o,_),null===c?h=d:c.sibling=d,c=d);return np&&nl(a,_),h}for(d=n(a,d);_<l.length;_++)null!==(g=m(d,a,_,l[_],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?_:g.key),o=s(g,o,_),null===c?h=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return i(a,e)}),np&&nl(a,_),h}(u,h,c,_);if(H(c))return function(a,o,l,u){var h=H(l);if("function"!=typeof h)throw Error(d(150));if(null==(l=h.call(l)))throw Error(d(151));for(var c=h=null,_=o,g=o=0,y=null,v=l.next();null!==_&&!v.done;g++,v=l.next()){_.index>g?(y=_,_=null):y=_.sibling;var x=p(a,_,v.value,u);if(null===x){null===_&&(_=y);break}e&&_&&null===x.alternate&&i(a,_),o=s(x,o,g),null===c?h=x:c.sibling=x,c=x,_=y}if(v.done)return r(a,_),np&&nl(a,g),h;if(null===_){for(;!v.done;g++,v=l.next())null!==(v=f(a,v.value,u))&&(o=s(v,o,g),null===c?h=v:c.sibling=v,c=v);return np&&nl(a,g),h}for(_=n(a,_);!v.done;g++,v=l.next())null!==(v=m(_,a,g,v.value,u))&&(e&&null!==v.alternate&&_.delete(null===v.key?g:v.key),o=s(v,o,g),null===c?h=v:c.sibling=v,c=v);return e&&_.forEach(function(e){return i(a,e)}),np&&nl(a,g),h}(u,h,c,_);n3(u,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==h&&6===h.tag?(r(u,h.sibling),(h=a(h,c)).return=u):(r(u,h),(h=o2(c,u.mode,_)).return=u),o(u=h)):r(u,h)}}var n6=n5(!0),n8=n5(!1),n7={},n9=rU(n7),ae=rU(n7),at=rU(n7);function ai(e){if(e===n7)throw Error(d(174));return e}function ar(e,i){switch(rW(at,i),rW(ae,e),rW(n9,n7),e=i.nodeType){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ed(null,"");break;default:i=ed(i=(e=8===e?i.parentNode:i).namespaceURI||null,e=e.tagName)}r$(n9),rW(n9,i)}function an(){r$(n9),r$(ae),r$(at)}function aa(e){ai(at.current);var i=ai(n9.current),r=ed(i,e.type);i!==r&&(rW(ae,e),rW(n9,r))}function as(e){ae.current===e&&(r$(n9),r$(ae))}var ao=rU(0);function al(e){for(var i=e;null!==i;){if(13===i.tag){var r=i.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return i}else if(19===i.tag&&void 0!==i.memoizedProps.revealOrder){if(0!=(128&i.flags))return i}else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var au=[];function ah(){for(var e=0;e<au.length;e++)au[e]._workInProgressVersionPrimary=null;au.length=0}var ac=k.ReactCurrentDispatcher,ad=k.ReactCurrentBatchConfig,af=0,ap=null,am=null,a_=null,ag=!1,ay=!1,av=0,ax=0;function ab(){throw Error(d(321))}function aw(e,i){if(null===i)return!1;for(var r=0;r<i.length&&r<e.length;r++)if(!ij(e[r],i[r]))return!1;return!0}function aM(e,i,r,n,a,s){if(af=s,ap=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ac.current=null===e||null===e.memoizedState?a6:a8,e=r(n,a),ay){s=0;do{if(ay=!1,av=0,25<=s)throw Error(d(301));s+=1,a_=am=null,i.updateQueue=null,ac.current=a7,e=r(n,a)}while(ay)}if(ac.current=a5,i=null!==am&&null!==am.next,af=0,a_=am=ap=null,ag=!1,i)throw Error(d(300));return e}function aT(){var e=0!==av;return av=0,e}function aL(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===a_?ap.memoizedState=a_=e:a_=a_.next=e,a_}function aS(){if(null===am){var e=ap.alternate;e=null!==e?e.memoizedState:null}else e=am.next;var i=null===a_?ap.memoizedState:a_.next;if(null!==i)a_=i,am=e;else{if(null===e)throw Error(d(310));e={memoizedState:(am=e).memoizedState,baseState:am.baseState,baseQueue:am.baseQueue,queue:am.queue,next:null},null===a_?ap.memoizedState=a_=e:a_=a_.next=e}return a_}function ak(e,i){return"function"==typeof i?i(e):i}function aD(e){var i=aS(),r=i.queue;if(null===r)throw Error(d(311));r.lastRenderedReducer=e;var n=am,a=n.baseQueue,s=r.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(null!==a){s=a.next,n=n.baseState;var l=o=null,u=null,h=s;do{var c=h.lane;if((af&c)===c)null!==u&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var f={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===u?(l=u=f,o=n):u=u.next=f,ap.lanes|=c,on|=c}h=h.next}while(null!==h&&h!==s)null===u?o=n:u.next=l,ij(n,i.memoizedState)||(su=!0),i.memoizedState=n,i.baseState=o,i.baseQueue=u,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do s=a.lane,ap.lanes|=s,on|=s,a=a.next;while(a!==e)}else null===a&&(r.lanes=0);return[i.memoizedState,r.dispatch]}function aE(e){var i=aS(),r=i.queue;if(null===r)throw Error(d(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=i.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a)ij(s,i.memoizedState)||(su=!0),i.memoizedState=s,null===i.baseQueue&&(i.baseState=s),r.lastRenderedState=s}return[s,n]}function aA(){}function aP(e,i){var r=ap,n=aS(),a=i(),s=!ij(n.memoizedState,a);if(s&&(n.memoizedState=a,su=!0),n=n.queue,aV(aO.bind(null,r,n,e),[e]),n.getSnapshot!==i||s||null!==a_&&1&a_.memoizedState.tag){if(r.flags|=2048,aF(9,aI.bind(null,r,n,a,i),void 0,null),null===s8)throw Error(d(349));0!=(30&af)||aC(r,i,a)}return a}function aC(e,i,r){e.flags|=16384,e={getSnapshot:i,value:r},null===(i=ap.updateQueue)?(i={lastEffect:null,stores:null},ap.updateQueue=i,i.stores=[e]):null===(r=i.stores)?i.stores=[e]:r.push(e)}function aI(e,i,r,n){i.value=r,i.getSnapshot=n,az(i)&&aR(e)}function aO(e,i,r){return r(function(){az(i)&&aR(e)})}function az(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!ij(e,r)}catch(n){return!0}}function aR(e){var i=nj(e,1);null!==i&&oT(i,e,1,-1)}function aY(e){var i=aL();return"function"==typeof e&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ak,lastRenderedState:e},i.queue=e,e=e.dispatch=a1.bind(null,ap,e),[i.memoizedState,e]}function aF(e,i,r,n){return e={tag:e,create:i,destroy:r,deps:n,next:null},null===(i=ap.updateQueue)?(i={lastEffect:null,stores:null},ap.updateQueue=i,i.lastEffect=e.next=e):null===(r=i.lastEffect)?i.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,i.lastEffect=e),e}function aj(){return aS().memoizedState}function aB(e,i,r,n){var a=aL();ap.flags|=e,a.memoizedState=aF(1|i,r,void 0,void 0===n?null:n)}function aN(e,i,r,n){var a=aS();n=void 0===n?null:n;var s=void 0;if(null!==am){var o=am.memoizedState;if(s=o.destroy,null!==n&&aw(n,o.deps)){a.memoizedState=aF(i,r,s,n);return}}ap.flags|=e,a.memoizedState=aF(1|i,r,s,n)}function aH(e,i){return aB(8390656,8,e,i)}function aV(e,i){return aN(2048,8,e,i)}function aU(e,i){return aN(4,2,e,i)}function a$(e,i){return aN(4,4,e,i)}function aW(e,i){return"function"==typeof i?(i(e=e()),function(){i(null)}):null!=i?(e=e(),i.current=e,function(){i.current=null}):void 0}function aG(e,i,r){return r=null!=r?r.concat([e]):null,aN(4,4,aW.bind(null,i,e),r)}function aq(){}function aZ(e,i){var r=aS();i=void 0===i?null:i;var n=r.memoizedState;return null!==n&&null!==i&&aw(i,n[1])?n[0]:(r.memoizedState=[e,i],e)}function aX(e,i){var r=aS();i=void 0===i?null:i;var n=r.memoizedState;return null!==n&&null!==i&&aw(i,n[1])?n[0]:(e=e(),r.memoizedState=[e,i],e)}function aJ(e,i,r){return 0==(21&af)?(e.baseState&&(e.baseState=!1,su=!0),e.memoizedState=r):(ij(r,i)||(r=to(),ap.lanes|=r,on|=r,e.baseState=!0),i)}function aK(e,i){var r=tc;tc=0!==r&&4>r?r:4,e(!0);var n=ad.transition;ad.transition={};try{e(!1),i()}finally{tc=r,ad.transition=n}}function aQ(){return aS().memoizedState}function a0(e,i,r){var n=oM(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},a2(e)?a3(i,r):null!==(r=nF(e,i,r,n))&&(oT(r,e,n,ow()),a4(r,i,n))}function a1(e,i,r){var n=oM(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(a2(e))a3(i,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=i.lastRenderedReducer))try{var o=i.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,ij(l,o)){var u=i.interleaved;null===u?(a.next=a,nY(i)):(a.next=u.next,u.next=a),i.interleaved=a;return}}catch(h){}finally{}null!==(r=nF(e,i,a,n))&&(oT(r,e,n,a=ow()),a4(r,i,n))}}function a2(e){var i=e.alternate;return e===ap||null!==i&&i===ap}function a3(e,i){ay=ag=!0;var r=e.pending;null===r?i.next=i:(i.next=r.next,r.next=i),e.pending=i}function a4(e,i,r){if(0!=(4194240&r)){var n=i.lanes;n&=e.pendingLanes,r|=n,i.lanes=r,th(e,r)}}var a5={readContext:nz,useCallback:ab,useContext:ab,useEffect:ab,useImperativeHandle:ab,useInsertionEffect:ab,useLayoutEffect:ab,useMemo:ab,useReducer:ab,useRef:ab,useState:ab,useDebugValue:ab,useDeferredValue:ab,useTransition:ab,useMutableSource:ab,useSyncExternalStore:ab,useId:ab,unstable_isNewReconciler:!1},a6={readContext:nz,useCallback:function(e,i){return aL().memoizedState=[e,void 0===i?null:i],e},useContext:nz,useEffect:aH,useImperativeHandle:function(e,i,r){return r=null!=r?r.concat([e]):null,aB(4194308,4,aW.bind(null,i,e),r)},useLayoutEffect:function(e,i){return aB(4194308,4,e,i)},useInsertionEffect:function(e,i){return aB(4,2,e,i)},useMemo:function(e,i){var r=aL();return i=void 0===i?null:i,e=e(),r.memoizedState=[e,i],e},useReducer:function(e,i,r){var n=aL();return i=void 0!==r?r(i):i,n.memoizedState=n.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=a0.bind(null,ap,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},aL().memoizedState=e},useState:aY,useDebugValue:aq,useDeferredValue:function(e){return aL().memoizedState=e},useTransition:function(){var e=aY(!1),i=e[0];return e=aK.bind(null,e[1]),aL().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,r){var n=ap,a=aL();if(np){if(void 0===r)throw Error(d(407));r=r()}else{if(r=i(),null===s8)throw Error(d(349));0!=(30&af)||aC(n,i,r)}a.memoizedState=r;var s={value:r,getSnapshot:i};return a.queue=s,aH(aO.bind(null,n,s,e),[e]),n.flags|=2048,aF(9,aI.bind(null,n,s,r,i),void 0,null),r},useId:function(){var e=aL(),i=s8.identifierPrefix;if(np){var r=no,n=ns;i=":"+i+"R"+(r=(n&~(1<<32-e9(n)-1)).toString(32)+r),0<(r=av++)&&(i+="H"+r.toString(32)),i+=":"}else i=":"+i+"r"+(r=ax++).toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},a8={readContext:nz,useCallback:aZ,useContext:nz,useEffect:aV,useImperativeHandle:aG,useInsertionEffect:aU,useLayoutEffect:a$,useMemo:aX,useReducer:aD,useRef:aj,useState:function(){return aD(ak)},useDebugValue:aq,useDeferredValue:function(e){return aJ(aS(),am.memoizedState,e)},useTransition:function(){return[aD(ak)[0],aS().memoizedState]},useMutableSource:aA,useSyncExternalStore:aP,useId:aQ,unstable_isNewReconciler:!1},a7={readContext:nz,useCallback:aZ,useContext:nz,useEffect:aV,useImperativeHandle:aG,useInsertionEffect:aU,useLayoutEffect:a$,useMemo:aX,useReducer:aE,useRef:aj,useState:function(){return aE(ak)},useDebugValue:aq,useDeferredValue:function(e){var i=aS();return null===am?i.memoizedState=e:aJ(i,am.memoizedState,e)},useTransition:function(){return[aE(ak)[0],aS().memoizedState]},useMutableSource:aA,useSyncExternalStore:aP,useId:aQ,unstable_isNewReconciler:!1};function a9(e,i){try{var r="",n=i;do r+=function(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 1:return e=G(e.type,!0);default:return""}}(n),n=n.return;while(n)var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:i,stack:a,digest:null}}function se(e,i,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=i?i:null}}function st(e,i){try{console.error(i.value)}catch(r){setTimeout(function(){throw r})}}var si="function"==typeof WeakMap?WeakMap:Map;function sr(e,i,r){(r=nV(-1,r)).tag=3,r.payload={element:null};var n=i.value;return r.callback=function(){od||(od=!0,of=n),st(e,i)},r}function sn(e,i,r){(r=nV(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var a=i.value;r.payload=function(){return n(a)},r.callback=function(){st(e,i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){st(e,i),"function"!=typeof n&&(null===op?op=new Set([this]):op.add(this));var r=i.stack;this.componentDidCatch(i.value,{componentStack:null!==r?r:""})}),r}function sa(e,i,r){var n=e.pingCache;if(null===n){n=e.pingCache=new si;var a=new Set;n.set(i,a)}else void 0===(a=n.get(i))&&(a=new Set,n.set(i,a));a.has(r)||(a.add(r),e=o$.bind(null,e,i,r),i.then(e,e))}function ss(e){do{var i;if((i=13===e.tag)&&(i=null===(i=e.memoizedState)||null!==i.dehydrated),i)return e;e=e.return}while(null!==e)return null}function so(e,i,r,n,a){return 0==(1&e.mode)?e===i?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((i=nV(-1,1)).tag=2,nU(r,i,1))),r.lanes|=1):(e.flags|=65536,e.lanes=a),e}var sl=k.ReactCurrentOwner,su=!1;function sh(e,i,r,n){i.child=null===e?n8(i,null,r,n):n6(i,e.child,r,n)}function sc(e,i,r,n,a){r=r.render;var s=i.ref;return(nO(i,a),n=aM(e,i,r,n,s,a),r=aT(),null===e||su)?(np&&r&&nh(i),i.flags|=1,sh(e,i,n,a),i.child):(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a,sA(e,i,a))}function sd(e,i,r,n,a){if(null===e){var s=r.type;return"function"!=typeof s||oJ(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=oQ(r.type,null,n,i,i.mode,a)).ref=i.ref,e.return=i,i.child=e):(i.tag=15,i.type=s,sf(e,i,s,n,a))}if(s=e.child,0==(e.lanes&a)){var o=s.memoizedProps;if((r=null!==(r=r.compare)?r:iB)(o,n)&&e.ref===i.ref)return sA(e,i,a)}return i.flags|=1,(e=oK(s,n)).ref=i.ref,e.return=i,i.child=e}function sf(e,i,r,n,a){if(null!==e){var s=e.memoizedProps;if(iB(s,n)&&e.ref===i.ref){if(su=!1,i.pendingProps=n=s,0==(e.lanes&a))return i.lanes=e.lanes,sA(e,i,a);0!=(131072&e.flags)&&(su=!0)}}return s_(e,i,r,n,a)}function sp(e,i,r){var n=i.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0==(1&i.mode))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},rW(ot,oe),oe|=r;else{if(0==(1073741824&r))return e=null!==s?s.baseLanes|r:r,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,rW(ot,oe),oe|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,rW(ot,oe),oe|=n}}else null!==s?(n=s.baseLanes|r,i.memoizedState=null):n=r,rW(ot,oe),oe|=n;return sh(e,i,a,r),i.child}function sm(e,i){var r=i.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(i.flags|=512,i.flags|=2097152)}function s_(e,i,r,n,a){var s=rK(r)?rX:rq.current;return(s=rJ(i,s),nO(i,a),r=aM(e,i,r,n,s,a),n=aT(),null===e||su)?(np&&n&&nh(i),i.flags|=1,sh(e,i,r,a),i.child):(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a,sA(e,i,a))}function sg(e,i,r,n,a){if(rK(r)){var s=!0;r2(i)}else s=!1;if(nO(i,a),null===i.stateNode)sE(e,i),nQ(i,r,n),n1(i,r,n,a),n=!0;else if(null===e){var o=i.stateNode,l=i.memoizedProps;o.props=l;var u=o.context,h=r.contextType;h="object"==typeof h&&null!==h?nz(h):rJ(i,h=rK(r)?rX:rq.current);var c=r.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l!==n||u!==h)&&n0(i,o,n,h),nB=!1;var f=i.memoizedState;o.state=f,nG(i,n,o,a),u=i.memoizedState,l!==n||f!==u||rZ.current||nB?("function"==typeof c&&(nX(i,r,c,n),u=i.memoizedState),(l=nB||nK(i,r,l,n,f,u,h))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(i.flags|=4194308)):("function"==typeof o.componentDidMount&&(i.flags|=4194308),i.memoizedProps=n,i.memoizedState=u),o.props=n,o.state=u,o.context=h,n=l):("function"==typeof o.componentDidMount&&(i.flags|=4194308),n=!1)}else{o=i.stateNode,nH(e,i),l=i.memoizedProps,h=i.type===i.elementType?l:nS(i.type,l),o.props=h,d=i.pendingProps,f=o.context,u="object"==typeof(u=r.contextType)&&null!==u?nz(u):rJ(i,u=rK(r)?rX:rq.current);var p=r.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l!==d||f!==u)&&n0(i,o,n,u),nB=!1,f=i.memoizedState,o.state=f,nG(i,n,o,a);var m=i.memoizedState;l!==d||f!==m||rZ.current||nB?("function"==typeof p&&(nX(i,r,p,n),m=i.memoizedState),(h=nB||nK(i,r,h,n,f,m,u)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,m,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,m,u)),"function"==typeof o.componentDidUpdate&&(i.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(i.flags|=1024)):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(i.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(i.flags|=1024),i.memoizedProps=n,i.memoizedState=m),o.props=n,o.state=m,o.context=u,n=h):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&f===e.memoizedState||(i.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&f===e.memoizedState||(i.flags|=1024),n=!1)}return sy(e,i,r,n,s,a)}function sy(e,i,r,n,a,s){sm(e,i);var o=0!=(128&i.flags);if(!n&&!o)return a&&r3(i,r,!1),sA(e,i,s);n=i.stateNode,sl.current=i;var l=o&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return i.flags|=1,null!==e&&o?(i.child=n6(i,e.child,null,s),i.child=n6(i,null,l,s)):sh(e,i,l,s),i.memoizedState=n.state,a&&r3(i,r,!0),i.child}function sv(e){var i=e.stateNode;i.pendingContext?r0(e,i.pendingContext,i.pendingContext!==i.context):i.context&&r0(e,i.context,!1),ar(e,i.containerInfo)}function sx(e,i,r,n,a){return nM(),nT(a),i.flags|=256,sh(e,i,r,n),i.child}var sb={dehydrated:null,treeContext:null,retryLane:0};function sw(e){return{baseLanes:e,cachePool:null,transitions:null}}function sM(e,i,r){var n,a=i.pendingProps,s=ao.current,o=!1,l=0!=(128&i.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!=(2&s)),n?(o=!0,i.flags&=-129):(null===e||null!==e.memoizedState)&&(s|=1),rW(ao,1&s),null===e)return(nv(i),null!==(e=i.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&i.mode)?i.lanes=1:"$!"===e.data?i.lanes=8:i.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=i.mode,o=i.child,l={mode:"hidden",children:l},0==(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=o1(l,a,0,null),e=o0(e,a,r,null),o.return=i,e.return=i,o.sibling=e,i.child=o,i.child.memoizedState=sw(r),i.memoizedState=sb,e):sT(i,l));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,i,r,n,a,s,o){if(r)return 256&i.flags?(i.flags&=-257,sL(e,i,o,n=se(Error(d(422))))):null!==i.memoizedState?(i.child=e.child,i.flags|=128,null):(s=n.fallback,a=i.mode,n=o1({mode:"visible",children:n.children},a,0,null),s=o0(s,a,o,null),s.flags|=2,n.return=i,s.return=i,n.sibling=s,i.child=n,0!=(1&i.mode)&&n6(i,e.child,null,o),i.child.memoizedState=sw(o),i.memoizedState=sb,s);if(0==(1&i.mode))return sL(e,i,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,sL(e,i,o,n=se(s=Error(d(419)),n,void 0))}if(l=0!=(o&e.childLanes),su||l){if(null!==(n=s8)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(n.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,nj(e,a),oT(n,e,a,-1))}return oY(),sL(e,i,o,n=se(Error(d(421))))}return"$?"===a.data?(i.flags|=128,i.child=e.child,i=oG.bind(null,e),a._reactRetry=i,null):(e=s.treeContext,nf=rE(a.nextSibling),nd=i,np=!0,nm=null,null!==e&&(nr[nn++]=ns,nr[nn++]=no,nr[nn++]=na,ns=e.id,no=e.overflow,na=i),i=sT(i,n.children),i.flags|=4096,i)}(e,i,l,a,n,s,r);if(o){o=a.fallback,l=i.mode,n=(s=e.child).sibling;var u={mode:"hidden",children:a.children};return 0==(1&l)&&i.child!==s?((a=i.child).childLanes=0,a.pendingProps=u,i.deletions=null):(a=oK(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==n?o=oK(n,o):(o=o0(o,l,r,null),o.flags|=2),o.return=i,a.return=i,a.sibling=o,i.child=a,a=o,o=i.child,l=null===(l=e.child.memoizedState)?sw(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,i.memoizedState=sb,a}return e=(o=e.child).sibling,a=oK(o,{mode:"visible",children:a.children}),0==(1&i.mode)&&(a.lanes=r),a.return=i,a.sibling=null,null!==e&&(null===(r=i.deletions)?(i.deletions=[e],i.flags|=16):r.push(e)),i.child=a,i.memoizedState=null,a}function sT(e,i){return(i=o1({mode:"visible",children:i},e.mode,0,null)).return=e,e.child=i}function sL(e,i,r,n){return null!==n&&nT(n),n6(i,e.child,null,r),e=sT(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function sS(e,i,r){e.lanes|=i;var n=e.alternate;null!==n&&(n.lanes|=i),nI(e.return,i,r)}function sk(e,i,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=i,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function sD(e,i,r){var n=i.pendingProps,a=n.revealOrder,s=n.tail;if(sh(e,i,n.children,r),0!=(2&(n=ao.current)))n=1&n|2,i.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=i.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&sS(e,r,i);else if(19===e.tag)sS(e,r,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===i)break;for(;null===e.sibling;){if(null===e.return||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(rW(ao,n),0==(1&i.mode))i.memoizedState=null;else switch(a){case"forwards":for(a=null,r=i.child;null!==r;)null!==(e=r.alternate)&&null===al(e)&&(a=r),r=r.sibling;null===(r=a)?(a=i.child,i.child=null):(a=r.sibling,r.sibling=null),sk(i,!1,a,r,s);break;case"backwards":for(r=null,a=i.child,i.child=null;null!==a;){if(null!==(e=a.alternate)&&null===al(e)){i.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}sk(i,!0,r,null,s);break;case"together":sk(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function sE(e,i){0==(1&i.mode)&&null!==e&&(e.alternate=null,i.alternate=null,i.flags|=2)}function sA(e,i,r){if(null!==e&&(i.dependencies=e.dependencies),on|=i.lanes,0==(r&i.childLanes))return null;if(null!==e&&i.child!==e.child)throw Error(d(153));if(null!==i.child){for(r=oK(e=i.child,e.pendingProps),i.child=r,r.return=i;null!==e.sibling;)e=e.sibling,(r=r.sibling=oK(e,e.pendingProps)).return=i;r.sibling=null}return i.child}function sP(e,i){if(!np)switch(e.tailMode){case"hidden":i=e.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?i||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function sC(e){var i=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(i)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,i}a=function(e,i){for(var r=i.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===i)break;for(;null===r.sibling;){if(null===r.return||r.return===i)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},s=function(){},o=function(e,i,r,n){var a=e.memoizedProps;if(a!==n){e=i.stateNode,ai(n9.current);var s,o=null;switch(r){case"input":a=Q(e,a),n=Q(e,n),o=[];break;case"select":a=U({},a,{value:void 0}),n=U({},n,{value:void 0}),o=[];break;case"textarea":a=eo(e,a),n=eo(e,n),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof n.onClick&&(e.onclick=rv)}for(h in eb(r,n),r=null,a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h]){if("style"===h){var l=a[h];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(p.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null))}for(h in n){var u=n[h];if(l=null!=a?a[h]:void 0,n.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l)){if("style"===h){if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(r||(r={}),r[s]=u[s])}else r||(o||(o=[]),o.push(h,r)),r=u}else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(h,u)):"children"===h?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(p.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&ra("scroll",e),o||l===u||(o=[])):(o=o||[]).push(h,u))}}r&&(o=o||[]).push("style",r);var h=o;(i.updateQueue=h)&&(i.flags|=4)}},l=function(e,i,r,n){r!==n&&(i.flags|=4)};var sI=!1,sO=!1,sz="function"==typeof WeakSet?WeakSet:Set,sR=null;function sY(e,i){var r=e.ref;if(null!==r){if("function"==typeof r)try{r(null)}catch(n){oU(e,i,n)}else r.current=null}}function sF(e,i,r){try{r()}catch(n){oU(e,i,n)}}var sj=!1;function sB(e,i,r){var n=i.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&sF(i,r,s)}a=a.next}while(a!==n)}}function sN(e,i){if(null!==(i=null!==(i=i.updateQueue)?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==i)}}function sH(e){var i=e.ref;if(null!==i){var r=e.stateNode;e.tag,e=r,"function"==typeof i?i(e):i.current=e}}function sV(e){return 5===e.tag||3===e.tag||4===e.tag}function sU(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sV(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var s$=null,sW=!1;function sG(e,i,r){for(r=r.child;null!==r;)sq(e,i,r),r=r.sibling}function sq(e,i,r){if(e7&&"function"==typeof e7.onCommitFiberUnmount)try{e7.onCommitFiberUnmount(e8,r)}catch(n){}switch(r.tag){case 5:sO||sY(r,i);case 6:var a=s$,s=sW;s$=null,sG(e,i,r),s$=a,sW=s,null!==s$&&(sW?(e=s$,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):s$.removeChild(r.stateNode));break;case 18:null!==s$&&(sW?(e=s$,r=r.stateNode,8===e.nodeType?rD(e.parentNode,r):1===e.nodeType&&rD(e,r),tO(e)):rD(s$,r.stateNode));break;case 4:a=s$,s=sW,s$=r.stateNode.containerInfo,sW=!0,sG(e,i,r),s$=a,sW=s;break;case 0:case 11:case 14:case 15:if(!sO&&null!==(a=r.updateQueue)&&null!==(a=a.lastEffect)){s=a=a.next;do{var o=s,l=o.destroy;o=o.tag,void 0!==l&&(0!=(2&o)?sF(r,i,l):0!=(4&o)&&sF(r,i,l)),s=s.next}while(s!==a)}sG(e,i,r);break;case 1:if(!sO&&(sY(r,i),"function"==typeof(a=r.stateNode).componentWillUnmount))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(u){oU(r,i,u)}sG(e,i,r);break;case 21:default:sG(e,i,r);break;case 22:1&r.mode?(sO=(a=sO)||null!==r.memoizedState,sG(e,i,r),sO=a):sG(e,i,r)}}function sZ(e){var i=e.updateQueue;if(null!==i){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new sz),i.forEach(function(i){var n=oq.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function sX(e,i){var r=i.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var s=i,o=s;e:for(;null!==o;){switch(o.tag){case 5:s$=o.stateNode,sW=!1;break e;case 3:case 4:s$=o.stateNode.containerInfo,sW=!0;break e}o=o.return}if(null===s$)throw Error(d(160));sq(e,s,a),s$=null,sW=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(u){oU(a,i,u)}}if(12854&i.subtreeFlags)for(i=i.child;null!==i;)sJ(i,e),i=i.sibling}function sJ(e,i){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sX(i,e),sK(e),4&n){try{sB(3,e,e.return),sN(3,e)}catch(i){oU(e,e.return,i)}try{sB(5,e,e.return)}catch(r){oU(e,e.return,r)}}break;case 1:sX(i,e),sK(e),512&n&&null!==r&&sY(r,r.return);break;case 5:if(sX(i,e),sK(e),512&n&&null!==r&&sY(r,r.return),32&e.flags){var a=e.stateNode;try{em(a,"")}catch(i){oU(e,e.return,i)}}if(4&n&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==r?r.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&et(a,s),ew(l,o);var h=ew(l,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];"style"===c?ev(a,f):"dangerouslySetInnerHTML"===c?ep(a,f):"children"===c?em(a,f):S(a,c,f,h)}switch(l){case"input":ei(a,s);break;case"textarea":eu(a,s);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;null!=m?es(a,!!s.multiple,m,!1):!!s.multiple!==p&&(null!=s.defaultValue?es(a,!!s.multiple,s.defaultValue,!0):es(a,!!s.multiple,s.multiple?[]:"",!1))}a[rI]=s}catch(i){oU(e,e.return,i)}}break;case 6:if(sX(i,e),sK(e),4&n){if(null===e.stateNode)throw Error(d(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(i){oU(e,e.return,i)}}break;case 3:if(sX(i,e),sK(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{tO(i.containerInfo)}catch(_){oU(e,e.return,_)}break;case 4:default:sX(i,e),sK(e);break;case 13:sX(i,e),sK(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,s&&(null===a.alternate||null===a.alternate.memoizedState)&&(ou=e0())),4&n&&sZ(e);break;case 22:if(c=null!==r&&null!==r.memoizedState,1&e.mode?(sO=(h=sO)||c,sX(i,e),sO=h):sX(i,e),sK(e),8192&n){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!c&&0!=(1&e.mode))for(sR=e,c=e.child;null!==c;){for(f=sR=c;null!==sR;){switch(m=(p=sR).child,p.tag){case 0:case 11:case 14:case 15:sB(4,p,p.return);break;case 1:sY(p,p.return);var g=p.stateNode;if("function"==typeof g.componentWillUnmount){n=p,r=p.return;try{i=n,g.props=i.memoizedProps,g.state=i.memoizedState,g.componentWillUnmount()}catch(e){oU(n,r,e)}}break;case 5:sY(p,p.return);break;case 22:if(null!==p.memoizedState){s0(f);continue}}null!==m?(m.return=p,sR=m):s0(f)}c=c.sibling}e:for(c=null,f=e;;){if(5===f.tag){if(null===c){c=f;try{a=f.stateNode,h?(s=a.style,"function"==typeof s.setProperty?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,o=null!=(u=f.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=ey("display",o))}catch(i){oU(e,e.return,i)}}}else if(6===f.tag){if(null===c)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(i){oU(e,e.return,i)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:sX(i,e),sK(e),4&n&&sZ(e);case 21:}}function sK(e){var i=e.flags;if(2&i){try{e:{for(var r=e.return;null!==r;){if(sV(r)){var n=r;break e}r=r.return}throw Error(d(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(em(a,""),n.flags&=-33);var s=sU(e);!function e(i,r,n){var a=i.tag;if(5===a||6===a)i=i.stateNode,r?n.insertBefore(i,r):n.appendChild(i);else if(4!==a&&null!==(i=i.child))for(e(i,r,n),i=i.sibling;null!==i;)e(i,r,n),i=i.sibling}(e,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=sU(e);!function e(i,r,n){var a=i.tag;if(5===a||6===a)i=i.stateNode,r?8===n.nodeType?n.parentNode.insertBefore(i,r):n.insertBefore(i,r):(8===n.nodeType?(r=n.parentNode).insertBefore(i,n):(r=n).appendChild(i),null!=(n=n._reactRootContainer)||null!==r.onclick||(r.onclick=rv));else if(4!==a&&null!==(i=i.child))for(e(i,r,n),i=i.sibling;null!==i;)e(i,r,n),i=i.sibling}(e,l,o);break;default:throw Error(d(161))}}catch(i){oU(e,e.return,i)}e.flags&=-3}4096&i&&(e.flags&=-4097)}function sQ(e){for(;null!==sR;){var i=sR;if(0!=(8772&i.flags)){var r=i.alternate;try{if(0!=(8772&i.flags))switch(i.tag){case 0:case 11:case 15:sO||sN(5,i);break;case 1:var n=i.stateNode;if(4&i.flags&&!sO){if(null===r)n.componentDidMount();else{var a=i.elementType===i.type?r.memoizedProps:nS(i.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}}var s=i.updateQueue;null!==s&&nq(i,s,n);break;case 3:var o=i.updateQueue;if(null!==o){if(r=null,null!==i.child)switch(i.child.tag){case 5:case 1:r=i.child.stateNode}nq(i,o,r)}break;case 5:var l=i.stateNode;if(null===r&&4&i.flags){r=l;var u=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===i.memoizedState){var h=i.alternate;if(null!==h){var c=h.memoizedState;if(null!==c){var f=c.dehydrated;null!==f&&tO(f)}}}break;default:throw Error(d(163))}sO||512&i.flags&&sH(i)}catch(e){oU(i,i.return,e)}}if(i===e){sR=null;break}if(null!==(r=i.sibling)){r.return=i.return,sR=r;break}sR=i.return}}function s0(e){for(;null!==sR;){var i=sR;if(i===e){sR=null;break}var r=i.sibling;if(null!==r){r.return=i.return,sR=r;break}sR=i.return}}function s1(e){for(;null!==sR;){var i=sR;try{switch(i.tag){case 0:case 11:case 15:var r=i.return;try{sN(4,i)}catch(e){oU(i,r,e)}break;case 1:var n=i.stateNode;if("function"==typeof n.componentDidMount){var a=i.return;try{n.componentDidMount()}catch(e){oU(i,a,e)}}var s=i.return;try{sH(i)}catch(l){oU(i,s,l)}break;case 5:var o=i.return;try{sH(i)}catch(u){oU(i,o,u)}}}catch(u){oU(i,i.return,u)}if(i===e){sR=null;break}var l=i.sibling;if(null!==l){l.return=i.return,sR=l;break}sR=i.return}}var s2=Math.ceil,s3=k.ReactCurrentDispatcher,s4=k.ReactCurrentOwner,s5=k.ReactCurrentBatchConfig,s6=0,s8=null,s7=null,s9=0,oe=0,ot=rU(0),oi=0,or=null,on=0,oa=0,os=0,oo=null,ol=null,ou=0,oh=1/0,oc=null,od=!1,of=null,op=null,om=!1,o_=null,og=0,oy=0,ov=null,ox=-1,ob=0;function ow(){return 0!=(6&s6)?e0():-1!==ox?ox:ox=e0()}function oM(e){return 0==(1&e.mode)?1:0!=(2&s6)&&0!==s9?s9&-s9:null!==nL.transition?(0===ob&&(ob=to()),ob):0!==(e=tc)?e:e=void 0===(e=window.event)?16:tH(e.type)}function oT(e,i,r,n){if(50<oy)throw oy=0,ov=null,Error(d(185));tu(e,r,n),(0==(2&s6)||e!==s8)&&(e===s8&&(0==(2&s6)&&(oa|=r),4===oi&&oE(e,s9)),oL(e,n),1===r&&0===s6&&0==(1&i.mode)&&(oh=e0()+500,r5&&r7()))}function oL(e,i){var r,n=e.callbackNode;!function(e,i){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-e9(s),l=1<<o,u=a[o];-1===u?(0==(l&r)||0!=(l&n))&&(a[o]=function(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;default:return -1}}(l,i)):u<=i&&(e.expiredLanes|=l),s&=~l}}(e,i);var a=ta(e,e===s8?s9:0);if(0===a)null!==n&&eJ(n),e.callbackNode=null,e.callbackPriority=0;else if(i=a&-a,e.callbackPriority!==i){if(null!=n&&eJ(n),1===i)0===e.tag?(r=oA.bind(null,e),r5=!0,r8(r)):r8(oA.bind(null,e)),rS(function(){0==(6&s6)&&r7()}),n=null;else{switch(td(a)){case 1:n=e2;break;case 4:n=e3;break;case 16:default:n=e4;break;case 536870912:n=e6}n=eX(n,oS.bind(null,e))}e.callbackPriority=i,e.callbackNode=n}}function oS(e,i){if(ox=-1,ob=0,0!=(6&s6))throw Error(d(327));var r=e.callbackNode;if(oH()&&e.callbackNode!==r)return null;var n=ta(e,e===s8?s9:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||i)i=oF(e,n);else{i=n;var a=s6;s6|=2;var s=oR();for((s8!==e||s9!==i)&&(oc=null,oh=e0()+500,oO(e,i));;)try{!function(){for(;null!==s7&&!eK();)oj(s7)}();break}catch(i){oz(e,i)}nP(),s3.current=s,s6=a,null!==s7?i=0:(s8=null,s9=0,i=oi)}if(0!==i){if(2===i&&0!==(a=ts(e))&&(n=a,i=ok(e,a)),1===i)throw r=or,oO(e,0),oE(e,n),oL(e,e0()),r;if(6===i)oE(e,n);else{if(a=e.current.alternate,0==(30&n)&&!function(e){for(var i=e;;){if(16384&i.flags){var r=i.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!ij(s(),a))return!1}catch(e){return!1}}}if(r=i.child,16384&i.subtreeFlags&&null!==r)r.return=i,i=r;else{if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}(a)&&(2===(i=oF(e,n))&&0!==(s=ts(e))&&(n=s,i=ok(e,s)),1===i))throw r=or,oO(e,0),oE(e,n),oL(e,e0()),r;switch(e.finishedWork=a,e.finishedLanes=n,i){case 0:case 1:throw Error(d(345));case 2:case 5:oN(e,ol,oc);break;case 3:if(oE(e,n),(130023424&n)===n&&10<(i=ou+500-e0())){if(0!==ta(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ow(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=rM(oN.bind(null,e,ol,oc),i);break}oN(e,ol,oc);break;case 4:if(oE(e,n),(4194240&n)===n)break;for(a=-1,i=e.eventTimes;0<n;){var o=31-e9(n);s=1<<o,(o=i[o])>a&&(a=o),n&=~s}if(n=a,10<(n=(120>(n=e0()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*s2(n/1960))-n)){e.timeoutHandle=rM(oN.bind(null,e,ol,oc),n);break}oN(e,ol,oc);break;default:throw Error(d(329))}}}return oL(e,e0()),e.callbackNode===r?oS.bind(null,e):null}function ok(e,i){var r=oo;return e.current.memoizedState.isDehydrated&&(oO(e,i).flags|=256),2!==(e=oF(e,i))&&(i=ol,ol=r,null!==i&&oD(i)),e}function oD(e){null===ol?ol=e:ol.push.apply(ol,e)}function oE(e,i){for(i&=~os,i&=~oa,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var r=31-e9(i),n=1<<r;e[r]=-1,i&=~n}}function oA(e){if(0!=(6&s6))throw Error(d(327));oH();var i=ta(e,0);if(0==(1&i))return oL(e,e0()),null;var r=oF(e,i);if(0!==e.tag&&2===r){var n=ts(e);0!==n&&(i=n,r=ok(e,n))}if(1===r)throw r=or,oO(e,0),oE(e,i),oL(e,e0()),r;if(6===r)throw Error(d(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,oN(e,ol,oc),oL(e,e0()),null}function oP(e,i){var r=s6;s6|=1;try{return e(i)}finally{0===(s6=r)&&(oh=e0()+500,r5&&r7())}}function oC(e){null!==o_&&0===o_.tag&&0==(6&s6)&&oH();var i=s6;s6|=1;var r=s5.transition,n=tc;try{if(s5.transition=null,tc=1,e)return e()}finally{tc=n,s5.transition=r,0==(6&(s6=i))&&r7()}}function oI(){oe=ot.current,r$(ot)}function oO(e,i){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,rT(r)),null!==s7)for(r=s7.return;null!==r;){var n=r;switch(nc(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&rQ();break;case 3:an(),r$(rZ),r$(rq),ah();break;case 5:as(n);break;case 4:an();break;case 13:case 19:r$(ao);break;case 10:nC(n.type._context);break;case 22:case 23:oI()}r=r.return}if(s8=e,s7=e=oK(e.current,null),s9=oe=i,oi=0,or=null,os=oa=on=0,ol=oo=null,null!==nR){for(i=0;i<nR.length;i++)if(null!==(n=(r=nR[i]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var o=s.next;s.next=a,n.next=o}r.pending=n}nR=null}return e}function oz(e,i){for(;;){var r=s7;try{if(nP(),ac.current=a5,ag){for(var n=ap.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ag=!1}if(af=0,a_=am=ap=null,ay=!1,av=0,s4.current=null,null===r||null===r.return){oi=1,or=i,s7=null;break}e:{var s=e,o=r.return,l=r,u=i;if(i=s9,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var h=u,c=l,f=c.tag;if(0==(1&c.mode)&&(0===f||11===f||15===f)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=ss(o);if(null!==m){m.flags&=-257,so(m,o,l,s,i),1&m.mode&&sa(s,h,i),i=m,u=h;var _=i.updateQueue;if(null===_){var g=new Set;g.add(u),i.updateQueue=g}else _.add(u);break e}if(0==(1&i)){sa(s,h,i),oY();break e}u=Error(d(426))}else if(np&&1&l.mode){var y=ss(o);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),so(y,o,l,s,i),nT(a9(u,l));break e}}s=u=a9(u,l),4!==oi&&(oi=2),null===oo?oo=[s]:oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,i&=-i,s.lanes|=i;var v=sr(s,u,i);nW(s,v);break e;case 1:l=u;var x=s.type,b=s.stateNode;if(0==(128&s.flags)&&("function"==typeof x.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===op||!op.has(b)))){s.flags|=65536,i&=-i,s.lanes|=i;var w=sn(s,l,i);nW(s,w);break e}}s=s.return}while(null!==s)}oB(r)}catch(M){i=M,s7===r&&null!==r&&(s7=r=r.return);continue}break}}function oR(){var e=s3.current;return s3.current=a5,null===e?a5:e}function oY(){(0===oi||3===oi||2===oi)&&(oi=4),null===s8||0==(268435455&on)&&0==(268435455&oa)||oE(s8,s9)}function oF(e,i){var r=s6;s6|=2;var n=oR();for((s8!==e||s9!==i)&&(oc=null,oO(e,i));;)try{!function(){for(;null!==s7;)oj(s7)}();break}catch(i){oz(e,i)}if(nP(),s6=r,s3.current=n,null!==s7)throw Error(d(261));return s8=null,s9=0,oi}function oj(e){var i=u(e.alternate,e,oe);e.memoizedProps=e.pendingProps,null===i?oB(e):s7=i,s4.current=null}function oB(e){var i=e;do{var r=i.alternate;if(e=i.return,0==(32768&i.flags)){if(null!==(r=function(e,i,r){var n=i.pendingProps;switch(nc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sC(i),null;case 1:case 17:return rK(i.type)&&rQ(),sC(i),null;case 3:return n=i.stateNode,an(),r$(rZ),r$(rq),ah(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(nb(i)?i.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&i.flags)||(i.flags|=1024,null!==nm&&(oD(nm),nm=null))),s(e,i),sC(i),null;case 5:as(i);var u=ai(at.current);if(r=i.type,null!==e&&null!=i.stateNode)o(e,i,r,n,u),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!n){if(null===i.stateNode)throw Error(d(166));return sC(i),null}if(e=ai(n9.current),nb(i)){n=i.stateNode,r=i.type;var h=i.memoizedProps;switch(n[rC]=i,n[rI]=h,e=0!=(1&i.mode),r){case"dialog":ra("cancel",n),ra("close",n);break;case"iframe":case"object":case"embed":ra("load",n);break;case"video":case"audio":for(u=0;u<rt.length;u++)ra(rt[u],n);break;case"source":ra("error",n);break;case"img":case"image":case"link":ra("error",n),ra("load",n);break;case"details":ra("toggle",n);break;case"input":ee(n,h),ra("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!h.multiple},ra("invalid",n);break;case"textarea":el(n,h),ra("invalid",n)}for(var c in eb(r,h),u=null,h)if(h.hasOwnProperty(c)){var f=h[c];"children"===c?"string"==typeof f?n.textContent!==f&&(!0!==h.suppressHydrationWarning&&ry(n.textContent,f,e),u=["children",f]):"number"==typeof f&&n.textContent!==""+f&&(!0!==h.suppressHydrationWarning&&ry(n.textContent,f,e),u=["children",""+f]):p.hasOwnProperty(c)&&null!=f&&"onScroll"===c&&ra("scroll",n)}switch(r){case"input":X(n),er(n,h,!0);break;case"textarea":X(n),eh(n);break;case"select":case"option":break;default:"function"==typeof h.onClick&&(n.onclick=rv)}n=u,i.updateQueue=n,null!==n&&(i.flags|=4)}else{c=9===u.nodeType?u:u.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ec(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script></script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[rC]=i,e[rI]=n,a(e,i,!1,!1),i.stateNode=e;e:{switch(c=ew(r,n),r){case"dialog":ra("cancel",e),ra("close",e),u=n;break;case"iframe":case"object":case"embed":ra("load",e),u=n;break;case"video":case"audio":for(u=0;u<rt.length;u++)ra(rt[u],e);u=n;break;case"source":ra("error",e),u=n;break;case"img":case"image":case"link":ra("error",e),ra("load",e),u=n;break;case"details":ra("toggle",e),u=n;break;case"input":ee(e,n),u=Q(e,n),ra("invalid",e);break;case"option":default:u=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},u=U({},n,{value:void 0}),ra("invalid",e);break;case"textarea":el(e,n),u=eo(e,n),ra("invalid",e)}for(h in eb(r,u),f=u)if(f.hasOwnProperty(h)){var m=f[h];"style"===h?ev(e,m):"dangerouslySetInnerHTML"===h?null!=(m=m?m.__html:void 0)&&ep(e,m):"children"===h?"string"==typeof m?("textarea"!==r||""!==m)&&em(e,m):"number"==typeof m&&em(e,""+m):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(p.hasOwnProperty(h)?null!=m&&"onScroll"===h&&ra("scroll",e):null!=m&&S(e,h,m,c))}switch(r){case"input":X(e),er(e,n,!1);break;case"textarea":X(e),eh(e);break;case"option":null!=n.value&&e.setAttribute("value",""+q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(h=n.value)?es(e,!!n.multiple,h,!1):null!=n.defaultValue&&es(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=rv)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(i.flags|=4)}null!==i.ref&&(i.flags|=512,i.flags|=2097152)}return sC(i),null;case 6:if(e&&null!=i.stateNode)l(e,i,e.memoizedProps,n);else{if("string"!=typeof n&&null===i.stateNode)throw Error(d(166));if(r=ai(at.current),ai(n9.current),nb(i)){if(n=i.stateNode,r=i.memoizedProps,n[rC]=i,(h=n.nodeValue!==r)&&null!==(e=nd))switch(e.tag){case 3:ry(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ry(n.nodeValue,r,0!=(1&e.mode))}h&&(i.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[rC]=i,i.stateNode=n}return sC(i),null;case 13:if(r$(ao),n=i.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(np&&null!==nf&&0!=(1&i.mode)&&0==(128&i.flags))nw(),nM(),i.flags|=98560,h=!1;else if(h=nb(i),null!==n&&null!==n.dehydrated){if(null===e){if(!h)throw Error(d(318));if(!(h=null!==(h=i.memoizedState)?h.dehydrated:null))throw Error(d(317));h[rC]=i}else nM(),0==(128&i.flags)&&(i.memoizedState=null),i.flags|=4;sC(i),h=!1}else null!==nm&&(oD(nm),nm=null),h=!0;if(!h)return 65536&i.flags?i:null}if(0!=(128&i.flags))return i.lanes=r,i;return(n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(i.child.flags|=8192,0!=(1&i.mode)&&(null===e||0!=(1&ao.current)?0===oi&&(oi=3):oY())),null!==i.updateQueue&&(i.flags|=4),sC(i),null;case 4:return an(),s(e,i),null===e&&rl(i.stateNode.containerInfo),sC(i),null;case 10:return nC(i.type._context),sC(i),null;case 19:if(r$(ao),null===(h=i.memoizedState))return sC(i),null;if(n=0!=(128&i.flags),null===(c=h.rendering)){if(n)sP(h,!1);else{if(0!==oi||null!==e&&0!=(128&e.flags))for(e=i.child;null!==e;){if(null!==(c=al(e))){for(i.flags|=128,sP(h,!1),null!==(n=c.updateQueue)&&(i.updateQueue=n,i.flags|=4),i.subtreeFlags=0,n=r,r=i.child;null!==r;)h=r,e=n,h.flags&=14680066,null===(c=h.alternate)?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=c.childLanes,h.lanes=c.lanes,h.child=c.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=c.memoizedProps,h.memoizedState=c.memoizedState,h.updateQueue=c.updateQueue,h.type=c.type,e=c.dependencies,h.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rW(ao,1&ao.current|2),i.child}e=e.sibling}null!==h.tail&&e0()>oh&&(i.flags|=128,n=!0,sP(h,!1),i.lanes=4194304)}}else{if(!n){if(null!==(e=al(c))){if(i.flags|=128,n=!0,null!==(r=e.updateQueue)&&(i.updateQueue=r,i.flags|=4),sP(h,!0),null===h.tail&&"hidden"===h.tailMode&&!c.alternate&&!np)return sC(i),null}else 2*e0()-h.renderingStartTime>oh&&1073741824!==r&&(i.flags|=128,n=!0,sP(h,!1),i.lanes=4194304)}h.isBackwards?(c.sibling=i.child,i.child=c):(null!==(r=h.last)?r.sibling=c:i.child=c,h.last=c)}if(null!==h.tail)return i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=e0(),i.sibling=null,r=ao.current,rW(ao,n?1&r|2:1&r),i;return sC(i),null;case 22:case 23:return oI(),n=null!==i.memoizedState,null!==e&&null!==e.memoizedState!==n&&(i.flags|=8192),n&&0!=(1&i.mode)?0!=(1073741824&oe)&&(sC(i),6&i.subtreeFlags&&(i.flags|=8192)):sC(i),null;case 24:case 25:return null}throw Error(d(156,i.tag))}(r,i,oe))){s7=r;return}}else{if(null!==(r=function(e,i){switch(nc(i),i.tag){case 1:return rK(i.type)&&rQ(),65536&(e=i.flags)?(i.flags=-65537&e|128,i):null;case 3:return an(),r$(rZ),r$(rq),ah(),0!=(65536&(e=i.flags))&&0==(128&e)?(i.flags=-65537&e|128,i):null;case 5:return as(i),null;case 13:if(r$(ao),null!==(e=i.memoizedState)&&null!==e.dehydrated){if(null===i.alternate)throw Error(d(340));nM()}return 65536&(e=i.flags)?(i.flags=-65537&e|128,i):null;case 19:return r$(ao),null;case 4:return an(),null;case 10:return nC(i.type._context),null;case 22:case 23:return oI(),null;default:return null}}(r,i))){r.flags&=32767,s7=r;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oi=6,s7=null;return}}if(null!==(i=i.sibling)){s7=i;return}s7=i=e}while(null!==i)0===oi&&(oi=5)}function oN(e,i,r){var n=tc,a=s5.transition;try{s5.transition=null,tc=1,function(e,i,r,n){do oH();while(null!==o_)if(0!=(6&s6))throw Error(d(327));r=e.finishedWork;var a=e.finishedLanes;if(null!==r){if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(d(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,i){var r=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-e9(r),s=1<<a;i[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,s),e===s8&&(s7=s8=null,s9=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||om||(om=!0,eX(e4,function(){return oH(),null})),s=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||s){s=s5.transition,s5.transition=null;var o,l,u,h=tc;tc=1;var c=s6;s6|=4,s4.current=null,function(e,i){if(rx=tR,iU(e=iV())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a,s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(i){r=null;break e}var l=0,u=-1,h=-1,c=0,f=0,p=e,m=null;t:for(;;){for(;p!==r||0!==s&&3!==p.nodeType||(u=l+s),p!==o||0!==n&&3!==p.nodeType||(h=l+n),3===p.nodeType&&(l+=p.nodeValue.length),null!==(a=p.firstChild);)m=p,p=a;for(;;){if(p===e)break t;if(m===r&&++c===s&&(u=l),m===o&&++f===n&&(h=l),null!==(a=p.nextSibling))break;m=(p=m).parentNode}p=a}r=-1===u||-1===h?null:{start:u,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(rb={focusedElem:e,selectionRange:r},tR=!1,sR=i;null!==sR;)if(e=(i=sR).child,0!=(1028&i.subtreeFlags)&&null!==e)e.return=i,sR=e;else for(;null!==sR;){i=sR;try{var _=i.alternate;if(0!=(1024&i.flags))switch(i.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==_){var g=_.memoizedProps,y=_.memoizedState,v=i.stateNode,x=v.getSnapshotBeforeUpdate(i.elementType===i.type?g:nS(i.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=i.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(d(163))}}catch(r){oU(i,i.return,r)}if(null!==(e=i.sibling)){e.return=i.return,sR=e;break}sR=i.return}_=sj,sj=!1}(e,r),sJ(r,e),function(e){var i=iV(),r=e.focusedElem,n=e.selectionRange;if(i!==r&&r&&r.ownerDocument&&function e(i,r){return!!i&&!!r&&(i===r||(!i||3!==i.nodeType)&&(r&&3===r.nodeType?e(i,r.parentNode):"contains"in i?i.contains(r):!!i.compareDocumentPosition&&!!(16&i.compareDocumentPosition(r))))}(r.ownerDocument.documentElement,r)){if(null!==n&&iU(r)){if(i=n.start,void 0===(e=n.end)&&(e=i),"selectionStart"in r)r.selectionStart=i,r.selectionEnd=Math.min(e,r.value.length);else if((e=(i=r.ownerDocument||document)&&i.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=iH(r,s);var o=iH(r,n);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((i=i.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(i),e.extend(o.node,o.offset)):(i.setEnd(o.node,o.offset),e.addRange(i)))}}for(i=[],e=r;e=e.parentNode;)1===e.nodeType&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<i.length;r++)(e=i[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}(rb),tR=!!rx,rb=rx=null,e.current=r,o=r,l=e,u=a,sR=o,function e(i,r,n){for(var a=0!=(1&i.mode);null!==sR;){var s=sR,o=s.child;if(22===s.tag&&a){var l=null!==s.memoizedState||sI;if(!l){var u=s.alternate,h=null!==u&&null!==u.memoizedState||sO;u=sI;var c=sO;if(sI=l,(sO=h)&&!c)for(sR=s;null!==sR;)h=(l=sR).child,22===l.tag&&null!==l.memoizedState?s1(s):null!==h?(h.return=l,sR=h):s1(s);for(;null!==o;)sR=o,e(o,r,n),o=o.sibling;sR=s,sI=u,sO=c}sQ(i,r,n)}else 0!=(8772&s.subtreeFlags)&&null!==o?(o.return=s,sR=o):sQ(i,r,n)}}(o,l,u),eQ(),s6=c,tc=h,s5.transition=s}else e.current=r;if(om&&(om=!1,o_=e,og=a),0===(s=e.pendingLanes)&&(op=null),function(e){if(e7&&"function"==typeof e7.onCommitFiberRoot)try{e7.onCommitFiberRoot(e8,e,void 0,128==(128&e.current.flags))}catch(i){}}(r.stateNode,n),oL(e,e0()),null!==i)for(n=e.onRecoverableError,r=0;r<i.length;r++)n((a=i[r]).value,{componentStack:a.stack,digest:a.digest});if(od)throw od=!1,e=of,of=null,e;0!=(1&og)&&0!==e.tag&&oH(),0!=(1&(s=e.pendingLanes))?e===ov?oy++:(oy=0,ov=e):oy=0,r7()}}(e,i,r,n)}finally{s5.transition=a,tc=n}return null}function oH(){if(null!==o_){var e=td(og),i=s5.transition,r=tc;try{if(s5.transition=null,tc=16>e?16:e,null===o_)var n=!1;else{if(e=o_,o_=null,og=0,0!=(6&s6))throw Error(d(331));var a=s6;for(s6|=4,sR=e.current;null!==sR;){var s=sR,o=s.child;if(0!=(16&sR.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var h=l[u];for(sR=h;null!==sR;){var c=sR;switch(c.tag){case 0:case 11:case 15:sB(8,c,s)}var f=c.child;if(null!==f)f.return=c,sR=f;else for(;null!==sR;){var p=(c=sR).sibling,m=c.return;if(!function e(i){var r=i.alternate;null!==r&&(i.alternate=null,e(r)),i.child=null,i.deletions=null,i.sibling=null,5===i.tag&&null!==(r=i.stateNode)&&(delete r[rC],delete r[rI],delete r[rz],delete r[rR],delete r[rY]),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}(c),c===h){sR=null;break}if(null!==p){p.return=m,sR=p;break}sR=m}}}var _=s.alternate;if(null!==_){var g=_.child;if(null!==g){_.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}sR=s}}if(0!=(2064&s.subtreeFlags)&&null!==o)o.return=s,sR=o;else for(;null!==sR;){if(s=sR,0!=(2048&s.flags))switch(s.tag){case 0:case 11:case 15:sB(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,sR=v;break}sR=s.return}}var x=e.current;for(sR=x;null!==sR;){var b=(o=sR).child;if(0!=(2064&o.subtreeFlags)&&null!==b)b.return=o,sR=b;else for(o=x;null!==sR;){if(l=sR,0!=(2048&l.flags))try{switch(l.tag){case 0:case 11:case 15:sN(9,l)}}catch(e){oU(l,l.return,e)}if(l===o){sR=null;break}var w=l.sibling;if(null!==w){w.return=l.return,sR=w;break}sR=l.return}}if(s6=a,r7(),e7&&"function"==typeof e7.onPostCommitFiberRoot)try{e7.onPostCommitFiberRoot(e8,e)}catch(i){}n=!0}return n}finally{tc=r,s5.transition=i}}return!1}function oV(e,i,r){i=sr(e,i=a9(r,i),1),e=nU(e,i,1),i=ow(),null!==e&&(tu(e,1,i),oL(e,i))}function oU(e,i,r){if(3===e.tag)oV(e,e,r);else for(;null!==i;){if(3===i.tag){oV(i,e,r);break}if(1===i.tag){var n=i.stateNode;if("function"==typeof i.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===op||!op.has(n))){e=sn(i,e=a9(r,e),1),i=nU(i,e,1),e=ow(),null!==i&&(tu(i,1,e),oL(i,e));break}}i=i.return}}function o$(e,i,r){var n=e.pingCache;null!==n&&n.delete(i),i=ow(),e.pingedLanes|=e.suspendedLanes&r,s8===e&&(s9&r)===r&&(4===oi||3===oi&&(130023424&s9)===s9&&500>e0()-ou?oO(e,0):os|=r),oL(e,i)}function oW(e,i){0===i&&(0==(1&e.mode)?i=1:(i=tr,0==(130023424&(tr<<=1))&&(tr=4194304)));var r=ow();null!==(e=nj(e,i))&&(tu(e,i,r),oL(e,r))}function oG(e){var i=e.memoizedState,r=0;null!==i&&(r=i.retryLane),oW(e,r)}function oq(e,i){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(d(314))}null!==n&&n.delete(i),oW(e,r)}function oZ(e,i,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oX(e,i,r,n){return new oZ(e,i,r,n)}function oJ(e){return!(!(e=e.prototype)||!e.isReactComponent)}function oK(e,i){var r=e.alternate;return null===r?((r=oX(e.tag,i,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=i,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,i=e.dependencies,r.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function oQ(e,i,r,n,a,s){var o=2;if(n=e,"function"==typeof e)oJ(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case A:return o0(r.children,a,s,i);case P:o=8,a|=8;break;case C:return(e=oX(12,r,i,2|a)).elementType=C,e.lanes=s,e;case R:return(e=oX(13,r,i,a)).elementType=R,e.lanes=s,e;case Y:return(e=oX(19,r,i,a)).elementType=Y,e.lanes=s,e;case B:return o1(r,a,s,i);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case I:o=10;break e;case O:o=9;break e;case z:o=11;break e;case F:o=14;break e;case j:o=16,n=null;break e}throw Error(d(130,null==e?e:typeof e,""))}return(i=oX(o,r,i,a)).elementType=e,i.type=n,i.lanes=s,i}function o0(e,i,r,n){return(e=oX(7,e,n,i)).lanes=r,e}function o1(e,i,r,n){return(e=oX(22,e,n,i)).elementType=B,e.lanes=r,e.stateNode={isHidden:!1},e}function o2(e,i,r){return(e=oX(6,e,null,i)).lanes=r,e}function o3(e,i,r){return(i=oX(4,null!==e.children?e.children:[],e.key,i)).lanes=r,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function o4(e,i,r,n,a){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tl(0),this.expirationTimes=tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function o5(e,i,r,n,a,s,o,l,u){return e=new o4(e,i,r,l,u),1===i?(i=1,!0===s&&(i|=8)):i=0,s=oX(3,null,null,i),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nN(s),e}function o6(e){if(!e)return rG;e=e._reactInternals;e:{if(eW(e)!==e||1!==e.tag)throw Error(d(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(rK(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(null!==i)throw Error(d(171))}if(1===e.tag){var r=e.type;if(rK(r))return r1(e,r,i)}return i}function o8(e,i,r,n,a,s,o,l,u){return(e=o5(r,n,!0,e,a,s,o,l,u)).context=o6(null),r=e.current,(s=nV(n=ow(),a=oM(r))).callback=null!=i?i:null,nU(r,s,a),e.current.lanes=a,tu(e,a,n),oL(e,n),e}function o7(e,i,r,n){var a=i.current,s=ow(),o=oM(a);return r=o6(r),null===i.context?i.context=r:i.pendingContext=r,(i=nV(s,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(i.callback=n),null!==(e=nU(a,i,o))&&(oT(e,a,o,s),n$(e,a,o)),o}function o9(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function le(e,i){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<i?r:i}}function lt(e,i){le(e,i),(e=e.alternate)&&le(e,i)}u=function(e,i,r){if(null!==e){if(e.memoizedProps!==i.pendingProps||rZ.current)su=!0;else{if(0==(e.lanes&r)&&0==(128&i.flags))return su=!1,function(e,i,r){switch(i.tag){case 3:sv(i),nM();break;case 5:aa(i);break;case 1:rK(i.type)&&r2(i);break;case 4:ar(i,i.stateNode.containerInfo);break;case 10:var n=i.type._context,a=i.memoizedProps.value;rW(nk,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=i.memoizedState)){if(null!==n.dehydrated)return rW(ao,1&ao.current),i.flags|=128,null;if(0!=(r&i.child.childLanes))return sM(e,i,r);return rW(ao,1&ao.current),null!==(e=sA(e,i,r))?e.sibling:null}rW(ao,1&ao.current);break;case 19:if(n=0!=(r&i.childLanes),0!=(128&e.flags)){if(n)return sD(e,i,r);i.flags|=128}if(null!==(a=i.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),rW(ao,ao.current),!n)return null;break;case 22:case 23:return i.lanes=0,sp(e,i,r)}return sA(e,i,r)}(e,i,r);su=0!=(131072&e.flags)}}else su=!1,np&&0!=(1048576&i.flags)&&nu(i,ni,i.index);switch(i.lanes=0,i.tag){case 2:var n=i.type;sE(e,i),e=i.pendingProps;var a=rJ(i,rq.current);nO(i,r),a=aM(null,i,n,e,a,r);var s=aT();return i.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(i.tag=1,i.memoizedState=null,i.updateQueue=null,rK(n)?(s=!0,r2(i)):s=!1,i.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,nN(i),a.updater=nJ,i.stateNode=a,a._reactInternals=i,n1(i,n,e,r),i=sy(null,i,n,!0,s,r)):(i.tag=0,np&&s&&nh(i),sh(null,i,a,r),i=i.child),i;case 16:n=i.elementType;e:{switch(sE(e,i),e=i.pendingProps,n=(a=n._init)(n._payload),i.type=n,a=i.tag=function(e){if("function"==typeof e)return oJ(e)?1:0;if(null!=e){if((e=e.$$typeof)===z)return 11;if(e===F)return 14}return 2}(n),e=nS(n,e),a){case 0:i=s_(null,i,n,e,r);break e;case 1:i=sg(null,i,n,e,r);break e;case 11:i=sc(null,i,n,e,r);break e;case 14:i=sd(null,i,n,nS(n.type,e),r);break e}throw Error(d(306,n,""))}return i;case 0:return n=i.type,a=i.pendingProps,a=i.elementType===n?a:nS(n,a),s_(e,i,n,a,r);case 1:return n=i.type,a=i.pendingProps,a=i.elementType===n?a:nS(n,a),sg(e,i,n,a,r);case 3:e:{if(sv(i),null===e)throw Error(d(387));n=i.pendingProps,a=(s=i.memoizedState).element,nH(e,i),nG(i,n,null,r);var o=i.memoizedState;if(n=o.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},i.updateQueue.baseState=s,i.memoizedState=s,256&i.flags){a=a9(Error(d(423)),i),i=sx(e,i,n,r,a);break e}if(n!==a){a=a9(Error(d(424)),i),i=sx(e,i,n,r,a);break e}for(nf=rE(i.stateNode.containerInfo.firstChild),nd=i,np=!0,nm=null,r=n8(i,null,n,r),i.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(nM(),n===a){i=sA(e,i,r);break e}sh(e,i,n,r)}i=i.child}return i;case 5:return aa(i),null===e&&nv(i),n=i.type,a=i.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,rw(n,a)?o=null:null!==s&&rw(n,s)&&(i.flags|=32),sm(e,i),sh(e,i,o,r),i.child;case 6:return null===e&&nv(i),null;case 13:return sM(e,i,r);case 4:return ar(i,i.stateNode.containerInfo),n=i.pendingProps,null===e?i.child=n6(i,null,n,r):sh(e,i,n,r),i.child;case 11:return n=i.type,a=i.pendingProps,a=i.elementType===n?a:nS(n,a),sc(e,i,n,a,r);case 7:return sh(e,i,i.pendingProps,r),i.child;case 8:case 12:return sh(e,i,i.pendingProps.children,r),i.child;case 10:e:{if(n=i.type._context,a=i.pendingProps,s=i.memoizedProps,o=a.value,rW(nk,n._currentValue),n._currentValue=o,null!==s){if(ij(s.value,o)){if(s.children===a.children&&!rZ.current){i=sA(e,i,r);break e}}else for(null!==(s=i.child)&&(s.return=i);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var u=l.firstContext;null!==u;){if(u.context===n){if(1===s.tag){(u=nV(-1,r&-r)).tag=2;var h=s.updateQueue;if(null!==h){var c=(h=h.shared).pending;null===c?u.next=u:(u.next=c.next,c.next=u),h.pending=u}}s.lanes|=r,null!==(u=s.alternate)&&(u.lanes|=r),nI(s.return,r,i),l.lanes|=r;break}u=u.next}}else if(10===s.tag)o=s.type===i.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(d(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),nI(o,r,i),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===i){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}sh(e,i,a.children,r),i=i.child}return i;case 9:return a=i.type,n=i.pendingProps.children,nO(i,r),n=n(a=nz(a)),i.flags|=1,sh(e,i,n,r),i.child;case 14:return a=nS(n=i.type,i.pendingProps),a=nS(n.type,a),sd(e,i,n,a,r);case 15:return sf(e,i,i.type,i.pendingProps,r);case 17:return n=i.type,a=i.pendingProps,a=i.elementType===n?a:nS(n,a),sE(e,i),i.tag=1,rK(n)?(e=!0,r2(i)):e=!1,nO(i,r),nQ(i,n,a),n1(i,n,a,r),sy(null,i,n,!0,e,r);case 19:return sD(e,i,r);case 22:return sp(e,i,r)}throw Error(d(156,i.tag))};var li="function"==typeof reportError?reportError:function(e){console.error(e)};function lr(e){this._internalRoot=e}function ln(e){this._internalRoot=e}function la(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ls(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function lo(){}function ll(e,i,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if("function"==typeof a){var l=a;a=function(){var e=o9(o);l.call(e)}}o7(i,o,e,a)}else o=function(e,i,r,n,a){if(a){if("function"==typeof n){var s=n;n=function(){var e=o9(o);s.call(e)}}var o=o8(i,n,e,0,null,!1,!1,"",lo);return e._reactRootContainer=o,e[rO]=o.current,rl(8===e.nodeType?e.parentNode:e),oC(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof n){var l=n;n=function(){var e=o9(u);l.call(e)}}var u=o5(e,0,!1,null,null,!1,!1,"",lo);return e._reactRootContainer=u,e[rO]=u.current,rl(8===e.nodeType?e.parentNode:e),oC(function(){o7(i,u,r,n)}),u}(r,i,e,a,n);return o9(o)}ln.prototype.render=lr.prototype.render=function(e){var i=this._internalRoot;if(null===i)throw Error(d(409));o7(e,i,null,null)},ln.prototype.unmount=lr.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var i=e.containerInfo;oC(function(){o7(null,e,null,null)}),i[rO]=null}},ln.prototype.unstable_scheduleHydration=function(e){if(e){var i=t_();e={blockedOn:null,target:e,priority:i};for(var r=0;r<tL.length&&0!==i&&i<tL[r].priority;r++);tL.splice(r,0,e),0===r&&tE(e)}},tf=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var r=tn(i.pendingLanes);0!==r&&(th(i,1|r),oL(i,e0()),0==(6&s6)&&(oh=e0()+500,r7()))}break;case 13:oC(function(){var i=nj(e,1);null!==i&&oT(i,e,1,ow())}),lt(e,1)}},tp=function(e){if(13===e.tag){var i=nj(e,134217728);null!==i&&oT(i,e,134217728,ow()),lt(e,134217728)}},tm=function(e){if(13===e.tag){var i=oM(e),r=nj(e,i);null!==r&&oT(r,e,i,ow()),lt(e,i)}},t_=function(){return tc},tg=function(e,i){var r=tc;try{return tc=e,i()}finally{tc=r}},eL=function(e,i,r){switch(i){case"input":if(ei(e,r),i=r.name,"radio"===r.type&&null!=i){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<r.length;i++){var n=r[i];if(n!==e&&n.form===e.form){var a=rN(n);if(!a)throw Error(d(90));J(n),ei(n,a)}}}break;case"textarea":eu(e,r);break;case"select":null!=(i=r.value)&&es(e,!!r.multiple,i,!1)}},eP=oP,eC=oC;var lu={findFiberByHostInstance:rF,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lh={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=eZ(e))?null:e.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{e8=lc.inject(lh),e7=lc}catch(e){}}i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={usingClientEntryPoint:!1,Events:[rj,rB,rN,eE,eA,oP]},i.createPortal=function(e,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!la(i))throw Error(d(200));return function(e,i,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==n?null:""+n,children:e,containerInfo:i,implementation:null}}(e,i,null,r)},i.createRoot=function(e,i){if(!la(e))throw Error(d(299));var r=!1,n="",a=li;return null!=i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(n=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),i=o5(e,1,!1,null,null,r,!1,n,a),e[rO]=i.current,rl(8===e.nodeType?e.parentNode:e),new lr(i)},i.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var i=e._reactInternals;if(void 0===i){if("function"==typeof e.render)throw Error(d(188));throw Error(d(268,e=Object.keys(e).join(",")))}return e=null===(e=eZ(i))?null:e.stateNode},i.flushSync=function(e){return oC(e)},i.hydrate=function(e,i,r){if(!ls(i))throw Error(d(200));return ll(null,e,i,!0,r)},i.hydrateRoot=function(e,i,r){if(!la(e))throw Error(d(405));var n=null!=r&&r.hydratedSources||null,a=!1,s="",o=li;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),i=o8(i,null,e,1,null!=r?r:null,a,!1,s,o),e[rO]=i.current,rl(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==i.mutableSourceEagerHydrationData?i.mutableSourceEagerHydrationData=[r,a]:i.mutableSourceEagerHydrationData.push(r,a);return new ln(i)},i.render=function(e,i,r){if(!ls(i))throw Error(d(200));return ll(null,e,i,!1,r)},i.unmountComponentAtNode=function(e){if(!ls(e))throw Error(d(40));return!!e._reactRootContainer&&(oC(function(){ll(null,null,e,!1,function(){e._reactRootContainer=null,e[rO]=null})}),!0)},i.unstable_batchedUpdates=oP,i.unstable_renderSubtreeIntoContainer=function(e,i,r,n){if(!ls(r))throw Error(d(200));if(null==e||void 0===e._reactInternals)throw Error(d(38));return ll(e,i,r,!1,n)},i.version="18.2.0-next-9e3b772b8-20220608"},745:(e,i,r)=>{"use strict";var n=r(3935);i.createRoot=n.createRoot,i.hydrateRoot=n.hydrateRoot},3935:(e,i,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}(),e.exports=r(4448)},9921:(e,i)=>{"use strict";var r,n=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");r=Symbol.for("react.module.reference"),i.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===l||e===o||e===f||e===p||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===_||e.$$typeof===m||e.$$typeof===u||e.$$typeof===h||e.$$typeof===d||e.$$typeof===r||void 0!==e.getModuleId)},i.typeOf=function(e){if("object"==typeof e&&null!==e){var i=e.$$typeof;switch(i){case n:switch(e=e.type){case s:case l:case o:case f:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case d:case _:case m:case u:return e;default:return i}}case a:return i}}}},9864:(e,i,r)=>{"use strict";e.exports=r(9921)},5251:(e,i,r)=>{"use strict";var n=r(7294),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(e,i,r){var n,s={},h=null,c=null;for(n in void 0!==r&&(h=""+r),void 0!==i.key&&(h=""+i.key),void 0!==i.ref&&(c=i.ref),i)o.call(i,n)&&!u.hasOwnProperty(n)&&(s[n]=i[n]);if(e&&e.defaultProps)for(n in i=e.defaultProps)void 0===s[n]&&(s[n]=i[n]);return{$$typeof:a,type:e,key:h,ref:c,props:s,_owner:l.current}}i.Fragment=s,i.jsx=h,i.jsxs=h},2408:(e,i)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator,m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,g={};function y(e,i,r){this.props=e,this.context=i,this.refs=g,this.updater=r||m}function v(){}function x(e,i,r){this.props=e,this.context=i,this.refs=g,this.updater=r||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,i){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,_(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,M=Object.prototype.hasOwnProperty,T={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function S(e,i,n){var a,s={},o=null,l=null;if(null!=i)for(a in void 0!==i.ref&&(l=i.ref),void 0!==i.key&&(o=""+i.key),i)M.call(i,a)&&!L.hasOwnProperty(a)&&(s[a]=i[a]);var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){for(var h=Array(u),c=0;c<u;c++)h[c]=arguments[c+2];s.children=h}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===s[a]&&(s[a]=u[a]);return{$$typeof:r,type:e,key:o,ref:l,props:s,_owner:T.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var D=/\/+/g;function E(e,i){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):i.toString(36)}function A(e,i,a){if(null==e)return e;var s=[],o=0;return!function e(i,a,s,o,l){var u,h,c,d=typeof i;("undefined"===d||"boolean"===d)&&(i=null);var f=!1;if(null===i)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(i.$$typeof){case r:case n:f=!0}}if(f)return l=l(f=i),i=""===o?"."+E(f,0):o,w(l)?(s="",null!=i&&(s=i.replace(D,"$&/")+"/"),e(l,a,s,"",function(e){return e})):null!=l&&(k(l)&&(u=l,h=s+(!l.key||f&&f.key===l.key?"":(""+l.key).replace(D,"$&/")+"/")+i,l={$$typeof:r,type:u.type,key:h,ref:u.ref,props:u.props,_owner:u._owner}),a.push(l)),1;if(f=0,o=""===o?".":o+":",w(i))for(var m=0;m<i.length;m++){var _=o+E(d=i[m],m);f+=e(d,a,s,_,l)}else if("function"==typeof(_=null===(c=i)||"object"!=typeof c?null:"function"==typeof(c=p&&c[p]||c["@@iterator"])?c:null))for(i=_.call(i),m=0;!(d=i.next()).done;)_=o+E(d=d.value,m++),f+=e(d,a,s,_,l);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(a=String(i))?"object with keys {"+Object.keys(i).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return f}(e,s,"","",function(e){return i.call(a,e,o++)}),s}function P(e){if(-1===e._status){var i=e._result;(i=i()).then(function(i){(0===e._status||-1===e._status)&&(e._status=1,e._result=i)},function(i){(0===e._status||-1===e._status)&&(e._status=2,e._result=i)}),-1===e._status&&(e._status=0,e._result=i)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},I={transition:null};i.Children={map:A,forEach:function(e,i,r){A(e,function(){i.apply(this,arguments)},r)},count:function(e){var i=0;return A(e,function(){i++}),i},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i.Component=y,i.Fragment=a,i.Profiler=o,i.PureComponent=x,i.StrictMode=s,i.Suspense=c,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:I,ReactCurrentOwner:T},i.cloneElement=function(e,i,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=_({},e.props),s=e.key,o=e.ref,l=e._owner;if(null!=i){if(void 0!==i.ref&&(o=i.ref,l=T.current),void 0!==i.key&&(s=""+i.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(h in i)M.call(i,h)&&!L.hasOwnProperty(h)&&(a[h]=void 0===i[h]&&void 0!==u?u[h]:i[h])}var h=arguments.length-2;if(1===h)a.children=n;else if(1<h){u=Array(h);for(var c=0;c<h;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:r,type:e.type,key:s,ref:o,props:a,_owner:l}},i.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},i.createElement=S,i.createFactory=function(e){var i=S.bind(null,e);return i.type=e,i},i.createRef=function(){return{current:null}},i.forwardRef=function(e){return{$$typeof:h,render:e}},i.isValidElement=k,i.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},i.memo=function(e,i){return{$$typeof:d,type:e,compare:void 0===i?null:i}},i.startTransition=function(e){var i=I.transition;I.transition={};try{e()}finally{I.transition=i}},i.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},i.useCallback=function(e,i){return C.current.useCallback(e,i)},i.useContext=function(e){return C.current.useContext(e)},i.useDebugValue=function(){},i.useDeferredValue=function(e){return C.current.useDeferredValue(e)},i.useEffect=function(e,i){return C.current.useEffect(e,i)},i.useId=function(){return C.current.useId()},i.useImperativeHandle=function(e,i,r){return C.current.useImperativeHandle(e,i,r)},i.useInsertionEffect=function(e,i){return C.current.useInsertionEffect(e,i)},i.useLayoutEffect=function(e,i){return C.current.useLayoutEffect(e,i)},i.useMemo=function(e,i){return C.current.useMemo(e,i)},i.useReducer=function(e,i,r){return C.current.useReducer(e,i,r)},i.useRef=function(e){return C.current.useRef(e)},i.useState=function(e){return C.current.useState(e)},i.useSyncExternalStore=function(e,i,r){return C.current.useSyncExternalStore(e,i,r)},i.useTransition=function(){return C.current.useTransition()},i.version="18.2.0"},7294:(e,i,r)=>{"use strict";e.exports=r(2408)},5893:(e,i,r)=>{"use strict";e.exports=r(5251)},53:(e,i)=>{"use strict";function r(e,i){var r=e.length;for(e.push(i);0<r;){var n=r-1>>>1,a=e[n];if(0<s(a,i))e[n]=i,e[r]=a,r=n;else break}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var i=e[0],r=e.pop();if(r!==i){e[0]=r;for(var n=0,a=e.length,o=a>>>1;n<o;){var l=2*(n+1)-1,u=e[l],h=l+1,c=e[h];if(0>s(u,r))h<a&&0>s(c,u)?(e[n]=c,e[h]=r,n=h):(e[n]=u,e[l]=r,n=l);else if(h<a&&0>s(c,r))e[n]=c,e[h]=r,n=h;else break}}return i}function s(e,i){var r=e.sortIndex-i.sortIndex;return 0!==r?r:e.id-i.id}if("object"==typeof performance&&"function"==typeof performance.now){var o,l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var c=[],d=[],f=1,p=null,m=3,_=!1,g=!1,y=!1,v="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var i=n(d);null!==i;){if(null===i.callback)a(d);else if(i.startTime<=e)a(d),i.sortIndex=i.expirationTime,r(c,i);else break;i=n(d)}}function M(e){if(y=!1,w(e),!g){if(null!==n(c))g=!0,O(T);else{var i=n(d);null!==i&&z(M,i.startTime-e)}}}function T(e,r){g=!1,y&&(y=!1,x(k),k=-1),_=!0;var s=m;try{for(w(r),p=n(c);null!==p&&(!(p.expirationTime>r)||e&&!A());){var o=p.callback;if("function"==typeof o){p.callback=null,m=p.priorityLevel;var l=o(p.expirationTime<=r);r=i.unstable_now(),"function"==typeof l?p.callback=l:p===n(c)&&a(c),w(r)}else a(c);p=n(c)}if(null!==p)var u=!0;else{var h=n(d);null!==h&&z(M,h.startTime-r),u=!1}return u}finally{p=null,m=s,_=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var L=!1,S=null,k=-1,D=5,E=-1;function A(){return!(i.unstable_now()-E<D)}function P(){if(null!==S){var e=i.unstable_now();E=e;var r=!0;try{r=S(!0,e)}finally{r?o():(L=!1,S=null)}}else L=!1}if("function"==typeof b)o=function(){b(P)};else if("undefined"!=typeof MessageChannel){var C=new MessageChannel,I=C.port2;C.port1.onmessage=P,o=function(){I.postMessage(null)}}else o=function(){v(P,0)};function O(e){S=e,L||(L=!0,o())}function z(e,r){k=v(function(){e(i.unstable_now())},r)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(e){e.callback=null},i.unstable_continueExecution=function(){g||_||(g=!0,O(T))},i.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return n(c)},i.unstable_next=function(e){switch(m){case 1:case 2:case 3:var i=3;break;default:i=m}var r=m;m=i;try{return e()}finally{m=r}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(e,i){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return i()}finally{m=r}},i.unstable_scheduleCallback=function(e,a,s){var o=i.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return l=s+l,e={id:f++,callback:a,priorityLevel:e,startTime:s,expirationTime:l,sortIndex:-1},s>o?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(y?(x(k),k=-1):y=!0,z(M,s-o))):(e.sortIndex=l,r(c,e),g||_||(g=!0,O(T))),e},i.unstable_shouldYield=A,i.unstable_wrapCallback=function(e){var i=m;return function(){var r=m;m=i;try{return e.apply(this,arguments)}finally{m=r}}}},3840:(e,i,r)=>{"use strict";e.exports=r(53)},6774:e=>{e.exports=function(e,i,r,n){var a=r?r.call(n,e,i):void 0;if(void 0!==a)return!!a;if(e===i)return!0;if("object"!=typeof e||!e||"object"!=typeof i||!i)return!1;var s=Object.keys(e),o=Object.keys(i);if(s.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(i),u=0;u<s.length;u++){var h=s[u];if(!l(h))return!1;var c=e[h],d=i[h];if(!1===(a=r?r.call(n,c,d,h):void 0)||void 0===a&&c!==d)return!1}return!0}},3250:(e,i,r)=>{"use strict";var n=r(7294),a="function"==typeof Object.is?Object.is:function(e,i){return e===i&&(0!==e||1/e==1/i)||e!=e&&i!=i},s=n.useState,o=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function h(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!a(e,r)}catch(n){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,i){return i()}:function(e,i){var r=i(),n=s({inst:{value:r,getSnapshot:i}}),a=n[0].inst,c=n[1];return l(function(){a.value=r,a.getSnapshot=i,h(a)&&c({inst:a})},[e,r,i]),o(function(){return h(a)&&c({inst:a}),e(function(){h(a)&&c({inst:a})})},[e]),u(r),r};i.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},1688:(e,i,r)=>{"use strict";e.exports=r(3250)}},i={};function r(n){var a=i[n];if(void 0!==a)return a.exports;var s=i[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return r.d(i,{a:i}),i},r.d=(e,i)=>{for(var n in i)r.o(i,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.nc=void 0,(()=>{"use strict";let e;var i,n,a,s,o,l,u,h,c,d,f,p,m,_,g,y,v,x,b,w,M,T,L,S,k,D,E,A,P,C,I,O,z,R,Y,F,j,B,N,H,V,U,$,W,G,q,Z,X,J,K,Q,ee,et,ei,er,en={};r.r(en),r.d(en,{hasBrowserEnv:()=>s7,hasStandardBrowserEnv:()=>s9,hasStandardBrowserWebWorkerEnv:()=>oe});var ea=r(5893),es=r(745),eo=r(7294);function el(){return(el=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));var eu=function(e){return e},eh="beforeunload";function ec(e){e.preventDefault(),e.returnValue=""}function ed(){var e=[];return{get length(){return e.length},push:function(i){return e.push(i),function(){e=e.filter(function(e){return e!==i})}},call:function(i){e.forEach(function(e){return e&&e(i)})}}}function ef(e){var i=e.pathname,r=void 0===i?"/":i,n=e.search,a=void 0===n?"":n,s=e.hash,o=void 0===s?"":s;return a&&"?"!==a&&(r+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:"#"+o),r}function ep(e){var i={};if(e){var r=e.indexOf("#");r>=0&&(i.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(i.search=e.substr(n),e=e.substr(0,n)),e&&(i.pathname=e)}return i}let em=(0,eo.createContext)(null),e_=(0,eo.createContext)(null),eg=(0,eo.createContext)({outlet:null,matches:[]});function ey(e,i){if(!e)throw Error(i)}let ev=/^:\w+$/,ex=e=>"*"===e;function eb(e,i,r){let n,a="string"==typeof e?ep(e):e,s=""===e||""===a.pathname?"/":a.pathname;if(null==s)n=r;else{let e=i.length-1;if(s.startsWith("..")){let i=s.split("/");for(;".."===i[0];)i.shift(),e-=1;a.pathname=i.join("/")}n=e>=0?i[e]:"/"}let o=function(e,i){let r;void 0===i&&(i="/");let{pathname:n,search:a="",hash:s=""}="string"==typeof e?ep(e):e;return{pathname:n?n.startsWith("/")?n:(r=i.replace(/\/+$/,"").split("/"),n.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"):i,search:eL(a),hash:eS(s)}}(a,n);return s&&"/"!==s&&s.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function ew(e,i){if("/"===i)return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let r=e.charAt(i.length);return r&&"/"!==r?null:e.slice(i.length)||"/"}let eM=e=>e.join("/").replace(/\/\/+/g,"/"),eT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eL=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",eS=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ek(){return null!=(0,eo.useContext)(e_)}function eD(){return ek()||ey(!1),(0,eo.useContext)(e_).location}let eE=(0,eo.createContext)(null);function eA(e){let{matches:i}=(0,eo.useContext)(eg),{pathname:r}=eD(),n=JSON.stringify(i.map(e=>e.pathnameBase));return(0,eo.useMemo)(()=>eb(e,JSON.parse(n),r),[e,n,r])}function eP(e){var i;let r;return i=e.context,(r=(0,eo.useContext)(eg).outlet)?(0,eo.createElement)(eE.Provider,{value:i},r):r}function eC(e){ey(!1)}function eI(e){let{basename:i="/",children:r=null,location:n,navigationType:a=s.Pop,navigator:o,static:l=!1}=e;ek()&&ey(!1);let u=eT(i),h=(0,eo.useMemo)(()=>({basename:u,navigator:o,static:l}),[u,o,l]);"string"==typeof n&&(n=ep(n));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:m="default"}=n,_=(0,eo.useMemo)(()=>{let e=ew(c,u);return null==e?null:{pathname:e,search:d,hash:f,state:p,key:m}},[u,c,d,f,p,m]);return null==_?null:(0,eo.createElement)(em.Provider,{value:h},(0,eo.createElement)(e_.Provider,{children:r,value:{location:_,navigationType:a}}))}function eO(e){let{children:i,location:r}=e;return function(e,i){var r,n,a;let s;ek()||ey(!1);let{matches:o}=(0,eo.useContext)(eg),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let c=eD();if(i){let e="string"==typeof i?ep(i):i;"/"===h||(null==(r=e.pathname)?void 0:r.startsWith(h))||ey(!1),s=e}else s=c;let d=s.pathname||"/",f=function(e,i,r){void 0===r&&(r="/");let n=ew(("string"==typeof i?ep(i):i).pathname||"/",r);if(null==n)return null;let a=function e(i,r,n,a){return void 0===r&&(r=[]),void 0===n&&(n=[]),void 0===a&&(a=""),i.forEach((i,s)=>{let o={relativePath:i.path||"",caseSensitive:!0===i.caseSensitive,childrenIndex:s,route:i};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(a)||ey(!1),o.relativePath=o.relativePath.slice(a.length));let l=eM([a,o.relativePath]),u=n.concat(o);if(i.children&&i.children.length>0&&(!0!==i.index||ey(!1),e(i.children,r,u,l)),null!=i.path||i.index){var h;let e,n;r.push({path:l,score:(h=i.index,n=(e=l.split("/")).length,e.some(ex)&&(n+=-2),h&&(n+=2),e.filter(e=>!ex(e)).reduce((e,i)=>e+(ev.test(i)?3:""===i?1:10),n)),routesMeta:u})}}),r}(e);!function(e){e.sort((e,i)=>{var r,n;return e.score!==i.score?i.score-e.score:(r=e.routesMeta.map(e=>e.childrenIndex),n=i.routesMeta.map(e=>e.childrenIndex),r.length===n.length&&r.slice(0,-1).every((e,i)=>e===n[i])?r[r.length-1]-n[n.length-1]:0)})}(a);let s=null;for(let e=0;null==s&&e<a.length;++e)s=function(e,i){let{routesMeta:r}=e,n={},a="/",s=[];for(let e=0;e<r.length;++e){let o=r[e],l=e===r.length-1,u="/"===a?i:i.slice(a.length)||"/",h=function(e,i){var r,n,a;let s,o;"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[l,u]=(r=e.path,n=e.caseSensitive,a=e.end,void 0===n&&(n=!1),void 0===a&&(a=!0),s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,i)=>(s.push(i),"([^\\/]+)")),r.endsWith("*")?(s.push("*"),o+="*"===r||"/*"===r?"(.*)$":"(?:\\/(.+)|\\/*)$"):o+=a?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(o,n?void 0:"i"),s]),h=i.match(l);if(!h)return null;let c=h[0],d=c.replace(/(.)\/+$/,"$1"),f=h.slice(1);return{params:u.reduce((e,i,r)=>{if("*"===i){let e=f[r]||"";d=c.slice(0,c.length-e.length).replace(/(.)\/+$/,"$1")}return e[i]=function(e,i){try{return decodeURIComponent(e)}catch(r){return e}}(f[r]||"",0),e},{}),pathname:c,pathnameBase:d,pattern:e}}({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u);if(!h)return null;Object.assign(n,h.params);let c=o.route;s.push({params:n,pathname:eM([a,h.pathname]),pathnameBase:eT(eM([a,h.pathnameBase])),route:c}),"/"!==h.pathnameBase&&(a=eM([a,h.pathnameBase]))}return s}(a[e],n);return s}(e,{pathname:"/"===h?d:d.slice(h.length)||"/"});return n=f&&f.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:eM([h,e.pathname]),pathnameBase:"/"===e.pathnameBase?h:eM([h,e.pathnameBase])})),(void 0===(a=o)&&(a=[]),null==n)?null:n.reduceRight((e,i,r)=>(0,eo.createElement)(eg.Provider,{children:void 0!==i.route.element?i.route.element:e,value:{outlet:e,matches:a.concat(n.slice(0,r+1))}}),null)}(function e(i){let r=[];return eo.Children.forEach(i,i=>{if(!(0,eo.isValidElement)(i))return;if(i.type===eo.Fragment){r.push.apply(r,e(i.props.children));return}i.type!==eC&&ey(!1);let n={caseSensitive:i.props.caseSensitive,element:i.props.element,index:i.props.index,path:i.props.path};i.props.children&&(n.children=e(i.props.children)),r.push(n)}),r}(i),r)}function ez(){return(ez=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let eR=["onClick","reloadDocument","replace","state","target","to"];function eY(e){let{basename:i,children:r,window:n}=e,a=(0,eo.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var i=e.window,r=void 0===i?document.defaultView:i,n=r.history;function a(){var e=r.location,i=e.pathname,a=e.search,s=e.hash,o=n.state||{};return[o.idx,eu({pathname:i,search:a,hash:s,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener("popstate",function(){if(o)f.call(o),o=null;else{var e=s.Pop,i=a(),r=i[0],n=i[1];if(f.length){if(null!=r){var l=h-r;l&&(o={action:e,location:n,retry:function(){v(-1*l)}},v(l))}}else y(e)}});var l=s.Pop,u=a(),h=u[0],c=u[1],d=ed(),f=ed();function p(e){return"string"==typeof e?e:ef(e)}function m(e,i){return void 0===i&&(i=null),eu(el({pathname:c.pathname,hash:"",search:""},"string"==typeof e?ep(e):e,{state:i,key:Math.random().toString(36).substr(2,8)}))}function _(e,i){return[{usr:e.state,key:e.key,idx:i},p(e)]}function g(e,i,r){return!f.length||(f.call({action:e,location:i,retry:r}),!1)}function y(e){l=e;var i=a();h=i[0],c=i[1],d.call({action:l,location:c})}function v(e){n.go(e)}return null==h&&(h=0,n.replaceState(el({},n.state,{idx:h}),"")),{get action(){return l},get location(){return c},createHref:p,push:function e(i,a){var o=s.Push,l=m(i,a);if(g(o,l,function(){e(i,a)})){var u=_(l,h+1),c=u[0],d=u[1];try{n.pushState(c,"",d)}catch(e){r.location.assign(d)}y(o)}},replace:function e(i,r){var a=s.Replace,o=m(i,r);if(g(a,o,function(){e(i,r)})){var l=_(o,h),u=l[0],c=l[1];n.replaceState(u,"",c),y(a)}},go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(e){return d.push(e)},block:function(e){var i=f.push(e);return 1===f.length&&r.addEventListener(eh,ec),function(){i(),f.length||r.removeEventListener(eh,ec)}}}}({window:n}));let o=a.current,[l,u]=(0,eo.useState)({action:o.action,location:o.location});return(0,eo.useLayoutEffect)(()=>o.listen(u),[o]),(0,eo.createElement)(eI,{basename:i,children:r,location:l.location,navigationType:l.action,navigator:o})}let eF=(0,eo.forwardRef)(function(e,i){let{onClick:r,reloadDocument:n,replace:a=!1,state:s,target:o,to:l}=e,u=function(e,i){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],i.indexOf(r)>=0||(a[r]=e[r]);return a}(e,eR),h=function(e){ek()||ey(!1);let{basename:i,navigator:r}=(0,eo.useContext)(em),{hash:n,pathname:a,search:s}=eA(e),o=a;if("/"!==i){let r=""===e||""===e.pathname?"/":"string"==typeof e?ep(e).pathname:e.pathname,n=null!=r&&r.endsWith("/");o="/"===a?i+(n?"/":""):eM([i,a])}return r.createHref({pathname:o,search:s,hash:n})}(l),c=function(e,i){let{target:r,replace:n,state:a}=void 0===i?{}:i,s=function(){ek()||ey(!1);let{basename:e,navigator:i}=(0,eo.useContext)(em),{matches:r}=(0,eo.useContext)(eg),{pathname:n}=eD(),a=JSON.stringify(r.map(e=>e.pathnameBase)),s=(0,eo.useRef)(!1);return(0,eo.useEffect)(()=>{s.current=!0}),(0,eo.useCallback)(function(r,o){if(void 0===o&&(o={}),!s.current)return;if("number"==typeof r){i.go(r);return}let l=eb(r,JSON.parse(a),n);"/"!==e&&(l.pathname=eM([e,l.pathname])),(o.replace?i.replace:i.push)(l,o.state)},[e,i,a,n])}(),o=eD(),l=eA(e);return(0,eo.useCallback)(i=>{0!==i.button||r&&"_self"!==r||i.metaKey||i.altKey||i.ctrlKey||i.shiftKey||(i.preventDefault(),s(e,{replace:!!n||ef(o)===ef(l),state:a}))},[o,s,l,n,a,r,e])}(l,{replace:a,state:s,target:o});return(0,eo.createElement)("a",ez({},u,{href:h,onClick:function(e){r&&r(e),e.defaultPrevented||n||c(e)},ref:i,target:o}))});var ej=r(9864),eB=r(6774),eN=r.n(eB);let eH=function(e){function i(e,i,n){var a=i.trim().split(m);i=a;var s=a.length,o=e.length;switch(o){case 0:case 1:var l=0;for(e=0===o?"":e[0]+" ";l<s;++l)i[l]=r(e,i[l],n).trim();break;default:var u=l=0;for(i=[];l<s;++l)for(var h=0;h<o;++h)i[u++]=r(e[h]+" ",a[l],n).trim()}return i}function r(e,i,r){var n=i.charCodeAt(0);switch(33>n&&(n=(i=i.trim()).charCodeAt(0)),n){case 38:return i.replace(_,"$1"+e.trim());case 58:return e.trim()+i.replace(_,"$1"+e.trim());default:if(0<1*r&&0<i.indexOf("\f"))return i.replace(_,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+i}function n(e,i,r,s){var o=e+";",l=2*i+3*r+4*s;if(944===l){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===A||2===A&&a(u,1)?"-webkit-"+u+u:u}if(0===A||2===A&&!a(o,1))return o;switch(l){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(S,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return f.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(i=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(i)){case 226:u=o.replace(x,"tb");break;case 232:u=o.replace(x,"tb-rl");break;case 220:u=o.replace(x,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(i=(o=e).length-10,l=(u=(33===o.charCodeAt(i)?o.substring(0,i):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<l?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(M,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(M,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===L.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?n(e.replace("stretch","fill-available"),i,r,s).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===r+s&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,i){var r=e.indexOf(1===i?":":"{"),n=e.substring(0,3!==i?r:10);return r=e.substring(r+1,e.length-1),O(2!==i?n:n.replace(T,"$1"),r,i)}function s(e,i){var r=n(i,i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2));return r!==i+";"?r.replace(w," or ($1)").substring(4):"("+i+")"}function o(e,i,r,n,a,s,o,l,h,c){for(var d,f=0,p=i;f<I;++f)switch(d=C[f].call(u,e,p,r,n,a,s,o,l,h,c)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==i)return p}function l(e){return void 0!==(e=e.prefix)&&(O=null,e?"function"!=typeof e?A=1:(A=2,O=e):A=0),l}function u(e,r){var l=e;if(33>l.charCodeAt(0)&&(l=l.trim()),l=[l],0<I){var u=o(-1,r,l,l,D,k,0,0,0,0);void 0!==u&&"string"==typeof u&&(r=u)}var d=function e(r,l,u,d,f){for(var p,m,_,x,w,M=0,T=0,L=0,S=0,C=0,O=0,R=_=p=0,Y=0,F=0,j=0,B=0,N=u.length,H=N-1,V="",U="",$="",W="";Y<N;){if(m=u.charCodeAt(Y),Y===H&&0!==T+S+L+M&&(0!==T&&(m=47===T?10:47),S=L=M=0,N++,H++),0===T+S+L+M){if(Y===H&&(0<F&&(V=V.replace(c,"")),0<V.trim().length)){switch(m){case 32:case 9:case 59:case 13:case 10:break;default:V+=u.charAt(Y)}m=59}switch(m){case 123:for(p=(V=V.trim()).charCodeAt(0),_=1,B=++Y;Y<N;){switch(m=u.charCodeAt(Y)){case 123:_++;break;case 125:_--;break;case 47:switch(m=u.charCodeAt(Y+1)){case 42:case 47:e:{for(R=Y+1;R<H;++R)switch(u.charCodeAt(R)){case 47:if(42===m&&42===u.charCodeAt(R-1)&&Y+2!==R){Y=R+1;break e}break;case 10:if(47===m){Y=R+1;break e}}Y=R}}break;case 91:m++;case 40:m++;case 34:case 39:for(;Y++<H&&u.charCodeAt(Y)!==m;);}if(0===_)break;Y++}if(_=u.substring(B,Y),0===p&&(p=(V=V.replace(h,"").trim()).charCodeAt(0)),64===p){switch(0<F&&(V=V.replace(c,"")),m=V.charCodeAt(1)){case 100:case 109:case 115:case 45:F=l;break;default:F=P}if(B=(_=e(l,F,_,m,f+1)).length,0<I&&(w=o(3,_,F=i(P,V,j),l,D,k,B,m,f,d),V=F.join(""),void 0!==w&&0===(B=(_=w.trim()).length)&&(m=0,_="")),0<B)switch(m){case 115:V=V.replace(b,s);case 100:case 109:case 45:_=V+"{"+_+"}";break;case 107:_=(V=V.replace(g,"$1 $2"))+"{"+_+"}",_=1===A||2===A&&a("@"+_,3)?"@-webkit-"+_+"@"+_:"@"+_;break;default:_=V+_,112===d&&(U+=_,_="")}else _=""}else _=e(l,i(l,V,j),_,d,f+1);$+=_,_=j=F=R=p=0,V="",m=u.charCodeAt(++Y);break;case 125:case 59:if(1<(B=(V=(0<F?V.replace(c,""):V).trim()).length))switch(0===R&&(45===(p=V.charCodeAt(0))||96<p&&123>p)&&(B=(V=V.replace(" ",":")).length),0<I&&void 0!==(w=o(1,V,l,r,D,k,U.length,d,f,d))&&0===(B=(V=w.trim()).length)&&(V="\x00\x00"),p=V.charCodeAt(0),m=V.charCodeAt(1),p){case 0:break;case 64:if(105===m||99===m){W+=V+u.charAt(Y);break}default:58!==V.charCodeAt(B-1)&&(U+=n(V,p,m,V.charCodeAt(2)))}j=F=R=p=0,V="",m=u.charCodeAt(++Y)}}switch(m){case 13:case 10:47===T?T=0:0===1+p&&107!==d&&0<V.length&&(F=1,V+="\x00"),0<I*z&&o(0,V,l,r,D,k,U.length,d,f,d),k=1,D++;break;case 59:case 125:if(0===T+S+L+M){k++;break}default:switch(k++,x=u.charAt(Y),m){case 9:case 32:if(0===S+M+T)switch(C){case 44:case 58:case 9:case 32:x="";break;default:32!==m&&(x=" ")}break;case 0:x="\\0";break;case 12:x="\\f";break;case 11:x="\\v";break;case 38:0===S+T+M&&(F=j=1,x="\f"+x);break;case 108:if(0===S+T+M+E&&0<R)switch(Y-R){case 2:112===C&&58===u.charCodeAt(Y-3)&&(E=C);case 8:111===O&&(E=O)}break;case 58:0===S+T+M&&(R=Y);break;case 44:0===T+L+S+M&&(F=1,x+="\r");break;case 34:case 39:0===T&&(S=S===m?0:0===S?m:S);break;case 91:0===S+T+L&&M++;break;case 93:0===S+T+L&&M--;break;case 41:0===S+T+M&&L--;break;case 40:0===S+T+M&&(0===p&&(2*C+3*O==533||(p=1)),L++);break;case 64:0===T+L+S+M+R+_&&(_=1);break;case 42:case 47:if(!(0<S+M+L))switch(T){case 0:switch(2*m+3*u.charCodeAt(Y+1)){case 235:T=47;break;case 220:B=Y,T=42}break;case 42:47===m&&42===C&&B+2!==Y&&(33===u.charCodeAt(B+2)&&(U+=u.substring(B,Y+1)),x="",T=0)}}0===T&&(V+=x)}O=C,C=m,Y++}if(0<(B=U.length)){if(F=l,0<I&&void 0!==(w=o(2,U,F,r,D,k,B,d,f,d))&&0===(U=w).length)return W+U+$;if(U=F.join(",")+"{"+U+"}",0!=A*E){switch(2!==A||a(U,2)||(E=0),E){case 111:U=U.replace(v,":-moz-$1")+U;break;case 112:U=U.replace(y,"::-webkit-input-$1")+U.replace(y,"::-moz-$1")+U.replace(y,":-ms-input-$1")+U}E=0}}return W+U+$}(P,l,r,0,0);return 0<I&&void 0!==(u=o(-2,d,l,l,D,k,d.length,0,0,0))&&(d=u),E=0,k=D=1,d}var h=/^\0+/g,c=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,_=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,M=/-self|flex-/g,T=/[^]*?(:[rp][el]a[\w-]+)[^]*/,L=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,k=1,D=1,E=0,A=1,P=[],C=[],I=0,O=null,z=0;return u.use=function e(i){switch(i){case void 0:case null:I=C.length=0;break;default:if("function"==typeof i)C[I++]=i;else if("object"==typeof i)for(var r=0,n=i.length;r<n;++r)e(i[r]);else z=0|!!i}return e},u.set=l,void 0!==e&&l(e),u},eV={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var eU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,e$=function(e){var i=Object.create(null);return function(r){return void 0===i[r]&&(i[r]=e(r)),i[r]}}(function(e){return eU.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)}),eW=r(8679),eG=r.n(eW);function eq(){return(eq=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var eZ=function(e,i){for(var r=[e[0]],n=0,a=i.length;n<a;n+=1)r.push(i[n],e[n+1]);return r},eX=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,ej.typeOf)(e)},eJ=Object.freeze([]),eK=Object.freeze({});function eQ(e){return"function"==typeof e}function e0(e){return e.displayName||e.name||"Component"}function e1(e){return e&&"string"==typeof e.styledComponentId}var e2="undefined"!=typeof process&&("MISSING_ENV_VAR".REACT_APP_SC_ATTR||"MISSING_ENV_VAR".SC_ATTR)||"data-styled",e3="undefined"!=typeof window&&"HTMLElement"in window,e4=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&(void 0!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY&&""!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY?"false"!=="MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY&&"MISSING_ENV_VAR".REACT_APP_SC_DISABLE_SPEEDY:void 0!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&""!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&"false"!=="MISSING_ENV_VAR".SC_DISABLE_SPEEDY&&"MISSING_ENV_VAR".SC_DISABLE_SPEEDY)),e5={};function e6(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];throw Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}var e8=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var i=e.prototype;return i.indexOfGroup=function(e){for(var i=0,r=0;r<e;r++)i+=this.groupSizes[r];return i},i.insertRules=function(e,i){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,a=n;e>=a;)(a<<=1)<0&&e6(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var s=n;s<a;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),l=0,u=i.length;l<u;l++)this.tag.insertRule(o,i[l])&&(this.groupSizes[e]++,o++)},i.clearGroup=function(e){if(e<this.length){var i=this.groupSizes[e],r=this.indexOfGroup(e),n=r+i;this.groupSizes[e]=0;for(var a=r;a<n;a++)this.tag.deleteRule(r)}},i.getGroup=function(e){var i="";if(e>=this.length||0===this.groupSizes[e])return i;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),a=n+r,s=n;s<a;s++)i+=this.tag.getRule(s)+"/*!sc*/\n";return i},e}(),e7=new Map,e9=new Map,te=1,tt=function(e){if(e7.has(e))return e7.get(e);for(;e9.has(te);)te++;var i=te++;return e7.set(e,i),e9.set(i,e),i},ti=function(e,i){i>=te&&(te=i+1),e7.set(e,i),e9.set(i,e)},tr="style["+e2+'][data-styled-version="5.3.11"]',tn=RegExp("^"+e2+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),ta=function(e,i,r){for(var n,a=r.split(","),s=0,o=a.length;s<o;s++)(n=a[s])&&e.registerName(i,n)},ts=function(e,i){for(var r=(i.textContent||"").split("/*!sc*/\n"),n=[],a=0,s=r.length;a<s;a++){var o=r[a].trim();if(o){var l=o.match(tn);if(l){var u=0|parseInt(l[1],10),h=l[2];0!==u&&(ti(h,u),ta(e,h,l[3]),e.getTag().insertRules(u,n)),n.length=0}else n.push(o)}}},to=function(){return r.nc},tl=function(e){var i=document.head,r=e||i,n=document.createElement("style"),a=function(e){for(var i=e.childNodes,r=i.length;r>=0;r--){var n=i[r];if(n&&1===n.nodeType&&n.hasAttribute(e2))return n}}(r),s=void 0!==a?a.nextSibling:null;n.setAttribute(e2,"active"),n.setAttribute("data-styled-version","5.3.11");var o=to();return o&&n.setAttribute("nonce",o),r.insertBefore(n,s),n},tu=function(){function e(e){var i=this.element=tl(e);i.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var i=document.styleSheets,r=0,n=i.length;r<n;r++){var a=i[r];if(a.ownerNode===e)return a}e6(17)}(i),this.length=0}var i=e.prototype;return i.insertRule=function(e,i){try{return this.sheet.insertRule(i,e),this.length++,!0}catch(r){return!1}},i.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},i.getRule=function(e){var i=this.sheet.cssRules[e];return void 0!==i&&"string"==typeof i.cssText?i.cssText:""},e}(),th=function(){function e(e){var i=this.element=tl(e);this.nodes=i.childNodes,this.length=0}var i=e.prototype;return i.insertRule=function(e,i){if(e<=this.length&&e>=0){var r=document.createTextNode(i),n=this.nodes[e];return this.element.insertBefore(r,n||null),this.length++,!0}return!1},i.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},i.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),tc=function(){function e(e){this.rules=[],this.length=0}var i=e.prototype;return i.insertRule=function(e,i){return e<=this.length&&(this.rules.splice(e,0,i),this.length++,!0)},i.deleteRule=function(e){this.rules.splice(e,1),this.length--},i.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),td=e3,tf={isServer:!e3,useCSSOMInjection:!e4},tp=function(){function e(e,i,r){void 0===e&&(e=eK),void 0===i&&(i={}),this.options=eq({},tf,{},e),this.gs=i,this.names=new Map(r),this.server=!!e.isServer,!this.server&&e3&&td&&(td=!1,function(e){for(var i=document.querySelectorAll(tr),r=0,n=i.length;r<n;r++){var a=i[r];a&&"active"!==a.getAttribute(e2)&&(ts(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return tt(e)};var i=e.prototype;return i.reconstructWithOptions=function(i,r){return void 0===r&&(r=!0),new e(eq({},this.options,{},i),this.gs,r&&this.names||void 0)},i.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},i.getTag=function(){var e,i,r,n;return this.tag||(this.tag=(i=(e=this.options).isServer,r=e.useCSSOMInjection,n=e.target,new e8(i?new tc(n):r?new tu(n):new th(n))))},i.hasNameForId=function(e,i){return this.names.has(e)&&this.names.get(e).has(i)},i.registerName=function(e,i){if(tt(e),this.names.has(e))this.names.get(e).add(i);else{var r=new Set;r.add(i),this.names.set(e,r)}},i.insertRules=function(e,i,r){this.registerName(e,i),this.getTag().insertRules(tt(e),r)},i.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},i.clearRules=function(e){this.getTag().clearGroup(tt(e)),this.clearNames(e)},i.clearTag=function(){this.tag=void 0},i.toString=function(){return function(e){for(var i=e.getTag(),r=i.length,n="",a=0;a<r;a++){var s,o=(s=a,e9.get(s));if(void 0!==o){var l=e.names.get(o),u=i.getGroup(a);if(l&&u&&l.size){var h=e2+".g"+a+'[id="'+o+'"]',c="";void 0!==l&&l.forEach(function(e){e.length>0&&(c+=e+",")}),n+=""+u+h+'{content:"'+c+'"}/*!sc*/\n'}}}return n}(this)},e}(),tm=/(a)(d)/gi,t_=function(e){return String.fromCharCode(e+(e>25?39:97))};function tg(e){var i,r="";for(i=Math.abs(e);i>52;i=i/52|0)r=t_(i%52)+r;return(t_(i%52)+r).replace(tm,"$1-$2")}var ty=function(e,i){for(var r=i.length;r;)e=33*e^i.charCodeAt(--r);return e},tv=function(e){return ty(5381,e)};function tx(e){for(var i=0;i<e.length;i+=1){var r=e[i];if(eQ(r)&&!e1(r))return!1}return!0}var tb=tv("5.3.11"),tw=function(){function e(e,i,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&tx(e),this.componentId=i,this.baseHash=ty(tb,i),this.baseStyle=r,tp.registerId(i)}return e.prototype.generateAndInjectStyles=function(e,i,r){var n=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,i,r)),this.isStatic&&!r.hash){if(this.staticRulesId&&i.hasNameForId(n,this.staticRulesId))a.push(this.staticRulesId);else{var s=tB(this.rules,e,i,r).join(""),o=tg(ty(this.baseHash,s)>>>0);if(!i.hasNameForId(n,o)){var l=r(s,"."+o,void 0,n);i.insertRules(n,o,l)}a.push(o),this.staticRulesId=o}}else{for(var u=this.rules.length,h=ty(this.baseHash,r.hash),c="",d=0;d<u;d++){var f=this.rules[d];if("string"==typeof f)c+=f;else if(f){var p=tB(f,e,i,r),m=Array.isArray(p)?p.join(""):p;h=ty(h,m+d),c+=m}}if(c){var _=tg(h>>>0);if(!i.hasNameForId(n,_)){var g=r(c,"."+_,void 0,n);i.insertRules(n,_,g)}a.push(_)}}return a.join(" ")},e}(),tM=/^\s*\/\/.*$/gm,tT=[":","[",".","#"];function tL(e){var i,r,n,a,s=void 0===e?eK:e,o=s.options,l=void 0===o?eK:o,u=s.plugins,h=void 0===u?eJ:u,c=new eH(l),d=[],f=function(e){function i(i){if(i)try{e(i+"}")}catch(r){}}return function(r,n,a,s,o,l,u,h,c,d){switch(r){case 1:if(0===c&&64===n.charCodeAt(0))return e(n+";"),"";break;case 2:if(0===h)return n+"/*|*/";break;case 3:switch(h){case 102:case 112:return e(a[0]+n),"";default:return n+(0===d?"/*|*/":"")}case -2:n.split("/*|*/}").forEach(i)}}}(function(e){d.push(e)}),p=function(e,n,s){return 0===n&&-1!==tT.indexOf(s[r.length])||s.match(a)?e:"."+i};function m(e,s,o,l){void 0===l&&(l="&");var u=e.replace(tM,""),h=s&&o?o+" "+s+" { "+u+" }":u;return i=l,n=RegExp("\\"+(r=s)+"\\b","g"),a=RegExp("(\\"+r+"\\b){2,}"),c(o||!s?"":s,h)}return c.use([].concat(h,[function(e,i,a){2===e&&a.length&&a[0].lastIndexOf(r)>0&&(a[0]=a[0].replace(n,p))},f,function(e){if(-2===e){var i=d;return d=[],i}}])),m.hash=h.length?h.reduce(function(e,i){return i.name||e6(15),ty(e,i.name)},5381).toString():"",m}var tS=eo.createContext(),tk=(tS.Consumer,eo.createContext()),tD=(tk.Consumer,new tp),tE=tL();function tA(){return(0,eo.useContext)(tS)||tD}function tP(){return(0,eo.useContext)(tk)||tE}function tC(e){var i=(0,eo.useState)(e.stylisPlugins),r=i[0],n=i[1],a=tA(),s=(0,eo.useMemo)(function(){var i=a;return e.sheet?i=e.sheet:e.target&&(i=i.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(i=i.reconstructWithOptions({useCSSOMInjection:!1})),i},[e.disableCSSOMInjection,e.sheet,e.target]),o=(0,eo.useMemo)(function(){return tL({options:{prefix:!e.disableVendorPrefixes},plugins:r})},[e.disableVendorPrefixes,r]);return(0,eo.useEffect)(function(){eN()(r,e.stylisPlugins)||n(e.stylisPlugins)},[e.stylisPlugins]),eo.createElement(tS.Provider,{value:s},eo.createElement(tk.Provider,{value:o},e.children))}var tI=function(){function e(e,i){var r=this;this.inject=function(e,i){void 0===i&&(i=tE);var n=r.name+i.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,i(r.rules,n,"@keyframes"))},this.toString=function(){return e6(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=i}return e.prototype.getName=function(e){return void 0===e&&(e=tE),this.name+e.hash},e}(),tO=/([A-Z])/,tz=/([A-Z])/g,tR=/^ms-/,tY=function(e){return"-"+e.toLowerCase()};function tF(e){return tO.test(e)?e.replace(tz,tY).replace(tR,"-ms-"):e}var tj=function(e){return null==e||!1===e||""===e};function tB(e,i,r,n){if(Array.isArray(e)){for(var a,s=[],o=0,l=e.length;o<l;o+=1)""!==(a=tB(e[o],i,r,n))&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));return s}return tj(e)?"":e1(e)?"."+e.styledComponentId:eQ(e)?"function"!=typeof e||e.prototype&&e.prototype.isReactComponent||!i?e:tB(e(i),i,r,n):e instanceof tI?r?(e.inject(r,n),e.getName(n)):e:eX(e)?function e(i,r){var n,a=[];for(var s in i)i.hasOwnProperty(s)&&!tj(i[s])&&(Array.isArray(i[s])&&i[s].isCss||eQ(i[s])?a.push(tF(s)+":",i[s],";"):eX(i[s])?a.push.apply(a,e(i[s],s)):a.push(tF(s)+": "+(null==(n=i[s])||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||s in eV||s.startsWith("--")?String(n).trim():n+"px")+";"));return r?[r+" {"].concat(a,["}"]):a}(e):e.toString()}var tN=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function tH(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return eQ(e)||eX(e)?tN(tB(eZ(eJ,[e].concat(r)))):0===r.length&&1===e.length&&"string"==typeof e[0]?e:tN(tB(eZ(e,r)))}var tV=function(e,i,r){return void 0===r&&(r=eK),e.theme!==r.theme&&e.theme||i||r.theme},tU=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,t$=/(^-|-$)/g;function tW(e){return e.replace(tU,"-").replace(t$,"")}var tG=function(e){return tg(tv(e)>>>0)};function tq(e){return"string"==typeof e}var tZ=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},tX=eo.createContext();function tJ(e){var i=(0,eo.useContext)(tX),r=(0,eo.useMemo)(function(){var r;return(r=e.theme)?eQ(r)?r(i):Array.isArray(r)||"object"!=typeof r?e6(8):i?eq({},i,{},r):r:e6(14)},[e.theme,i]);return e.children?eo.createElement(tX.Provider,{value:r},e.children):null}tX.Consumer;var tK={},tQ=function(e){return function e(i,r,n){if(void 0===n&&(n=eK),!(0,ej.isValidElementType)(r))return e6(1,String(r));var a=function(){return i(r,n,tH.apply(void 0,arguments))};return a.withConfig=function(a){return e(i,r,eq({},n,{},a))},a.attrs=function(a){return e(i,r,eq({},n,{attrs:Array.prototype.concat(n.attrs,a).filter(Boolean)}))},a}(function e(i,r,n){var a=e1(i),s=!tq(i),o=r.attrs,l=void 0===o?eJ:o,u=r.componentId,h=void 0===u?(_=r.displayName,g=r.parentComponentId,tK[y="string"!=typeof _?"sc":tW(_)]=(tK[y]||0)+1,v=y+"-"+tG("5.3.11"+y+tK[y]),g?g+"-"+v:v):u,c=r.displayName,d=void 0===c?tq(i)?"styled."+i:"Styled("+e0(i)+")":c,f=r.displayName&&r.componentId?tW(r.displayName)+"-"+r.componentId:r.componentId||h,p=a&&i.attrs?Array.prototype.concat(i.attrs,l).filter(Boolean):l,m=r.shouldForwardProp;a&&i.shouldForwardProp&&(m=r.shouldForwardProp?function(e,n,a){return i.shouldForwardProp(e,n,a)&&r.shouldForwardProp(e,n,a)}:i.shouldForwardProp);var _,g,y,v,x,b=new tw(n,f,a?i.componentStyle:void 0),w=b.isStatic&&0===l.length,M=function(e,i){return function(e,i,r,n){var a,s,o,l,u,h=e.attrs,c=e.componentStyle,d=e.defaultProps,f=e.foldedComponentIds,p=e.shouldForwardProp,m=e.styledComponentId,_=e.target,g=(void 0===(a=tV(i,(0,eo.useContext)(tX),d)||eK)&&(a=eK),s=eq({},i,{theme:a}),o={},h.forEach(function(e){var i,r,n,a=e;for(i in eQ(a)&&(a=a(s)),a)s[i]=o[i]="className"===i?(r=o[i],n=a[i],r&&n?r+" "+n:r||n):a[i]}),[s,o]),y=g[0],v=g[1],x=(l=tA(),u=tP(),n?c.generateAndInjectStyles(eK,l,u):c.generateAndInjectStyles(y,l,u)),b=v.$as||i.$as||v.as||i.as||_,w=tq(b),M=v!==i?eq({},i,{},v):i,T={};for(var L in M)"$"!==L[0]&&"as"!==L&&("forwardedAs"===L?T.as=M[L]:(p?p(L,e$,b):!w||e$(L))&&(T[L]=M[L]));return i.style&&v.style!==i.style&&(T.style=eq({},i.style,{},v.style)),T.className=Array.prototype.concat(f,m,x!==m?x:null,i.className,v.className).filter(Boolean).join(" "),T.ref=r,(0,eo.createElement)(b,T)}(x,e,i,w)};return M.displayName=d,(x=eo.forwardRef(M)).attrs=p,x.componentStyle=b,x.displayName=d,x.shouldForwardProp=m,x.foldedComponentIds=a?Array.prototype.concat(i.foldedComponentIds,i.styledComponentId):eJ,x.styledComponentId=f,x.target=a?i.target:i,x.withComponent=function(i){var a=r.componentId,s=function(e,i){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)i.indexOf(r=s[n])>=0||(a[r]=e[r]);return a}(r,["componentId"]),o=a&&a+"-"+(tq(i)?i:tW(e0(i)));return e(i,eq({},s,{attrs:p,componentId:o}),n)},Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=a?function e(i){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var s=0;s<n.length;s++){var o=n[s];if(tZ(o))for(var l in o)"__proto__"!==l&&"constructor"!==l&&"prototype"!==l&&function(i,r,n){var a=i[n];tZ(r)&&tZ(a)?e(a,r):i[n]=r}(i,o[l],l)}return i}({},i.defaultProps,e):e}}),Object.defineProperty(x,"toString",{value:function(){return"."+x.styledComponentId}}),s&&eG()(x,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),x},e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){tQ[e]=tQ(e)});var t0=function(){function e(e,i){this.rules=e,this.componentId=i,this.isStatic=tx(e),tp.registerId(this.componentId+1)}var i=e.prototype;return i.createStyles=function(e,i,r,n){var a=n(tB(this.rules,i,r,n).join(""),""),s=this.componentId+e;r.insertRules(s,s,a)},i.removeStyles=function(e,i){i.clearRules(this.componentId+e)},i.renderStyles=function(e,i,r,n){e>2&&tp.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,i,r,n)},e}();function t1(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];var a=tH.apply(void 0,[e].concat(r)).join("");return new tI(tG(a),a)}function t2(){return(t2=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}!function(){var e=(function(){var e=this;this._emitSheetCSS=function(){var i=e.instance.toString();if(!i)return"";var r=to();return"<style "+[r&&'nonce="'+r+'"',e2+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+i+"</style>"},this.getStyleTags=function(){return e.sealed?e6(2):e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)return e6(2);var i,r=((i={})[e2]="",i["data-styled-version"]="5.3.11",i.dangerouslySetInnerHTML={__html:e.instance.toString()},i),n=to();return n&&(r.nonce=n),[eo.createElement("style",eq({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new tp({isServer:!0}),this.sealed=!1}).prototype;e.collectStyles=function(e){return this.sealed?e6(2):eo.createElement(tC,{sheet:this.instance},e)},e.interleaveWithNodeStream=function(e){return e6(3)}}();let t3=e=>eo.createElement("svg",t2({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 40 43"},e),o||(o=eo.createElement("path",{stroke:"url(#MainPageLogo_svg__a)",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:4.463,d:"M3.333 4.325v29.177c0 2.849 2.234 5.149 5 5.149h28.334"})),l||(l=eo.createElement("path",{stroke:"url(#MainPageLogo_svg__b)",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:4.463,d:"m8.333 30.07 7.65-9.2c1.267-1.51 3.517-1.613 4.884-.189l1.583 1.63a3.274 3.274 0 0 0 4.883-.188L35 12.907"})),u||(u=eo.createElement("defs",null,eo.createElement("linearGradient",{id:"MainPageLogo_svg__a",x1:20,x2:20,y1:4.325,y2:38.651,gradientUnits:"userSpaceOnUse"},eo.createElement("stop",{stopColor:"#2ADD50"}),eo.createElement("stop",{offset:1,stopColor:"#AFDD2A"})),eo.createElement("linearGradient",{id:"MainPageLogo_svg__b",x1:21.667,x2:21.667,y1:12.907,y2:30.069,gradientUnits:"userSpaceOnUse"},eo.createElement("stop",{stopColor:"#2ADD50"}),eo.createElement("stop",{offset:1,stopColor:"#AFDD2A"}))))),t4=tQ.nav`
  ${({theme:e})=>tH`
    position: sticky;
    z-index: 2;
    top: 0;

    display: flex;
    flex-flow: row wrap;
    align-items: center;
    justify-content: space-between;

    height: ${e.spacing(32)};
    margin-right: auto;
    margin-left: auto;
    padding-right: ${e.spacing(30)};
    padding-left: ${e.spacing(30)};

    background-color: ${e.colors.primary};
    ${e.media.lg`height: ${e.spacing(100)}`}
  `}
`,t5=tQ(eF)`
  ${({theme:e})=>tH`
    width: ${e.spacing(30)};
    height: ${e.spacing(12)};
    ${e.media.lg`
		width: ${e.spacing(40)};
    height: ${e.spacing(40)};`}
  `};
`,t6=tQ(t3)`
  ${({theme:e})=>tH`
    cursor: pointer;
    width: ${e.spacing(12)};
    height: ${e.spacing(12)};
    ${e.media.lg`
		width: ${e.spacing(40)};
    height: ${e.spacing(40)};`}
  `};
`,t8=tQ(eF)`
  ${({theme:e})=>tH`
    ${e.typography.variant.h6}
    color: ${e.colors.secondary};
    text-decoration: none;
  `}
`,t7=tQ.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 70%;
`,{NAV_ROUTES:t9}={NAV_ROUTES:[{to:"/",name:"Home"},{to:"timeline",name:"TimeLine"},{to:"bankcard",name:"BankCard"},{to:"contact",name:"Contact"}]},ie=()=>(0,ea.jsx)(t7,{children:t9.map(({to:e,name:i})=>(0,ea.jsx)(t8,{to:e,"name-link":i,children:i},i))});function it(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];throw Error("number"==typeof e?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var ii={};function ir(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:ii}var ia=Object.assign,is=Object.getOwnPropertyDescriptor,io=Object.defineProperty,il=Object.prototype,iu=[];Object.freeze(iu);var ih={};Object.freeze(ih);var ic="undefined"!=typeof Proxy,id=Object.toString();function ip(){ic||it("Proxy not available")}function im(e){var i=!1;return function(){if(!i)return i=!0,e.apply(this,arguments)}}var i_=function(){};function ig(e){return"function"==typeof e}function iy(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function iv(e){return null!==e&&"object"==typeof e}function ix(e){if(!iv(e))return!1;var i=Object.getPrototypeOf(e);if(null==i)return!0;var r=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return"function"==typeof r&&r.toString()===id}function ib(e){var i=null==e?void 0:e.constructor;return!!i&&("GeneratorFunction"===i.name||"GeneratorFunction"===i.displayName)}function iw(e,i,r){io(e,i,{enumerable:!1,writable:!0,configurable:!0,value:r})}function iM(e,i,r){io(e,i,{enumerable:!1,writable:!1,configurable:!0,value:r})}function iT(e,i){var r="isMobX"+e;return i.prototype[r]=!0,function(e){return iv(e)&&!0===e[r]}}function iL(e){return e instanceof Map}function iS(e){return e instanceof Set}var ik=void 0!==Object.getOwnPropertySymbols,iD="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:ik?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function iE(e){return null===e?null:"object"==typeof e?""+e:e}function iA(e,i){return il.hasOwnProperty.call(e,i)}var iP=Object.getOwnPropertyDescriptors||function(e){var i={};return iD(e).forEach(function(r){i[r]=is(e,r)}),i};function iC(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){var i=function(e,i){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,i||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==typeof i?i:String(i)}(n.key),n)}}function iI(e,i,r){return i&&iC(e.prototype,i),r&&iC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function iO(){return(iO=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function iz(e,i){e.prototype=Object.create(i.prototype),e.prototype.constructor=e,iR(e,i)}function iR(e,i){return(iR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e})(e,i)}function iY(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iF(e,i){(null==i||i>e.length)&&(i=e.length);for(var r=0,n=Array(i);r<i;r++)n[r]=e[r];return n}function ij(e,i){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,i){if(e){if("string"==typeof e)return iF(e,i);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iF(e,i)}}(e))||i&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var iB=Symbol("mobx-stored-annotations");function iN(e){return Object.assign(function(i,r){if(iV(r))return e.decorate_20223_(i,r);iH(i,r,e)},e)}function iH(e,i,r){iA(e,iB)||iw(e,iB,iO({},e[iB])),r.annotationType_===iJ||(e[iB][i]=r)}function iV(e){return"object"==typeof e&&"string"==typeof e.kind}var iU=Symbol("mobx administration"),i$=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=p.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var i=e.prototype;return i.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},i.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},i.reportObserved=function(){return rQ(this)},i.reportChanged=function(){rJ(),r0(this),rK()},i.toString=function(){return this.name_},e}(),iW=iT("Atom",i$);function iG(e,i,r){void 0===i&&(i=i_),void 0===r&&(r=i_);var n=new i$(e);return i!==i_&&nl("onBO",n,i,void 0),r!==i_&&no(n,r),n}var iq={structural:function(e,i){return at(e,i)},default:function(e,i){return Object.is?Object.is(e,i):e===i?0!==e||1/e==1/i:e!=e&&i!=i}};function iZ(e,i,r){return ny(e)?e:Array.isArray(e)?rv.array(e,{name:r}):ix(e)?rv.object(e,void 0,{name:r}):iL(e)?rv.map(e,{name:r}):iS(e)?rv.set(e,{name:r}):"function"!=typeof e||na(e)||ng(e)?e:ib(e)?nm(e):nn(r,e)}function iX(e){return e}var iJ="override";function iK(e,i){return{annotationType_:e,options_:i,make_:iQ,extend_:i0,decorate_20223_:i1}}function iQ(e,i,r,n){if(null!=(a=this.options_)&&a.bound)return null===this.extend_(e,i,r,!1)?0:1;if(n===e.target_)return null===this.extend_(e,i,r,!1)?0:2;if(na(r.value))return 1;var a,s=i2(e,this,i,r,!1);return io(n,i,s),2}function i0(e,i,r,n){var a=i2(e,this,i,r);return e.defineProperty_(i,a,n)}function i1(e,i){var r,n,a,s,o,l,u=i.kind,h=i.name,c=i.addInitializer,d=this;if("field"==u){c(function(){iH(this,h,d)});return}if("method"==u)return na(e)||(r=e,e=rD(null!=(n=null==(a=d.options_)?void 0:a.name)?n:h.toString(),r,null!=(s=null==(o=d.options_)?void 0:o.autoAction)&&s)),null!=(l=this.options_)&&l.bound&&c(function(){var e=this[h].bind(this);e.isMobxAction=!0,this[h]=e}),e;it("Cannot apply '"+d.annotationType_+"' to '"+String(h)+"' (kind: "+u+"):\n'"+d.annotationType_+"' can only be used on properties with a function value.")}function i2(e,i,r,n,a){void 0===a&&(a=rq.safeDescriptors),i.annotationType_,n.value;var s,o,l,u,h,c,d,f,p=n.value;return null!=(s=i.options_)&&s.bound&&(p=p.bind(null!=(f=e.proxy_)?f:e.target_)),{value:rD(null!=(o=null==(l=i.options_)?void 0:l.name)?o:r.toString(),p,null!=(u=null==(h=i.options_)?void 0:h.autoAction)&&u,null!=(c=i.options_)&&c.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function i3(e,i){return{annotationType_:e,options_:i,make_:i4,extend_:i5,decorate_20223_:i6}}function i4(e,i,r,n){if(n===e.target_)return null===this.extend_(e,i,r,!1)?0:2;if(null!=(a=this.options_)&&a.bound&&(!iA(e.target_,i)||!ng(e.target_[i]))&&null===this.extend_(e,i,r,!1))return 0;if(ng(r.value))return 1;var a,s=i8(e,this,i,r,!1,!1);return io(n,i,s),2}function i5(e,i,r,n){var a,s=i8(e,this,i,r,null==(a=this.options_)?void 0:a.bound);return e.defineProperty_(i,s,n)}function i6(e,i){var r,n=i.name,a=i.addInitializer;return ng(e)||(e=nm(e)),null!=(r=this.options_)&&r.bound&&a(function(){var e=this[n].bind(this);e.isMobXFlow=!0,this[n]=e}),e}function i8(e,i,r,n,a,s){void 0===s&&(s=rq.safeDescriptors),i.annotationType_,n.value;var o,l=n.value;return ng(l)||(l=nm(l)),a&&((l=l.bind(null!=(o=e.proxy_)?o:e.target_)).isMobXFlow=!0),{value:l,configurable:!s||e.isPlainObject_,enumerable:!1,writable:!s}}function i7(e,i){return{annotationType_:e,options_:i,make_:i9,extend_:re,decorate_20223_:rt}}function i9(e,i,r){return null===this.extend_(e,i,r,!1)?0:1}function re(e,i,r,n){return this.annotationType_,r.get,e.defineComputedProperty_(i,iO({},this.options_,{get:r.get,set:r.set}),n)}function rt(e,i){var r=this,n=i.name;return(0,i.addInitializer)(function(){var i=nZ(this)[iU],a=iO({},r.options_,{get:e,context:this});a.name||(a.name="ObservableObject."+n.toString()),i.values_.set(n,new rC(a))}),function(){return this[iU].getObservablePropValue_(n)}}function ri(e,i){return{annotationType_:e,options_:i,make_:rr,extend_:rn,decorate_20223_:ra}}function rr(e,i,r){return null===this.extend_(e,i,r,!1)?0:1}function rn(e,i,r,n){var a,s;return this.annotationType_,e.defineObservableProperty_(i,r.value,null!=(a=null==(s=this.options_)?void 0:s.enhancer)?a:iZ,n)}function ra(e,i){var r=this,n=i.kind,a=i.name,s=new WeakSet;function o(e,i){var n,o,l=nZ(e)[iU],u=new rP(i,null!=(n=null==(o=r.options_)?void 0:o.enhancer)?n:iZ,"ObservableObject."+a.toString(),!1);l.values_.set(a,u),s.add(e)}if("accessor"==n)return{get:function(){return s.has(this)||o(this,e.get.call(this)),this[iU].getObservablePropValue_(a)},set:function(e){return s.has(this)||o(this,e),this[iU].setObservablePropValue_(a,e)},init:function(e){return s.has(this)||o(this,e),e}}}var rs=ro();function ro(e){return{annotationType_:"true",options_:e,make_:rl,extend_:ru,decorate_20223_:rh}}function rl(e,i,r,n){if(r.get)return rM.make_(e,i,r,n);if(r.set){var a,s,o,l,u,h=rD(i.toString(),r.set);return n===e.target_?null===e.defineProperty_(i,{configurable:!rq.safeDescriptors||e.isPlainObject_,set:h})?0:2:(io(n,i,{configurable:!0,set:h}),2)}if(n!==e.target_&&"function"==typeof r.value)return ib(r.value)?(null!=(l=this.options_)&&l.autoBind?nm.bound:nm).make_(e,i,r,n):(null!=(o=this.options_)&&o.autoBind?nn.bound:nn).make_(e,i,r,n);var c=(null==(a=this.options_)?void 0:a.deep)===!1?rv.ref:rv;return"function"==typeof r.value&&null!=(s=this.options_)&&s.autoBind&&(r.value=r.value.bind(null!=(u=e.proxy_)?u:e.target_)),c.make_(e,i,r,n)}function ru(e,i,r,n){var a,s,o;return r.get?rM.extend_(e,i,r,n):r.set?e.defineProperty_(i,{configurable:!rq.safeDescriptors||e.isPlainObject_,set:rD(i.toString(),r.set)},n):("function"==typeof r.value&&null!=(a=this.options_)&&a.autoBind&&(r.value=r.value.bind(null!=(o=e.proxy_)?o:e.target_)),((null==(s=this.options_)?void 0:s.deep)===!1?rv.ref:rv).extend_(e,i,r,n))}function rh(e,i){it("'"+this.annotationType_+"' cannot be used as a decorator")}var rc={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(rc);var rd=ri("observable"),rf=ri("observable.ref",{enhancer:iX}),rp=ri("observable.shallow",{enhancer:function(e,i,r){return null==e||nK(e)||nF(e)||nH(e)||n$(e)?e:Array.isArray(e)?rv.array(e,{name:r,deep:!1}):ix(e)?rv.object(e,void 0,{name:r,deep:!1}):iL(e)?rv.map(e,{name:r,deep:!1}):iS(e)?rv.set(e,{name:r,deep:!1}):void 0}}),rm=ri("observable.struct",{enhancer:function(e,i){return at(e,i)?i:e}}),r_=iN(rd);function rg(e){var i,r,n;return!0===e.deep?iZ:!1===e.deep?iX:(i=e.defaultDecorator)&&null!=(r=null==(n=i.options_)?void 0:n.enhancer)?r:iZ}function ry(e,i,r){if(iV(i))return rd.decorate_20223_(e,i);if(iy(i)){iH(e,i,rd);return}return ny(e)?e:ix(e)?rv.object(e,i,r):Array.isArray(e)?rv.array(e,i):iL(e)?rv.map(e,i):iS(e)?rv.set(e,i):"object"==typeof e&&null!==e?e:rv.box(e,i)}ia(ry,r_);var rv=ia(ry,{box:function(e,i){var r=i||rc;return new rP(e,rg(r),r.name,!0,r.equals)},array:function(e,i){var r=i||rc;return(!1===rq.useProxies||!1===r.proxy?function(e,i,r){return new n4(e,i,r)}:function(e,i,r,n){return void 0===r&&(r="ObservableArray"),void 0===n&&(n=!1),ip(),n9(function(){var a=new nP(r,i,n,!1);iM(a.values_,iU,a);var s=new Proxy(a.values_,nA);return a.proxy_=s,e&&e.length&&a.spliceWithArray_(0,0,e),s})})(e,rg(r),r.name)},map:function(e,i){var r=i||rc;return new nN(e,rg(r),r.name)},set:function(e,i){var r=i||rc;return new nU(e,rg(r),r.name)},object:function(e,i,r){return n9(function(){var n,a,s;return nh(!1===rq.useProxies||(null==r?void 0:r.proxy)===!1?nZ({},r):(n={},ip(),null!=(s=(a=(n=nZ(n,r))[iU]).proxy_)?s:a.proxy_=new Proxy(n,nx)),e,i)})},ref:iN(rf),shallow:iN(rp),deep:r_,struct:iN(rm)}),rx="computed",rb=i7(rx),rw=i7("computed.struct",{equals:iq.structural}),rM=function(e,i){if(iV(i))return rb.decorate_20223_(e,i);if(iy(i))return iH(e,i,rb);if(ix(e))return iN(i7(rx,e));var r=ix(i)?i:{};return r.get=e,r.name||(r.name=e.name||""),new rC(r)};Object.assign(rM,rb),rM.struct=iN(rw);var rT=0,rL=1,rS=null!=(h=null==(c=is(function(){},"name"))?void 0:c.configurable)&&h,rk={value:"action",configurable:!0,writable:!1,enumerable:!1};function rD(e,i,r,n){function a(){return function(e,i,r,n,a){var s,o,l,u,h=(s=rq.trackingDerivation,o=!i||!s,rJ(),l=rq.allowStateChanges,o&&(rB(),l=rE(!0)),rT=(u={runAsAction_:o,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:rH(!0),notifySpy_:!1,startTime_:0,actionId_:rL++,parentActionId_:rT}).actionId_,u);try{return r.apply(n,a)}catch(c){throw h.error_=c,c}finally{rT!==h.actionId_&&it(30),rT=h.parentActionId_,void 0!==h.error_&&(rq.suppressReactionErrors=!0),rA(h.prevAllowStateChanges_),rV(h.prevAllowStateReads_),rK(),h.runAsAction_&&rN(h.prevDerivation_),rq.suppressReactionErrors=!1}}(0,r,i,n||this,arguments)}return void 0===r&&(r=!1),a.isMobxAction=!0,a.toString=function(){return i.toString()},rS&&(rk.value=e,io(a,"name",rk)),a}function rE(e){var i=rq.allowStateChanges;return rq.allowStateChanges=e,i}function rA(e){rq.allowStateChanges=e}d=Symbol.toPrimitive;var rP=function(e){function i(i,r,n,a,s){var o;return void 0===n&&(n="ObservableValue"),void 0===a&&(a=!0),void 0===s&&(s=iq.default),(o=e.call(this,n)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=r,o.name_=n,o.equals=s,o.value_=r(i,void 0,n),o}iz(i,e);var r=i.prototype;return r.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},r.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==rq.UNCHANGED&&this.setNewValue_(e)},r.prepareNewValue_=function(e){if(nb(this)){var i=nM(this,{object:this,type:nE,newValue:e});if(!i)return rq.UNCHANGED;e=i.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?rq.UNCHANGED:e},r.setNewValue_=function(e){var i=this.value_;this.value_=e,this.reportChanged(),nT(this)&&nS(this,{type:nE,object:this,newValue:e,oldValue:i})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(e){return nw(this,e)},r.observe_=function(e,i){return i&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:nE,newValue:this.value_,oldValue:void 0}),nL(this,e)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return iE(this.get())},r[d]=function(){return this.valueOf()},i}(i$);f=Symbol.toPrimitive;var rC=function(){function e(e){this.dependenciesState_=p.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=p.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new rO(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=m.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||it(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=rD("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?iq.structural:iq.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var i=e.prototype;return i.onBecomeStale_=function(){this.lowestObserverState_===p.UP_TO_DATE_&&(this.lowestObserverState_=p.POSSIBLY_STALE_,this.observers_.forEach(function(e){e.dependenciesState_===p.UP_TO_DATE_&&(e.dependenciesState_=p.POSSIBLY_STALE_,e.onBecomeStale_())}))},i.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},i.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},i.get=function(){if(this.isComputing_&&it(32,this.name_,this.derivation),0!==rq.inBatch||0!==this.observers_.size||this.keepAlive_){if(rQ(this),rR(this)){var e,i=rq.trackingContext;this.keepAlive_&&!i&&(rq.trackingContext=this),this.trackAndCompute()&&(e=this,e.lowestObserverState_!==p.STALE_&&(e.lowestObserverState_=p.STALE_,e.observers_.forEach(function(i){i.dependenciesState_===p.POSSIBLY_STALE_?i.dependenciesState_=p.STALE_:i.dependenciesState_===p.UP_TO_DATE_&&(e.lowestObserverState_=p.UP_TO_DATE_)}))),rq.trackingContext=i}}else rR(this)&&(this.warnAboutUntrackedRead_(),rJ(),this.value_=this.computeValue_(!1),rK());var r=this.value_;if(rz(r))throw r.cause;return r},i.set=function(e){if(this.setter_){this.isRunningSetter_&&it(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else it(34,this.name_)},i.trackAndCompute=function(){var e=this.value_,i=this.dependenciesState_===p.NOT_TRACKING_,r=this.computeValue_(!0),n=i||rz(e)||rz(r)||!this.equals_(e,r);return n&&(this.value_=r),n},i.computeValue_=function(e){this.isComputing_=!0;var i,r=rE(!1);if(e)i=rY(this,this.derivation,this.scope_);else if(!0===rq.disableErrorBoundaries)i=this.derivation.call(this.scope_);else try{i=this.derivation.call(this.scope_)}catch(n){i=new rO(n)}return rA(r),this.isComputing_=!1,i},i.suspend_=function(){this.keepAlive_||(rF(this),this.value_=void 0)},i.observe_=function(e,i){var r=this,n=!0,a=void 0;return function(e,i){void 0===i&&(i=ih);var r,n,a,s,o,l,u=null!=(r=null==(n=i)?void 0:n.name)?r:"Autorun";if(i.scheduler||i.delay){var h,c=(h=i).scheduler?h.scheduler:h.delay?function(e){return setTimeout(e,h.delay)}:ns,d=!1;l=new r1(u,function(){d||(d=!0,c(function(){d=!1,l.isDisposed_||l.track(f)}))},i.onError,i.requiresObservable)}else l=new r1(u,function(){this.track(f)},i.onError,i.requiresObservable);function f(){e(l)}return null!=(a=i)&&null!=(s=a.signal)&&s.aborted||l.schedule_(),l.getDisposer_(null==(o=i)?void 0:o.signal)}(function(){var s=r.get();if(!n||i){var o=rB();e({observableKind:"computed",debugObjectName:r.name_,type:nE,object:r,newValue:s,oldValue:a}),rN(o)}n=!1,a=s})},i.warnAboutUntrackedRead_=function(){},i.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},i.valueOf=function(){return iE(this.get())},i[f]=function(){return this.valueOf()},e}(),rI=iT("ComputedValue",rC);(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(p||(p={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(m||(m={}));var rO=function(e){this.cause=void 0,this.cause=e};function rz(e){return e instanceof rO}function rR(e){switch(e.dependenciesState_){case p.UP_TO_DATE_:return!1;case p.NOT_TRACKING_:case p.STALE_:return!0;case p.POSSIBLY_STALE_:for(var i=rH(!0),r=rB(),n=e.observing_,a=n.length,s=0;s<a;s++){var o=n[s];if(rI(o)){if(rq.disableErrorBoundaries)o.get();else try{o.get()}catch(n){return rN(r),rV(i),!0}if(e.dependenciesState_===p.STALE_)return rN(r),rV(i),!0}}return rU(e),rN(r),rV(i),!1}}function rY(e,i,r){var n,a=rH(!0);rU(e),e.newObserving_=Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++rq.runId;var s=rq.trackingDerivation;if(rq.trackingDerivation=e,rq.inBatch++,!0===rq.disableErrorBoundaries)n=i.call(r);else try{n=i.call(r)}catch(o){n=new rO(o)}return rq.inBatch--,rq.trackingDerivation=s,function(e){for(var i=e.observing_,r=e.observing_=e.newObserving_,n=p.UP_TO_DATE_,a=0,s=e.unboundDepsCount_,o=0;o<s;o++){var l=r[o];0===l.diffValue_&&(l.diffValue_=1,a!==o&&(r[a]=l),a++),l.dependenciesState_>n&&(n=l.dependenciesState_)}for(r.length=a,e.newObserving_=null,s=i.length;s--;){var u=i[s];0===u.diffValue_&&rZ(u,e),u.diffValue_=0}for(;a--;){var h=r[a];1===h.diffValue_&&(h.diffValue_=0,h.observers_.add(e),h.lowestObserverState_>e.dependenciesState_&&(h.lowestObserverState_=e.dependenciesState_))}n!==p.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}(e),rV(a),n}function rF(e){var i=e.observing_;e.observing_=[];for(var r=i.length;r--;)rZ(i[r],e);e.dependenciesState_=p.NOT_TRACKING_}function rj(e){var i=rB();try{return e()}finally{rN(i)}}function rB(){var e=rq.trackingDerivation;return rq.trackingDerivation=null,e}function rN(e){rq.trackingDerivation=e}function rH(e){var i=rq.allowStateReads;return rq.allowStateReads=e,i}function rV(e){rq.allowStateReads=e}function rU(e){if(e.dependenciesState_!==p.UP_TO_DATE_){e.dependenciesState_=p.UP_TO_DATE_;for(var i=e.observing_,r=i.length;r--;)i[r].lowestObserverState_=p.UP_TO_DATE_}}var r$=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},rW=!0,rG=!1,rq=function(){var e=ir();return(e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(rW=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new r$().version&&(rW=!1),rW)?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new r$):(setTimeout(function(){rG||it(35)},1),new r$)}();function rZ(e,i){e.observers_.delete(i),0===e.observers_.size&&rX(e)}function rX(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,rq.pendingUnobservations.push(e))}function rJ(){rq.inBatch++}function rK(){if(0==--rq.inBatch){r3();for(var e=rq.pendingUnobservations,i=0;i<e.length;i++){var r=e[i];r.isPendingUnobservation_=!1,0===r.observers_.size&&(r.isBeingObserved_&&(r.isBeingObserved_=!1,r.onBUO()),r instanceof rC&&r.suspend_())}rq.pendingUnobservations=[]}}function rQ(e){var i=rq.trackingDerivation;return null!==i?(i.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=i.runId_,i.newObserving_[i.unboundDepsCount_++]=e,!e.isBeingObserved_&&rq.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&rq.inBatch>0&&rX(e),!1)}function r0(e){e.lowestObserverState_!==p.STALE_&&(e.lowestObserverState_=p.STALE_,e.observers_.forEach(function(e){e.dependenciesState_===p.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=p.STALE_}))}var r1=function(){function e(e,i,r,n){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=p.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=m.NONE,this.name_=e,this.onInvalidate_=i,this.errorHandler_=r,this.requiresObservable_=n}var i=e.prototype;return i.onBecomeStale_=function(){this.schedule_()},i.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,rq.pendingReactions.push(this),r3())},i.isScheduled=function(){return this.isScheduled_},i.runReaction_=function(){if(!this.isDisposed_){rJ(),this.isScheduled_=!1;var e=rq.trackingContext;if(rq.trackingContext=this,rR(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}rq.trackingContext=e,rK()}},i.track=function(e){if(!this.isDisposed_){rJ(),this.isRunning_=!0;var i=rq.trackingContext;rq.trackingContext=this;var r=rY(this,e,void 0);rq.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&rF(this),rz(r)&&this.reportExceptionInDerivation_(r.cause),rK()}},i.reportExceptionInDerivation_=function(e){var i=this;if(this.errorHandler_){this.errorHandler_(e,this);return}if(rq.disableErrorBoundaries)throw e;rq.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",e),rq.globalReactionErrorHandlers.forEach(function(r){return r(e,i)})},i.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(rJ(),rF(this),rK()))},i.getDisposer_=function(e){var i=this,r=function r(){i.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",r)};return null==e||null==e.addEventListener||e.addEventListener("abort",r),r[iU]=this,r},i.toString=function(){return"Reaction["+this.name_+"]"},i.trace=function(e){void 0===e&&(e=!1)},e}(),r2=function(e){return e()};function r3(){rq.inBatch>0||rq.isRunningReactions||r2(r4)}function r4(){rq.isRunningReactions=!0;for(var e=rq.pendingReactions,i=0;e.length>0;){100==++i&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,a=r.length;n<a;n++)r[n].runReaction_()}rq.isRunningReactions=!1}var r5=iT("Reaction",r1),r6="action",r8="autoAction",r7=iK(r6),r9=iK("action.bound",{bound:!0}),ne=iK(r8,{autoAction:!0}),nt=iK("autoAction.bound",{autoAction:!0,bound:!0});function ni(e){return function(i,r){return ig(i)?rD(i.name||"<unnamed action>",i,e):ig(r)?rD(i,r,e):iV(r)?(e?ne:r7).decorate_20223_(i,r):iy(r)?iH(i,r,e?ne:r7):iy(i)?iN(iK(e?r8:r6,{name:i,autoAction:e})):void 0}}var nr=ni(!1);Object.assign(nr,r7);var nn=ni(!0);function na(e){return ig(e)&&!0===e.isMobxAction}Object.assign(nn,ne),nr.bound=iN(r9),nn.bound=iN(nt);var ns=function(e){return e()};function no(e,i,r){return nl("onBUO",e,i,r)}function nl(e,i,r,n){var a="function"==typeof n?n8(i,r):n8(i),s=ig(n)?n:r,o=e+"L";return a[o]?a[o].add(s):a[o]=new Set([s]),function(){var e=a[o];e&&(e.delete(s),0===e.size&&delete a[o])}}var nu="always";function nh(e,i,r,n){var a=iP(i);return n9(function(){var i=nZ(e,n)[iU];iD(a).forEach(function(e){i.extend_(e,a[e],!r||!(e in r)||r[e])})}),e}var nc=0;function nd(){this.message="FLOW_CANCELLED"}nd.prototype=Object.create(Error.prototype);var nf=i3("flow"),np=i3("flow.bound",{bound:!0}),nm=Object.assign(function(e,i){if(iV(i))return nf.decorate_20223_(e,i);if(iy(i))return iH(e,i,nf);var r=e.name||"<unnamed flow>",n=function(){var i,n=arguments,a=++nc,s=nr(r+" - runid: "+a+" - init",e).apply(this,n),o=void 0,l=new Promise(function(e,n){var l=0;function u(e){var i;o=void 0;try{i=nr(r+" - runid: "+a+" - yield "+l++,s.next).call(s,e)}catch(u){return n(u)}c(i)}function h(e){var i;o=void 0;try{i=nr(r+" - runid: "+a+" - yield "+l++,s.throw).call(s,e)}catch(u){return n(u)}c(i)}function c(i){if(ig(null==i?void 0:i.then)){i.then(c,n);return}return i.done?e(i.value):(o=Promise.resolve(i.value)).then(u,h)}i=n,u(void 0)});return l.cancel=nr(r+" - runid: "+a+" - cancel",function(){try{o&&n_(o);var e=s.return(void 0),r=Promise.resolve(e.value);r.then(i_,i_),n_(r),i(new nd)}catch(n){i(n)}}),l};return n.isMobXFlow=!0,n},nf);function n_(e){ig(e.cancel)&&e.cancel()}function ng(e){return(null==e?void 0:e.isMobXFlow)===!0}function ny(e,i){return!!e&&(void 0!==i?!!nK(e)&&e[iU].values_.has(i):nK(e)||!!e[iU]||iW(e)||r5(e)||rI(e))}function nv(e,i){void 0===i&&(i=void 0),rJ();try{return e.apply(i)}finally{rK()}}nm.bound=iN(np);var nx={has:function(e,i){return e[iU].has_(i)},get:function(e,i){return e[iU].get_(i)},set:function(e,i,r){var n;return!!iy(i)&&(null==(n=e[iU].set_(i,r,!0))||n)},deleteProperty:function(e,i){var r;return!!iy(i)&&(null==(r=e[iU].delete_(i,!0))||r)},defineProperty:function(e,i,r){var n;return null==(n=e[iU].defineProperty_(i,r))||n},ownKeys:function(e){return e[iU].ownKeys_()},preventExtensions:function(e){it(13)}};function nb(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function nw(e,i){var r=e.interceptors_||(e.interceptors_=[]);return r.push(i),im(function(){var e=r.indexOf(i);-1!==e&&r.splice(e,1)})}function nM(e,i){var r=rB();try{for(var n=[].concat(e.interceptors_||[]),a=0,s=n.length;a<s&&((i=n[a](i))&&!i.type&&it(14),i);a++);return i}finally{rN(r)}}function nT(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function nL(e,i){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(i),im(function(){var e=r.indexOf(i);-1!==e&&r.splice(e,1)})}function nS(e,i){var r=rB(),n=e.changeListeners_;if(n){n=n.slice();for(var a=0,s=n.length;a<s;a++)n[a](i);rN(r)}}var nk=Symbol("mobx-keys"),nD="splice",nE="update",nA={get:function(e,i){var r=e[iU];return i===iU?r:"length"===i?r.getArrayLength_():"string"!=typeof i||isNaN(i)?iA(nC,i)?nC[i]:e[i]:r.get_(parseInt(i))},set:function(e,i,r){var n=e[iU];return"length"===i&&n.setArrayLength_(r),"symbol"==typeof i||isNaN(i)?e[i]=r:n.set_(parseInt(i),r),!0},preventExtensions:function(){it(15)}},nP=function(){function e(e,i,r,n){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=n,this.atom_=new i$(e),this.enhancer_=function(e,r){return i(e,r,"ObservableArray[..]")}}var i=e.prototype;return i.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},i.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},i.intercept_=function(e){return nw(this,e)},i.observe_=function(e,i){return void 0===i&&(i=!1),i&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),nL(this,e)},i.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},i.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&it("Out of range: "+e);var i=this.values_.length;if(e!==i){if(e>i){for(var r=Array(e-i),n=0;n<e-i;n++)r[n]=void 0;this.spliceWithArray_(i,0,r)}else this.spliceWithArray_(e,i-e)}},i.updateArrayLength_=function(e,i){e!==this.lastKnownLength_&&it(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&n6(e+i+1)},i.spliceWithArray_=function(e,i,r){var n=this;this.atom_;var a=this.values_.length;if(void 0===e?e=0:e>a?e=a:e<0&&(e=Math.max(0,a+e)),i=1==arguments.length?a-e:null==i?0:Math.max(0,Math.min(i,a-e)),void 0===r&&(r=iu),nb(this)){var s=nM(this,{object:this.proxy_,type:nD,index:e,removedCount:i,added:r});if(!s)return iu;i=s.removedCount,r=s.added}if(r=0===r.length?r:r.map(function(e){return n.enhancer_(e,void 0)}),this.legacyMode_){var o=r.length-i;this.updateArrayLength_(a,o)}var l=this.spliceItemsIntoValues_(e,i,r);return(0!==i||0!==r.length)&&this.notifyArraySplice_(e,r,l),this.dehanceValues_(l)},i.spliceItemsIntoValues_=function(e,i,r){if(r.length<1e4){var n;return(n=this.values_).splice.apply(n,[e,i].concat(r))}var a=this.values_.slice(e,e+i),s=this.values_.slice(e+i);this.values_.length+=r.length-i;for(var o=0;o<r.length;o++)this.values_[e+o]=r[o];for(var l=0;l<s.length;l++)this.values_[e+r.length+l]=s[l];return a},i.notifyArrayChildUpdate_=function(e,i,r){var n=!this.owned_&&!1,a=nT(this),s=a||n?{observableKind:"array",object:this.proxy_,type:nE,debugObjectName:this.atom_.name_,index:e,newValue:i,oldValue:r}:null;this.atom_.reportChanged(),a&&nS(this,s)},i.notifyArraySplice_=function(e,i,r){var n=!this.owned_&&!1,a=nT(this),s=a||n?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:nD,index:e,removed:r,added:i,removedCount:r.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&nS(this,s)},i.get_=function(e){if(!this.legacyMode_||!(e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e])},i.set_=function(e,i){var r=this.values_;if(this.legacyMode_&&e>r.length&&it(17,e,r.length),e<r.length){this.atom_;var n=r[e];if(nb(this)){var a=nM(this,{type:nE,object:this.proxy_,index:e,newValue:i});if(!a)return;i=a.newValue}(i=this.enhancer_(i,n))!==n&&(r[e]=i,this.notifyArrayChildUpdate_(e,i,n))}else{for(var s=Array(e+1-r.length),o=0;o<s.length-1;o++)s[o]=void 0;s[s.length-1]=i,this.spliceWithArray_(r.length,0,s)}},e}(),nC={clear:function(){return this.splice(0)},replace:function(e){var i=this[iU];return i.spliceWithArray_(0,i.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,i){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=this[iU];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray_(e);case 2:return s.spliceWithArray_(e,i)}return s.spliceWithArray_(e,i,n)},spliceWithArray:function(e,i,r){return this[iU].spliceWithArray_(e,i,r)},push:function(){for(var e=this[iU],i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];return e.spliceWithArray_(e.values_.length,0,r),e.values_.length},pop:function(){return this.splice(Math.max(this[iU].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[iU],i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];return e.spliceWithArray_(0,0,r),e.values_.length},reverse:function(){return rq.trackingDerivation&&it(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){rq.trackingDerivation&&it(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var i=this[iU],r=i.dehanceValues_(i.values_).indexOf(e);return r>-1&&(this.splice(r,1),!0)}};function nI(e,i){"function"==typeof Array.prototype[e]&&(nC[e]=i(e))}function nO(e){return function(){var i=this[iU];i.atom_.reportObserved();var r=i.dehanceValues_(i.values_);return r[e].apply(r,arguments)}}function nz(e){return function(i,r){var n=this,a=this[iU];return a.atom_.reportObserved(),a.dehanceValues_(a.values_)[e](function(e,a){return i.call(r,e,a,n)})}}function nR(e){return function(){var i=this,r=this[iU];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),a=arguments[0];return arguments[0]=function(e,r,n){return a(e,r,n,i)},n[e].apply(n,arguments)}}nI("at",nO),nI("concat",nO),nI("flat",nO),nI("includes",nO),nI("indexOf",nO),nI("join",nO),nI("lastIndexOf",nO),nI("slice",nO),nI("toString",nO),nI("toLocaleString",nO),nI("toSorted",nO),nI("toSpliced",nO),nI("with",nO),nI("every",nz),nI("filter",nz),nI("find",nz),nI("findIndex",nz),nI("findLast",nz),nI("findLastIndex",nz),nI("flatMap",nz),nI("forEach",nz),nI("map",nz),nI("some",nz),nI("toReversed",nz),nI("reduce",nR),nI("reduceRight",nR);var nY=iT("ObservableArrayAdministration",nP);function nF(e){return iv(e)&&nY(e[iU])}var nj={},nB="delete";_=Symbol.iterator,g=Symbol.toStringTag;var nN=function(){function e(e,i,r){var n=this;void 0===i&&(i=iZ),void 0===r&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[iU]=nj,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=i,this.name_=r,ig(Map)||it(18),n9(function(){n.keysAtom_=iG("ObservableMap.keys()"),n.data_=new Map,n.hasMap_=new Map,e&&n.merge(e)})}var i=e.prototype;return i.has_=function(e){return this.data_.has(e)},i.has=function(e){var i=this;if(!rq.trackingDerivation)return this.has_(e);var r=this.hasMap_.get(e);if(!r){var n=r=new rP(this.has_(e),iX,"ObservableMap.key?",!1);this.hasMap_.set(e,n),no(n,function(){return i.hasMap_.delete(e)})}return r.get()},i.set=function(e,i){var r=this.has_(e);if(nb(this)){var n=nM(this,{type:r?nE:"add",object:this,newValue:i,name:e});if(!n)return this;i=n.newValue}return r?this.updateValue_(e,i):this.addValue_(e,i),this},i.delete=function(e){var i=this;if(this.keysAtom_,nb(this)&&!nM(this,{type:nB,object:this,name:e}))return!1;if(this.has_(e)){var r=nT(this),n=r?{observableKind:"map",debugObjectName:this.name_,type:nB,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return nv(function(){var r;i.keysAtom_.reportChanged(),null==(r=i.hasMap_.get(e))||r.setNewValue_(!1),i.data_.get(e).setNewValue_(void 0),i.data_.delete(e)}),r&&nS(this,n),!0}return!1},i.updateValue_=function(e,i){var r=this.data_.get(e);if((i=r.prepareNewValue_(i))!==rq.UNCHANGED){var n=nT(this),a=n?{observableKind:"map",debugObjectName:this.name_,type:nE,object:this,oldValue:r.value_,name:e,newValue:i}:null;r.setNewValue_(i),n&&nS(this,a)}},i.addValue_=function(e,i){var r=this;this.keysAtom_,nv(function(){var n,a=new rP(i,r.enhancer_,"ObservableMap.key",!1);r.data_.set(e,a),i=a.value_,null==(n=r.hasMap_.get(e))||n.setNewValue_(!0),r.keysAtom_.reportChanged()});var n=nT(this),a=n?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:e,newValue:i}:null;n&&nS(this,a)},i.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},i.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},i.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},i.values=function(){var e=this,i=this.keys();return ar({next:function(){var r=i.next(),n=r.done,a=r.value;return{done:n,value:n?void 0:e.get(a)}}})},i.entries=function(){var e=this,i=this.keys();return ar({next:function(){var r=i.next(),n=r.done,a=r.value;return{done:n,value:n?void 0:[a,e.get(a)]}}})},i[_]=function(){return this.entries()},i.forEach=function(e,i){for(var r,n=ij(this);!(r=n()).done;){var a=r.value,s=a[0],o=a[1];e.call(i,o,s,this)}},i.merge=function(e){var i=this;return nH(e)&&(e=new Map(e)),nv(function(){ix(e)?(function(e){var i=Object.keys(e);if(!ik)return i;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(i,r.filter(function(i){return il.propertyIsEnumerable.call(e,i)})):i})(e).forEach(function(r){return i.set(r,e[r])}):Array.isArray(e)?e.forEach(function(e){var r=e[0],n=e[1];return i.set(r,n)}):iL(e)?(e.constructor!==Map&&it(19,e),e.forEach(function(e,r){return i.set(r,e)})):null!=e&&it(20,e)}),this},i.clear=function(){var e=this;nv(function(){rj(function(){for(var i,r=ij(e.keys());!(i=r()).done;){var n=i.value;e.delete(n)}})})},i.replace=function(e){var i=this;return nv(function(){for(var r,n=function(e){if(iL(e)||nH(e))return e;if(Array.isArray(e))return new Map(e);if(!ix(e))return it(21,e);var i=new Map;for(var r in e)i.set(r,e[r]);return i}(e),a=new Map,s=!1,o=ij(i.data_.keys());!(r=o()).done;){var l=r.value;if(!n.has(l)){if(i.delete(l))s=!0;else{var u=i.data_.get(l);a.set(l,u)}}}for(var h,c=ij(n.entries());!(h=c()).done;){var d=h.value,f=d[0],p=d[1],m=i.data_.has(f);if(i.set(f,p),i.data_.has(f)){var _=i.data_.get(f);a.set(f,_),m||(s=!0)}}if(!s){if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var g=i.data_.keys(),y=a.keys(),v=g.next(),x=y.next();!v.done;){if(v.value!==x.value){i.keysAtom_.reportChanged();break}v=g.next(),x=y.next()}}i.data_=a}),this},i.toString=function(){return"[object ObservableMap]"},i.toJSON=function(){return Array.from(this)},i.observe_=function(e,i){return nL(this,e)},i.intercept_=function(e){return nw(this,e)},iI(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:g,get:function(){return"Map"}}]),e}(),nH=iT("ObservableMap",nN),nV={};y=Symbol.iterator,v=Symbol.toStringTag;var nU=function(){function e(e,i,r){var n=this;void 0===i&&(i=iZ),void 0===r&&(r="ObservableSet"),this.name_=void 0,this[iU]=nV,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,ig(Set)||it(22),this.enhancer_=function(e,n){return i(e,n,r)},n9(function(){n.atom_=iG(n.name_),e&&n.replace(e)})}var i=e.prototype;return i.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},i.clear=function(){var e=this;nv(function(){rj(function(){for(var i,r=ij(e.data_.values());!(i=r()).done;){var n=i.value;e.delete(n)}})})},i.forEach=function(e,i){for(var r,n=ij(this);!(r=n()).done;){var a=r.value;e.call(i,a,a,this)}},i.add=function(e){var i=this;if(this.atom_,nb(this)&&!nM(this,{type:"add",object:this,newValue:e}))return this;if(!this.has(e)){nv(function(){i.data_.add(i.enhancer_(e,void 0)),i.atom_.reportChanged()});var r=nT(this),n=r?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,newValue:e}:null;r&&nS(this,n)}return this},i.delete=function(e){var i=this;if(nb(this)&&!nM(this,{type:nB,object:this,oldValue:e}))return!1;if(this.has(e)){var r=nT(this),n=r?{observableKind:"set",debugObjectName:this.name_,type:nB,object:this,oldValue:e}:null;return nv(function(){i.atom_.reportChanged(),i.data_.delete(e)}),r&&nS(this,n),!0}return!1},i.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},i.entries=function(){var e=0,i=Array.from(this.keys()),r=Array.from(this.values());return ar({next:function(){var n=e;return e+=1,n<r.length?{value:[i[n],r[n]],done:!1}:{done:!0}}})},i.keys=function(){return this.values()},i.values=function(){this.atom_.reportObserved();var e=this,i=0,r=Array.from(this.data_.values());return ar({next:function(){return i<r.length?{value:e.dehanceValue_(r[i++]),done:!1}:{done:!0}}})},i.replace=function(e){var i=this;return n$(e)&&(e=new Set(e)),nv(function(){Array.isArray(e)?(i.clear(),e.forEach(function(e){return i.add(e)})):iS(e)?(i.clear(),e.forEach(function(e){return i.add(e)})):null!=e&&it("Cannot initialize set from "+e)}),this},i.observe_=function(e,i){return nL(this,e)},i.intercept_=function(e){return nw(this,e)},i.toJSON=function(){return Array.from(this)},i.toString=function(){return"[object ObservableSet]"},i[y]=function(){return this.values()},iI(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:v,get:function(){return"Set"}}]),e}(),n$=iT("ObservableSet",nU),nW=Object.create(null),nG="remove",nq=function(){function e(e,i,r,n){void 0===i&&(i=new Map),void 0===n&&(n=rs),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=i,this.name_=r,this.defaultAnnotation_=n,this.keysAtom_=new i$("ObservableObject.keys"),this.isPlainObject_=ix(this.target_)}var i=e.prototype;return i.getObservablePropValue_=function(e){return this.values_.get(e).get()},i.setObservablePropValue_=function(e,i){var r=this.values_.get(e);if(r instanceof rC)return r.set(i),!0;if(nb(this)){var n=nM(this,{type:nE,object:this.proxy_||this.target_,name:e,newValue:i});if(!n)return null;i=n.newValue}if((i=r.prepareNewValue_(i))!==rq.UNCHANGED){var a=nT(this),s=a?{type:nE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:r.value_,name:e,newValue:i}:null;r.setNewValue_(i),a&&nS(this,s)}return!0},i.get_=function(e){return rq.trackingDerivation&&!iA(this.target_,e)&&this.has_(e),this.target_[e]},i.set_=function(e,i,r){return(void 0===r&&(r=!1),iA(this.target_,e))?this.values_.has(e)?this.setObservablePropValue_(e,i):r?Reflect.set(this.target_,e,i):(this.target_[e]=i,!0):this.extend_(e,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,r)},i.has_=function(e){if(!rq.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(e);return i||(i=new rP(e in this.target_,iX,"ObservableObject.key?",!1),this.pendingKeys_.set(e,i)),i.get()},i.make_=function(e,i){if(!0===i&&(i=this.defaultAnnotation_),!1!==i){if(!(e in this.target_)){var r;if(null!=(r=this.target_[iB])&&r[e])return;it(1,i.annotationType_,this.name_+"."+e.toString())}for(var n=this.target_;n&&n!==il;){var a=is(n,e);if(a){var s=i.make_(this,e,a,n);if(0===s)return;if(1===s)break}n=Object.getPrototypeOf(n)}nQ(this,i,e)}},i.extend_=function(e,i,r,n){if(void 0===n&&(n=!1),!0===r&&(r=this.defaultAnnotation_),!1===r)return this.defineProperty_(e,i,n);var a=r.extend_(this,e,i,n);return a&&nQ(this,r,e),a},i.defineProperty_=function(e,i,r){void 0===r&&(r=!1),this.keysAtom_;try{rJ();var n=this.delete_(e);if(!n)return n;if(nb(this)){var a=nM(this,{object:this.proxy_||this.target_,name:e,type:"add",newValue:i.value});if(!a)return null;var s=a.newValue;i.value!==s&&(i=iO({},i,{value:s}))}if(r){if(!Reflect.defineProperty(this.target_,e,i))return!1}else io(this.target_,e,i);this.notifyPropertyAddition_(e,i.value)}finally{rK()}return!0},i.defineObservableProperty_=function(e,i,r,n){void 0===n&&(n=!1),this.keysAtom_;try{rJ();var a=this.delete_(e);if(!a)return a;if(nb(this)){var s=nM(this,{object:this.proxy_||this.target_,name:e,type:"add",newValue:i});if(!s)return null;i=s.newValue}var o=nJ(e),l={configurable:!rq.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(n){if(!Reflect.defineProperty(this.target_,e,l))return!1}else io(this.target_,e,l);var u=new rP(i,r,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{rK()}return!0},i.defineComputedProperty_=function(e,i,r){void 0===r&&(r=!1),this.keysAtom_;try{rJ();var n=this.delete_(e);if(!n)return n;if(nb(this)&&!nM(this,{object:this.proxy_||this.target_,name:e,type:"add",newValue:void 0}))return null;i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var a=nJ(e),s={configurable:!rq.safeDescriptors||this.isPlainObject_,enumerable:!1,get:a.get,set:a.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else io(this.target_,e,s);this.values_.set(e,new rC(i)),this.notifyPropertyAddition_(e,void 0)}finally{rK()}return!0},i.delete_=function(e,i){if(void 0===i&&(i=!1),this.keysAtom_,!iA(this.target_,e))return!0;if(nb(this)&&!nM(this,{object:this.proxy_||this.target_,name:e,type:nG}))return null;try{rJ();var r,n,a,s=nT(this),o=this.values_.get(e),l=void 0;if(!o&&s&&(l=null==(a=is(this.target_,e))?void 0:a.value),i){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof rP&&(l=o.value_),r0(o)),this.keysAtom_.reportChanged(),null==(r=this.pendingKeys_)||null==(n=r.get(e))||n.set(e in this.target_),s){var u={type:nG,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:l,name:e};s&&nS(this,u)}}finally{rK()}return!0},i.observe_=function(e,i){return nL(this,e)},i.intercept_=function(e){return nw(this,e)},i.notifyPropertyAddition_=function(e,i){var r,n,a=nT(this);if(a){var s=a?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:i}:null;a&&nS(this,s)}null==(r=this.pendingKeys_)||null==(n=r.get(e))||n.set(!0),this.keysAtom_.reportChanged()},i.ownKeys_=function(){return this.keysAtom_.reportObserved(),iD(this.target_)},i.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function nZ(e,i){if(iA(e,iU))return e;var r,n,a=null!=(n=null==i?void 0:i.name)?n:"ObservableObject",s=new nq(e,new Map,String(a),i?null!=(r=i.defaultDecorator)?r:ro(i):void 0);return iw(e,iU,s),e}var nX=iT("ObservableObjectAdministration",nq);function nJ(e){return nW[e]||(nW[e]={get:function(){return this[iU].getObservablePropValue_(e)},set:function(i){return this[iU].setObservablePropValue_(e,i)}})}function nK(e){return!!iv(e)&&nX(e[iU])}function nQ(e,i,r){var n;null==(n=e.target_[iB])||delete n[r]}var n0=n5(0),n1=function(){var e=!1,i={};return Object.defineProperty(i,"0",{set:function(){e=!0}}),Object.create(i)["0"]=1,!1===e}(),n2=0,n3=function(){};!function(e,i){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,i):void 0!==e.prototype.__proto__?e.prototype.__proto__=i:e.prototype=i}(n3,Array.prototype);var n4=function(e,i,r){function n(i,r,n,a){var s;return void 0===n&&(n="ObservableArray"),void 0===a&&(a=!1),s=e.call(this)||this,n9(function(){var e=new nP(n,r,a,!0);e.proxy_=iY(s),iM(iY(s),iU,e),i&&i.length&&s.spliceWithArray(0,0,i),n1&&Object.defineProperty(iY(s),"0",n0)}),s}iz(n,e);var a=n.prototype;return a.concat=function(){this[iU].atom_.reportObserved();for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];return Array.prototype.concat.apply(this.slice(),i.map(function(e){return nF(e)?e.slice():e}))},a[r]=function(){var e=this,i=0;return ar({next:function(){return i<e.length?{value:e[i++],done:!1}:{done:!0,value:void 0}}})},iI(n,[{key:"length",get:function(){return this[iU].getArrayLength_()},set:function(e){this[iU].setArrayLength_(e)}},{key:i,get:function(){return"Array"}}]),n}(n3,Symbol.toStringTag,Symbol.iterator);function n5(e){return{enumerable:!1,configurable:!0,get:function(){return this[iU].get_(e)},set:function(i){this[iU].set_(e,i)}}}function n6(e){if(e>n2){for(var i,r=n2;r<e+100;r++)i=r,io(n4.prototype,""+i,n5(i));n2=e}}function n8(e,i){if("object"==typeof e&&null!==e){if(nF(e))return void 0!==i&&it(23),e[iU].atom_;if(n$(e))return e.atom_;if(nH(e)){if(void 0===i)return e.keysAtom_;var r=e.data_.get(i)||e.hasMap_.get(i);return r||it(25,i,n7(e)),r}if(nK(e)){if(!i)return it(26);var n=e[iU].values_.get(i);return n||it(27,i,n7(e)),n}if(iW(e)||rI(e)||r5(e))return e}else if(ig(e)&&r5(e[iU]))return e[iU];it(28)}function n7(e,i){var r;if(void 0!==i)r=n8(e,i);else{if(na(e))return e.name;r=nK(e)||nH(e)||n$(e)?function e(i,r){return(i||it(29),void 0!==r)?e(n8(i,r)):iW(i)||rI(i)||r5(i)||nH(i)||n$(i)?i:i[iU]?i[iU]:void it(24,i)}(e):n8(e)}return r.name_}function n9(e){var i=rB(),r=rE(!0);rJ();try{return e()}finally{rK(),rA(r),rN(i)}}Object.entries(nC).forEach(function(e){var i=e[0],r=e[1];"concat"!==i&&iw(n4.prototype,i,r)}),n6(1e3);var ae=il.toString;function at(e,i,r){return void 0===r&&(r=-1),function e(i,r,n,a,s){if(i===r)return 0!==i||1/i==1/r;if(null==i||null==r)return!1;if(i!=i)return r!=r;var o=typeof i;if("function"!==o&&"object"!==o&&"object"!=typeof r)return!1;var l=ae.call(i);if(l!==ae.call(r))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+i==""+r;case"[object Number]":if(+i!=+i)return+r!=+r;return 0==+i?1/+i==1/r:+i==+r;case"[object Date]":case"[object Boolean]":return+i==+r;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(i)===Symbol.valueOf.call(r);case"[object Map]":case"[object Set]":n>=0&&n++}i=ai(i),r=ai(r);var u="[object Array]"===l;if(!u){if("object"!=typeof i||"object"!=typeof r)return!1;var h=i.constructor,c=r.constructor;if(h!==c&&!(ig(h)&&h instanceof h&&ig(c)&&c instanceof c)&&"constructor"in i&&"constructor"in r)return!1}if(0===n)return!1;n<0&&(n=-1),s=s||[];for(var d=(a=a||[]).length;d--;)if(a[d]===i)return s[d]===r;if(a.push(i),s.push(r),u){if((d=i.length)!==r.length)return!1;for(;d--;)if(!e(i[d],r[d],n-1,a,s))return!1}else{var f,p=Object.keys(i);if(d=p.length,Object.keys(r).length!==d)return!1;for(;d--;)if(!(iA(r,f=p[d])&&e(i[f],r[f],n-1,a,s)))return!1}return a.pop(),s.pop(),!0}(e,i,r)}function ai(e){return nF(e)?e.slice():iL(e)||nH(e)||iS(e)||n$(e)?Array.from(e.entries()):e}function ar(e){return e[Symbol.iterator]=an,e}function an(){return this}["Symbol","Map","Set"].forEach(function(e){void 0===ir()[e]&&it("MobX requires global '"+e+"' to be available or polyfilled")}),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return function(){}},extras:{getDebugName:n7},$mobx:iU});let aa={xs:"0px",sm:"600px",md:"900px",lg:"1200px",xl:"1546px"},as=Object.keys(aa).reduce((e,i)=>(e[i]=(...e)=>tH`
    /* stylelint-disable-next-line block-no-empty */
    @media (min-width: ${aa[i]}) {
      ${tH(...e)};
    }
  `,e),{}),ao=e=>{if("number"!=typeof e)return e;let i=parseFloat(getComputedStyle(document.documentElement).fontSize);return`${e/i}rem`},al={primary:"#000000",secondary:"#000000",gray1:"#D9D9D9",gray2:"#898989",gray3:"#202025",gray4:"#607D94",gray5:"#898989",blue:"#A7B2C3",black:"#000000",white:"#FFFFFF",mediumDark:"#474747"},au={primary:"Poppins, sans-serif",secondary:"Poppins, system-ui"},ah={h1:tH`
    font-family: ${au.primary};
    font-size: ${ao(39)};
    font-weight: 600;
    line-height: ${58/39};

    ${as.lg`
			font-family: ${au.primary};
    	font-size: ${ao(76)};
    	font-weight: 600;
    	line-height: ${1.5};
		`}
  `,h2:tH`
    font-family: ${au.primary};
    font-size: ${ao(13)};
    font-weight: 400;
    line-height: ${18/13};

    ${as.lg`
			font-family: ${au.primary};
    	font-size: ${ao(35)};
    	font-weight: 400;
    	line-height: ${50/35};
		`}
  `,h3:tH`
    font-family: ${au.primary};
    font-size: ${ao(12)};
    font-weight: 300;
    line-height: ${16/12};
    ${as.lg`
			
			font-family: ${au.primary};
    	font-size: ${ao(32)};
    	font-weight: 300;
    	line-height: ${41/32};
		`}
  `,h4:tH`
    font-family: ${au.primary};
    font-size: ${ao(16)};
    font-weight: 400;
    line-height: ${1.5};
    ${as.lg`
			font-family: ${au.primary};
    	font-size: ${ao(28)};
    	font-weight: 400;
    	line-height: ${1.5};
		`}
  `,h5:tH`
    font-family: ${au.primary};
    font-size: ${ao(16)};
    font-weight: 400;
    line-height: ${1.5};

    ${as.lg`
			font-family: ${au.primary};
   		font-size: ${ao(24)};
   		font-weight: 400;
   		line-height: ${1.5};
		`}
  `,h6:tH`
    font-family: ${au.primary};
    font-size: ${ao(10)};
    font-weight: 300;
    line-height: ${1.2};

    ${as.lg`
		font-family: ${au.primary};
    font-size: ${ao(20)};
    font-weight: 300;
    line-height: ${2.05};
		`}
  `,p1:tH`
    ${as.xs`
			font-family: ${au.primary},
    	font-size: ${ao(12)},
    	font-weight: 300,
    	line-height: ${22/12},
		`}
  `,p2:tH`
    font-family: ${au.primary};
    font-size: ${ao(20)};
    font-weight: 600;
    line-height: ${1.5};

    ${as.lg`
			font-family: ${au.primary};
   		font-size: ${ao(26)};
   		font-weight: 600;
   		line-height: ${1.5};

		`}
  `},ac={colors:al,breakpoints:aa,boxShadow:{header:"0px 0px 3px #000000",subheader:"0px 3px 3px #00000080"},typography:{fontFamilies:au,variant:ah},linearGradient:{header:"67deg, rgb(0 0 0 / 100%) 0%, rgb(25 54 34 / 100%) 60%, rgb(18 18 18 / 100%) 100%",headerText:"90.18deg, #00ce2c 0.18%, #aedf23 49.3%, #a3dc00 99.88%"},fontWeight:{light:"100",regular:"400",medium:"500",semibold:"600",bold:"700"},spacing:(...e)=>e.length>4?"0":e.map(e=>ao(e)).join(" "),media:as,utils:{pxToRem:ao}},ad={...ac,colors:{...ac.colors,primary:al.white,secondary:al.black,gray5:"#3d3d3d"}},af={...ac,colors:{...ac.colors,primary:al.black,secondary:al.white}},ap={theme:"theme"};function am(){return(am=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a_(){return(a_=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ag(){return(ag=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ay(){return(ay=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function av(){return(av=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ax(){return(ax=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ab(){return(ab=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function aw(){return(aw=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function aM(){return(aM=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let aT={STOCKS_SECTION:[],QUOTES_SECTION:[{icon:(0,ea.jsx)(e=>eo.createElement("svg",am({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),x||(x=eo.createElement("rect",{width:80,height:80,fill:"#3D2E28",rx:8})),b||(b=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#Bitcoin_Icon_svg__a)"},eo.createElement("path",{d:"M27.5 27.5h16.667a6.25 6.25 0 0 1 0 12.5 6.25 6.25 0 0 1 0 12.5H27.5M31.667 27.5v25M31.667 40h12.5M33.75 21.25v6.25M42.083 21.25v6.25M33.75 52.5v6.25M42.083 52.5v6.25"}))),w||(w=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Bitcoin_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"BTC"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",a_({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),M||(M=eo.createElement("rect",{width:80,height:80,fill:"#142E67",rx:8})),T||(T=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#Australian_Dollar_Icon_svg__a)"},eo.createElement("path",{d:"m21.25 52.5 6.831-23.908a1.563 1.563 0 0 1 3.004 0L37.917 52.5M58.75 27.5h-8.333a6.25 6.25 0 0 0 0 12.5H52.5a6.25 6.25 0 0 1 0 12.5h-8.333M50.417 56.667V52.5M52.5 27.5v-4.167M24.375 44.167h10.417"}))),L||(L=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Australian_Dollar_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"AUD"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",ag({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),S||(S=eo.createElement("rect",{width:80,height:80,fill:"#452534",rx:8})),k||(k=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#Canadian_Dollar_Icon_svg__a)"},eo.createElement("path",{d:"M58.75 27.5h-8.333a6.25 6.25 0 0 0 0 12.5H52.5a6.25 6.25 0 0 1 0 12.5h-8.333M35.833 52.5H33.75a12.5 12.5 0 0 1 0-25h2.083M50.417 56.667V52.5M52.5 27.5v-4.167"}))),D||(D=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Canadian_Dollar_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"CAD"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",ay({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),E||(E=eo.createElement("rect",{width:80,height:80,fill:"#2A4628",rx:8})),A||(A=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.5,clipPath:"url(#Dollar_Icon_svg__a)"},eo.createElement("path",{d:"M49.494 31.072a6.25 6.25 0 0 0-5.625-4.167h-8.333a6.25 6.25 0 0 0 0 12.5h8.333a6.25 6.25 0 0 1 0 12.5h-8.333a6.25 6.25 0 0 1-5.625-4.167M40 20.952v6.25m0 25v6.25"}))),P||(P=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Dollar_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"USD"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",av({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),C||(C=eo.createElement("rect",{width:80,height:80,fill:"#494F57",rx:8})),I||(I=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#Yen_Icon_svg__a)"},eo.createElement("path",{d:"M40 54.583V40m0 0L29.583 25.417M40 40l10.417-14.583M31.667 50.417h16.666M31.667 42.083h16.666"}))),O||(O=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Yen_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"JPY"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",ax({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),z||(z=eo.createElement("rect",{width:80,height:80,fill:"#1D324B",rx:8})),R||(R=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#Euro_Icon_svg__a)"},eo.createElement("path",{d:"M50.833 29.583c-1.758-2.01-3.985-3.369-6.403-3.907-2.418-.54-4.918-.233-7.187.88-2.27 1.112-4.207 2.981-5.569 5.373-1.362 2.392-2.089 5.2-2.089 8.071 0 2.872.727 5.68 2.09 8.071 1.361 2.392 3.299 4.261 5.568 5.374 2.269 1.112 4.77 1.418 7.187.88 2.418-.54 4.645-1.899 6.403-3.908M42.083 35.833H25.417m0 8.334h16.666"}))),Y||(Y=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Euro_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"EUR"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",ab({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),F||(F=eo.createElement("rect",{width:80,height:80,fill:"#4D505B",rx:8})),j||(j=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#Won_Icon_svg__a)"},eo.createElement("path",{d:"M46.25 33.75v16.667a4.167 4.167 0 0 0 8.333 0M54.583 33.75H25.417M54.583 25.417H25.417M33.75 33.75v8.333c0 5.209-1.39 8.334-4.167 12.5"}))),B||(B=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Won_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"CNY"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",aw({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),N||(N=eo.createElement("rect",{width:80,height:80,fill:"#5B2C2B",rx:8})),H||(H=eo.createElement("g",{clipPath:"url(#Libra_Icon_svg__a)"},eo.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M50.417 53.542a12.5 12.5 0 0 1-10.417 0 12.5 12.5 0 0 0-10.417 1.041 6.25 6.25 0 0 0 4.167-5.208V33.75a8.334 8.334 0 0 1 15.52-4.167m-5.312 12.5H29.375"}))),V||(V=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Libra_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"TRY"},{icon:(0,ea.jsx)(e=>eo.createElement("svg",aM({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 80 80"},e),U||(U=eo.createElement("rect",{width:80,height:80,fill:"#5A4B2C",rx:8})),$||($=eo.createElement("g",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,clipPath:"url(#Peso_Argentino_Icon_svg__a)"},eo.createElement("path",{d:"M31.667 54.583V25.417h7.291a9.375 9.375 0 0 1 0 18.75h-7.291M52.5 31.667h-25M52.5 37.917h-25"}))),W||(W=eo.createElement("defs",null,eo.createElement("clipPath",{id:"Peso_Argentino_Icon_svg__a"},eo.createElement("path",{fill:"#fff",d:"M15 15h50v50H15z"}))))),{}),name:"ARS"}]},aL=new class{_theme=af;_themeMode="dark";constructor(){(function(e,i,r){ix(e)?nh(e,e,i,r):n9(function(){var n=nZ(e,r)[iU];if(!e[nk]){var a=Object.getPrototypeOf(e),s=new Set([].concat(iD(e),iD(a)));s.delete("constructor"),s.delete(iU),iw(a,nk,s)}e[nk].forEach(function(e){return n.make_(e,!i||!(e in i)||i[e])})})})(this),this.loadThemeFromStorage()}get themeName(){return this._themeMode}get theme(){return this._theme}toggleTheme(){this._theme="light"===this._themeMode?af:ad,this._themeMode="light"===this._themeMode?"dark":"light",this.saveThemeToStorage()}saveThemeToStorage(){localStorage.setItem(ap.theme,this._themeMode)}loadThemeFromStorage(){let e=localStorage.getItem(ap.theme);e&&(this._theme="light"===e?ad:af,this._themeMode="light"===e?"light":"dark")}};tQ.div`
  left: ${({checked:e})=>e?"calc(100% - 48%)":"-1px"};
  ${({theme:e})=>tH`
    cursor: pointer;

    position: relative;

    width: ${e.spacing(30)};
    height: ${e.spacing(15)};

    background-color: ${e.colors.primary};
    border: 1px solid ${e.colors.secondary};
    border-radius: ${e.spacing(20)};

    transition: background-color 0.3s;

    &::before {
      content: '';

      position: absolute;

      width: ${e.spacing(16)};
      height: ${e.spacing(16)};

      border: 1px solid ${e.colors.secondary};
      border-radius: 50%;

      transition:
        left 0.3s,
        background-color 0.3s;
    }
    ${e.media.lg`
		width: ${e.spacing(48)}; 
		height: ${e.spacing(24)};
		&::before {
			width: ${e.spacing(22)};
      height: ${e.spacing(22)};
		}`}
  `}
`;let aS=tQ.label`
  ${({theme:e,checked:i})=>tH`
    cursor: pointer;

    position: relative;

    display: block;

    width: ${e.spacing(30)};
    height: ${e.spacing(15)};

    text-indent: -9999px;

    background: ${e.colors.primary};
    border: ${e.spacing(1)} solid ${e.colors.secondary};
    border-radius: ${e.spacing(100)};

    &::after {
      content: '';

      position: absolute;
      left: ${i?"calc(100% - 48%)":"-0.5px"};

      width: ${e.spacing(13)};
      height: ${e.spacing(13)};

      background: ${e.colors.secondary};
      border: 1px solid ${e.colors.secondary};
      border-radius: ${e.spacing(90)};

      transition: 0.3s;
      ${e.media.lg`
			width: ${e.spacing(22)};
      height: ${e.spacing(23)};`}
    }
    ${e.media.lg`
		width: ${e.spacing(48)}; 
		height: ${e.spacing(24)};

		`}
  `}
`,ak=()=>{let[e,i]=(0,eo.useState)(()=>"dark"!==aL.themeName);return(0,ea.jsx)(aS,{checked:e,children:(0,ea.jsx)("input",{onChange:()=>{aL.toggleTheme(),i(e=>!e)},id:"checkbox",type:"checkbox"})})},aD=()=>(0,ea.jsxs)(t4,{children:[(0,ea.jsx)(t5,{to:"/",children:(0,ea.jsx)(t6,{})}),(0,ea.jsx)(ie,{}),(0,ea.jsx)(ak,{})]});function aE(){return(aE=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let aA=tQ.header`
  ${({theme:e})=>tH`
    cursor: default;

    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;

    height: ${e.spacing(200)};

    background: ${e.colors.black};
    background: linear-gradient(${e.linearGradient.header});
    ${e.media.lg`
		justify-content: flex-start;
		height: ${e.spacing(400)};
		`}
  `}
`,aP=tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.h1}
    margin: 0 auto;

    color: transparent;
    text-align: center;
    word-break: normal;

    background-image: linear-gradient(${e.linearGradient.headerText});
    background-clip: text;
    filter: drop-shadow(${e.boxShadow.header});
    ${e.media.lg`
			margin-right: ${e.spacing(48)};
      text-align: right;
		`}
  `}
`,aC=tQ.p`
  ${({theme:e})=>tH`
    margin: 0 auto;
    margin-top: 0;

    ${e.typography.variant.p1}
    color: ${e.colors.gray1};
    text-align: center;
    text-shadow: ${e.boxShadow.subheader};
    word-break: normal;
    ${e.media.lg`
		`}
  `}
`,aI=tQ.div`
  ${({theme:e})=>tH`
    display: none;
    width: ${e.spacing(12)};
    height: ${e.spacing(12)};

    ${e.media.lg`
			display: flex;
      width: ${e.spacing(300)};
      height: ${e.spacing(300)};
		`}
  `}
`,aO=tQ(e=>eo.createElement("svg",aE({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 301 314"},e),G||(G=eo.createElement("path",{stroke:"url(#HeaderLogo_svg__a)",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:24.645,d:"M25.625 26.347v221.522c0 21.631 16.718 39.092 37.429 39.092H275.15"})),q||(q=eo.createElement("path",{stroke:"url(#HeaderLogo_svg__b)",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:24.645,d:"m63.054 221.807 57.266-69.844c9.482-11.467 26.325-12.249 36.555-1.434l11.853 12.379c10.23 10.686 27.073 10.034 36.555-1.433L262.674 91.5"})),Z||(Z=eo.createElement("defs",null,eo.createElement("linearGradient",{id:"HeaderLogo_svg__a",x1:150.388,x2:150.388,y1:26.347,y2:286.961,gradientUnits:"userSpaceOnUse"},eo.createElement("stop",{stopColor:"#2ADD50"}),eo.createElement("stop",{offset:1,stopColor:"#AFDD2A"})),eo.createElement("linearGradient",{id:"HeaderLogo_svg__b",x1:162.864,x2:162.864,y1:91.5,y2:221.807,gradientUnits:"userSpaceOnUse"},eo.createElement("stop",{stopColor:"#2ADD50"}),eo.createElement("stop",{offset:1,stopColor:"#AFDD2A"}))))))`
  ${({theme:e})=>tH`
    display: none;
    width: ${e.spacing(12)};
    height: ${e.spacing(12)};

    ${e.media.lg`
		display: flex;
      width: ${e.spacing(300)};
      height: ${e.spacing(300)};
		`}
  `}
`,az=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    ${e.media.lg`
		align-items: end;
		`}
  `}
`;tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;

    ${e.media.lg`
		align-items: end;`}
  `}
`,tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;

    ${e.media.lg`
		align-items: end;`}
  `}
`;let aR=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: row;
    height: ${e.spacing(150)};

    ${e.media.lg`
			display: flex;
      flex-direction: row;
      height: ${e.spacing(300)};
      margin-left: ${e.spacing(72)};
		`}
  `}
`,aY=()=>(0,ea.jsx)(aA,{children:(0,ea.jsxs)(aR,{children:[(0,ea.jsxs)(az,{children:[(0,ea.jsxs)(az,{children:[(0,ea.jsx)(aP,{children:"Modsen Currency"}),(0,ea.jsx)(aP,{children:"Tracker"})]}),(0,ea.jsxs)(az,{children:[(0,ea.jsx)(aC,{children:"Quotes for the dollar and other"}),(0,ea.jsx)(aC,{children:"international currencies."})]})]}),(0,ea.jsx)(aI,{children:(0,ea.jsx)(aO,{})})]})}),aF=tQ.footer`
  ${({theme:e})=>tH`
    justify-content: center;
    ${e.media.lg`
			display: flex;
      flex-direction: column;
		`}
  `}
`,aj=tQ.div`
  ${({theme:e})=>tH`
    ${e.media.lg`
			display: flex;
    	flex-direction: row;
    	justify-content: space-between;
    	margin: ${e.spacing(0,120)};
	`}
  `}
`,aB=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    align-items: center;

    height: ${e.spacing(30)};
    margin: ${e.spacing(0,40)};
    margin-bottom: ${e.spacing(34)};
    ${e.media.lg`
			flex-direction: column;
			height: ${e.spacing(300)};
			width: ${e.spacing(500)};
			margin: 0 auto;
		`}
  `}
`,aN=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    align-items: center;
    justify-content: center;
    margin: ${e.spacing(0)} auto;
    ${e.media.lg`
			display: flex;
			justify-content: flex-start;
			margin: 0;
			width: inherit;
		`}
  `}
`,aH=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    width: ${e.spacing(30)};
    height: ${e.spacing(30)};
  `}
`,aV=tQ(t3)`
  ${({theme:e})=>tH`
    display: flex;
    width: ${e.spacing(30)};
    height: ${e.spacing(30)};
  `}
`,aU=tQ.p`
  ${({theme:e})=>tH`
    margin: ${e.spacing(0,16)};

    ${e.typography.variant.p2}
    color: transparent;
    text-align: center;
    word-break: normal;

    background-image: linear-gradient(${e.linearGradient.headerText});
    background-clip: text;
    ${e.media.lg`
		`}
  `}
`,a$=tQ.p`
  ${({theme:e})=>tH`
    display: none;
    ${e.typography.variant.h5}
    ${e.media.lg`
			display: flex;
			color: ${e.colors.secondary}
		`}
  `}
`,aW=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: ${e.spacing(36)};
  `}
`,aG=tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.p2};
    color: ${e.colors.gray5};
    ${e.typography.variant.h5}
    ${e.media.lg`
		`}
  `}
`,aq=tQ(eF)`
  ${({theme:e})=>tH`
    color: ${e.colors.gray5};
    text-decoration: none;
    ${e.typography.variant.h5}
    ${e.media.lg`
		`}
  `}
`,aZ=[{title:"General",content:(0,ea.jsx)(ea.Fragment,{children:["Market","Service"].map((e,i)=>(0,ea.jsx)("div",{children:(0,ea.jsx)(aq,{to:e,"name-link":e,children:e})},i))})},{title:"Product",content:(0,ea.jsx)(ea.Fragment,{children:["Sparks","Snaps"].map((e,i)=>(0,ea.jsx)("div",{children:(0,ea.jsx)(aq,{to:e,"name-link":e,children:e})},i))})},{title:"Community",content:(0,ea.jsx)(ea.Fragment,{children:["Ideas","Streams"].map((e,i)=>(0,ea.jsx)("div",{children:(0,ea.jsx)(aq,{to:e,"name-link":e,children:e})},i))})}];function aX(){return(aX=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let aJ=tQ.div`
  ${({theme:e})=>tH`
    cursor: pointer;

    display: flex;
    gap: ${e.spacing(15)};
    align-items: center;
    justify-content: space-between;

    height: ${e.spacing(54)};
    margin: ${e.spacing(0,40)};

    border-bottom: 1px solid ${e.colors.gray4};
    ${e.media.lg`
		height: ${e.spacing(44)};
		border: none;
		`}
  `}
`,aK=tQ.div`
  ${({theme:e,isOpen:i})=>tH`
    display: ${i?"block":"none"};
    margin: ${e.spacing(0,40)};
    background-color: ${e.colors.primary};
    ${e.media.lg`
		display: flex;
		`}
  `}
`,aQ=tQ.div`
  ${({theme:e})=>tH`
    ${e.typography.variant.h5};
    color: ${e.colors.gray5};
    ${e.media.lg`
		`}
  `}
`,a0=tQ.span`
  ${({theme:e})=>tH`
    color: ${e.colors.secondary};
    ${e.typography.variant.h4}
    ${e.media.lg`
		`}
  `}
`,a1=tQ(e=>eo.createElement("svg",aX({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 14 8"},e),X||(X=eo.createElement("path",{d:"M1 1.175a.937.937 0 0 1 1.325-.05L7 5.534l4.675-4.409A.938.938 0 0 1 12.95 2.5l-5.312 5a.938.938 0 0 1-1.275 0l-5.313-5A.937.937 0 0 1 1 1.175"}))))`
  ${({theme:e})=>tH`
    fill: ${e.colors.secondary};

    ${e.media.lg`
		display: none;
	`}
  `}
`,a2=({title:e,content:i})=>{let[r,n]=(0,eo.useState)(!1);return(0,ea.jsxs)("div",{children:[(0,ea.jsxs)(aJ,{onClick:()=>{n(e=>!e)},children:[(0,ea.jsx)(a0,{children:e}),(0,ea.jsx)(a1,{})]}),(0,ea.jsx)(aK,{isOpen:r,children:(0,ea.jsx)(aQ,{children:i})})]})},a3=()=>(0,ea.jsxs)(aF,{children:[(0,ea.jsxs)(aj,{children:[(0,ea.jsxs)(aB,{children:[(0,ea.jsxs)(aN,{children:[(0,ea.jsx)(aH,{children:(0,ea.jsx)(aV,{})}),(0,ea.jsx)(aU,{children:"Modsen Currency Tracker"})]}),(0,ea.jsx)(a$,{children:"Since then, the company has grown organically to. Starsup is the world`s largest trading platform, with $12 billion worth of currency trading and 500,000 tickets sold daily to tens of thousands of traders worldwide."})]}),aZ.map(({title:e,content:i})=>(0,ea.jsx)(a2,{title:e,content:i},e))]}),(0,ea.jsx)(aW,{children:(0,ea.jsx)(aG,{children:"Startsup  2023-2024, All Rights Reserved"})})]}),a4=tQ.div`
  ${({theme:e})=>tH`
    margin: 0 auto;
    background-color: ${e.colors.primary};
  `}
`,a5=tQ.div`
  ${({theme:e})=>tH`
    max-width: ${e.breakpoints.xl};
    margin: 0 auto;
  `}
`,a6=tQ.section`
  ${({theme:e})=>tH`
    display: flex;
    align-items: center;
    justify-content: center;
    margin: ${e.spacing(20,20,40,20)};
    ${e.media.lg`
			margin: ${e.spacing(40,40,100,40)}
		`}
  `}
`,a8=tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.h1}
    color: ${e.colors.secondary};
  `}
`;class a7 extends eo.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,i){console.error("Uncaught error:",e,i)}render(){return this.state.hasError?(0,ea.jsx)(a4,{children:(0,ea.jsxs)(a5,{children:[(0,ea.jsx)(aD,{}),(0,ea.jsx)(aY,{}),(0,ea.jsx)(a6,{children:(0,ea.jsx)(a8,{children:"Opps something went wrong"})}),(0,ea.jsx)(a3,{})]})}):this.props.children}}if(!eo.useState)throw Error("mobx-react-lite requires React with Hooks support");var a9=r(3935);function se(e){e()}function st(e){return function e(i){var r,n={name:i.name_};return i.observing_&&i.observing_.length>0&&(n.dependencies=(r=i.observing_,Array.from(new Set(r))).map(e)),n}(n8(e,void 0))}var si=function(){function e(e){var i=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(i.sweepTimeout),i.sweepTimeout=void 0;var r=Date.now();i.registrations.forEach(function(n,a){r-n.registeredAt>=e&&(i.finalize(n.value),i.registrations.delete(a))}),i.registrations.size>0&&i.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){i.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,i,r){this.registrations.set(r,{value:i,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),sr=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:si)(function(e){var i;null===(i=e.reaction)||void 0===i||i.dispose(),e.reaction=null}),sn=r(1688),sa=function(){};function ss(e){e.reaction=new r1("observer".concat(e.name),function(){var i;e.stateVersion=Symbol(),null===(i=e.onStoreChange)||void 0===i||i.call(e)})}var so="function"==typeof Symbol&&Symbol.for,sl=so?Symbol.for("react.forward_ref"):"function"==typeof eo.forwardRef&&(0,eo.forwardRef)(function(e){return null}).$$typeof,su=so?Symbol.for("react.memo"):"function"==typeof eo.memo&&(0,eo.memo)(function(e){return null}).$$typeof,sh={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function sc(e,i){return function(){return e.apply(i,arguments)}}(function(e){e||(e=se),function(e){!0===e.isolateGlobalState&&function(){if((rq.pendingReactions.length||rq.inBatch||rq.isRunningReactions)&&it(36),rG=!0,rW){var e=ir();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),rq=new r$}}();var i,r,n=e.useProxies,a=e.enforceActions;if(void 0!==n&&(rq.useProxies=n===nu||"never"!==n&&"undefined"!=typeof Proxy),"ifavailable"===n&&(rq.verifyProxies=!0),void 0!==a){var s=a===nu?nu:"observed"===a;rq.enforceActions=s,rq.allowStateChanges=!0!==s&&s!==nu}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in e&&(rq[i]=!!e[i])}),rq.allowStateReads=!rq.observableRequiresReaction,e.reactionScheduler&&(i=e.reactionScheduler,r=r2,r2=function(e){return i(function(){return r(e)})})}({reactionScheduler:e})})(a9.unstable_batchedUpdates),sr.finalizeAllImmediately;let{toString:sd}=Object.prototype,{getPrototypeOf:sf}=Object,sp=(i=Object.create(null),e=>{let r=sd.call(e);return i[r]||(i[r]=r.slice(8,-1).toLowerCase())}),sm=e=>(e=e.toLowerCase(),i=>sp(i)===e),s_=e=>i=>typeof i===e,{isArray:sg}=Array,sy=s_("undefined"),sv=sm("ArrayBuffer"),sx=s_("string"),sb=s_("function"),sw=s_("number"),sM=e=>null!==e&&"object"==typeof e,sT=e=>{if("object"!==sp(e))return!1;let i=sf(e);return(null===i||i===Object.prototype||null===Object.getPrototypeOf(i))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sL=sm("Date"),sS=sm("File"),sk=sm("Blob"),sD=sm("FileList"),sE=sm("URLSearchParams");function sA(e,i,{allOwnKeys:r=!1}={}){let n,a;if(null!=e){if("object"!=typeof e&&(e=[e]),sg(e))for(n=0,a=e.length;n<a;n++)i.call(null,e[n],n,e);else{let a;let s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;for(n=0;n<o;n++)a=s[n],i.call(null,e[a],a,e)}}}function sP(e,i){let r;i=i.toLowerCase();let n=Object.keys(e),a=n.length;for(;a-- >0;)if(i===(r=n[a]).toLowerCase())return r;return null}let sC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,sI=e=>!sy(e)&&e!==sC,sO=(n="undefined"!=typeof Uint8Array&&sf(Uint8Array),e=>n&&e instanceof n),sz=sm("HTMLFormElement"),sR=(({hasOwnProperty:e})=>(i,r)=>e.call(i,r))(Object.prototype),sY=sm("RegExp"),sF=(e,i)=>{let r=Object.getOwnPropertyDescriptors(e),n={};sA(r,(r,a)=>{let s;!1!==(s=i(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)},sj="abcdefghijklmnopqrstuvwxyz",sB="0123456789",sN={DIGIT:sB,ALPHA:sj,ALPHA_DIGIT:sj+sj.toUpperCase()+sB},sH=sm("AsyncFunction"),sV={isArray:sg,isArrayBuffer:sv,isBuffer:function(e){return null!==e&&!sy(e)&&null!==e.constructor&&!sy(e.constructor)&&sb(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let i;return e&&("function"==typeof FormData&&e instanceof FormData||sb(e.append)&&("formdata"===(i=sp(e))||"object"===i&&sb(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&sv(e.buffer)},isString:sx,isNumber:sw,isBoolean:e=>!0===e||!1===e,isObject:sM,isPlainObject:sT,isUndefined:sy,isDate:sL,isFile:sS,isBlob:sk,isRegExp:sY,isFunction:sb,isStream:e=>sM(e)&&sb(e.pipe),isURLSearchParams:sE,isTypedArray:sO,isFileList:sD,forEach:sA,merge:function e(){let{caseless:i}=sI(this)&&this||{},r={},n=(n,a)=>{let s=i&&sP(r,a)||a;sT(r[s])&&sT(n)?r[s]=e(r[s],n):sT(n)?r[s]=e({},n):sg(n)?r[s]=n.slice():r[s]=n};for(let e=0,i=arguments.length;e<i;e++)arguments[e]&&sA(arguments[e],n);return r},extend:(e,i,r,{allOwnKeys:n}={})=>(sA(i,(i,n)=>{r&&sb(i)?e[n]=sc(i,r):e[n]=i},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,i,r,n)=>{e.prototype=Object.create(i.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:i.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,i,r,n)=>{let a,s,o;let l={};if(i=i||{},null==e)return i;do{for(s=(a=Object.getOwnPropertyNames(e)).length;s-- >0;)o=a[s],(!n||n(o,e,i))&&!l[o]&&(i[o]=e[o],l[o]=!0);e=!1!==r&&sf(e)}while(e&&(!r||r(e,i))&&e!==Object.prototype)return i},kindOf:sp,kindOfTest:sm,endsWith:(e,i,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=i.length;let n=e.indexOf(i,r);return -1!==n&&n===r},toArray:e=>{if(!e)return null;if(sg(e))return e;let i=e.length;if(!sw(i))return null;let r=Array(i);for(;i-- >0;)r[i]=e[i];return r},forEachEntry:(e,i)=>{let r;let n=(e&&e[Symbol.iterator]).call(e);for(;(r=n.next())&&!r.done;){let n=r.value;i.call(e,n[0],n[1])}},matchAll:(e,i)=>{let r;let n=[];for(;null!==(r=e.exec(i));)n.push(r);return n},isHTMLForm:sz,hasOwnProperty:sR,hasOwnProp:sR,reduceDescriptors:sF,freezeMethods:e=>{sF(e,(i,r)=>{if(sb(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(sb(e[r])){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(e,i)=>{let r={};return(e=>{e.forEach(e=>{r[e]=!0})})(sg(e)?e:String(e).split(i)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,r){return i.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,i)=>Number.isFinite(e=+e)?e:i,findKey:sP,global:sC,isContextDefined:sI,ALPHABET:sN,generateString:(e=16,i=sN.ALPHA_DIGIT)=>{let r="",{length:n}=i;for(;e--;)r+=i[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&sb(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{let i=Array(10),r=(e,n)=>{if(sM(e)){if(i.indexOf(e)>=0)return;if(!("toJSON"in e)){i[n]=e;let a=sg(e)?[]:{};return sA(e,(e,i)=>{let s=r(e,n+1);sy(s)||(a[i]=s)}),i[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:sH,isThenable:e=>e&&(sM(e)||sb(e))&&sb(e.then)&&sb(e.catch)};function sU(e,i,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",i&&(this.code=i),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a)}sV.inherits(sU,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:sV.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});let s$=sU.prototype,sW={};function sG(e){return sV.isPlainObject(e)||sV.isArray(e)}function sq(e){return sV.endsWith(e,"[]")?e.slice(0,-2):e}function sZ(e,i,r){return e?e.concat(i).map(function(e,i){return e=sq(e),!r&&i?"["+e+"]":e}).join(r?".":""):i}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sW[e]={value:e}}),Object.defineProperties(sU,sW),Object.defineProperty(s$,"isAxiosError",{value:!0}),sU.from=(e,i,r,n,a,s)=>{let o=Object.create(s$);return sV.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),sU.call(o,e.message,i,r,n,a),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};let sX=sV.toFlatObject(sV,{},null,function(e){return/^is[A-Z]/.test(e)}),sJ=function(e,i,r){if(!sV.isObject(e))throw TypeError("target must be an object");i=i||new FormData;let n=(r=sV.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,i){return!sV.isUndefined(i[e])})).metaTokens,a=r.visitor||h,s=r.dots,o=r.indexes,l=(r.Blob||"undefined"!=typeof Blob&&Blob)&&sV.isSpecCompliantForm(i);if(!sV.isFunction(a))throw TypeError("visitor must be a function");function u(e){if(null===e)return"";if(sV.isDate(e))return e.toISOString();if(!l&&sV.isBlob(e))throw new sU("Blob is not supported. Use a Buffer instead.");return sV.isArrayBuffer(e)||sV.isTypedArray(e)?l&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function h(e,r,a){let l=e;if(e&&!a&&"object"==typeof e){if(sV.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else{var h;if(sV.isArray(e)&&(h=e,sV.isArray(h)&&!h.some(sG))||(sV.isFileList(e)||sV.endsWith(r,"[]"))&&(l=sV.toArray(e)))return r=sq(r),l.forEach(function(e,n){sV.isUndefined(e)||null===e||i.append(!0===o?sZ([r],n,s):null===o?r:r+"[]",u(e))}),!1}}return!!sG(e)||(i.append(sZ(a,r,s),u(e)),!1)}let c=[],d=Object.assign(sX,{defaultVisitor:h,convertValue:u,isVisitable:sG});if(!sV.isObject(e))throw TypeError("data must be an object");return function e(r,n){if(!sV.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),sV.forEach(r,function(r,s){!0===(!(sV.isUndefined(r)||null===r)&&a.call(i,r,sV.isString(s)?s.trim():s,n,d))&&e(r,n?n.concat(s):[s])}),c.pop()}}(e),i};function sK(e){let i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\x00"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return i[e]})}function sQ(e,i){this._pairs=[],e&&sJ(e,this,i)}let s0=sQ.prototype;function s1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function s2(e,i,r){let n;if(!i)return e;let a=r&&r.encode||s1,s=r&&r.serialize;if(n=s?s(i,r):sV.isURLSearchParams(i)?i.toString():new sQ(i,r).toString(a)){let i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}s0.append=function(e,i){this._pairs.push([e,i])},s0.toString=function(e){let i=e?function(i){return e.call(this,i,sK)}:sK;return this._pairs.map(function(e){return i(e[0])+"="+i(e[1])},"").join("&")};let s3=class{constructor(){this.handlers=[]}use(e,i,r){return this.handlers.push({fulfilled:e,rejected:i,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){sV.forEach(this.handlers,function(i){null!==i&&e(i)})}},s4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s5="undefined"!=typeof URLSearchParams?URLSearchParams:sQ,s6="undefined"!=typeof FormData?FormData:null,s8="undefined"!=typeof Blob?Blob:null,s7="undefined"!=typeof window&&"undefined"!=typeof document,s9=(a="undefined"!=typeof navigator&&navigator.product,s7&&0>["ReactNative","NativeScript","NS"].indexOf(a)),oe="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ot={...en,isBrowser:!0,classes:{URLSearchParams:s5,FormData:s6,Blob:s8},protocols:["http","https","file","blob","url","data"]},oi=function(e){if(sV.isFormData(e)&&sV.isFunction(e.entries)){let i={};return sV.forEachEntry(e,(e,r)=>{!function e(i,r,n,a){let s=i[a++];if("__proto__"===s)return!0;let o=Number.isFinite(+s),l=a>=i.length;return(s=!s&&sV.isArray(n)?n.length:s,l)?sV.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r:(n[s]&&sV.isObject(n[s])||(n[s]=[]),e(i,r,n[s],a)&&sV.isArray(n[s])&&(n[s]=function(e){let i,r;let n={},a=Object.keys(e),s=a.length;for(i=0;i<s;i++)n[r=a[i]]=e[r];return n}(n[s]))),!o}(sV.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0]),r,i,0)}),i}return null},or={transitional:s4,adapter:["xhr","http"],transformRequest:[function(e,i){let r;let n=i.getContentType()||"",a=n.indexOf("application/json")>-1,s=sV.isObject(e);if(s&&sV.isHTMLForm(e)&&(e=new FormData(e)),sV.isFormData(e))return a?JSON.stringify(oi(e)):e;if(sV.isArrayBuffer(e)||sV.isBuffer(e)||sV.isStream(e)||sV.isFile(e)||sV.isBlob(e))return e;if(sV.isArrayBufferView(e))return e.buffer;if(sV.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1){var o,l;return(o=e,l=this.formSerializer,sJ(o,new ot.classes.URLSearchParams,Object.assign({visitor:function(e,i,r,n){return ot.isNode&&sV.isBuffer(e)?(this.append(i,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},l))).toString()}if((r=sV.isFileList(e))||n.indexOf("multipart/form-data")>-1){let i=this.env&&this.env.FormData;return sJ(r?{"files[]":e}:e,i&&new i,this.formSerializer)}}return s||a?(i.setContentType("application/json",!1),function(e,i,r){if(sV.isString(e))try{return(0,JSON.parse)(e),sV.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){let i=this.transitional||or.transitional,r=i&&i.forcedJSONParsing,n="json"===this.responseType;if(e&&sV.isString(e)&&(r&&!this.responseType||n)){let r=i&&i.silentJSONParsing;try{return JSON.parse(e)}catch(a){if(!r&&n){if("SyntaxError"===a.name)throw sU.from(a,sU.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ot.classes.FormData,Blob:ot.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};sV.forEach(["delete","get","head","post","put","patch"],e=>{or.headers[e]={}});let on=sV.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oa=e=>{let i,r,n;let a={};return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!i||a[i]&&on[i]||("set-cookie"===i?a[i]?a[i].push(r):a[i]=[r]:a[i]=a[i]?a[i]+", "+r:r)}),a},os=Symbol("internals");function oo(e){return e&&String(e).trim().toLowerCase()}function ol(e){return!1===e||null==e?e:sV.isArray(e)?e.map(ol):String(e)}let ou=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function oh(e,i,r,n,a){if(sV.isFunction(n))return n.call(this,i,r);if(a&&(i=r),sV.isString(i)){if(sV.isString(n))return -1!==i.indexOf(n);if(sV.isRegExp(n))return n.test(i)}}class oc{constructor(e){e&&this.set(e)}set(e,i,r){let n=this;function a(e,i,r){let a=oo(i);if(!a)throw Error("header name must be a non-empty string");let s=sV.findKey(n,a);s&&void 0!==n[s]&&!0!==r&&(void 0!==r||!1===n[s])||(n[s||i]=ol(e))}let s=(e,i)=>sV.forEach(e,(e,r)=>a(e,r,i));return sV.isPlainObject(e)||e instanceof this.constructor?s(e,i):sV.isString(e)&&(e=e.trim())&&!ou(e)?s(oa(e),i):null!=e&&a(i,e,r),this}get(e,i){if(e=oo(e)){let r=sV.findKey(this,e);if(r){let e=this[r];if(!i)return e;if(!0===i)return function(e){let i;let r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;i=n.exec(e);)r[i[1]]=i[2];return r}(e);if(sV.isFunction(i))return i.call(this,e,r);if(sV.isRegExp(i))return i.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=oo(e)){let r=sV.findKey(this,e);return!!(r&&void 0!==this[r]&&(!i||oh(this,this[r],r,i)))}return!1}delete(e,i){let r=this,n=!1;function a(e){if(e=oo(e)){let a=sV.findKey(r,e);a&&(!i||oh(r,r[a],a,i))&&(delete r[a],n=!0)}}return sV.isArray(e)?e.forEach(a):a(e),n}clear(e){let i=Object.keys(this),r=i.length,n=!1;for(;r--;){let a=i[r];(!e||oh(this,this[a],a,e,!0))&&(delete this[a],n=!0)}return n}normalize(e){let i=this,r={};return sV.forEach(this,(n,a)=>{let s=sV.findKey(r,a);if(s){i[s]=ol(n),delete i[a];return}let o=e?a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,r)=>i.toUpperCase()+r):String(a).trim();o!==a&&delete i[a],i[o]=ol(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let i=Object.create(null);return sV.forEach(this,(r,n)=>{null!=r&&!1!==r&&(i[n]=e&&sV.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){let r=new this(e);return i.forEach(e=>r.set(e)),r}static accessor(e){let i=(this[os]=this[os]={accessors:{}}).accessors,r=this.prototype;function n(e){let n=oo(e);i[n]||(function(e,i){let r=sV.toCamelCase(" "+i);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,i,e,r,a)},configurable:!0})})}(r,e),i[n]=!0)}return sV.isArray(e)?e.forEach(n):n(e),this}}function od(e,i){let r=this||or,n=i||r,a=oc.from(n.headers),s=n.data;return sV.forEach(e,function(e){s=e.call(r,s,a.normalize(),i?i.status:void 0)}),a.normalize(),s}function of(e){return!!(e&&e.__CANCEL__)}function op(e,i,r){sU.call(this,null==e?"canceled":e,sU.ERR_CANCELED,i,r),this.name="CanceledError"}oc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),sV.reduceDescriptors(oc.prototype,({value:e},i)=>{let r=i[0].toUpperCase()+i.slice(1);return{get:()=>e,set(e){this[r]=e}}}),sV.freezeMethods(oc),sV.inherits(op,sU,{__CANCEL__:!0});let om=ot.hasStandardBrowserEnv?{write(e,i,r,n,a,s){let o=[e+"="+encodeURIComponent(i)];sV.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),sV.isString(n)&&o.push("path="+n),sV.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){let i=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function o_(e,i){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)?i?e.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):e:i}let og=ot.hasStandardBrowserEnv?function(){let e;let i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){let n=e;return i&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(i){let r=sV.isString(i)?n(i):i;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},oy=function(e,i){let r;let n=Array(e=e||10),a=Array(e),s=0,o=0;return i=void 0!==i?i:1e3,function(l){let u=Date.now(),h=a[o];r||(r=u),n[s]=l,a[s]=u;let c=o,d=0;for(;c!==s;)d+=n[c++],c%=e;if((s=(s+1)%e)===o&&(o=(o+1)%e),u-r<i)return;let f=h&&u-h;return f?Math.round(1e3*d/f):void 0}};function ov(e,i){let r=0,n=oy(50,250);return a=>{let s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-r,u=n(l);r=s;let h={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&s<=o?(o-s)/u:void 0,event:a};h[i?"download":"upload"]=!0,e(h)}}let ox={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(i,r){let n,a,s=e.data,o=oc.from(e.headers).normalize(),{responseType:l,withXSRFToken:u}=e;function h(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}if(sV.isFormData(s)){if(ot.hasStandardBrowserEnv||ot.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if(!1!==(a=o.getContentType())){let[e,...i]=a?a.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...i].join("; "))}}let c=new XMLHttpRequest;if(e.auth){let i=e.auth.username||"",r=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(i+":"+r))}let d=o_(e.baseURL,e.url);function f(){if(!c)return;let n=oc.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());(function(e,i,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):i(new sU("Request failed with status code "+r.status,[sU.ERR_BAD_REQUEST,sU.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))})(function(e){i(e),h()},function(e){r(e),h()},{data:l&&"text"!==l&&"json"!==l?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),s2(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(r(new sU("Request aborted",sU.ECONNABORTED,e,c)),c=null)},c.onerror=function(){r(new sU("Network Error",sU.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let i=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||s4;e.timeoutErrorMessage&&(i=e.timeoutErrorMessage),r(new sU(i,n.clarifyTimeoutError?sU.ETIMEDOUT:sU.ECONNABORTED,e,c)),c=null},ot.hasStandardBrowserEnv&&(u&&sV.isFunction(u)&&(u=u(e)),u||!1!==u&&og(d))){let i=e.xsrfHeaderName&&e.xsrfCookieName&&om.read(e.xsrfCookieName);i&&o.set(e.xsrfHeaderName,i)}void 0===s&&o.setContentType(null),"setRequestHeader"in c&&sV.forEach(o.toJSON(),function(e,i){c.setRequestHeader(i,e)}),sV.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),l&&"json"!==l&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",ov(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",ov(e.onUploadProgress)),(e.cancelToken||e.signal)&&(n=i=>{c&&(r(!i||i.type?new op(null,e,c):i),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n)));let p=function(e){let i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}(d);if(p&&-1===ot.protocols.indexOf(p)){r(new sU("Unsupported protocol "+p+":",sU.ERR_BAD_REQUEST,e));return}c.send(s||null)})}};sV.forEach(ox,(e,i)=>{if(e){try{Object.defineProperty(e,"name",{value:i})}catch(r){}Object.defineProperty(e,"adapterName",{value:i})}});let ob=e=>`- ${e}`,ow=e=>sV.isFunction(e)||null===e||!1===e,oM={getAdapter:e=>{let i,r;let{length:n}=e=sV.isArray(e)?e:[e],a={};for(let s=0;s<n;s++){let n;if(r=i=e[s],!ow(i)&&void 0===(r=ox[(n=String(i)).toLowerCase()]))throw new sU(`Unknown adapter '${n}'`);if(r)break;a[n||"#"+s]=r}if(!r){let e=Object.entries(a).map(([e,i])=>`adapter ${e} `+(!1===i?"is not supported by the environment":"is not available in the build"));throw new sU("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(ob).join("\n"):" "+ob(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:ox};function oT(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new op(null,e)}function oL(e){return oT(e),e.headers=oc.from(e.headers),e.data=od.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),oM.getAdapter(e.adapter||or.adapter)(e).then(function(i){return oT(e),i.data=od.call(e,e.transformResponse,i),i.headers=oc.from(i.headers),i},function(i){return!of(i)&&(oT(e),i&&i.response&&(i.response.data=od.call(e,e.transformResponse,i.response),i.response.headers=oc.from(i.response.headers))),Promise.reject(i)})}let oS=e=>e instanceof oc?e.toJSON():e;function ok(e,i){i=i||{};let r={};function n(e,i,r){return sV.isPlainObject(e)&&sV.isPlainObject(i)?sV.merge.call({caseless:r},e,i):sV.isPlainObject(i)?sV.merge({},i):sV.isArray(i)?i.slice():i}function a(e,i,r){return sV.isUndefined(i)?sV.isUndefined(e)?void 0:n(void 0,e,r):n(e,i,r)}function s(e,i){if(!sV.isUndefined(i))return n(void 0,i)}function o(e,i){return sV.isUndefined(i)?sV.isUndefined(e)?void 0:n(void 0,e):n(void 0,i)}function l(r,a,s){return s in i?n(r,a):s in e?n(void 0,r):void 0}let u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(e,i)=>a(oS(e),oS(i),!0)};return sV.forEach(Object.keys(Object.assign({},e,i)),function(n){let s=u[n]||a,o=s(e[n],i[n],n);sV.isUndefined(o)&&s!==l||(r[n]=o)}),r}let oD="1.6.7",oE={};["object","boolean","number","function","string","symbol"].forEach((e,i)=>{oE[e]=function(r){return typeof r===e||"a"+(i<1?"n ":" ")+e}});let oA={};oE.transitional=function(e,i,r){function n(e,i){return"[Axios v"+oD+"] Transitional option '"+e+"'"+i+(r?". "+r:"")}return(r,a,s)=>{if(!1===e)throw new sU(n(a," has been removed"+(i?" in "+i:"")),sU.ERR_DEPRECATED);return i&&!oA[a]&&(oA[a]=!0,n(a," has been deprecated since v"+i+" and will be removed in the near future")),!e||e(r,a,s)}};let oP={assertOptions:function(e,i,r){if("object"!=typeof e)throw new sU("options must be an object",sU.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),a=n.length;for(;a-- >0;){let s=n[a],o=i[s];if(o){let i=e[s],r=void 0===i||o(i,s,e);if(!0!==r)throw new sU("option "+s+" must be "+r,sU.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new sU("Unknown option "+s,sU.ERR_BAD_OPTION)}},validators:oE},oC=oP.validators;class oI{constructor(e){this.defaults=e,this.interceptors={request:new s3,response:new s3}}async request(e,i){try{return await this._request(e,i)}catch(r){if(r instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=Error();let i=e.stack?e.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+i):r.stack=i}throw r}}_request(e,i){let r,n;"string"==typeof e?(i=i||{}).url=e:i=e||{};let{transitional:a,paramsSerializer:s,headers:o}=i=ok(this.defaults,i);void 0!==a&&oP.assertOptions(a,{silentJSONParsing:oC.transitional(oC.boolean),forcedJSONParsing:oC.transitional(oC.boolean),clarifyTimeoutError:oC.transitional(oC.boolean)},!1),null!=s&&(sV.isFunction(s)?i.paramsSerializer={serialize:s}:oP.assertOptions(s,{encode:oC.function,serialize:oC.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let l=o&&sV.merge(o.common,o[i.method]);o&&sV.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),i.headers=oc.concat(l,o);let u=[],h=!0;this.interceptors.request.forEach(function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(i))&&(h=h&&e.synchronous,u.unshift(e.fulfilled,e.rejected))});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let d=0;if(!h){let e=[oL.bind(this),void 0];for(e.unshift.apply(e,u),e.push.apply(e,c),n=e.length,r=Promise.resolve(i);d<n;)r=r.then(e[d++],e[d++]);return r}n=u.length;let f=i;for(d=0;d<n;){let e=u[d++],i=u[d++];try{f=e(f)}catch(r){i.call(this,r);break}}try{r=oL.call(this,f)}catch(p){return Promise.reject(p)}for(d=0,n=c.length;d<n;)r=r.then(c[d++],c[d++]);return r}getUri(e){return s2(o_((e=ok(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}sV.forEach(["delete","get","head","options"],function(e){oI.prototype[e]=function(i,r){return this.request(ok(r||{},{method:e,url:i,data:(r||{}).data}))}}),sV.forEach(["post","put","patch"],function(e){function i(i){return function(r,n,a){return this.request(ok(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}oI.prototype[e]=i(),oI.prototype[e+"Form"]=i(!0)});class oO{constructor(e){let i;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){i=e});let r=this;this.promise.then(e=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](e);r._listeners=null}),this.promise.then=e=>{let i;let n=new Promise(e=>{r.subscribe(e),i=e}).then(e);return n.cancel=function(){r.unsubscribe(i)},n},e(function(e,n,a){r.reason||(r.reason=new op(e,n,a),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let i=this._listeners.indexOf(e);-1!==i&&this._listeners.splice(i,1)}static source(){let e;return{token:new oO(function(i){e=i}),cancel:e}}}let oz={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(oz).forEach(([e,i])=>{oz[i]=e});let oR=function e(i){let r=new oI(i),n=sc(oI.prototype.request,r);return sV.extend(n,oI.prototype,r,{allOwnKeys:!0}),sV.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(ok(i,r))},n}(or);oR.Axios=oI,oR.CanceledError=op,oR.CancelToken=oO,oR.isCancel=of,oR.VERSION=oD,oR.toFormData=sJ,oR.AxiosError=sU,oR.Cancel=oR.CanceledError,oR.all=function(e){return Promise.all(e)},oR.spread=function(e){return function(i){return e.apply(null,i)}},oR.isAxiosError=function(e){return sV.isObject(e)&&!0===e.isAxiosError},oR.mergeConfig=ok,oR.AxiosHeaders=oc,oR.formToJSON=e=>oi(sV.isHTMLForm(e)?new FormData(e):e),oR.getAdapter=oM.getAdapter,oR.HttpStatusCode=oz,oR.default=oR;let oY=()=>{let[e,i]=(0,eo.useState)(),[r,n]=(0,eo.useState)(!0),[a,s]=(0,eo.useState)("");return(0,eo.useEffect)(()=>{let e=localStorage.getItem("CurrencyCaches"),r=localStorage.getItem("CurrencyCachesTime");null!==e&&Date.now()-Number(r)<36e5?(i(JSON.parse(e)),n(!1)):oR.get("/api/currencies",{headers:{"Content-Type":"application/json"}}).then(e=>{i(e.data),localStorage.setItem("CurrencyCaches",JSON.stringify(e.data)),localStorage.setItem("CurrencyCachesTime",Date.now().toString()),n(!1)}).catch(e=>{s(404===e.response.status?"Resource Not found":"An unexpected error has occurred"),n(!1)})},[]),{currency:e,loading:r,error:a}};function oF(){return(oF=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let oj=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    align-items: center;
    justify-content: center;
    padding: ${e.spacing(32,0)};
  `}
`,oB=tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.h3}
    color: ${e.colors.secondary};
  `}
`,oN=tQ.p`
  ${({theme:e})=>tH`
    margin-left: ${e.spacing(18)};
    ${e.typography.variant.h3}
    color: ${e.colors.secondary};
  `}
`,oH=tQ(e=>eo.createElement("svg",oF({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 50 52"},e),J||(J=eo.createElement("path",{fill:"#00BC4F",d:"M25 0c13.798 0 25 11.536 25 25.744S38.798 51.488 25 51.488c-13.797 0-25-11.536-25-25.744S11.203 0 25 0",opacity:.017})),K||(K=eo.createElement("path",{fill:"#00BC4F",d:"M25 8.736c9.115 0 16.516 7.621 16.516 17.008 0 9.387-7.4 17.008-16.516 17.008-9.115 0-16.516-7.621-16.516-17.008 0-9.387 7.4-17.008 16.516-17.008Z",opacity:.354})),Q||(Q=eo.createElement("path",{fill:"#00BC4F",d:"M25 17.472c4.433 0 8.032 3.707 8.032 8.272S29.434 34.016 25 34.016s-8.033-3.707-8.033-8.272 3.6-8.272 8.033-8.272",opacity:.691}))))`
  ${({theme:e})=>tH`
    width: ${e.spacing(33)};
    height: ${e.spacing(33)};
  `}
`,oV=()=>{let{currency:e,loading:i}=oY();return(0,ea.jsx)(oj,{children:i?(0,ea.jsx)(oN,{children:"Loading..."}):(0,ea.jsxs)(ea.Fragment,{children:[(0,ea.jsx)(oH,{}),(0,ea.jsxs)(oB,{children:["Last updated ad ",(()=>{let i=new Date(e?.meta.last_updated_at),r=i.getHours()>12?i.getHours()-12:i.getHours(),n=i.getMinutes().toString().padStart(2,"0"),a=i.getHours()>=12?"pm":"am";return`${r}:${n}${a}`})()]})]})})},oU=tQ.div`
  ${({theme:e})=>tH`
    margin: 0 auto;
    background-color: ${e.colors.primary};
  `}
`,o$=tQ.div`
  ${({theme:e})=>tH`
    max-width: ${e.breakpoints.xl};
    margin: 0 auto;
  `}
`,oW=()=>(0,ea.jsx)(oU,{children:(0,ea.jsxs)(o$,{children:[(0,ea.jsx)(aD,{}),(0,ea.jsx)(aY,{}),(0,ea.jsx)(oV,{}),(0,ea.jsx)(eP,{}),(0,ea.jsx)(a3,{})]})});var oG=r(6158),oq=r.n(oG);function oZ(){return(oZ=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let oX=e=>eo.createElement("svg",oZ({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 1024 1024"},e),ee||(ee=eo.createElement("path",{d:"M480.5 319.7c-6.9 1-24.6 5.7-33.5 9-32.7 12.1-62.7 33-85.5 59.5-18.4 21.4-30.2 42.1-38.9 67.8-6 18-8 28.2-8.1 41.2 0 10.2.1 10.8 3 14.9 4.8 6.7 8 7.9 21.8 7.9 20.9 0 24.7-3.4 28.6-25.1 5.7-31.8 20.2-58.4 44.7-81.9 20.3-19.4 41.8-31.1 69.1-37.6 13.5-3.2 17.7-4.9 21.2-9 3.9-4.4 5.1-9 5.1-19.9 0-11.8-1.3-16.1-6.4-21.1-5.5-5.6-11-7.1-21.1-5.7zM533.5 321.7c-8.6 4.5-10.4 9-10.5 25.1 0 20.4 2.8 23.8 23.7 28.8 14.9 3.4 20.9 5.6 34.8 12.4 42 20.7 73.2 62.4 80.4 107.6 1.6 10.1 3 14.3 6.3 18 5.1 5.8 7.8 6.7 20.8 6.6 12.4 0 16-.9 20.3-5 5.9-5.6 7.1-10.6 5.6-24-3.5-32.8-19.4-70.2-41.3-97.2-20.8-25.7-49.7-47.8-79.1-60.3-26.9-11.5-52.5-16.5-61-12z"})),et||(et=eo.createElement("path",{d:"M502.3 399c-28.9 3.1-54.5 15.2-74.4 35.2-14 14.1-23.7 29.6-30.2 48.4-14.3 40.9-6 83.2 23.2 118.2 14.4 17.3 40.5 33.2 64.1 39.1 10.9 2.7 15.9 3.3 29.9 3.2 24.6-.1 36.3-4.5 38.5-14.6 1-4.5-2.9-11.4-7.7-13.8-3.6-1.9-4.4-1.9-12.5-.7-25.5 3.9-50.3-1-69.9-13.9-17-11.1-29.4-26.2-36.4-44-8.9-22.9-9.3-43.8-1-67.1 4.7-13.3 10.6-22.5 21.6-33.6 20.1-20.2 43.1-29.3 71.5-28.1 24.7 1 43.2 9.1 63.6 27.9 4 3.6 8.2 6.9 9.4 7.3 6.2 2 15.1-3.6 17-10.6 1.6-5.8-1.3-11.6-10.3-20.1-17.7-17.1-42.8-29-67.5-32.3-11.5-1.6-17.6-1.7-28.9-.5z"})),ei||(ei=eo.createElement("path",{d:"M503.5 454.7c-18.8 2.5-37.4 15.3-48.3 33.4-13 21.4-11 58.8 3.3 61.5 4.2.7 6.7 0 10.6-3.3l3-2.6 1.7 2.4c3.3 4.8 12.8 14.1 17.4 17.1 2.6 1.7 4.8 3.4 4.8 3.7-.1.3-.7 1.7-1.5 3.1-3.7 6.4-.5 13.7 7.3 16.7 6 2.3 20.9 2.3 30.6-.1 9.3-2.2 23.4-9.8 29.9-16 21.6-20.8 27-54.1 13-80.9-5.7-10.9-18.3-23.1-29.4-28.5-4.7-2.3-11.6-4.9-15.5-5.7-6.4-1.4-19.7-1.8-26.9-.8zm28.8 29.8c25.6 12.6 31.6 46.2 11.6 65.6-12.6 12.3-33.7 15.3-48.4 6.9-6.9-3.9-15-12.7-18.3-19.7-2.4-5.1-2.7-7-2.7-15.8.1-12 2.3-18.8 8.6-25.9 9.4-10.7 19.2-14.8 33.9-14.3 8 .3 10.4.8 15.3 3.2zM617.5 491.4c-1.7.7-4.4 2.8-5.9 4.7l-2.8 3.3.7 14c.5 9.4.3 16.7-.5 22-2.5 16.3-9.6 32.6-20 45.5-7.2 8.9-8.2 12.5-5.2 18.6 1.5 3.2 3.2 4.8 6.7 6.5 4.2 2 5.1 2.1 8.7 1.1 5.4-1.7 10.6-6.6 17.6-16.9 16.8-24.6 24.5-53 21.3-79.1-1.4-11.3-3.9-16.5-9.3-19.2-4.3-2.2-7.1-2.3-11.3-.5zM328.1 535.1c-7 1.5-12.5 7.9-13.6 15.7-1.4 10.3 6.2 37.3 16.5 58.6 16.9 35.1 38.3 60 69.5 81.1 25.3 17 63.6 31.3 85 31.8 8.6.1 14.4-2.6 19-9.1 3-4.4 3-4.4 3-18.1 0-13.4-.1-13.9-2.8-18-3.4-5.2-7.5-7.7-14.7-9.1-17.2-3.4-35.9-10.2-50.7-18.6-34.4-19.4-60.2-53.2-69.8-91.4-5.3-20.9-9.3-24.2-27.8-23.9-5.6.1-11.7.6-13.6 1z"})),er||(er=eo.createElement("path",{d:"M676.1 535c-7.4 1.8-12 7.5-14.6 18.2-6.9 28.5-18.1 49.7-36.8 69.4-21.7 22.9-48.6 37.8-80.3 44.3-10.7 2.2-14.5 4-17.7 8.3-3.3 4.5-3.8 7.2-3.8 20.3 0 14.8 2.5 20.6 10.4 24.6 11.7 6 48.5-3.2 79.7-19.8 20.5-11 44.3-30.7 59.3-49.1 18.6-22.8 32.4-50.2 39.8-79 5.5-21.5 3.2-31.8-8.4-36.7-3.9-1.6-21.4-2-27.6-.5zM320.3 786.7l-4.3.4v32.7l4 .4 4 .4v-11.1l.1-11 3.3 8.5c4.8 12.7 5.1 13 9.4 13h3.7l3.5-10.8 3.4-10.7.7 10.8c.3 5.9.8 10.9 1 11.1.2.2 2 .1 3.9-.1l3.5-.5-.3-16.6c-.2-9.2-.5-16.8-.5-16.8-.1-.1-2.7.1-5.9.3-4 .4-5.8 1-6.1 2.2-.3.9-2.1 5.8-3.9 10.9l-3.4 9.3-4.6-11.3c-2.6-6.5-5.1-11.3-5.9-11.4-.8 0-3.3.1-5.6.3zM376.3 786.7c-1.2.2-2.4 1-2.6 1.6-.5 1.2-5.7 13.9-10.3 25.1-1.3 3.3-2.4 6.1-2.4 6.3 0 .2 2 .3 4.4.3 3.9 0 4.5-.3 4.8-2.3.3-1.9 1.1-2.3 6.8-3 8.1-1 10.6-.4 11.4 2.7.5 2.1 1.3 2.5 5.6 2.8 2.7.1 4.9.1 4.7-.2-2.1-4.2-8.3-17.8-11.3-24.9-4.1-9.7-4.2-9.7-11.1-8.4zm4.7 13.9c1.1 2.6 2 5 2 5.4 0 .5-2 1-4.5 1.2-2.5.2-4.4.1-4.2-.2.1-.3 1.1-2.9 2.2-5.8 1.1-2.8 2.1-5.2 2.2-5.2.1 0 1.1 2.1 2.3 4.6M402.4 786.9c-.2.2-.4 7.8-.4 16.8V820h9v-9h4.5c9.5 0 15.5-4.9 15.5-12.7 0-3.8-3.4-9.1-6.8-10.5-2.5-1.1-20.8-1.9-21.8-.9zm18.7 8.2c1.3 2 1.1 6.3-.3 7.7-.7.7-3.1 1.2-5.5 1.2H411v-11.3l4.6.6c2.6.2 5 1.1 5.5 1.8M448.8 791c-.1 2.5-.2 10-.2 16.7l-.1 12.3h8.5v-33.6l-4 .1h-4l-.2 4.5zM468.3 787.4c-1.7.8-3.6 2.3-4.2 3.5-2.6 4.8-.1 12.1 4.6 13.9 1.5.5 4.6 1.6 6.8 2.4 2.8 1 4 2 4 3.3 0 2.8-4.4 3.1-9.2.6l-3.9-1.9-1.9 3.4c-2.1 3.8-2.2 3.5 2.4 5.9 4.3 2.2 11.8 2.2 15.9.1 3.3-1.7 6.2-6.1 6.2-9.4 0-2.8-3.5-6.8-7.2-8.2-8.9-3.3-10.9-4.4-10.6-5.9.4-2.3 6.4-2.6 9.5-.6 1.3.9 2.6 1.5 2.7 1.3.2-.2 1-1.8 1.9-3.6 1.6-3.3 1.6-3.3-1.1-4.4-4.4-1.8-12.4-2-15.9-.4zM507 803.2V820h8.8c4.8 0 9.7.3 11 .6 2 .6 2.2.3 2.2-3.4v-4.1l-6.7-.3-6.8-.3-.2-12.9-.1-12.9-4.1-.1-4.1-.1v16.7zM541.5 787.2c-8.8 3.1-12.9 13.2-9 22.5 3 7.1 8 10.5 15.5 10.5s13.4-4 16.5-11.4c2.8-6.9-1.5-17.7-8.5-21.3-3.3-1.7-10.1-1.8-14.5-.3zm11.4 8.1c2.9 2.4 4.3 7.6 3.1 11.3-2.2 6.7-8.2 8.3-13.1 3.5-6.3-6.3-1.9-18.3 6.1-16.5 1.4.3 3.1 1.1 3.9 1.7M575.4 791.8c-1.3 3-2.4 5.6-2.4 5.8 0 .2-2 4.9-4.5 10.4s-4.5 10.5-4.5 11c0 .6 1.8 1 3.9 1 3.4 0 4.2-.4 5.3-2.8 1.2-2.6 1.7-2.7 8.9-3l7.7-.3 1 3c.9 2.5 1.6 2.9 5.6 3.2 2.5.3 4.6.1 4.6-.2 0-.4-1.5-4-3.4-8-1.9-4.1-5.2-11.5-7.3-16.4l-3.9-9h-4.3c-4.3-.1-4.3 0-6.7 5.3zm9.1 9.7c1.3 2.7 2.3 5.1 2.1 5.3-.2.2-2.4.2-4.9 0l-4.4-.3 2-5.3c1.1-2.9 2.1-5.1 2.3-4.9.2.2 1.5 2.6 2.9 5.2zM605 803.2V820h8.8c13.6-.1 20.7-4.5 21.9-14 1.9-13.7-6.4-20.6-23.6-19.8l-7.1.3v16.7zm19.7-7c2.6 2.1 3.4 5.7 2.3 9.9-1.3 4.9-4.6 7.1-9.7 6.7l-3.8-.3-.3-7c-.4-8.4.2-11.2 2.6-11.7 2.2-.5 7 .8 8.9 2.4M645.8 786.7l-4.8.4V820h8.9l.3-11.6.3-11.6 9.9 11.6c9.4 11.1 10 11.6 13.7 11.6h3.9v-33.6l-4 .4-4 .4v19.9l-8.3-10.3c-4.6-5.7-9-10.3-9.8-10.4-.8 0-3.5.1-6.1.3M694.6 787c-9.4 2.8-13.7 17.5-7.6 25.9 4.4 6.2 12.6 8.5 23.8 6.6l4.2-.7V800h-13.1l.3 3.2c.2 2.5.8 3.3 2.3 3.3 2.7 0 3.8 2 2.4 4.6-.9 1.8-1.7 2.1-5.2 1.6-5.1-.7-9.7-5.3-9.7-9.6 0-6.8 8.6-11.9 14.9-8.8 2.8 1.4 3.1 1.4 5.5-1.4 1.4-1.6 2.6-3.1 2.6-3.3 0-.2-2.1-1.1-4.7-2-5-1.7-11.1-1.9-15.7-.6z"}))),oJ=tQ.div`
  ${({theme:e})=>tH`
    height: ${e.spacing(230)};
    margin-bottom: ${e.spacing(400)};

    ${e.media.lg`
    	height: ${e.spacing(460)};
		`}
  `}
`,oK=tQ.section`
  display: flex;
  flex-direction: column;
`,oQ=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    margin: ${e.spacing(80)};
  `}
`,o0=tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.h2}
    margin: ${e.spacing(24)};
    color: ${e.colors.secondary};
  `}
`,o1=tQ.input`
  ${({theme:e})=>tH`
    width: ${e.spacing(200)};
    height: ${e.spacing(30)};

    ${e.media.lg`    
			width: ${e.spacing(400)};
    	height: ${e.spacing(25)};
`}
    ${e.typography.variant.h6}
    background-color: ${e.colors.gray5};
    border: ${e.spacing(20)} solid ${e.colors.gray5};
    border-radius: ${e.spacing(10)};

    &::placeholder {
      color: ${e.colors.primary};
    }

    &:focus {
      color: ${e.colors.primary};
    }
  `}
`,o2=tQ(oX)`
  ${({theme:e})=>tH`
    display: flex;
    align-self: center;
    justify-content: center;

    width: ${e.spacing(216)};
    height: ${e.spacing(216)};
    ${e.media.lg`
		  width: ${e.spacing(460)};
    	height: ${e.spacing(460)};
		`}
  `}
`,o3=JSON.parse('{"R":[{"type":"Feature","properties":{"title":"BTC","description":"Bank witch takes Bitcoin"},"geometry":{"coordinates":[30.205418,55.189924],"type":"Point"}},{"type":"Feature","properties":{"title":"BTC","description":"Bank witch takes Bitcoin"},"geometry":{"coordinates":[30.205871,55.192406],"type":"Point"}},{"type":"Feature","properties":{"title":"EUR","description":"Bank witch takes Euro"},"geometry":{"coordinates":[30.205484,55.1907],"type":"Point"}},{"type":"Feature","properties":{"title":"EUR","description":"Bank witch takes Euro"},"geometry":{"coordinates":[30.205937,55.189828],"type":"Point"}},{"type":"Feature","properties":{"title":"USD","description":"Bank witch takes Dollar"},"geometry":{"coordinates":[30.207396,55.182335],"type":"Point"}},{"type":"Feature","properties":{"title":"USD","description":"Bank witch takes Dollar"},"geometry":{"coordinates":[30.205418,55.189924],"type":"Point"}}]}');oq().accessToken="MISSING_ENV_VAR".MAPBOX_API_KEY;class o4 extends eo.PureComponent{constructor(e){super(e),this.state={lng:30.2,lat:55.18,zoom:12.5,searchQuery:"",currencies:o3.R,loading:!0},this.mapContainer=eo.createRef(),this.map=null}componentDidMount(){let{lng:e,lat:i,zoom:r}=this.state;this.map=new(oq()).Map({container:this.mapContainer.current,style:"mapbox://styles/coffuss/cltui250u00kj01pjazkzdihd",attributionControl:!1,center:[e,i],zoom:r}),this.map.on("load",()=>{this.setState({loading:!1}),this.map?.loadImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIISURBVEiJpdXPi45RFAfwzysaLMZgTGYiNibUIJvZTEghkWRhx8ZOmD9AKVmLLdlOSVj4WVJkI7ykQXYU40ezeMdoxjSFsbjnNY/HM+/M+86p0/Oce773e86999xzmV6acRJljISWY6x5BvNrSjc+Y2IK/RSYhmQ9hmuQV/Ub1jYS4FGO6AvOhX7N+R7US74xRzCAtoy/LcaymK4iojlTBNiSsy9gMGMP4mIOs7WeAK05e6wAkx9bVk+Ajzn7EJoydhMO5zAfpuAqlFX47d89LuNI6POc7xdW1hMA7pi+RKt6q15y2F1HgF2NBCjhzQzIXwe2ITkwgwD7GyWvyuMa5E/NIvuqbK8RYNtsyavZXSsgv5LD1JS56MzYe3EdFeyQanwkQ/4Dq8NXiQT2ZOZ3Bidoly7RKOZJ3XIC/Thtst+fyAQ4HmPdgemP8bPBMYpnWA53pVbcE5Peh7OjYKVdirtmRyT5Luye4Lxdwnecx6lwHsQlLMSTyO6t9LAMB2YRWrAOG2Ilo1IbuRqYM+glHVZF2veqtOIo+qTLNu7/Qx6XLllfYJdm5u/DEC6LTG6abGjHsKZgG+ZLD01b/OelM+aWg+sGWqolVpIqohc7pQqo4KW0l0NhDwV+MZbEtx2bwv6Je9KW38dEUQ03Sxdos3SgK0IXxGpJ5zEmPZsDeIUXeCid6V/5A6KBxx4U1ZXhAAAAAElFTkSuQmCC",(e,i)=>{i?this.map.addImage("marker-icon",i):console.error("Failed to load the marker image.",e)}),this.updateMarkers()})}updateMarkers=()=>{if(!this.map)return;let{searchQuery:e,currencies:i}=this.state;this.map.getSource("points")&&(this.map.removeLayer("points"),this.map.removeSource("points"));let r=i.filter(i=>i.properties.title.toLowerCase().includes(e.toLowerCase()));this.map.addSource("points",{type:"geojson",data:{type:"FeatureCollection",features:r.map(e=>({type:"Feature",properties:e.properties,geometry:e.geometry}))}}),this.map.addLayer({id:"points",type:"symbol",source:"points",layout:{"icon-image":"marker-icon"}})};handleSearch=e=>{let{value:i}=e.target;this.setState({searchQuery:i},()=>{this.updateMarkers()})};render(){let{searchQuery:e,loading:i}=this.state;return(0,ea.jsxs)(oK,{children:[(0,ea.jsxs)(oQ,{children:[(0,ea.jsx)(o0,{children:"Search currency in the blank"}),(0,ea.jsx)(o1,{type:"text",placeholder:"Currency search...",value:e,onChange:this.handleSearch})]}),i&&(0,ea.jsx)(o2,{}),(0,ea.jsx)(oJ,{ref:this.mapContainer})]})}}let o5=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    margin: ${e.spacing(120)};
  `}
`,o6=tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.h4}
    margin-bottom: ${e.spacing(2)};
    color: ${e.colors.secondary};
  `}
`;tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.h6}
    margin: ${e.spacing(1)} 0;
    color: ${e.colors.secondary};
  `}
`;let o8=tQ.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing(4)};
`,o7=tQ.p`
  ${({theme:e})=>tH`
    cursor: pointer;

    display: flex;
    align-items: center;

    margin-bottom: ${e.spacing(1)};

    color: ${e.colors.secondary};

    &:hover {
      text-decoration: underline;
    }

    svg {
      margin-right: ${e.spacing(1)};
    }
  `}
`,o9=tQ.address`
  ${({theme:e})=>tH`
    margin-top: ${e.spacing(2)};

    font-size: ${e.typography.variant.h6};
    font-style: normal;
    color: ${e.colors.secondary};
    text-align: center;
  `}
`,le=()=>{let[e,i]=(0,eo.useState)(!1);return(0,eo.useEffect)(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow="unset"},[e]),{isShown:e,toggle:()=>i(!e)}},lt=(e,i)=>{let r=Object.values(i?.data??{}).filter(i=>i.code===e).find(i=>i.code===e);return r?.value??0},li=(e,i,r="USD")=>(+r/+lt(i,e)).toFixed(6),lr=e=>Object.keys(e?.data??{}),ln=(e,i,r)=>(+lt(e,r)/+lt(i,r)).toFixed(9),la=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    justify-content: end;
    height: ${e.spacing(30)};
  `}
`,ls=t1`
  0% { opacity: 0; transform: translateY(2rem); }
  100% { opacity: 1; transform: translateY(0); }
`,lo=tQ.select`
  ${({theme:e})=>tH`
    cursor: pointer;

    width: ${e.spacing(100)};

    ${e.typography.variant.h5}

    text-align: center;
    text-align-last: center;

    appearance: none;
    border-radius: ${e.spacing(4)};

    transition:
      transform 0.3s ease,
      opacity 0.3s ease;
    animation: ${ls} 0.2s ease-in-out;
		background: ${e.colors.gray5}

    &:disabled {
      cursor: default;
      color: ${e.colors.secondary};
      opacity: 0.8;
      background: ${e.colors.primary};
    }

    &.opened {
      transform: translateY(0);
      opacity: 1;
    }

    &.closed {
      transform: translateY(-2rem);
      opacity: 0;
    }

    &:focus {
      outline: none;
    }
  `}
`,ll=tQ.option`
  ${({theme:e})=>tH`
    display: flex;
    justify-content: center;
    ${e.typography.variant.h5}
    text-align: center;
    text-align-last: center;

    &:hover {
      background-color: ${e.colors.gray5};
    }
  `}
`,lu=({currenciesList:e,setSelectedCurrency:i,defaultValue:r,disable:n=!0})=>(0,ea.jsx)(la,{children:(0,ea.jsxs)(lo,{onChange:r=>{let n=r.target.value;i(e.find(e=>e===n)??"")},disabled:n,children:[(0,ea.jsx)(ll,{children:r},r),e.map(e=>(0,ea.jsx)(ll,{children:e},e))]})}),lh=tQ.div`
  ${({theme:e})=>tH`
    position: fixed;
    z-index: 700;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);

    width: ${e.spacing(300)};

    border-radius: ${e.spacing(8)};
    outline: 0;

    ${e.media.lg`
    width: ${e.spacing(600)};

		`}
  `}
`,lc=tQ.div`
  position: fixed;
  z-index: 500;
  top: 0;
  left: 0;

  width: 100%;
  height: 100%;

  background: rgb(0 0 0 / 30%);
`,ld=t1`
  0% {
    opacity: 0;
    transform: scale(0.7);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`,lf=t1`
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.7);
  }
`,lp=tQ.div`
  ${({theme:e,isShown:i})=>tH`
    position: relative;
    z-index: 100;

    margin: auto;

    background: white;
    background-color: ${e.colors.gray1};
    border: ${e.spacing(1)} solid ${e.colors.primary};
    border-radius: ${e.spacing(8)};

    ${i?tH`
          animation: ${ld} 0.3s forwards;
        `:tH`
          animation: ${lf} 0.3s forwards;
        `}
  `}
`,lm=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    align-self: center;
    justify-content: center;

    padding: ${e.spacing(8)};

    border-radius: ${e.spacing(8,8,0,0)};
  `}
`,l_=tQ.p`
  ${({theme:e})=>tH`
    ${e.typography.variant.h3}
    justify-content: center;
    color: ${e.colors.black};
  `}
`,lg=tQ.button`
  ${({theme:e})=>tH`
    position: absolute;
    top: ${e.spacing(10)};
    right: ${e.spacing(10)};

    margin-left: ${e.spacing(9)};

    font-size: ${e.spacing(12)};

    background: none;
    border: none;
    border-radius: ${e.spacing(3)};

    :hover {
      cursor: pointer;
    }
  `}
`,ly=tQ.div`
  ${({theme:e})=>tH`
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    height: ${e.spacing(150)};
    padding: ${e.spacing(10)};
    ${e.media.lg`
			height: ${e.spacing(200)};
		`}
  `}
`,lv=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: row;
    justify-content: center;

    height: ${e.spacing(30)};
    margin-bottom: ${e.spacing(10)};

    ${e.media.lg`
    	width: ${e.spacing(400)};
			align-items: center;		
		`}
  `}
`,lx=tQ.div`
  ${({theme:e})=>tH`
    ${e.typography.variant.h5}
    flex-grow: 1;
    margin-left: ${e.spacing(2)};
    color: ${e.colors.secondary};
    border-radius: ${e.spacing(10)};

    input {
      width: calc(100% - ${e.spacing(4)});
      height: calc(100% - ${e.spacing(4)});
      padding: ${e.spacing(1)};

      font-size: ${e.typography.variant.h5};
      color: ${e.colors.black};

      background-color: ${e.colors.gray1};
      border: 1px solid ${e.colors.black};
      border-radius: ${e.spacing(1)};

      &:focus {
        border-color: ${e.colors.primary};
        outline: none;
      }
    }
  `}
`,lb=({isShown:e,hide:i,currencyList:r,cardCurrency:n,givenCurrency:a})=>{let[s,o]=(0,eo.useState)(a),[l,u]=(0,eo.useState)(0),[h,c]=(0,eo.useState)();(0,eo.useEffect)(()=>{c(Number(l)*Number(ln(n,s,r)))},[l,n,s,r]);let d=(0,ea.jsxs)(ea.Fragment,{children:[(0,ea.jsx)(lc,{}),(0,ea.jsx)(lh,{children:(0,ea.jsxs)(lp,{isShown:e,children:[(0,ea.jsxs)(lm,{children:[(0,ea.jsx)(l_,{children:"Exchange rate"}),(0,ea.jsx)(lg,{onClick:()=>{u(0),i()},children:"X"})]}),(0,ea.jsxs)(ly,{children:[(0,ea.jsx)("p",{children:"Convert currency from"}),(0,ea.jsxs)(lv,{children:[(0,ea.jsx)(lu,{setSelectedCurrency:o,currenciesList:lr(r).filter(e=>e!==a),defaultValue:a,disable:!1}),(0,ea.jsx)(lx,{children:(0,ea.jsx)("input",{placeholder:"Amount",value:l,onChange:e=>{u(+e.target.value)}})})]}),(0,ea.jsx)("p",{children:"To"}),(0,ea.jsxs)(lv,{children:[(0,ea.jsx)(lu,{setSelectedCurrency:o,currenciesList:lr(r).filter(e=>e!==a),defaultValue:n,disable:!0}),(0,ea.jsx)(lx,{children:(0,ea.jsx)("input",{value:h,readOnly:!0})})]})]})]})})]});return e?(0,a9.createPortal)(d,document.body):null},lw=tQ.section`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;
    justify-content: center;

    margin: ${e.spacing(32,26,0,26)};
    padding-bottom: ${e.spacing(150)};

    ${e.media.lg`
			margin: ${e.spacing(32,120,0,120)};
		`}
  `}
`,lM=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;
    row-gap: ${e.spacing(20)};
    justify-content: center;

    margin-bottom: ${e.spacing(32)};
  `}
`,lT=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: column;
    row-gap: ${e.spacing(20)};
    ${e.media.md`
			flex-direction: row;
			row-gap: 0;
			display: default;
    	flex-wrap: wrap;
    	gap: ${e.spacing(20)};
    	justify-content: space-between;

    	margin-bottom: ${e.spacing(32)};
	`}
  `}
`,lL=tQ.span`
  ${({theme:e})=>tH`
    ${e.typography.variant.h10};
    height: ${e.spacing(30)};
    color: ${e.colors.secondary};
    border-bottom: ${e.spacing(1)} solid ${e.colors.mediumDark};
  `}
`,lS=tQ.div`
  ${({theme:e})=>tH`
    cursor: pointer;

    display: flex;
    align-items: center;

    height: ${e.spacing(62)};

    background-color: ${e.colors.mediumDark};
    border-radius: ${e.spacing(3)};

    ${e.media.md`
			width: calc(50% - ${e.spacing(120)});
			max-width: ${e.spacing(520)};
    	flex-basis: calc(50% - ${e.spacing(120)});
    	flex-grow: 0;
		`}
  `}
`,lk=tQ.div`
  ${({theme:e})=>tH`
    display: inline-flex;
    align-items: center;
    justify-content: center;

    width: ${e.spacing(30)};
    height: ${e.spacing(30)};
    margin: ${e.spacing(0,12)};

    & svg {
      width: ${e.spacing(30)};
      height: ${e.spacing(30)};
    }
  `}
`,lD=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: row;
    align-content: space-between;

    width: ${e.spacing(105)};
    height: ${e.spacing(35)};
  `}
`,lE=tQ.div`
  display: flex;
  flex-direction: column;
`,lA=tQ.p`
  ${({theme:e})=>tH`
    margin: 0;
    ${e.typography.variant.h8};
    color: ${e.colors.gray1};
  `}
`,lP=tQ.p`
  ${({theme:e})=>tH`
    margin: 0;
    ${e.typography.variant.h10};
    color: ${e.colors.blue};
  `}
`,lC=tQ(oX)`
  ${({theme:e})=>tH`
    display: flex;
    align-self: center;
    justify-content: center;

    width: ${e.spacing(216)};
    height: ${e.spacing(216)};
    ${e.media.lg`
		  width: ${e.spacing(460)};
    	height: ${e.spacing(460)};
		`}
  `}
`;function lI(e){return e+.5|0}let lO=(e,i,r)=>Math.max(Math.min(e,r),i);function lz(e){return lO(lI(2.55*e),0,255)}function lR(e){return lO(lI(255*e),0,255)}function lY(e){return lO(lI(e/2.55)/100,0,1)}function lF(e){return lO(lI(100*e),0,100)}let lj={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},lB=[..."0123456789ABCDEF"],lN=e=>lB[15&e],lH=e=>lB[(240&e)>>4]+lB[15&e],lV=e=>(240&e)>>4==(15&e),lU=e=>lV(e.r)&&lV(e.g)&&lV(e.b)&&lV(e.a),l$=(e,i)=>e<255?i(e):"",lW=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function lG(e,i,r){let n=i*Math.min(r,1-r),a=(i,a=(i+e/30)%12)=>r-n*Math.max(Math.min(a-3,9-a,1),-1);return[a(0),a(8),a(4)]}function lq(e,i,r){let n=(n,a=(n+e/60)%6)=>r-r*i*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function lZ(e,i,r){let n;let a=lG(e,1,.5);for(i+r>1&&(n=1/(i+r),i*=n,r*=n),n=0;n<3;n++)a[n]*=1-i-r,a[n]+=i;return a}function lX(e){let i,r,n;let a=e.r/255,s=e.g/255,o=e.b/255,l=Math.max(a,s,o),u=Math.min(a,s,o),h=(l+u)/2;return l!==u&&(n=l-u,r=h>.5?n/(2-l-u):n/(l+u),i=60*(i=a===l?(s-o)/n+(s<o?6:0):s===l?(o-a)/n+2:(a-s)/n+4)+.5),[0|i,r||0,h]}function lJ(e,i,r,n){return(Array.isArray(i)?e(i[0],i[1],i[2]):e(i,r,n)).map(lR)}function lK(e){return(e%360+360)%360}let lQ={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},l0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"},l1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,l2=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,l3=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function l4(e,i,r){if(e){let n=lX(e);n[i]=Math.max(0,Math.min(n[i]+n[i]*r,0===i?360:1)),n=lJ(lG,n,void 0,void 0),e.r=n[0],e.g=n[1],e.b=n[2]}}function l5(e,i){return e?Object.assign(i||{},e):e}function l6(e){var i={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(i={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(i.a=lR(e[3]))):(i=l5(e,{r:0,g:0,b:0,a:1})).a=lR(i.a),i}class l8{constructor(i){let r;if(i instanceof l8)return i;let n=typeof i;"object"===n?r=l6(i):"string"===n&&(r=function(e){var i,r=e.length;return"#"===e[0]&&(4===r||5===r?i={r:255&17*lj[e[1]],g:255&17*lj[e[2]],b:255&17*lj[e[3]],a:5===r?17*lj[e[4]]:255}:(7===r||9===r)&&(i={r:lj[e[1]]<<4|lj[e[2]],g:lj[e[3]]<<4|lj[e[4]],b:lj[e[5]]<<4|lj[e[6]],a:9===r?lj[e[7]]<<4|lj[e[8]]:255})),i}(i)||function(i){e||((e=function(){let e,i,r,n,a;let s={},o=Object.keys(l0),l=Object.keys(lQ);for(e=0;e<o.length;e++){for(i=0,n=a=o[e];i<l.length;i++)r=l[i],a=a.replace(r,lQ[r]);r=parseInt(l0[n],16),s[a]=[r>>16&255,r>>8&255,255&r]}return s}()).transparent=[0,0,0,0]);let r=e[i.toLowerCase()];return r&&{r:r[0],g:r[1],b:r[2],a:4===r.length?r[3]:255}}(i)||function(e){return"r"===e.charAt(0)?function(e){let i,r,n;let a=l1.exec(e),s=255;if(a){if(a[7]!==i){let e=+a[7];s=a[8]?lz(e):lO(255*e,0,255)}return i=+a[1],r=+a[3],n=+a[5],{r:i=255&(a[2]?lz(i):lO(i,0,255)),g:r=255&(a[4]?lz(r):lO(r,0,255)),b:n=255&(a[6]?lz(n):lO(n,0,255)),a:s}}}(e):function(e){let i;let r=lW.exec(e),n=255;if(!r)return;r[5]!==i&&(n=r[6]?lz(+r[5]):lR(+r[5]));let a=lK(+r[2]),s=+r[3]/100,o=+r[4]/100;return{r:(i="hwb"===r[1]?lJ(lZ,a,s,o):"hsv"===r[1]?lJ(lq,a,s,o):lJ(lG,a,s,o))[0],g:i[1],b:i[2],a:n}}(e)}(i)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=l5(this._rgb);return e&&(e.a=lY(e.a)),e}set rgb(e){this._rgb=l6(e)}rgbString(){var e;return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${lY(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0}hexString(){var e,i;return this._valid?(i=lU(e=this._rgb)?lN:lH,e?"#"+i(e.r)+i(e.g)+i(e.b)+l$(e.a,i):void 0):void 0}hslString(){return this._valid?function(e){if(!e)return;let i=lX(e),r=i[0],n=lF(i[1]),a=lF(i[2]);return e.a<255?`hsla(${r}, ${n}%, ${a}%, ${lY(e.a)})`:`hsl(${r}, ${n}%, ${a}%)`}(this._rgb):void 0}mix(e,i){if(e){let r;let n=this.rgb,a=e.rgb,s=i===r?.5:i,o=2*s-1,l=n.a-a.a,u=((o*l==-1?o:(o+l)/(1+o*l))+1)/2;r=1-u,n.r=255&u*n.r+r*a.r+.5,n.g=255&u*n.g+r*a.g+.5,n.b=255&u*n.b+r*a.b+.5,n.a=s*n.a+(1-s)*a.a,this.rgb=n}return this}interpolate(e,i){return e&&(this._rgb=function(e,i,r){let n=l3(lY(e.r)),a=l3(lY(e.g)),s=l3(lY(e.b));return{r:lR(l2(n+r*(l3(lY(i.r))-n))),g:lR(l2(a+r*(l3(lY(i.g))-a))),b:lR(l2(s+r*(l3(lY(i.b))-s))),a:e.a+r*(i.a-e.a)}}(this._rgb,e._rgb,i)),this}clone(){return new l8(this.rgb)}alpha(e){return this._rgb.a=lR(e),this}clearer(e){let i=this._rgb;return i.a*=1-e,this}greyscale(){let e=this._rgb,i=lI(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=i,this}opaquer(e){let i=this._rgb;return i.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return l4(this._rgb,2,e),this}darken(e){return l4(this._rgb,2,-e),this}saturate(e){return l4(this._rgb,1,e),this}desaturate(e){return l4(this._rgb,1,-e),this}rotate(e){var i,r;return(r=lX(i=this._rgb))[0]=lK(r[0]+e),r=lJ(lG,r,void 0,void 0),i.r=r[0],i.g=r[1],i.b=r[2],this}}function l7(){}let l9=(()=>{let e=0;return()=>e++})();function ue(e){return null==e}function ut(e){if(Array.isArray&&Array.isArray(e))return!0;let i=Object.prototype.toString.call(e);return"[object"===i.slice(0,7)&&"Array]"===i.slice(-6)}function ui(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ur(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function un(e,i){return ur(e)?e:i}function ua(e,i){return void 0===e?i:e}let us=(e,i)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/i,uo=(e,i)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*i:+e;function ul(e,i,r){if(e&&"function"==typeof e.call)return e.apply(r,i)}function uu(e,i,r,n){let a,s,o;if(ut(e)){if(s=e.length,n)for(a=s-1;a>=0;a--)i.call(r,e[a],a);else for(a=0;a<s;a++)i.call(r,e[a],a)}else if(ui(e))for(a=0,s=(o=Object.keys(e)).length;a<s;a++)i.call(r,e[o[a]],o[a])}function uh(e,i){let r,n,a,s;if(!e||!i||e.length!==i.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],s=i[r],a.datasetIndex!==s.datasetIndex||a.index!==s.index)return!1;return!0}function uc(e){if(ut(e))return e.map(uc);if(ui(e)){let i=Object.create(null),r=Object.keys(e),n=r.length,a=0;for(;a<n;++a)i[r[a]]=uc(e[r[a]]);return i}return e}function ud(e){return -1===["__proto__","prototype","constructor"].indexOf(e)}function uf(e,i,r,n){if(!ud(e))return;let a=i[e],s=r[e];ui(a)&&ui(s)?up(a,s,n):i[e]=uc(s)}function up(e,i,r){let n;let a=ut(i)?i:[i],s=a.length;if(!ui(e))return e;let o=(r=r||{}).merger||uf;for(let i=0;i<s;++i){if(!ui(n=a[i]))continue;let s=Object.keys(n);for(let i=0,a=s.length;i<a;++i)o(s[i],e,n,r)}return e}function um(e,i){return up(e,i,{merger:u_})}function u_(e,i,r){if(!ud(e))return;let n=i[e],a=r[e];ui(n)&&ui(a)?um(n,a):Object.prototype.hasOwnProperty.call(i,e)||(i[e]=uc(a))}let ug={"":e=>e,x:e=>e.x,y:e=>e.y};function uy(e,i){return(ug[i]||(ug[i]=function(e){let i=function(e){let i=e.split("."),r=[],n="";for(let e of i)(n+=e).endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(e);return e=>{for(let r of i){if(""===r)break;e=e&&e[r]}return e}}(i)))(e)}function uv(e){return e.charAt(0).toUpperCase()+e.slice(1)}let ux=e=>void 0!==e,ub=e=>"function"==typeof e,uw=(e,i)=>{if(e.size!==i.size)return!1;for(let r of e)if(!i.has(r))return!1;return!0},uM=Math.PI,uT=2*uM,uL=uT+uM,uS=Number.POSITIVE_INFINITY,uk=uM/180,uD=uM/2,uE=uM/4,uA=2*uM/3,uP=Math.log10,uC=Math.sign;function uI(e,i,r){return Math.abs(e-i)<r}function uO(e){let i=Math.round(e),r=Math.pow(10,Math.floor(uP(e=uI(e,i,e/1e3)?i:e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function uz(e){return!isNaN(parseFloat(e))&&isFinite(e)}function uR(e,i,r){let n,a,s;for(n=0,a=e.length;n<a;n++)isNaN(s=e[n][r])||(i.min=Math.min(i.min,s),i.max=Math.max(i.max,s))}function uY(e){return uM/180*e}function uF(e){if(!ur(e))return;let i=1,r=0;for(;Math.round(e*i)/i!==e;)i*=10,r++;return r}function uj(e,i){let r=i.x-e.x,n=i.y-e.y,a=Math.sqrt(r*r+n*n),s=Math.atan2(n,r);return s<-.5*uM&&(s+=uT),{angle:s,distance:a}}function uB(e,i){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function uN(e,i){return(e-i+uL)%uT-uM}function uH(e){return(e%uT+uT)%uT}function uV(e,i,r,n){let a=uH(e),s=uH(i),o=uH(r),l=uH(s-a),u=uH(o-a),h=uH(a-s),c=uH(a-o);return a===s||a===o||n&&s===o||l>u&&h<c}function uU(e,i,r){return Math.max(i,Math.min(r,e))}function u$(e,i,r,n=1e-6){return e>=Math.min(i,r)-n&&e<=Math.max(i,r)+n}function uW(e,i,r){let n;r=r||(r=>e[r]<i);let a=e.length-1,s=0;for(;a-s>1;)r(n=s+a>>1)?s=n:a=n;return{lo:s,hi:a}}let uG=(e,i,r,n)=>uW(e,r,n?n=>{let a=e[n][i];return a<r||a===r&&e[n+1][i]===r}:n=>e[n][i]<r),uq=(e,i,r)=>uW(e,r,n=>e[n][i]>=r),uZ=["push","pop","shift","splice","unshift"];function uX(e,i){let r=e._chartjs;if(!r)return;let n=r.listeners,a=n.indexOf(i);-1!==a&&n.splice(a,1),n.length>0||(uZ.forEach(i=>{delete e[i]}),delete e._chartjs)}function uJ(e){let i=new Set(e);return i.size===e.length?e:Array.from(i)}let uK="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function uQ(e,i){let r=[],n=!1;return function(...a){r=a,n||(n=!0,uK.call(window,()=>{n=!1,e.apply(i,r)}))}}let u0=e=>"start"===e?"left":"end"===e?"right":"center",u1=(e,i,r)=>"start"===e?i:"end"===e?r:(i+r)/2,u2=(e,i,r,n)=>e===(n?"left":"right")?r:"center"===e?(i+r)/2:i;function u3(e,i,r){let n=i.length,a=0,s=n;if(e._sorted){let{iScale:o,_parsed:l}=e,u=o.axis,{min:h,max:c,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(a=uU(Math.min(uG(l,u,h).lo,r?n:uG(i,u,o.getPixelForValue(h)).lo),0,n-1)),s=f?uU(Math.max(uG(l,o.axis,c,!0).hi+1,r?0:uG(i,u,o.getPixelForValue(c),!0).hi+1),a,n)-a:n-a}return{start:a,count:s}}function u4(e){let{xScale:i,yScale:r,_scaleRanges:n}=e,a={xmin:i.min,xmax:i.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;let s=n.xmin!==i.min||n.xmax!==i.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),s}let u5=e=>0===e||1===e,u6=(e,i,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-i)*uT/r)),u8=(e,i,r)=>Math.pow(2,-10*e)*Math.sin((e-i)*uT/r)+1,u7={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*uD)+1,easeOutSine:e=>Math.sin(e*uD),easeInOutSine:e=>-.5*(Math.cos(uM*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>u5(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(-Math.pow(2,-10*(2*e-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>u5(e)?e:u6(e,.075,.3),easeOutElastic:e=>u5(e)?e:u8(e,.075,.3),easeInOutElastic:e=>u5(e)?e:e<.5?.5*u6(2*e,.1125,.45):.5+.5*u8(2*e-1,.1125,.45),easeInBack:e=>e*e*(2.70158*e-1.70158),easeOutBack:e=>(e-=1)*e*(2.70158*e+1.70158)+1,easeInOutBack(e){let i=1.70158;return(e/=.5)<1?e*e*(((i*=1.525)+1)*e-i)*.5:.5*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)},easeInBounce:e=>1-u7.easeOutBounce(1-e),easeOutBounce:e=>e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375,easeInOutBounce:e=>e<.5?.5*u7.easeInBounce(2*e):.5*u7.easeOutBounce(2*e-1)+.5};function u9(e){if(e&&"object"==typeof e){let i=e.toString();return"[object CanvasPattern]"===i||"[object CanvasGradient]"===i}return!1}function he(e){return u9(e)?e:new l8(e)}function ht(e){return u9(e)?e:new l8(e).saturate(.5).darken(.1).hexString()}let hi=["x","y","borderWidth","radius","tension"],hr=["color","borderColor","backgroundColor"],hn=new Map;function ha(e,i,r){return(function(e,i){let r=e+JSON.stringify(i=i||{}),n=hn.get(r);return n||(n=new Intl.NumberFormat(e,i),hn.set(r,n)),n})(i,r).format(e)}let hs={values:e=>ut(e)?e:""+e,numeric(e,i,r){let n;if(0===e)return"0";let a=this.chart.options.locale,s=e;if(r.length>1){let i;let a=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(a<1e-4||a>1e15)&&(n="scientific"),Math.abs(i=r.length>3?r[2].value-r[1].value:r[1].value-r[0].value)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),s=i}let o=uP(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),ha(e,a,u)},logarithmic(e,i,r){return 0===e?"0":[1,2,3,5,10,15].includes(r[i].significand||e/Math.pow(10,Math.floor(uP(e))))||i>.8*r.length?hs.numeric.call(this,e,i,r):""}};var ho={formatters:hs};let hl=Object.create(null),hu=Object.create(null);function hh(e,i){if(!i)return e;let r=i.split(".");for(let i=0,n=r.length;i<n;++i){let n=r[i];e=e[n]||(e[n]=Object.create(null))}return e}function hc(e,i,r){return"string"==typeof i?up(hh(e,i),r):up(hh(e,""),i)}var hd=new class{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,i)=>ht(i.backgroundColor),this.hoverBorderColor=(e,i)=>ht(i.borderColor),this.hoverColor=(e,i)=>ht(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return hc(this,e,i)}get(e){return hh(this,e)}describe(e,i){return hc(hu,e,i)}override(e,i){return hc(hl,e,i)}route(e,i,r,n){let a=hh(this,e),s=hh(this,r),o="_"+i;Object.defineProperties(a,{[o]:{value:a[i],writable:!0},[i]:{enumerable:!0,get(){let e=this[o],i=s[n];return ui(e)?Object.assign({},i,e):ua(e,i)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:hr},numbers:{type:"number",properties:hi}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ho.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function hf(e,i,r,n,a){let s=i[a];return s||(s=i[a]=e.measureText(a).width,r.push(a)),s>n&&(n=s),n}function hp(e,i,r){let n=e.currentDevicePixelRatio,a=0!==r?Math.max(r/2,.5):0;return Math.round((i-a)*n)/n+a}function hm(e,i){(i=i||e.getContext("2d")).save(),i.resetTransform(),i.clearRect(0,0,e.width,e.height),i.restore()}function h_(e,i,r,n){hg(e,i,r,n,null)}function hg(e,i,r,n,a){let s,o,l,u,h,c,d,f;let p=i.pointStyle,m=i.rotation,_=i.radius,g=(m||0)*uk;if(p&&"object"==typeof p&&("[object HTMLImageElement]"===(s=p.toString())||"[object HTMLCanvasElement]"===s)){e.save(),e.translate(r,n),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!isNaN(_)&&!(_<=0)){switch(e.beginPath(),p){default:a?e.ellipse(r,n,a/2,_,0,0,uT):e.arc(r,n,_,0,uT),e.closePath();break;case"triangle":c=a?a/2:_,e.moveTo(r+Math.sin(g)*c,n-Math.cos(g)*_),g+=uA,e.lineTo(r+Math.sin(g)*c,n-Math.cos(g)*_),g+=uA,e.lineTo(r+Math.sin(g)*c,n-Math.cos(g)*_),e.closePath();break;case"rectRounded":h=.516*_,o=Math.cos(g+uE)*(u=_-h),d=Math.cos(g+uE)*(a?a/2-h:u),l=Math.sin(g+uE)*u,f=Math.sin(g+uE)*(a?a/2-h:u),e.arc(r-d,n-l,h,g-uM,g-uD),e.arc(r+f,n-o,h,g-uD,g),e.arc(r+d,n+l,h,g,g+uD),e.arc(r-f,n+o,h,g+uD,g+uM),e.closePath();break;case"rect":if(!m){u=Math.SQRT1_2*_,c=a?a/2:u,e.rect(r-c,n-u,2*c,2*u);break}g+=uE;case"rectRot":d=Math.cos(g)*(a?a/2:_),o=Math.cos(g)*_,l=Math.sin(g)*_,f=Math.sin(g)*(a?a/2:_),e.moveTo(r-d,n-l),e.lineTo(r+f,n-o),e.lineTo(r+d,n+l),e.lineTo(r-f,n+o),e.closePath();break;case"crossRot":g+=uE;case"cross":d=Math.cos(g)*(a?a/2:_),o=Math.cos(g)*_,l=Math.sin(g)*_,f=Math.sin(g)*(a?a/2:_),e.moveTo(r-d,n-l),e.lineTo(r+d,n+l),e.moveTo(r+f,n-o),e.lineTo(r-f,n+o);break;case"star":d=Math.cos(g)*(a?a/2:_),o=Math.cos(g)*_,l=Math.sin(g)*_,f=Math.sin(g)*(a?a/2:_),e.moveTo(r-d,n-l),e.lineTo(r+d,n+l),e.moveTo(r+f,n-o),e.lineTo(r-f,n+o),g+=uE,d=Math.cos(g)*(a?a/2:_),o=Math.cos(g)*_,l=Math.sin(g)*_,f=Math.sin(g)*(a?a/2:_),e.moveTo(r-d,n-l),e.lineTo(r+d,n+l),e.moveTo(r+f,n-o),e.lineTo(r-f,n+o);break;case"line":o=a?a/2:Math.cos(g)*_,l=Math.sin(g)*_,e.moveTo(r-o,n-l),e.lineTo(r+o,n+l);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(g)*(a?a/2:_),n+Math.sin(g)*_);break;case!1:e.closePath()}e.fill(),i.borderWidth>0&&e.stroke()}}function hy(e,i,r){return r=r||.5,!i||e&&e.x>i.left-r&&e.x<i.right+r&&e.y>i.top-r&&e.y<i.bottom+r}function hv(e,i){e.save(),e.beginPath(),e.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.clip()}function hx(e){e.restore()}function hb(e,i,r,n,a){if(!i)return e.lineTo(r.x,r.y);if("middle"===a){let n=(i.x+r.x)/2;e.lineTo(n,i.y),e.lineTo(n,r.y)}else"after"===a!=!!n?e.lineTo(i.x,r.y):e.lineTo(r.x,i.y);e.lineTo(r.x,r.y)}function hw(e,i,r,n){if(!i)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?i.cp1x:i.cp2x,n?i.cp1y:i.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function hM(e,i,r,n,a,s={}){let o,l;let u=ut(i)?i:[i],h=s.strokeWidth>0&&""!==s.strokeColor;for(e.save(),e.font=a.string,s.translation&&e.translate(s.translation[0],s.translation[1]),ue(s.rotation)||e.rotate(s.rotation),s.color&&(e.fillStyle=s.color),s.textAlign&&(e.textAlign=s.textAlign),s.textBaseline&&(e.textBaseline=s.textBaseline),o=0;o<u.length;++o)l=u[o],s.backdrop&&function(e,i){let r=e.fillStyle;e.fillStyle=i.color,e.fillRect(i.left,i.top,i.width,i.height),e.fillStyle=r}(e,s.backdrop),h&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),ue(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(l,r,n,s.maxWidth)),e.fillText(l,r,n,s.maxWidth),function(e,i,r,n,a){if(a.strikethrough||a.underline){let s=e.measureText(n),o=i-s.actualBoundingBoxLeft,l=i+s.actualBoundingBoxRight,u=r-s.actualBoundingBoxAscent,h=r+s.actualBoundingBoxDescent,c=a.strikethrough?(u+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,c),e.lineTo(l,c),e.stroke()}}(e,r,n,l,s),n+=Number(a.lineHeight);e.restore()}function hT(e,i){let{x:r,y:n,w:a,h:s,radius:o}=i;e.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*uM,uM,!0),e.lineTo(r,n+s-o.bottomLeft),e.arc(r+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,uM,uD,!0),e.lineTo(r+a-o.bottomRight,n+s),e.arc(r+a-o.bottomRight,n+s-o.bottomRight,o.bottomRight,uD,0,!0),e.lineTo(r+a,n+o.topRight),e.arc(r+a-o.topRight,n+o.topRight,o.topRight,0,-uD,!0),e.lineTo(r+o.topLeft,n)}let hL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/,hk=e=>+e||0;function hD(e,i){let r={},n=ui(i),a=n?Object.keys(i):i,s=ui(e)?n?r=>ua(e[r],e[i[r]]):i=>e[i]:()=>e;for(let e of a)r[e]=hk(s(e));return r}function hE(e){return hD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function hA(e){return hD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function hP(e){let i=hE(e);return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function hC(e,i){e=e||{},i=i||hd.font;let r=ua(e.size,i.size);"string"==typeof r&&(r=parseInt(r,10));let n=ua(e.style,i.style);n&&!(""+n).match(hS)&&(n=void 0);let a={family:ua(e.family,i.family),lineHeight:function(e,i){let r=(""+e).match(hL);if(!r||"normal"===r[1])return 1.2*i;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100}return i*e}(ua(e.lineHeight,i.lineHeight),r),size:r,style:n,weight:ua(e.weight,i.weight),string:""};return a.string=!a||ue(a.size)||ue(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family,a}function hI(e,i,r,n){let a,s,o,l=!0;for(a=0,s=e.length;a<s;++a)if(void 0!==(o=e[a])&&(void 0!==i&&"function"==typeof o&&(o=o(i),l=!1),void 0!==r&&ut(o)&&(o=o[r%o.length],l=!1),void 0!==o))return n&&!l&&(n.cacheable=!1),o}function hO(e,i){return Object.assign(Object.create(e),i)}function hz(e,i=[""],r,n,a=()=>e[0]){let s=r||e;void 0===n&&(n=hU("_fallback",e));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:a,override:r=>hz([r,...e],i,s,n)};return new Proxy(o,{deleteProperty:(i,r)=>(delete i[r],delete i._keys,delete e[0][r],!0),get:(r,n)=>hB(r,n,()=>(function(e,i,r,n){let a;for(let s of i)if(void 0!==(a=hU(hF(s,e),r)))return hj(e,a)?hH(r,n,e,a):a})(n,i,e,r)),getOwnPropertyDescriptor:(e,i)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],i),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,i)=>h$(e).includes(i),ownKeys:e=>h$(e),set(e,i,r){let n=e._storage||(e._storage=a());return e[i]=n[i]=r,delete e._keys,!0}})}function hR(e,i,r,n){let a={_cacheable:!1,_proxy:e,_context:i,_subProxy:r,_stack:new Set,_descriptors:hY(e,n),setContext:i=>hR(e,i,r,n),override:a=>hR(e.override(a),i,r,n)};return new Proxy(a,{deleteProperty:(i,r)=>(delete i[r],delete e[r],!0),get:(e,i,r)=>hB(e,i,()=>(function(e,i,r){let{_proxy:n,_context:a,_subProxy:s,_descriptors:o}=e,l=n[i];return ub(l)&&o.isScriptable(i)&&(l=function(e,i,r,n){let{_proxy:a,_context:s,_subProxy:o,_stack:l}=r;if(l.has(e))throw Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let u=i(s,o||n);return l.delete(e),hj(e,u)&&(u=hH(a._scopes,a,e,u)),u}(i,l,e,r)),ut(l)&&l.length&&(l=function(e,i,r,n){let{_proxy:a,_context:s,_subProxy:o,_descriptors:l}=r;if(void 0!==s.index&&n(e))return i[s.index%i.length];if(ui(i[0])){let r=i,n=a._scopes.filter(e=>e!==r);for(let u of(i=[],r)){let r=hH(n,a,e,u);i.push(hR(r,s,o&&o[e],l))}}return i}(i,l,e,o.isIndexable)),hj(i,l)&&(l=hR(l,a,s&&s[i],o)),l})(e,i,r)),getOwnPropertyDescriptor:(i,r)=>i._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(i,r)=>Reflect.has(e,r),ownKeys:()=>Reflect.ownKeys(e),set:(i,r,n)=>(e[r]=n,delete i[r],!0)})}function hY(e,i={scriptable:!0,indexable:!0}){let{_scriptable:r=i.scriptable,_indexable:n=i.indexable,_allKeys:a=i.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:ub(r)?r:()=>r,isIndexable:ub(n)?n:()=>n}}let hF=(e,i)=>e?e+uv(i):i,hj=(e,i)=>ui(i)&&"adapters"!==e&&(null===Object.getPrototypeOf(i)||i.constructor===Object);function hB(e,i,r){if(Object.prototype.hasOwnProperty.call(e,i))return e[i];let n=r();return e[i]=n,n}let hN=(e,i)=>!0===e?i:"string"==typeof e?uy(i,e):void 0;function hH(e,i,r,n){var a;let s=i._rootScopes,o=ub(a=i._fallback)?a(r,n):a,l=[...e,...s],u=new Set;u.add(n);let h=hV(u,l,r,o||r,n);return null!==h&&(void 0===o||o===r||null!==(h=hV(u,l,o,h,n)))&&hz(Array.from(u),[""],s,o,()=>(function(e,i,r){let n=e._getTarget();i in n||(n[i]={});let a=n[i];return ut(a)&&ui(r)?r:a||{}})(i,r,n))}function hV(e,i,r,n,a){for(;r;)r=function(e,i,r,n,a){for(let o of i){let i=hN(r,o);if(i){var s;e.add(i);let o=ub(s=i._fallback)?s(r,a):s;if(void 0!==o&&o!==r&&o!==n)return o}else if(!1===i&&void 0!==n&&r!==n)return null}return!1}(e,i,r,n,a);return r}function hU(e,i){for(let r of i){if(!r)continue;let i=r[e];if(void 0!==i)return i}}function h$(e){let i=e._keys;return i||(i=e._keys=function(e){let i=new Set;for(let r of e)for(let e of Object.keys(r).filter(e=>!e.startsWith("_")))i.add(e);return Array.from(i)}(e._scopes)),i}function hW(e,i,r,n){let a,s,o;let{iScale:l}=e,{key:u="r"}=this._parsing,h=Array(n);for(a=0;a<n;++a)o=i[s=a+r],h[a]={r:l.parse(uy(o,u),s)};return h}let hG=Number.EPSILON||1e-14,hq=(e,i)=>i<e.length&&!e[i].skip&&e[i],hZ=e=>"x"===e?"y":"x";function hX(e,i,r){return Math.max(Math.min(e,r),i)}function hJ(){return"undefined"!=typeof window&&"undefined"!=typeof document}function hK(e){let i=e.parentNode;return i&&"[object ShadowRoot]"===i.toString()&&(i=i.host),i}function hQ(e,i,r){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*i.parentNode[r])):n=e,n}let h0=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),h1=["top","right","bottom","left"];function h2(e,i,r){let n={};r=r?"-"+r:"";for(let a=0;a<4;a++){let s=h1[a];n[s]=parseFloat(e[i+"-"+s+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}let h3=(e,i,r)=>(e>0||i>0)&&(!r||!r.shadowRoot);function h4(e,i){if("native"in e)return e;let{canvas:r,currentDevicePixelRatio:n}=i,a=h0(r),s="border-box"===a.boxSizing,o=h2(a,"padding"),l=h2(a,"border","width"),{x:u,y:h,box:c}=function(e,i){let r,n;let a=e.touches,s=a&&a.length?a[0]:e,{offsetX:o,offsetY:l}=s,u=!1;if(h3(o,l,e.target))r=o,n=l;else{let e=i.getBoundingClientRect();r=s.clientX-e.left,n=s.clientY-e.top,u=!0}return{x:r,y:n,box:u}}(e,r),d=o.left+(c&&l.left),f=o.top+(c&&l.top),{width:p,height:m}=i;return s&&(p-=o.width+l.width,m-=o.height+l.height),{x:Math.round((u-d)/p*r.width/n),y:Math.round((h-f)/m*r.height/n)}}let h5=e=>Math.round(10*e)/10;function h6(e,i,r){let n=i||1,a=Math.floor(e.height*n),s=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);let o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||o.height!==a||o.width!==s)&&(e.currentDevicePixelRatio=n,o.height=a,o.width=s,e.ctx.setTransform(n,0,0,n,0,0),!0)}let h8=function(){let e=!1;try{let i={get passive(){return e=!0,!1}};hJ()&&(window.addEventListener("test",null,i),window.removeEventListener("test",null,i))}catch(i){}return e}();function h7(e,i){let r=h0(e).getPropertyValue(i),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function h9(e,i,r,n){return{x:e.x+r*(i.x-e.x),y:e.y+r*(i.y-e.y)}}function ce(e,i,r,n){return{x:e.x+r*(i.x-e.x),y:"middle"===n?r<.5?e.y:i.y:"after"===n?r<1?e.y:i.y:r>0?i.y:e.y}}function ct(e,i,r,n){let a={x:e.cp2x,y:e.cp2y},s={x:i.cp1x,y:i.cp1y},o=h9(e,a,r),l=h9(a,s,r),u=h9(s,i,r),h=h9(o,l,r),c=h9(l,u,r);return h9(h,c,r)}function ci(e,i,r){var n;return e?(n=r,{x:e=>i+i+n-e,setWidth(e){n=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,i)=>e-i,leftForLtr:(e,i)=>e-i}):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,i)=>e+i,leftForLtr:(e,i)=>e}}function cr(e,i){let r,n;("ltr"===i||"rtl"===i)&&(n=[(r=e.canvas.style).getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",i,"important"),e.prevTextDirection=n)}function cn(e,i){void 0!==i&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",i[0],i[1]))}function ca(e){return"angle"===e?{between:uV,compare:uN,normalize:uH}:{between:u$,compare:(e,i)=>e-i,normalize:e=>e}}function cs({start:e,end:i,count:r,loop:n,style:a}){return{start:e%r,end:i%r,loop:n&&(i-e+1)%r==0,style:a}}function co(e,i,r){let n,a,s;if(!r)return[e];let{property:o,start:l,end:u}=r,h=i.length,{compare:c,between:d,normalize:f}=ca(o),{start:p,end:m,loop:_,style:g}=function(e,i,r){let n;let{property:a,start:s,end:o}=r,{between:l,normalize:u}=ca(a),h=i.length,{start:c,end:d,loop:f}=e;if(f){for(c+=h,d+=h,n=0;n<h&&l(u(i[c%h][a]),s,o);++n)c--,d--;c%=h,d%=h}return d<c&&(d+=h),{start:c,end:d,loop:f,style:e.style}}(e,i,r),y=[],v=!1,x=null,b=()=>d(l,s,n)&&0!==c(l,s),w=()=>0===c(u,n)||d(u,s,n),M=()=>v||b(),T=()=>!v||w();for(let e=p,r=p;e<=m;++e)(a=i[e%h]).skip||(n=f(a[o]))===s||(v=d(n,l,u),null===x&&M()&&(x=0===c(n,l)?e:r),null!==x&&T()&&(y.push(cs({start:x,end:e,loop:_,count:h,style:g})),x=null),r=e,s=n);return null!==x&&y.push(cs({start:x,end:m,loop:_,count:h,style:g})),y}function cl(e,i){let r=[],n=e.segments;for(let a=0;a<n.length;a++){let s=co(n[a],e.points,i);s.length&&r.push(...s)}return r}function cu(e,i,r,n){return n&&n.setContext&&r?function(e,i,r,n){let a=e._chart.getContext(),s=ch(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,u=r.length,h=[],c=s,d=i[0].start,f=d;function p(e,i,n,a){let s=l?-1:1;if(e!==i){for(e+=u;r[e%u].skip;)e-=s;for(;r[i%u].skip;)i+=s;e%u!=i%u&&(h.push({start:e%u,end:i%u,loop:n,style:a}),c=a,d=i%u)}}for(let e of i){let i;let s=r[(d=l?d:e.start)%u];for(f=d+1;f<=e.end;f++){let l=r[f%u];(function(e,i){if(!i)return!1;let r=[],n=function(e,i){return u9(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(e,n)!==JSON.stringify(i,n)})(i=ch(n.setContext(hO(a,{type:"segment",p0:s,p1:l,p0DataIndex:(f-1)%u,p1DataIndex:f%u,datasetIndex:o}))),c)&&p(d,f-1,e.loop,c),s=l,c=i}d<f-1&&p(d,f-1,e.loop,c)}return h}(e,i,r,n):i}function ch(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}var cc=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,r,n){let a=i.listeners[n],s=i.duration;a.forEach(n=>n({chart:e,initial:i.initial,numSteps:s,currentStep:Math.min(r-i.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=uK.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((r,n)=>{let a;if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,l=!1;for(;o>=0;--o)(a=s[o])._active?(a._total>r.duration&&(r.duration=a._total),a.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(n.draw(),this._notify(n,r,e,"progress")),s.length||(r.running=!1,this._notify(n,r,e,"complete"),r.initial=!1),i+=s.length}),this._lastDate=e,0===i&&(this._running=!1)}_getAnims(e){let i=this._charts,r=i.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,r)),r}listen(e,i,r){this._getAnims(e).listeners[i].push(r)}add(e,i){i&&i.length&&this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){let i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((e,i)=>Math.max(e,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let i=this._charts.get(e);return!!i&&!!i.running&&!!i.items.length}stop(e){let i=this._charts.get(e);if(!i||!i.items.length)return;let r=i.items,n=r.length-1;for(;n>=0;--n)r[n].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};let cd="transparent",cf={boolean:(e,i,r)=>r>.5?i:e,color(e,i,r){let n=he(e||cd),a=n.valid&&he(i||cd);return a&&a.valid?a.mix(n,r).hexString():i},number:(e,i,r)=>e+(i-e)*r};class cp{constructor(e,i,r,n){let a=i[r];n=hI([e.to,n,a,e.from]);let s=hI([e.from,a,n]);this._active=!0,this._fn=e.fn||cf[e.type||typeof s],this._easing=u7[e.easing]||u7.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=r,this._from=s,this._to=n,this._promises=void 0}active(){return this._active}update(e,i,r){if(this._active){this._notify(!1);let n=this._target[this._prop],a=r-this._start,s=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=hI([e.to,i,n,e.from]),this._from=hI([e.from,n,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let i;let r=e-this._start,n=this._duration,a=this._prop,s=this._from,o=this._loop,l=this._to;if(this._active=s!==l&&(o||r<n),!this._active){this._target[a]=l,this._notify(!0);return}if(r<0){this._target[a]=s;return}i=r/n%2,i=o&&i>1?2-i:i,i=this._easing(Math.min(1,Math.max(0,i))),this._target[a]=this._fn(s,l,i)}wait(){let e=this._promises||(this._promises=[]);return new Promise((i,r)=>{e.push({res:i,rej:r})})}_notify(e){let i=e?"res":"rej",r=this._promises||[];for(let e=0;e<r.length;e++)r[e][i]()}}class cm{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!ui(e))return;let i=Object.keys(hd.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{let a=e[n];if(!ui(a))return;let s={};for(let e of i)s[e]=a[e];(ut(a.properties)&&a.properties||[n]).forEach(e=>{e!==n&&r.has(e)||r.set(e,s)})})}_animateOptions(e,i){let r=i.options,n=function(e,i){if(!i)return;let r=e.options;if(!r){e.options=i;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}(e,r);if(!n)return[];let a=this._createAnimations(n,r);return r.$shared&&(function(e,i){let r=[],n=Object.keys(i);for(let i=0;i<n.length;i++){let a=e[n[i]];a&&a.active()&&r.push(a.wait())}return Promise.all(r)})(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,i){let r;let n=this._properties,a=[],s=e.$animations||(e.$animations={}),o=Object.keys(i),l=Date.now();for(r=o.length-1;r>=0;--r){let u=o[r];if("$"===u.charAt(0))continue;if("options"===u){a.push(...this._animateOptions(e,i));continue}let h=i[u],c=s[u],d=n.get(u);if(c){if(d&&c.active()){c.update(d,h,l);continue}c.cancel()}if(!d||!d.duration){e[u]=h;continue}s[u]=c=new cp(d,e,u,h),a.push(c)}return a}update(e,i){if(0===this._properties.size){Object.assign(e,i);return}let r=this._createAnimations(e,i);if(r.length)return cc.add(this._chart,r),!0}}function c_(e,i){let r=e&&e.options||{},n=r.reverse,a=void 0===r.min?i:0,s=void 0===r.max?i:0;return{start:n?s:a,end:n?a:s}}function cg(e,i){let r,n;let a=[],s=e._getSortedDatasetMetas(i);for(r=0,n=s.length;r<n;++r)a.push(s[r].index);return a}function cy(e,i,r,n={}){let a,s,o,l;let u=e.keys,h="single"===n.mode;if(null!==i){for(a=0,s=u.length;a<s;++a){if((o=+u[a])===r){if(n.all)continue;break}ur(l=e.values[o])&&(h||0===i||uC(i)===uC(l))&&(i+=l)}return i}}function cv(e,i){let r=e&&e.options.stacked;return r||void 0===r&&void 0!==i.stack}function cx(e,i,r,n){for(let a of i.getMatchingVisibleMetas(n).reverse()){let i=e[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function cb(e,i){let r;let{chart:n,_cachedMeta:a}=e,s=n._stacks||(n._stacks={}),{iScale:o,vScale:l,index:u}=a,h=o.axis,c=l.axis,d=`${o.id}.${l.id}.${a.stack||a.type}`,f=i.length;for(let e=0;e<f;++e){let n=i[e],{[h]:o,[c]:f}=n;(r=(n._stacks||(n._stacks={}))[c]=function(e,i,r){let n=e[i]||(e[i]={});return n[r]||(n[r]={})}(s,d,o))[u]=f,r._top=cx(r,l,!0,a.type),r._bottom=cx(r,l,!1,a.type),(r._visualValues||(r._visualValues={}))[u]=f}}function cw(e,i){let r=e.scales;return Object.keys(r).filter(e=>r[e].axis===i).shift()}function cM(e,i){let r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n)for(let a of i=i||e._parsed){let e=a._stacks;if(!e||void 0===e[n]||void 0===e[n][r])return;delete e[n][r],void 0!==e[n]._visualValues&&void 0!==e[n]._visualValues[r]&&delete e[n]._visualValues[r]}}let cT=e=>"reset"===e||"none"===e,cL=(e,i)=>i?e:Object.assign({},e),cS=(e,i,r)=>e&&!i.hidden&&i._stacked&&{keys:cg(r,!0),values:null};class ck{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=cv(e.vScale,e),this.addElements(),this.options.fill&&this.chart.isPluginEnabled("filler")}updateIndex(e){this.index!==e&&cM(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,i=this._cachedMeta,r=this.getDataset(),n=(e,i,r,n)=>"x"===e?i:"r"===e?n:r,a=i.xAxisID=ua(r.xAxisID,cw(e,"x")),s=i.yAxisID=ua(r.yAxisID,cw(e,"y")),o=i.rAxisID=ua(r.rAxisID,cw(e,"r")),l=i.indexAxis,u=i.iAxisID=n(l,a,s,o),h=i.vAxisID=n(l,s,a,o);i.xScale=this.getScaleForId(a),i.yScale=this.getScaleForId(s),i.rScale=this.getScaleForId(o),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&uX(this._data,this),e._stacked&&cM(e)}_dataCheck(){let e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(ui(i))this._data=function(e){let i,r,n;let a=Object.keys(e),s=Array(a.length);for(i=0,r=a.length;i<r;++i)n=a[i],s[i]={x:n,y:e[n]};return s}(i);else if(r!==i){if(r){uX(r,this);let e=this._cachedMeta;cM(e),e._parsed=[]}i&&Object.isExtensible(i)&&function(e,i){if(e._chartjs){e._chartjs.listeners.push(i);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),uZ.forEach(i=>{let r="_onData"+uv(i),n=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...i){let a=n.apply(this,i);return e._chartjs.listeners.forEach(e=>{"function"==typeof e[r]&&e[r](...i)}),a}})})}(i,this),this._syncList=[],this._data=i}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let i=this._cachedMeta,r=this.getDataset(),n=!1;this._dataCheck();let a=i._stacked;i._stacked=cv(i.vScale,i),i.stack!==r.stack&&(n=!0,cM(i),i.stack=r.stack),this._resyncElements(e),(n||a!==i._stacked)&&cb(this,i._parsed)}configure(){let e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){let r,n,a;let{_cachedMeta:s,_data:o}=this,{iScale:l,_stacked:u}=s,h=l.axis,c=0===e&&i===o.length||s._sorted,d=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=o,s._sorted=!0,a=o;else{a=ut(o[e])?this.parseArrayData(s,o,e,i):ui(o[e])?this.parseObjectData(s,o,e,i):this.parsePrimitiveData(s,o,e,i);let l=()=>null===n[h]||d&&n[h]<d[h];for(r=0;r<i;++r)s._parsed[r+e]=n=a[r],c&&(l()&&(c=!1),d=n);s._sorted=c}u&&cb(this,a)}parsePrimitiveData(e,i,r,n){let a,s;let{iScale:o,vScale:l}=e,u=o.axis,h=l.axis,c=o.getLabels(),d=o===l,f=Array(n);for(a=0;a<n;++a)s=a+r,f[a]={[u]:d||o.parse(c[s],s),[h]:l.parse(i[s],s)};return f}parseArrayData(e,i,r,n){let a,s,o;let{xScale:l,yScale:u}=e,h=Array(n);for(a=0;a<n;++a)o=i[s=a+r],h[a]={x:l.parse(o[0],s),y:u.parse(o[1],s)};return h}parseObjectData(e,i,r,n){let a,s,o;let{xScale:l,yScale:u}=e,{xAxisKey:h="x",yAxisKey:c="y"}=this._parsing,d=Array(n);for(a=0;a<n;++a)o=i[s=a+r],d[a]={x:l.parse(uy(o,h),s),y:u.parse(uy(o,c),s)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){let n=this.chart,a=this._cachedMeta,s=i[e.axis];return cy({keys:cg(n,!0),values:i._stacks[e.axis]._visualValues},s,a.index,{mode:r})}updateRangeFromParsed(e,i,r,n){let a=r[i.axis],s=null===a?NaN:a,o=n&&r._stacks[i.axis];n&&o&&(n.values=o,s=cy(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,i){let r,n;let a=this._cachedMeta,s=a._parsed,o=a._sorted&&e===a.iScale,l=s.length,u=this._getOtherScale(e),h=cS(i,a,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=function(e){let{min:i,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?i:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}(u);function p(){let i=(n=s[r])[u.axis];return!ur(n[e.axis])||d>i||f<i}for(r=0;r<l&&(p()||(this.updateRangeFromParsed(c,e,n,h),!o));++r);if(o){for(r=l-1;r>=0;--r)if(!p()){this.updateRangeFromParsed(c,e,n,h);break}}return c}getAllParsedValues(e){let i,r,n;let a=this._cachedMeta._parsed,s=[];for(i=0,r=a.length;i<r;++i)ur(n=a[i][e.axis])&&s.push(n);return s}getMaxOverflow(){return!1}getLabelAndValue(e){let i=this._cachedMeta,r=i.iScale,n=i.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){var i;let r,n,a,s;let o=this._cachedMeta;this.update(e||"default"),o._clip=(ui(i=ua(this.options.clip,function(e,i,r){if(!1===r)return!1;let n=c_(e,r),a=c_(i,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(o.xScale,o.yScale,this.getMaxOverflow())))?(r=i.top,n=i.right,a=i.bottom,s=i.left):r=n=a=s=i,{top:r,right:n,bottom:a,left:s,disabled:!1===i})}update(e){}draw(){let e;let i=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],s=r.chartArea,o=[],l=this._drawStart||0,u=this._drawCount||a.length-l,h=this.options.drawActiveElementsOnTop;for(n.dataset&&n.dataset.draw(i,s,l,u),e=l;e<l+u;++e){let r=a[e];r.hidden||(r.active&&h?o.push(r):r.draw(i,s))}for(e=0;e<o.length;++e)o[e].draw(i,s)}getStyle(e,i){let r=i?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){var n;let a;let s=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){let i=this._cachedMeta.data[e];(a=i.$context||(i.$context=hO(this.getContext(),{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"}))).parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else(a=this.$context||(this.$context=hO(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:n=this.index,index:n,mode:"default",type:"dataset"}))).dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!i,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){let n="active"===i,a=this._cachedDataOpts,s=e+"-"+i,o=a[s],l=this.enableOptionSharing&&ux(r);if(o)return cL(o,l);let u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),c=n?[`${e}Hover`,"hover",e,""]:[e,""],d=u.getOptionScopes(this.getDataset(),h),f=Object.keys(hd.elements[e]),p=u.resolveNamedOptions(d,f,()=>this.getContext(r,n,i),c);return p.$shared&&(p.$shared=l,a[s]=Object.freeze(cL(p,l))),p}_resolveAnimations(e,i,r){let n;let a=this.chart,s=this._cachedDataOpts,o=`animation-${i}`,l=s[o];if(l)return l;if(!1!==a.options.animation){let a=this.chart.config,s=a.datasetAnimationScopeKeys(this._type,i),o=a.getOptionScopes(this.getDataset(),s);n=a.createResolver(o,this.getContext(e,r,i))}let u=new cm(a,n&&n.animations);return n&&n._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||cT(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){let r=this.resolveDataElementOptions(e,i),n=this._sharedOptions,a=this.getSharedOptions(r),s=this.includeOptions(i,a)||a!==n;return this.updateSharedOptions(a,i,r),{sharedOptions:a,includeOptions:s}}updateElement(e,i,r,n){cT(n)?Object.assign(e,r):this._resolveAnimations(i,n).update(e,r)}updateSharedOptions(e,i,r){e&&!cT(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,n){e.active=n;let a=this.getStyle(i,n);this._resolveAnimations(i,r,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let i=this._data,r=this._cachedMeta.data;for(let[e,i,r]of this._syncList)this[e](i,r);this._syncList=[];let n=r.length,a=i.length,s=Math.min(a,n);s&&this.parse(0,s),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,i,r=!0){let n;let a=this._cachedMeta,s=a.data,o=e+i,l=e=>{for(e.length+=i,n=e.length-1;n>=o;n--)e[n]=e[n-i]};for(l(s),n=e;n<o;++n)s[n]=new this.dataElementType;this._parsing&&l(a._parsed),this.parse(e,i),r&&this.updateElements(s,e,i,"reset")}updateElements(e,i,r,n){}_removeElements(e,i){let r=this._cachedMeta;if(this._parsing){let n=r._parsed.splice(e,i);r._stacked&&cM(r,n)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[i,r,n]=e;this[i](r,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function cD(e,i,r,n){return ut(e)?function(e,i,r,n){let a=r.parse(e[0],n),s=r.parse(e[1],n),o=Math.min(a,s),l=Math.max(a,s),u=o,h=l;Math.abs(o)>Math.abs(l)&&(u=l,h=o),i[r.axis]=h,i._custom={barStart:u,barEnd:h,start:a,end:s,min:o,max:l}}(e,i,r,n):i[r.axis]=r.parse(e,n),i}function cE(e,i,r,n){let a,s,o,l;let u=e.iScale,h=e.vScale,c=u.getLabels(),d=u===h,f=[];for(a=r,s=r+n;a<s;++a)l=i[a],(o={})[u.axis]=d||u.parse(c[a],a),f.push(cD(l,o,h,a));return f}function cA(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function cP(e,i,r,n){var a;return e=n?cC(e=(a=e)===i?r:a===r?i:a,r,i):cC(e,i,r)}function cC(e,i,r){return"start"===e?i:"end"===e?r:e}class cI extends ck{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,n){return cE(e,i,r,n)}parseArrayData(e,i,r,n){return cE(e,i,r,n)}parseObjectData(e,i,r,n){let a,s,o,l;let{iScale:u,vScale:h}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,f="x"===u.axis?c:d,p="x"===h.axis?c:d,m=[];for(a=r,s=r+n;a<s;++a)l=i[a],(o={})[u.axis]=u.parse(uy(l,f),a),m.push(cD(uy(l,p),o,h,a));return m}updateRangeFromParsed(e,i,r,n){super.updateRangeFromParsed(e,i,r,n);let a=r._custom;a&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let{iScale:i,vScale:r}=this._cachedMeta,n=this.getParsed(e),a=n._custom,s=cA(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(n[r.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,n){let a="reset"===n,{index:s,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),u=o.isHorizontal(),h=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(i,n);for(let f=i;f<i+r;f++){let i=this.getParsed(f),r=a||ue(i[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,h),m=(i._stacks||{})[o.axis],_={horizontal:u,base:r.base,enableBorderRadius:!m||cA(i._custom)||s===m._top||s===m._bottom,x:u?r.head:p.center,y:u?p.center:r.head,height:u?p.size:Math.abs(r.size),width:u?Math.abs(r.size):p.size};d&&(_.options=c||this.resolveDataElementOptions(f,e[f].active?"active":n));let g=_.options||e[f].options;(function(e,i,r,n){let a,s,o,l,u,h=i.borderSkipped,c={};if(!h){e.borderSkipped=c;return}if(!0===h){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:d,end:f,reverse:p,top:m,bottom:_}=(e.horizontal?(a=e.base>e.x,s="left",o="right"):(a=e.base<e.y,s="bottom",o="top"),a?(l="end",u="start"):(l="start",u="end"),{start:s,end:o,reverse:a,top:l,bottom:u});"middle"===h&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?h=m:(r._bottom||0)===n?h=_:(c[cP(_,d,f,p)]=!0,h=m)),c[cP(h,d,f,p)]=!0,e.borderSkipped=c})(_,g,m,s),function(e,{inflateAmount:i},r){e.inflateAmount="auto"===i?1===r?.33:0:i}(_,g,h.ratio),this.updateElement(e[f],f,_,n)}}_getStacks(e,i){let{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=r.options.stacked,s=[],o=e=>{let r=e.controller.getParsed(i),n=r&&r[e.vScale.axis];if(ue(n)||isNaN(n))return!0};for(let r of n)if(!(void 0!==i&&o(r))&&((!1===a||-1===s.indexOf(r.stack)||void 0===a&&void 0===r.stack)&&s.push(r.stack),r.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,r){let n=this._getStacks(e,r),a=void 0!==i?n.indexOf(i):-1;return -1===a?n.length-1:a}_getRuler(){let e,i;let r=this.options,n=this._cachedMeta,a=n.iScale,s=[];for(e=0,i=n.data.length;e<i;++e)s.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));let o=r.barThickness;return{min:o||function(e){let i,r,n,a;let s=e.iScale,o=function(e,i){if(!e._cache.$bar){let r=e.getMatchingVisibleMetas(i),n=[];for(let i=0,a=r.length;i<a;i++)n=n.concat(r[i].controller.getAllParsedValues(e));e._cache.$bar=uJ(n.sort((e,i)=>e-i))}return e._cache.$bar}(s,e.type),l=s._length,u=()=>{32767!==n&&-32768!==n&&(ux(a)&&(l=Math.min(l,Math.abs(n-a)||l)),a=n)};for(i=0,r=o.length;i<r;++i)n=s.getPixelForValue(o[i]),u();for(i=0,a=void 0,r=s.ticks.length;i<r;++i)n=s.getPixelForTick(i),u();return l}(n),pixels:s,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:r.grouped,ratio:o?1:r.categoryPercentage*r.barPercentage}}_calculateBarValuePixels(e){let i,r;let{_cachedMeta:{vScale:n,_stacked:a,index:s},options:{base:o,minBarLength:l}}=this,u=o||0,h=this.getParsed(e),c=h._custom,d=cA(c),f=h[n.axis],p=0,m=a?this.applyStack(n,h,a):f;m!==f&&(p=m-f,m=f),d&&(f=c.barStart,m=c.barEnd-c.barStart,0!==f&&uC(f)!==uC(c.barEnd)&&(p=0),p+=f);let _=ue(o)||d?p:o,g=n.getPixelForValue(_);if(Math.abs(r=(i=this.chart.getDataVisibility(e)?n.getPixelForValue(p+m):g)-g)<l){var y;r=(0!==(y=r)?uC(y):(n.isHorizontal()?1:-1)*(n.min>=u?1:-1))*l,f===u&&(g-=r/2);let e=n.getPixelForDecimal(0),o=n.getPixelForDecimal(1);i=(g=Math.max(Math.min(g,Math.max(e,o)),Math.min(e,o)))+r,a&&!d&&(h._stacks[n.axis]._visualValues[s]=n.getValueForPixel(i)-n.getValueForPixel(g))}if(g===n.getPixelForValue(u)){let e=uC(r)*n.getLineWidthForValue(u)/2;g+=e,r-=e}return{size:r,base:g,head:i,center:i+r/2}}_calculateBarIndexPixels(e,i){let r,n;let a=i.scale,s=this.options,o=s.skipNull,l=ua(s.maxBarThickness,1/0);if(i.grouped){let a=o?this._getStackCount(e):i.stackCount,u="flex"===s.barThickness?function(e,i,r,n){let a=i.pixels,s=a[e],o=e>0?a[e-1]:null,l=e<a.length-1?a[e+1]:null,u=r.categoryPercentage;null===o&&(o=s-(null===l?i.end-i.start:l-s)),null===l&&(l=s+s-o);let h=s-(s-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/n,ratio:r.barPercentage,start:h}}(e,i,s,a):function(e,i,r,n){let a,s;let o=r.barThickness;return ue(o)?(a=i.min*r.categoryPercentage,s=r.barPercentage):(a=o*n,s=1),{chunk:a/n,ratio:s,start:i.pixels[e]-a/2}}(e,i,s,a),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);r=u.start+u.chunk*h+u.chunk/2,n=Math.min(l,u.chunk*u.ratio)}else r=a.getPixelForValue(this.getParsed(e)[a.axis],e),n=Math.min(l,i.min*i.ratio);return{base:r-n/2,head:r+n/2,center:r,size:n}}draw(){let e=this._cachedMeta,i=e.vScale,r=e.data,n=r.length,a=0;for(;a<n;++a)null!==this.getParsed(a)[i.axis]&&r[a].draw(this._ctx)}}class cO extends ck{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:n}}=e.legend.options;return i.labels.map((i,a)=>{let s=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){let r=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=r;else{let a,s,o=e=>+r[e];if(ui(r[e])){let{key:e="value"}=this._parsing;o=i=>+uy(r[i],e)}for(a=e,s=e+i;a<s;++a)n._parsed[a]=o(a)}}_getRotation(){return uY(this.options.rotation-90)}_getCircumference(){return uY(this.options.circumference)}_getRotationExtents(){let e=uT,i=-uT;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let n=this.chart.getDatasetMeta(r).controller,a=n._getRotation(),s=n._getCircumference();e=Math.min(e,a),i=Math.max(i,a+s)}return{rotation:e,circumference:i-e}}update(e){let{chartArea:i}=this.chart,r=this._cachedMeta,n=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-a)/2,0),o=Math.min(us(this.options.cutout,s),1),l=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:c,ratioY:d,offsetX:f,offsetY:p}=function(e,i,r){let n=1,a=1,s=0,o=0;if(i<uT){let l=e+i,u=Math.cos(e),h=Math.sin(e),c=Math.cos(l),d=Math.sin(l),f=(i,n,a)=>uV(i,e,l,!0)?1:Math.max(n,n*r,a,a*r),p=(i,n,a)=>uV(i,e,l,!0)?-1:Math.min(n,n*r,a,a*r),m=f(0,u,c),_=f(uD,h,d),g=p(uM,u,c),y=p(uM+uD,h,d);n=(m-g)/2,a=(_-y)/2,s=-(m+g)/2,o=-(_+y)/2}return{ratioX:n,ratioY:a,offsetX:s,offsetY:o}}(h,u,o),m=(i.width-a)/c,_=(i.height-a)/d,g=uo(this.options.radius,Math.max(Math.min(m,_)/2,0)),y=Math.max(g*o,0),v=(g-y)/this._getVisibleDatasetWeightTotal();this.offsetX=f*g,this.offsetY=p*g,r.total=this.calculateTotal(),this.outerRadius=g-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*l,0),this.updateElements(n,0,n.length,e)}_circumference(e,i){let r=this.options,n=this._cachedMeta,a=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/uT)}updateElements(e,i,r,n){let a;let s="reset"===n,o=this.chart,l=o.chartArea,u=o.options.animation,h=(l.left+l.right)/2,c=(l.top+l.bottom)/2,d=s&&u.animateScale,f=d?0:this.innerRadius,p=d?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(i,n),g=this._getRotation();for(a=0;a<i;++a)g+=this._circumference(a,s);for(a=i;a<i+r;++a){let i=this._circumference(a,s),r=e[a],o={x:h+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+i,circumference:i,outerRadius:p,innerRadius:f};_&&(o.options=m||this.resolveDataElementOptions(a,r.active?"active":n)),g+=i,this.updateElement(r,a,o,n)}}calculateTotal(){let e;let i=this._cachedMeta,r=i.data,n=0;for(e=0;e<r.length;e++){let a=i._parsed[e];null!==a&&!isNaN(a)&&this.chart.getDataVisibility(e)&&!r[e].hidden&&(n+=Math.abs(a))}return n}calculateCircumference(e){let i=this._cachedMeta.total;return i>0&&!isNaN(e)?Math.abs(e)/i*uT:0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=ha(i._parsed[e],r.options.locale);return{label:n[e]||"",value:a}}getMaxBorderWidth(e){let i,r,n,a,s,o=0,l=this.chart;if(!e){for(i=0,r=l.data.datasets.length;i<r;++i)if(l.isDatasetVisible(i)){e=(n=l.getDatasetMeta(i)).data,a=n.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)"inner"!==(s=a.resolveDataElementOptions(i)).borderAlign&&(o=Math.max(o,s.borderWidth||0,s.hoverBorderWidth||0));return o}getMaxOffset(e){let i=0;for(let r=0,n=e.length;r<n;++r){let e=this.resolveDataElementOptions(r);i=Math.max(i,e.offset||0,e.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(ua(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class cz extends ck{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:n}}=e.legend.options;return i.labels.map((i,a)=>{let s=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:n,lineWidth:s.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,n=r.data.labels||[],a=ha(i._parsed[e].r,r.options.locale);return{label:n[e]||"",value:a}}parseObjectData(e,i,r,n){return hW.bind(this)(e,i,r,n)}update(e){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){let e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,r)=>{let n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<i.min&&(i.min=n),n>i.max&&(i.max=n))}),i}_updateRadius(){let e=this.chart,i=e.chartArea,r=e.options,n=Math.max(Math.min(i.right-i.left,i.bottom-i.top)/2,0),a=Math.max(r.cutoutPercentage?n/100*r.cutoutPercentage:1,0),s=(n-a)/e.getVisibleDatasetCount();this.outerRadius=n-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,i,r,n){let a;let s="reset"===n,o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,c=u.yCenter,d=u.getIndexAngle(0)-.5*uM,f=d,p=360/this.countVisibleElements();for(a=0;a<i;++a)f+=this._computeAngle(a,n,p);for(a=i;a<i+r;a++){let i=e[a],r=f,m=f+this._computeAngle(a,n,p),_=o.getDataVisibility(a)?u.getDistanceFromCenterForValue(this.getParsed(a).r):0;f=m,s&&(l.animateScale&&(_=0),l.animateRotate&&(r=m=d));let g={x:h,y:c,innerRadius:0,outerRadius:_,startAngle:r,endAngle:m,options:this.resolveDataElementOptions(a,i.active?"active":n)};this.updateElement(i,a,g,n)}}countVisibleElements(){let e=this._cachedMeta,i=0;return e.data.forEach((e,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?uY(this.resolveDataElementOptions(e,i).angle||r):0}}var cR=Object.freeze({__proto__:null,BarController:cI,BubbleController:class extends ck{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,n){let a=super.parsePrimitiveData(e,i,r,n);for(let e=0;e<a.length;e++)a[e]._custom=this.resolveDataElementOptions(e+r).radius;return a}parseArrayData(e,i,r,n){let a=super.parseArrayData(e,i,r,n);for(let e=0;e<a.length;e++){let n=i[r+e];a[e]._custom=ua(n[2],this.resolveDataElementOptions(e+r).radius)}return a}parseObjectData(e,i,r,n){let a=super.parseObjectData(e,i,r,n);for(let e=0;e<a.length;e++){let n=i[r+e];a[e]._custom=ua(n&&n.r&&+n.r,this.resolveDataElementOptions(e+r).radius)}return a}getMaxOverflow(){let e=this._cachedMeta.data,i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=i,s=this.getParsed(e),o=n.getLabelForValue(s.x),l=a.getLabelForValue(s.y),u=s._custom;return{label:r[e]||"",value:"("+o+", "+l+(u?", "+u:"")+")"}}update(e){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,n){let a="reset"===n,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(i,n),h=s.axis,c=o.axis;for(let d=i;d<i+r;d++){let i=e[d],r=!a&&this.getParsed(d),f={},p=f[h]=a?s.getPixelForDecimal(.5):s.getPixelForValue(r[h]),m=f[c]=a?o.getBasePixel():o.getPixelForValue(r[c]);f.skip=isNaN(p)||isNaN(m),u&&(f.options=l||this.resolveDataElementOptions(d,i.active?"active":n),a&&(f.options.radius=0)),this.updateElement(i,d,f,n)}}resolveDataElementOptions(e,i){let r=this.getParsed(e),n=super.resolveDataElementOptions(e,i);n.$shared&&(n=Object.assign({},n,{$shared:!1}));let a=n.radius;return"active"!==i&&(n.radius=0),n.radius+=ua(r&&r._custom,a),n}},DoughnutController:cO,LineController:class extends ck{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let i=this._cachedMeta,{dataset:r,data:n=[],_dataset:a}=i,s=this.chart._animationsDisabled,{start:o,count:l}=u3(i,n,s);this._drawStart=o,this._drawCount=l,u4(i)&&(o=0,l=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=n;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:u},e),this.updateElements(n,o,l,e)}updateElements(e,i,r,n){let a="reset"===n,{iScale:s,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:c}=this._getSharedOptions(i,n),d=s.axis,f=o.axis,{spanGaps:p,segment:m}=this.options,_=uz(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||"none"===n,y=i+r,v=e.length,x=i>0&&this.getParsed(i-1);for(let r=0;r<v;++r){let p=e[r],v=g?p:{};if(r<i||r>=y){v.skip=!0;continue}let b=this.getParsed(r),w=ue(b[f]),M=v[d]=s.getPixelForValue(b[d],r),T=v[f]=a||w?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,b,l):b[f],r);v.skip=isNaN(M)||isNaN(T)||w,v.stop=r>0&&Math.abs(b[d]-x[d])>_,m&&(v.parsed=b,v.raw=u.data[r]),c&&(v.options=h||this.resolveDataElementOptions(r,p.active?"active":n)),g||this.updateElement(p,r,v,n),x=b}}getMaxOverflow(){let e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,n=e.data||[];return n.length?Math.max(r,n[0].size(this.resolveDataElementOptions(0)),n[n.length-1].size(this.resolveDataElementOptions(n.length-1)))/2:r}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}},PieController:class extends cO{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:cz,RadarController:class extends ck{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,n){return hW.bind(this)(e,i,r,n)}update(e){let i=this._cachedMeta,r=i.dataset,n=i.data||[],a=i.iScale.getLabels();if(r.points=n,"resize"!==e){let i=this.resolveDatasetElementOptions(e);this.options.showLine||(i.borderWidth=0);let s={_loop:!0,_fullLoop:a.length===n.length,options:i};this.updateElement(r,void 0,s,e)}this.updateElements(n,0,n.length,e)}updateElements(e,i,r,n){let a=this._cachedMeta.rScale,s="reset"===n;for(let o=i;o<i+r;o++){let i=e[o],r=this.resolveDataElementOptions(o,i.active?"active":n),l=a.getPointPositionForValue(o,this.getParsed(o).r),u=s?a.xCenter:l.x,h=s?a.yCenter:l.y,c={x:u,y:h,angle:l.angle,skip:isNaN(u)||isNaN(h),options:r};this.updateElement(i,o,c,n)}}},ScatterController:class extends ck{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:a}=i,s=this.getParsed(e),o=n.getLabelForValue(s.x),l=a.getLabelForValue(s.y);return{label:r[e]||"",value:"("+o+", "+l+")"}}update(e){let i=this._cachedMeta,{data:r=[]}=i,n=this.chart._animationsDisabled,{start:a,count:s}=u3(i,r,n);if(this._drawStart=a,this._drawCount=s,u4(i)&&(a=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:a,_dataset:s}=i;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!s._decimated,a.points=r;let o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(a,void 0,{animated:!n,options:o},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,a,s,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,n){let a="reset"===n,{iScale:s,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(i,n),c=this.getSharedOptions(h),d=this.includeOptions(n,c),f=s.axis,p=o.axis,{spanGaps:m,segment:_}=this.options,g=uz(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||a||"none"===n,v=i>0&&this.getParsed(i-1);for(let h=i;h<i+r;++h){let i=e[h],r=this.getParsed(h),m=y?i:{},x=ue(r[p]),b=m[f]=s.getPixelForValue(r[f],h),w=m[p]=a||x?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,r,l):r[p],h);m.skip=isNaN(b)||isNaN(w)||x,m.stop=h>0&&Math.abs(r[f]-v[f])>g,_&&(m.parsed=r,m.raw=u.data[h]),d&&(m.options=c||this.resolveDataElementOptions(h,i.active?"active":n)),y||this.updateElement(i,h,m,n),v=r}this.updateSharedOptions(c,n,h)}getMaxOverflow(){let e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let e=0;for(let r=i.length-1;r>=0;--r)e=Math.max(e,i[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}let r=e.dataset,n=r.options&&r.options.borderWidth||0;return i.length?Math.max(n,i[0].size(this.resolveDataElementOptions(0)),i[i.length-1].size(this.resolveDataElementOptions(i.length-1)))/2:n}}});function cY(){throw Error("This method is not implemented: Check that a complete date adapter is provided.")}class cF{static override(e){Object.assign(cF.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return cY()}parse(){return cY()}format(){return cY()}add(){return cY()}diff(){return cY()}startOf(){return cY()}endOf(){return cY()}}var cj={_date:cF};function cB(e,i,r,n,a){let s=e.getSortedVisibleDatasetMetas(),o=r[i];for(let e=0,r=s.length;e<r;++e){let{index:r,data:l}=s[e],{lo:u,hi:h}=function(e,i,r,n){let{controller:a,data:s,_sorted:o}=e,l=a._cachedMeta.iScale;if(l&&i===l.axis&&"r"!==i&&o&&s.length){let e=l._reversePixels?uq:uG;if(!n)return e(s,i,r);if(a._sharedOptions){let n=s[0],a="function"==typeof n.getRange&&n.getRange(i);if(a){let n=e(s,i,r-a),o=e(s,i,r+a);return{lo:n.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}(s[e],i,o,a);for(let e=u;e<=h;++e){let i=l[e];i.skip||n(i,r,e)}}}function cN(e,i,r,n,a){let s=[];return(a||e.isPointInArea(i))&&cB(e,r,i,function(r,o,l){(a||hy(r,e.chartArea,0))&&r.inRange(i.x,i.y,n)&&s.push({element:r,datasetIndex:o,index:l})},!0),s}function cH(e,i,r,n,a,s){let o;return s||e.isPointInArea(i)?"r"!==r||n?function(e,i,r,n,a,s){let o=[],l=function(e){let i=-1!==e.indexOf("x"),r=-1!==e.indexOf("y");return function(e,n){return Math.sqrt(Math.pow(i?Math.abs(e.x-n.x):0,2)+Math.pow(r?Math.abs(e.y-n.y):0,2))}}(r),u=Number.POSITIVE_INFINITY;return cB(e,r,i,function(r,h,c){let d=r.inRange(i.x,i.y,a);if(n&&!d)return;let f=r.getCenterPoint(a);if(!(s||e.isPointInArea(f))&&!d)return;let p=l(i,f);p<u?(o=[{element:r,datasetIndex:h,index:c}],u=p):p===u&&o.push({element:r,datasetIndex:h,index:c})}),o}(e,i,r,n,a,s):(o=[],cB(e,r,i,function(e,r,n){let{startAngle:s,endAngle:l}=e.getProps(["startAngle","endAngle"],a),{angle:u}=uj(e,{x:i.x,y:i.y});uV(u,s,l)&&o.push({element:e,datasetIndex:r,index:n})}),o):[]}function cV(e,i,r,n,a){let s=[],o="x"===r?"inXRange":"inYRange",l=!1;return(cB(e,r,i,(e,n,u)=>{e[o](i[r],a)&&(s.push({element:e,datasetIndex:n,index:u}),l=l||e.inRange(i.x,i.y,a))}),n&&!l)?[]:s}var cU={modes:{index(e,i,r,n){let a=h4(i,e),s=r.axis||"x",o=r.includeInvisible||!1,l=r.intersect?cN(e,a,s,n,o):cH(e,a,s,!1,n,o),u=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{let i=l[0].index,r=e.data[i];r&&!r.skip&&u.push({element:r,datasetIndex:e.index,index:i})}),u):[]},dataset(e,i,r,n){let a=h4(i,e),s=r.axis||"xy",o=r.includeInvisible||!1,l=r.intersect?cN(e,a,s,n,o):cH(e,a,s,!1,n,o);if(l.length>0){let i=l[0].datasetIndex,r=e.getDatasetMeta(i).data;l=[];for(let e=0;e<r.length;++e)l.push({element:r[e],datasetIndex:i,index:e})}return l},point(e,i,r,n){let a=h4(i,e);return cN(e,a,r.axis||"xy",n,r.includeInvisible||!1)},nearest(e,i,r,n){let a=h4(i,e),s=r.axis||"xy",o=r.includeInvisible||!1;return cH(e,a,s,r.intersect,n,o)},x(e,i,r,n){let a=h4(i,e);return cV(e,a,"x",r.intersect,n)},y(e,i,r,n){let a=h4(i,e);return cV(e,a,"y",r.intersect,n)}}};let c$=["left","top","right","bottom"];function cW(e,i){return e.filter(e=>e.pos===i)}function cG(e,i){return e.filter(e=>-1===c$.indexOf(e.pos)&&e.box.axis===i)}function cq(e,i){return e.sort((e,r)=>{let n=i?r:e,a=i?e:r;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function cZ(e,i,r,n){return Math.max(e[r],i[r])+Math.max(e[n],i[n])}function cX(e,i){e.top=Math.max(e.top,i.top),e.left=Math.max(e.left,i.left),e.bottom=Math.max(e.bottom,i.bottom),e.right=Math.max(e.right,i.right)}function cJ(e,i,r,n){let a,s,o,l,u,h;let c=[];for(a=0,s=e.length,u=0;a<s;++a){(l=(o=e[a]).box).update(o.width||i.w,o.height||i.h,function(e,i){let r=i.maxPadding;return function(e){let n={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{n[e]=Math.max(i[e],r[e])}),n}(e?["left","right"]:["top","bottom"])}(o.horizontal,i));let{same:s,other:d}=function(e,i,r,n){let{pos:a,box:s}=r,o=e.maxPadding;if(!ui(a)){r.size&&(e[a]-=r.size);let i=n[r.stack]||{size:0,count:1};i.size=Math.max(i.size,r.horizontal?s.height:s.width),r.size=i.size/i.count,e[a]+=r.size}s.getPadding&&cX(o,s.getPadding());let l=Math.max(0,i.outerWidth-cZ(o,e,"left","right")),u=Math.max(0,i.outerHeight-cZ(o,e,"top","bottom")),h=l!==e.w,c=u!==e.h;return e.w=l,e.h=u,r.horizontal?{same:h,other:c}:{same:c,other:h}}(i,r,o,n);u|=s&&c.length,h=h||d,l.fullSize||c.push(o)}return u&&cJ(c,i,r,n)||h}function cK(e,i,r,n,a){e.top=r,e.left=i,e.right=i+n,e.bottom=r+a,e.width=n,e.height=a}function cQ(e,i,r,n){let a=r.padding,{x:s,y:o}=i;for(let l of e){let e=l.box,u=n[l.stack]||{count:1,placed:0,weight:1},h=l.stackWeight/u.weight||1;if(l.horizontal){let n=i.w*h,s=u.size||e.height;ux(u.start)&&(o=u.start),e.fullSize?cK(e,a.left,o,r.outerWidth-a.right-a.left,s):cK(e,i.left+u.placed,o,n,s),u.start=o,u.placed+=n,o=e.bottom}else{let n=i.h*h,o=u.size||e.width;ux(u.start)&&(s=u.start),e.fullSize?cK(e,s,a.top,o,r.outerHeight-a.bottom-a.top):cK(e,s,i.top+u.placed,o,n),u.start=s,u.placed+=n,s=e.right}}i.x=s,i.y=o}var c0={addBox(e,i){e.boxes||(e.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(e){i.draw(e)}}]},e.boxes.push(i)},removeBox(e,i){let r=e.boxes?e.boxes.indexOf(i):-1;-1!==r&&e.boxes.splice(r,1)},configure(e,i,r){i.fullSize=r.fullSize,i.position=r.position,i.weight=r.weight},update(e,i,r,n){if(!e)return;let a=hP(e.options.layout.padding),s=Math.max(i-a.width,0),o=Math.max(r-a.height,0),l=function(e){let i=function(e){let i,r,n,a,s,o;let l=[];for(i=0,r=(e||[]).length;i<r;++i)n=e[i],({position:a,options:{stack:s,stackWeight:o=1}}=n),l.push({index:i,box:n,pos:a,horizontal:n.isHorizontal(),weight:n.weight,stack:s&&a+s,stackWeight:o});return l}(e),r=cq(i.filter(e=>e.box.fullSize),!0),n=cq(cW(i,"left"),!0),a=cq(cW(i,"right")),s=cq(cW(i,"top"),!0),o=cq(cW(i,"bottom")),l=cG(i,"x"),u=cG(i,"y");return{fullSize:r,leftAndTop:n.concat(s),rightAndBottom:a.concat(u).concat(o).concat(l),chartArea:cW(i,"chartArea"),vertical:n.concat(a).concat(u),horizontal:s.concat(o).concat(l)}}(e.boxes),u=l.vertical,h=l.horizontal;uu(e.boxes,e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()});let c=Object.freeze({outerWidth:i,outerHeight:r,padding:a,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/(u.reduce((e,i)=>i.box.options&&!1===i.box.options.display?e:e+1,0)||1),hBoxMaxHeight:o/2}),d=Object.assign({},a);cX(d,hP(n));let f=Object.assign({maxPadding:d,w:s,h:o,x:a.left,y:a.top},a),p=function(e,i){let r,n,a;let s=function(e){let i={};for(let r of e){let{stack:e,pos:n,stackWeight:a}=r;if(!e||!c$.includes(n))continue;let s=i[e]||(i[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return i}(e),{vBoxMaxWidth:o,hBoxMaxHeight:l}=i;for(r=0,n=e.length;r<n;++r){let{fullSize:n}=(a=e[r]).box,u=s[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*o:n&&i.availableWidth,a.height=l):(a.width=o,a.height=h?h*l:n&&i.availableHeight)}return s}(u.concat(h),c);cJ(l.fullSize,f,c,p),cJ(u,f,c,p),cJ(h,f,c,p)&&cJ(u,f,c,p),function(e){let i=e.maxPadding;function r(r){let n=Math.max(i[r]-e[r],0);return e[r]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}(f),cQ(l.leftAndTop,f,c,p),f.x+=f.w,f.y+=f.h,cQ(l.rightAndBottom,f,c,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},uu(l.chartArea,i=>{let r=i.box;Object.assign(r,e.chartArea),r.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class c1{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,r){}removeEventListener(e,i,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,r,n){return i=Math.max(0,i||e.width),r=r||e.height,{width:i,height:Math.max(0,n?Math.floor(i/n):r)}}isAttached(e){return!0}updateConfig(e){}}class c2 extends c1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}let c3="$chartjs",c4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},c5=e=>null===e||""===e,c6=!!h8&&{passive:!0};function c8(e,i){for(let r of e)if(r===i||r.contains(i))return!0}function c7(e,i,r){let n=e.canvas,a=new MutationObserver(e=>{let i=!1;for(let r of e)i=(i=i||c8(r.addedNodes,n))&&!c8(r.removedNodes,n);i&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function c9(e,i,r){let n=e.canvas,a=new MutationObserver(e=>{let i=!1;for(let r of e)i=(i=i||c8(r.removedNodes,n))&&!c8(r.addedNodes,n);i&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}let de=new Map,dt=0;function di(){let e=window.devicePixelRatio;e!==dt&&(dt=e,de.forEach((i,r)=>{r.currentDevicePixelRatio!==e&&i()}))}function dr(e,i,r){let n=e.canvas,a=n&&hK(n);if(!a)return;let s=uQ((e,i)=>{let n=a.clientWidth;r(e,i),n<a.clientWidth&&r()},window),o=new ResizeObserver(e=>{let i=e[0],r=i.contentRect.width,n=i.contentRect.height;(0!==r||0!==n)&&s(r,n)});return o.observe(a),de.size||window.addEventListener("resize",di),de.set(e,s),o}function dn(e,i,r){r&&r.disconnect(),"resize"===i&&(de.delete(e),de.size||window.removeEventListener("resize",di))}function da(e,i,r){let n=e.canvas,a=uQ(i=>{null!==e.ctx&&r(function(e,i){let r=c4[e.type]||e.type,{x:n,y:a}=h4(e,i);return{type:r,chart:i,native:e,x:void 0!==n?n:null,y:void 0!==a?a:null}}(i,e))},e);return n&&n.addEventListener(i,a,c6),a}class ds extends c1{acquireContext(e,i){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(function(e,i){let r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[c3]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",c5(a)){let i=h7(e,"width");void 0!==i&&(e.width=i)}if(c5(n)){if(""===e.style.height)e.height=e.width/(i||2);else{let i=h7(e,"height");void 0!==i&&(e.height=i)}}}(e,i),r):null}releaseContext(e){let i=e.canvas;if(!i[c3])return!1;let r=i[c3].initial;["height","width"].forEach(e=>{let n=r[e];ue(n)?i.removeAttribute(e):i.setAttribute(e,n)});let n=r.style||{};return Object.keys(n).forEach(e=>{i.style[e]=n[e]}),i.width=i.width,delete i[c3],!0}addEventListener(e,i,r){this.removeEventListener(e,i);let n=e.$proxies||(e.$proxies={}),a={attach:c7,detach:c9,resize:dr}[i]||da;n[i]=a(e,i,r)}removeEventListener(e,i){let r=e.$proxies||(e.$proxies={}),n=r[i];n&&((({attach:dn,detach:dn,resize:dn})[i]||function(e,i,r){e&&e.canvas&&e.canvas.removeEventListener(i,r,c6)})(e,i,n),r[i]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,r,n){return function(e,i,r,n){let a=h0(e),s=h2(a,"margin"),o=hQ(a.maxWidth,e,"clientWidth")||uS,l=hQ(a.maxHeight,e,"clientHeight")||uS,u=function(e,i,r){let n,a;if(void 0===i||void 0===r){let s=hK(e);if(s){let e=s.getBoundingClientRect(),o=h0(s),l=h2(o,"border","width"),u=h2(o,"padding");i=e.width-u.width-l.width,r=e.height-u.height-l.height,n=hQ(o.maxWidth,s,"clientWidth"),a=hQ(o.maxHeight,s,"clientHeight")}else i=e.clientWidth,r=e.clientHeight}return{width:i,height:r,maxWidth:n||uS,maxHeight:a||uS}}(e,i,r),{width:h,height:c}=u;if("content-box"===a.boxSizing){let e=h2(a,"border","width"),i=h2(a,"padding");h-=i.width+e.width,c-=i.height+e.height}return h=Math.max(0,h-s.width),c=Math.max(0,n?h/n:c-s.height),h=h5(Math.min(h,o,u.maxWidth)),c=h5(Math.min(c,l,u.maxHeight)),h&&!c&&(c=h5(h/2)),(void 0!==i||void 0!==r)&&n&&u.height&&c>u.height&&(h=h5(Math.floor((c=u.height)*n))),{width:h,height:c}}(e,i,r,n)}isAttached(e){let i=hK(e);return!!(i&&i.isConnected)}}class dl{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}hasValue(){return uz(this.x)&&uz(this.y)}getProps(e,i){let r=this.$animations;if(!i||!r)return this;let n={};return e.forEach(e=>{n[e]=r[e]&&r[e].active()?r[e]._to:this[e]}),n}}function du(e,i,r,n,a){let s,o,l;let u=ua(n,0),h=Math.min(ua(a,e.length),e.length),c=0;for(r=Math.ceil(r),a&&(r=(s=a-n)/Math.floor(s/r)),l=u;l<0;)l=Math.round(u+ ++c*r);for(o=Math.max(u,0);o<h;o++)o===l&&(i.push(e[o]),l=Math.round(u+ ++c*r))}let dh=e=>"left"===e?"right":"right"===e?"left":e,dc=(e,i,r)=>"top"===i||"left"===i?e[i]+r:e[i]-r,dd=(e,i)=>Math.min(i||e,e);function df(e,i){let r=[],n=e.length/i,a=e.length,s=0;for(;s<a;s+=n)r.push(e[Math.floor(s)]);return r}function dp(e){return e.drawTicks?e.tickLength:0}function dm(e,i){if(!e.display)return 0;let r=hC(e.font,i),n=hP(e.padding);return(ut(e.text)?e.text.length:1)*r.lineHeight+n.height}class d_ extends dl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:r,_suggestedMax:n}=this;return e=un(e,Number.POSITIVE_INFINITY),i=un(i,Number.NEGATIVE_INFINITY),r=un(r,Number.POSITIVE_INFINITY),n=un(n,Number.NEGATIVE_INFINITY),{min:un(e,r),max:un(i,n),minDefined:ur(e),maxDefined:ur(i)}}getMinMax(e){let i,{min:r,max:n,minDefined:a,maxDefined:s}=this.getUserBounds();if(a&&s)return{min:r,max:n};let o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)i=o[l].controller.getMinMax(this,e),a||(r=Math.min(r,i.min)),s||(n=Math.max(n,i.max));return r=s&&r>n?n:r,n=a&&r>n?r:n,{min:un(r,un(n,r)),max:un(n,un(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ul(this.options.beforeUpdate,[this])}update(e,i,r){let{beginAtZero:n,grace:a,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,i,r){let{min:n,max:a}=e,s=uo(i,(a-n)/2),o=(e,i)=>r&&0===e?0:e+i;return{min:o(n,-Math.abs(s)),max:o(a,s)}}(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=o<this.ticks.length;this._convertTicksToLabels(l?df(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=function(e,i){let r=e.options.ticks,n=function(e){let i=e.options.offset,r=e._tickSize();return Math.floor(Math.min(e._length/r+(i?0:1),e._maxLength/r))}(e),a=Math.min(r.maxTicksLimit||n,n),s=r.major.enabled?function(e){let i,r;let n=[];for(i=0,r=e.length;i<r;i++)e[i].major&&n.push(i);return n}(i):[],o=s.length,l=s[0],u=s[o-1],h=[];if(o>a)return function(e,i,r,n){let a,s=0,o=r[0];for(a=0,n=Math.ceil(n);a<e.length;a++)a===o&&(i.push(e[a]),o=r[++s*n])}(i,h,s,o/a),h;let c=function(e,i,r){let n=function(e){let i,r;let n=e.length;if(n<2)return!1;for(r=e[0],i=1;i<n;++i)if(e[i]-e[i-1]!==r)return!1;return r}(e),a=i.length/r;if(!n)return Math.max(a,1);let s=function(e){let i;let r=[],n=Math.sqrt(e);for(i=1;i<n;i++)e%i==0&&(r.push(i),r.push(e/i));return n===(0|n)&&r.push(n),r.sort((e,i)=>e-i).pop(),r}(n);for(let e=0,i=s.length-1;e<i;e++){let i=s[e];if(i>a)return i}return Math.max(a,1)}(s,i,a);if(o>0){let e,r;let n=o>1?Math.round((u-l)/(o-1)):null;for(du(i,h,c,ue(n)?0:l-n,l),e=0,r=o-1;e<r;e++)du(i,h,c,s[e],s[e+1]);return du(i,h,c,u,ue(n)?i.length:u+n),h}return du(i,h,c),h}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,i,r=this.options.reverse;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,r=!r),this._startPixel=e,this._endPixel=i,this._reversePixels=r,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ul(this.options.afterUpdate,[this])}beforeSetDimensions(){ul(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ul(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ul(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ul(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let i,r,n;let a=this.options.ticks;for(i=0,r=e.length;i<r;i++)(n=e[i]).label=ul(a.callback,[n.value,i,e],this)}afterTickToLabelConversion(){ul(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ul(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e,i,r;let n=this.options,a=n.ticks,s=dd(this.ticks.length,n.ticks.maxTicksLimit),o=a.minRotation||0,l=a.maxRotation,u=o;if(!this._isVisible()||!a.display||o>=l||s<=1||!this.isHorizontal()){this.labelRotation=o;return}let h=this._getLabelSizes(),c=h.widest.width,d=h.highest.height,f=uU(this.chart.width-c,0,this.maxWidth);c+6>(e=n.offset?this.maxWidth/s:f/(s-1))&&(e=f/(s-(n.offset?.5:1)),i=this.maxHeight-dp(n.grid)-a.padding-dm(n.title,this.chart.options.font),r=Math.sqrt(c*c+d*d),u=Math.max(o,Math.min(l,u=180/uM*Math.min(Math.asin(uU((h.highest.height+6)/e,-1,1)),Math.asin(uU(i/r,-1,1))-Math.asin(uU(d/r,-1,1)))))),this.labelRotation=u}afterCalculateLabelRotation(){ul(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ul(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:i,options:{ticks:r,title:n,grid:a}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){let s=dm(n,i.options.font);if(o?(e.width=this.maxWidth,e.height=dp(a)+s):(e.height=this.maxHeight,e.width=dp(a)+s),r.display&&this.ticks.length){let{first:i,last:n,widest:a,highest:s}=this._getLabelSizes(),l=2*r.padding,u=uY(this.labelRotation),h=Math.cos(u),c=Math.sin(u);if(o){let i=r.mirror?0:c*a.width+h*s.height;e.height=Math.min(this.maxHeight,e.height+i+l)}else{let i=r.mirror?0:h*a.width+c*s.height;e.width=Math.min(this.maxWidth,e.width+i+l)}this._calculatePadding(i,n,c,h)}}this._handleMargins(),o?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,r,n){let{ticks:{align:a,padding:s},position:o}=this.options,l=0!==this.labelRotation,u="top"!==o&&"x"===this.axis;if(this.isHorizontal()){let o=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),c=0,d=0;l?u?(c=n*e.width,d=r*i.height):(c=r*e.height,d=n*i.width):"start"===a?d=i.width:"end"===a?c=e.width:"inner"!==a&&(c=e.width/2,d=i.width/2),this.paddingLeft=Math.max((c-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-h+s)*this.width/(this.width-h),0)}else{let r=i.height/2,n=e.height/2;"start"===a?(r=0,n=e.height):"end"===a&&(r=i.height,n=0),this.paddingTop=r+s,this.paddingBottom=n+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ul(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:i}=this.options;return"top"===i||"bottom"===i||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let i,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),i=0,r=e.length;i<r;i++)ue(e[i].label)&&(e.splice(i,1),r--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let i=this.options.ticks.sampleSize,r=this.ticks;i<r.length&&(r=df(r,i)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,r){let n,a,s,o,l,u,h,c,d,f,p;let{ctx:m,_longestTextCache:_}=this,g=[],y=[],v=Math.floor(i/dd(i,r)),x=0,b=0;for(n=0;n<i;n+=v){if(o=e[n].label,l=this._resolveTickFontOptions(n),m.font=u=l.string,h=_[u]=_[u]||{data:{},gc:[]},c=l.lineHeight,d=f=0,ue(o)||ut(o)){if(ut(o))for(a=0,s=o.length;a<s;++a)ue(p=o[a])||ut(p)||(d=hf(m,h.data,h.gc,d,p),f+=c)}else d=hf(m,h.data,h.gc,d,o),f=c;g.push(d),y.push(f),x=Math.max(d,x),b=Math.max(f,b)}uu(_,e=>{let r;let n=e.gc,a=n.length/2;if(a>i){for(r=0;r<a;++r)delete e.data[n[r]];n.splice(0,a)}});let w=g.indexOf(x),M=y.indexOf(b),T=e=>({width:g[e]||0,height:y[e]||0});return{first:T(0),last:T(i-1),widest:T(w),highest:T(M),widths:g,heights:y}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){let i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let i=this._startPixel+e*this._length;return uU(this._alignToPixels?hp(this.chart,i,0):i,-32768,32767)}getDecimalForPixel(e){let i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){let i=this.ticks||[];if(e>=0&&e<i.length){let r=i[e];return r.$context||(r.$context=hO(this.getContext(),{tick:r,index:e,type:"tick"}))}return this.$context||(this.$context=hO(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){let e=this.options.ticks,i=uY(this.labelRotation),r=Math.abs(Math.cos(i)),n=Math.abs(Math.sin(i)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,o=a?a.widest.width+s:0,l=a?a.highest.height+s:0;return this.isHorizontal()?l*r>o*n?o/r:l/n:l*n<o*r?l/r:o/n}_isVisible(){let e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let i,r,n,a,s,o,l,u,h,c,d,f;let p=this.axis,m=this.chart,_=this.options,{grid:g,position:y,border:v}=_,x=g.offset,b=this.isHorizontal(),w=this.ticks.length+(x?1:0),M=dp(g),T=[],L=v.setContext(this.getContext()),S=L.display?L.width:0,k=S/2,D=function(e){return hp(m,e,S)};if("top"===y)i=D(this.bottom),o=this.bottom-M,u=i-k,c=D(e.top)+k,f=e.bottom;else if("bottom"===y)i=D(this.top),c=e.top,f=D(e.bottom)-k,o=i+k,u=this.top+M;else if("left"===y)i=D(this.right),s=this.right-M,l=i-k,h=D(e.left)+k,d=e.right;else if("right"===y)i=D(this.left),h=e.left,d=D(e.right)-k,s=i+k,l=this.left+M;else if("x"===p){if("center"===y)i=D((e.top+e.bottom)/2+.5);else if(ui(y)){let e=Object.keys(y)[0],r=y[e];i=D(this.chart.scales[e].getPixelForValue(r))}c=e.top,f=e.bottom,u=(o=i+k)+M}else if("y"===p){if("center"===y)i=D((e.left+e.right)/2);else if(ui(y)){let e=Object.keys(y)[0],r=y[e];i=D(this.chart.scales[e].getPixelForValue(r))}l=(s=i-k)-M,h=e.left,d=e.right}let E=ua(_.ticks.maxTicksLimit,w),A=Math.max(1,Math.ceil(w/E));for(r=0;r<w;r+=A){let e=this.getContext(r),i=g.setContext(e),p=v.setContext(e),_=i.lineWidth,y=i.color,w=p.dash||[],M=p.dashOffset,L=i.tickWidth,S=i.tickColor,k=i.tickBorderDash||[],D=i.tickBorderDashOffset;void 0!==(n=function(e,i,r){let n;let a=e.ticks.length,s=Math.min(i,a-1),o=e._startPixel,l=e._endPixel,u=e.getPixelForTick(s);if(!r||(n=1===a?Math.max(u-o,l-u):0===i?(e.getPixelForTick(1)-u)/2:(u-e.getPixelForTick(s-1))/2,!((u+=s<i?n:-n)<o-1e-6)&&!(u>l+1e-6)))return u}(this,r,x))&&(a=hp(m,n,_),b?s=l=h=d=a:o=u=c=f=a,T.push({tx1:s,ty1:o,tx2:l,ty2:u,x1:h,y1:c,x2:d,y2:f,width:_,color:y,borderDash:w,borderDashOffset:M,tickWidth:L,tickColor:S,tickBorderDash:k,tickBorderDashOffset:D}))}return this._ticksLength=w,this._borderValue=i,T}_computeLabelItems(e){let i,r,n,a,s,o,l,u,h,c,d;let f=this.axis,p=this.options,{position:m,ticks:_}=p,g=this.isHorizontal(),y=this.ticks,{align:v,crossAlign:x,padding:b,mirror:w}=_,M=dp(p.grid),T=M+b,L=w?-b:T,S=-uY(this.labelRotation),k=[],D="middle";if("top"===m)s=this.bottom-L,o=this._getXAxisLabelAlignment();else if("bottom"===m)s=this.top+L,o=this._getXAxisLabelAlignment();else if("left"===m){let e=this._getYAxisLabelAlignment(M);o=e.textAlign,a=e.x}else if("right"===m){let e=this._getYAxisLabelAlignment(M);o=e.textAlign,a=e.x}else if("x"===f){if("center"===m)s=(e.top+e.bottom)/2+T;else if(ui(m)){let e=Object.keys(m)[0],i=m[e];s=this.chart.scales[e].getPixelForValue(i)+T}o=this._getXAxisLabelAlignment()}else if("y"===f){if("center"===m)a=(e.left+e.right)/2-T;else if(ui(m)){let e=Object.keys(m)[0],i=m[e];a=this.chart.scales[e].getPixelForValue(i)}o=this._getYAxisLabelAlignment(M).textAlign}"y"===f&&("start"===v?D="top":"end"===v&&(D="bottom"));let E=this._getLabelSizes();for(i=0,r=y.length;i<r;++i){let e;n=y[i].label;let f=_.setContext(this.getContext(i));l=this.getPixelForTick(i)+_.labelOffset,h=(u=this._resolveTickFontOptions(i)).lineHeight;let p=(c=ut(n)?n.length:1)/2,v=f.color,b=f.textStrokeColor,M=f.textStrokeWidth,T=o;if(g?(a=l,"inner"===o&&(T=i===r-1?this.options.reverse?"left":"right":0===i?this.options.reverse?"right":"left":"center"),d="top"===m?"near"===x||0!==S?-c*h+h/2:"center"===x?-E.highest.height/2-p*h+h:-E.highest.height+h/2:"near"===x||0!==S?h/2:"center"===x?E.highest.height/2-p*h:E.highest.height-c*h,w&&(d*=-1),0===S||f.showLabelBackdrop||(a+=h/2*Math.sin(S))):(s=l,d=(1-c)*h/2),f.showLabelBackdrop){let n=hP(f.backdropPadding),a=E.heights[i],s=E.widths[i],l=d-n.top,u=0-n.left;switch(D){case"middle":l-=a/2;break;case"bottom":l-=a}switch(o){case"center":u-=s/2;break;case"right":u-=s;break;case"inner":i===r-1?u-=s:i>0&&(u-=s/2)}e={left:u,top:l,width:s+n.width,height:a+n.height,color:f.backdropColor}}k.push({label:n,font:u,textOffset:d,options:{rotation:S,color:v,strokeColor:b,strokeWidth:M,textAlign:T,textBaseline:D,translation:[a,s],backdrop:e}})}return k}_getXAxisLabelAlignment(){let{position:e,ticks:i}=this.options;if(-uY(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===i.align?r="left":"end"===i.align?r="right":"inner"===i.align&&(r="inner"),r}_getYAxisLabelAlignment(e){let i,r;let{position:n,ticks:{crossAlign:a,mirror:s,padding:o}}=this.options,l=this._getLabelSizes(),u=e+o,h=l.widest.width;return"left"===n?s?(r=this.right+o,"near"===a?i="left":"center"===a?(i="center",r+=h/2):(i="right",r+=h)):(r=this.right-u,"near"===a?i="right":"center"===a?(i="center",r-=h/2):(i="left",r=this.left)):"right"===n?s?(r=this.left+o,"near"===a?i="right":"center"===a?(i="center",r-=h/2):(i="left",r-=h)):(r=this.left+u,"near"===a?i="left":"center"===a?(i="center",r+=h/2):(i="right",r=this.right)):i="right",{textAlign:i,x:r}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,i=this.options.position;return"left"===i||"right"===i?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===i||"bottom"===i?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){let{ctx:e,options:{backgroundColor:i},left:r,top:n,width:a,height:s}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(r,n,a,s),e.restore())}getLineWidthForValue(e){let i=this.options.grid;if(!this._isVisible()||!i.display)return 0;let r=this.ticks.findIndex(i=>i.value===e);return r>=0?i.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let i,r;let n=this.options.grid,a=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o=(e,i,r)=>{r.width&&r.color&&(a.save(),a.lineWidth=r.width,a.strokeStyle=r.color,a.setLineDash(r.borderDash||[]),a.lineDashOffset=r.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(i.x,i.y),a.stroke(),a.restore())};if(n.display)for(i=0,r=s.length;i<r;++i){let e=s[i];n.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),n.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){let e,i,r,n;let{chart:a,ctx:s,options:{border:o,grid:l}}=this,u=o.setContext(this.getContext()),h=o.display?u.width:0;if(!h)return;let c=l.setContext(this.getContext(0)).lineWidth,d=this._borderValue;this.isHorizontal()?(e=hp(a,this.left,h)-h/2,i=hp(a,this.right,c)+c/2,r=n=d):(r=hp(a,this.top,h)-h/2,n=hp(a,this.bottom,c)+c/2,e=i=d),s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.beginPath(),s.moveTo(e,r),s.lineTo(i,n),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();for(let n of(r&&hv(i,r),this.getLabelItems(e))){let e=n.options,r=n.font;hM(i,n.label,0,n.textOffset,r,e)}r&&hx(i)}drawTitle(){let e;let{ctx:i,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;let s=hC(n.font),o=hP(n.padding),l=n.align,u=s.lineHeight/2;"bottom"===r||"center"===r||ui(r)?(u+=o.bottom,ut(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=o.top;let{titleX:h,titleY:c,maxWidth:d,rotation:f}=function(e,i,r,n){let a,s,o;let{top:l,left:u,bottom:h,right:c,chart:d}=e,{chartArea:f,scales:p}=d,m=0,_=h-l,g=c-u;if(e.isHorizontal()){if(s=u1(n,u,c),ui(r)){let e=Object.keys(r)[0],n=r[e];o=p[e].getPixelForValue(n)+_-i}else o="center"===r?(f.bottom+f.top)/2+_-i:dc(e,r,i);a=c-u}else{if(ui(r)){let e=Object.keys(r)[0],n=r[e];s=p[e].getPixelForValue(n)-g+i}else s="center"===r?(f.left+f.right)/2-g+i:dc(e,r,i);o=u1(n,h,l),m="left"===r?-uD:uD}return{titleX:s,titleY:o,maxWidth:a,rotation:m}}(this,u,r,l);hM(i,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:f,textAlign:(e=u0(l),(a&&"right"!==r||!a&&"right"===r)&&(e=dh(e)),e),textBaseline:"middle",translation:[h,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,i=e.ticks&&e.ticks.z||0,r=ua(e.grid&&e.grid.z,-1),n=ua(e.border&&e.border.z,0);return this._isVisible()&&this.draw===d_.prototype.draw?[{z:r,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:i,draw:e=>{this.drawLabels(e)}}]:[{z:i,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){let i,r;let n=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",s=[];for(i=0,r=n.length;i<r;++i){let r=n[i];r[a]!==this.id||e&&r.type!==e||s.push(r)}return s}_resolveTickFontOptions(e){return hC(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dg{constructor(e,i,r){this.type=e,this.scope=i,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let i;let r=Object.getPrototypeOf(e);"id"in r&&"defaults"in r&&(i=this.register(r));let n=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw Error("class does not have id: "+e);return a in n||(n[a]=e,function(e,i,r){let n=up(Object.create(null),[r?hd.get(r):{},hd.get(i),e.defaults]);hd.set(i,n),e.defaultRoutes&&function(e,i){Object.keys(i).forEach(r=>{let n=r.split("."),a=n.pop(),s=[e].concat(n).join("."),o=i[r].split("."),l=o.pop(),u=o.join(".");hd.route(s,a,u,l)})}(i,e.defaultRoutes),e.descriptors&&hd.describe(i,e.descriptors)}(e,s,i),this.override&&hd.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let i=this.items,r=e.id,n=this.scope;r in i&&delete i[r],n&&r in hd[n]&&(delete hd[n][r],this.override&&delete hl[r])}}var dy=new class{constructor(){this.controllers=new dg(ck,"datasets",!0),this.elements=new dg(dl,"elements"),this.plugins=new dg(Object,"plugins"),this.scales=new dg(d_,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,r){[...i].forEach(i=>{let n=r||this._getRegistryForType(i);r||n.isForType(i)||n===this.plugins&&i.id?this._exec(e,n,i):uu(i,i=>{let n=r||this._getRegistryForType(i);this._exec(e,n,i)})})}_exec(e,i,r){let n=uv(e);ul(r["before"+n],[],r),i[e](r),ul(r["after"+n],[],r)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){let r=this._typedRegistries[i];if(r.isForType(e))return r}return this.plugins}_get(e,i,r){let n=i.get(e);if(void 0===n)throw Error('"'+e+'" is not a registered '+r+".");return n}};class dv{constructor(){this._init=[]}notify(e,i,r,n){"beforeInit"===i&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let a=n?this._descriptors(e).filter(n):this._descriptors(e),s=this._notify(a,e,i,r);return"afterDestroy"===i&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,i,r,n){for(let a of(n=n||{},e)){let e=a.plugin;if(!1===ul(e[r],[i,n,a.options],e)&&n.cancelable)return!1}return!0}invalidate(){ue(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){let r=e&&e.config,n=ua(r.options&&r.options.plugins,{}),a=function(e){let i={},r=[],n=Object.keys(dy.plugins.items);for(let e=0;e<n.length;e++)r.push(dy.getPlugin(n[e]));let a=e.plugins||[];for(let e=0;e<a.length;e++){let n=a[e];-1===r.indexOf(n)&&(r.push(n),i[n.id]=!0)}return{plugins:r,localIds:i}}(r);return!1!==n||i?function(e,{plugins:i,localIds:r},n,a){let s=[],o=e.getContext();for(let u of i){var l;let i=u.id,h=(l=n[i],a||!1!==l?!0===l?{}:l:null);null!==h&&s.push({plugin:u,options:function(e,{plugin:i,local:r},n,a){let s=e.pluginScopeKeys(i),o=e.getOptionScopes(n,s);return r&&i.defaults&&o.push(i.defaults),e.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}(e.config,{plugin:u,local:r[i]},h,o)})}return s}(e,a,n,i):[]}_notifyStateChanges(e){let i=this._oldCache||[],r=this._cache,n=(e,i)=>e.filter(e=>!i.some(i=>e.plugin.id===i.plugin.id));this._notify(n(i,r),e,"stop"),this._notify(n(r,i),e,"start")}}function dx(e,i){let r=hd.datasets[e]||{};return((i.datasets||{})[e]||{}).indexAxis||i.indexAxis||r.indexAxis||"x"}function db(e){if("x"===e||"y"===e||"r"===e)return e}function dw(e,...i){if(db(e))return e;for(let n of i){var r;let i=n.axis||("top"===(r=n.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&db(e[0].toLowerCase());if(i)return i}throw Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function dM(e,i,r){if(r[i+"AxisID"]===e)return{axis:i}}function dT(e){let i=e.options||(e.options={});i.plugins=ua(i.plugins,{}),i.scales=function(e,i){let r=hl[e.type]||{scales:{}},n=i.scales||{},a=dx(e.type,i),s=Object.create(null);return Object.keys(n).forEach(i=>{let o=n[i];if(!ui(o))return console.error(`Invalid scale configuration for scale: ${i}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${i}`);let l=dw(i,o,function(e,i){if(i.data&&i.data.datasets){let r=i.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(r.length)return dM(e,"x",r[0])||dM(e,"y",r[0])}return{}}(i,e),hd.scales[o.type]),u=l===a?"_index_":"_value_",h=r.scales||{};s[i]=um(Object.create(null),[{axis:l},o,h[l],h[u]])}),e.data.datasets.forEach(r=>{let a=r.type||e.type,o=r.indexAxis||dx(a,i),l=(hl[a]||{}).scales||{};Object.keys(l).forEach(e=>{let i;let a=(i=e,"_index_"===e?i=o:"_value_"===e&&(i="x"===o?"y":"x"),i),u=r[a+"AxisID"]||a;s[u]=s[u]||Object.create(null),um(s[u],[{axis:a},n[u],l[e]])})}),Object.keys(s).forEach(e=>{let i=s[e];um(i,[hd.scales[i.type],hd.scale])}),s}(e,i)}function dL(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}let dS=new Map,dk=new Set;function dD(e,i){let r=dS.get(e);return r||(r=i(),dS.set(e,r),dk.add(r)),r}let dE=(e,i,r)=>{let n=uy(i,r);void 0!==n&&e.add(n)};class dA{constructor(e){this._config=function(e){return(e=e||{}).data=dL(e.data),dT(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dL(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),dT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return dD(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return dD(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return dD(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){let i=e.id,r=this.type;return dD(`${r}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){let r=this._scopeCache,n=r.get(e);return(!n||i)&&(n=new Map,r.set(e,n)),n}getOptionScopes(e,i,r){let{options:n,type:a}=this,s=this._cachedScopes(e,r),o=s.get(i);if(o)return o;let l=new Set;i.forEach(i=>{e&&(l.add(e),i.forEach(i=>dE(l,e,i))),i.forEach(e=>dE(l,n,e)),i.forEach(e=>dE(l,hl[a]||{},e)),i.forEach(e=>dE(l,hd,e)),i.forEach(e=>dE(l,hu,e))});let u=Array.from(l);return 0===u.length&&u.push(Object.create(null)),dk.has(i)&&s.set(i,u),u}chartOptionScopes(){let{options:e,type:i}=this;return[e,hl[i]||{},hd.datasets[i]||{},{type:i},hd,hu]}resolveNamedOptions(e,i,r,n=[""]){let a={$shared:!0},{resolver:s,subPrefixes:o}=dP(this._resolverCache,e,n),l=s;if(function(e,i){let{isScriptable:r,isIndexable:n}=hY(e);for(let a of i){let i=r(a),s=n(a),o=(s||i)&&e[a];if(i&&(ub(o)||dC(o))||s&&ut(o))return!0}return!1}(s,i)){a.$shared=!1,r=ub(r)?r():r;let i=this.createResolver(e,r,o);l=hR(s,r,i)}for(let e of i)a[e]=l[e];return a}createResolver(e,i,r=[""],n){let{resolver:a}=dP(this._resolverCache,e,r);return ui(i)?hR(a,i,void 0,n):a}}function dP(e,i,r){let n=e.get(i);n||(n=new Map,e.set(i,n));let a=r.join(),s=n.get(a);return s||(s={resolver:hz(i,r),subPrefixes:r.filter(e=>!e.toLowerCase().includes("hover"))},n.set(a,s)),s}let dC=e=>ui(e)&&Object.getOwnPropertyNames(e).some(i=>ub(e[i])),dI=["top","bottom","left","right","chartArea"];function dO(e,i){return"top"===e||"bottom"===e||-1===dI.indexOf(e)&&"x"===i}function dz(e,i){return function(r,n){return r[e]===n[e]?r[i]-n[i]:r[e]-n[e]}}function dR(e){let i=e.chart,r=i.options.animation;i.notifyPlugins("afterRender"),ul(r&&r.onComplete,[e],i)}function dY(e){let i=e.chart,r=i.options.animation;ul(r&&r.onProgress,[e],i)}function dF(e){return hJ()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}let dj={},dB=e=>{let i=dF(e);return Object.values(dj).filter(e=>e.canvas===i).pop()};function dN(e,i,r){return e.options.clip?e[r]:i[r]}class dH{static defaults=hd;static instances=dj;static overrides=hl;static registry=dy;static version="4.4.2";static getChart=dB;static register(...e){dy.add(...e),dV()}static unregister(...e){dy.remove(...e),dV()}constructor(e,i){let r=this.config=new dA(i),n=dF(e),a=dB(n);if(a)throw Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");let s=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||(!hJ()||"undefined"!=typeof OffscreenCanvas&&n instanceof OffscreenCanvas?c2:ds)),this.platform.updateConfig(r);let o=this.platform.acquireContext(n,s.aspectRatio),l=o&&o.canvas,u=l&&l.height,h=l&&l.width;if(this.id=l9(),this.ctx=o,this.canvas=l,this.width=h,this.height=u,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,i){let r;return function(...n){return i?(clearTimeout(r),r=setTimeout(e,i,n)):e.apply(this,n),i}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],dj[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}cc.listen(this,"complete",dR),cc.listen(this,"progress",dY),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:n,_aspectRatio:a}=this;return ue(e)?i&&a?a:n?r/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return dy}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():h6(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hm(this.canvas,this.ctx),this}stop(){return cc.stop(this),this}resize(e,i){cc.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){let r=this.options,n=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(n,e,i,a),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,h6(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),ul(r.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){uu(this.options.scales||{},(e,i)=>{e.id=i})}buildOrUpdateScales(){let e=this.options,i=e.scales,r=this.scales,n=Object.keys(r).reduce((e,i)=>(e[i]=!1,e),{}),a=[];i&&(a=a.concat(Object.keys(i).map(e=>{let r=i[e],n=dw(e,r),a="r"===n,s="x"===n;return{options:r,dposition:a?"chartArea":s?"bottom":"left",dtype:a?"radialLinear":s?"category":"linear"}}))),uu(a,i=>{let a=i.options,s=a.id,o=dw(s,a),l=ua(a.type,i.dtype);(void 0===a.position||dO(a.position,o)!==dO(i.dposition))&&(a.position=i.dposition),n[s]=!0;let u=null;s in r&&r[s].type===l?u=r[s]:r[(u=new(dy.getScale(l))({id:s,type:l,ctx:this.ctx,chart:this})).id]=u,u.init(a,e)}),uu(n,(e,i)=>{e||delete r[i]}),uu(r,e=>{c0.configure(this,e,e.options),c0.addBox(this,e)})}_updateMetasets(){let e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((e,i)=>e.index-i.index),r>i){for(let e=i;e<r;++e)this._destroyDatasetMeta(e);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(dz("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((e,r)=>{0===i.filter(i=>i===e._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let e,i;let r=[],n=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,i=n.length;e<i;e++){let i=n[e],a=this.getDatasetMeta(e),s=i.type||this.config.type;if(a.type&&a.type!==s&&(this._destroyDatasetMeta(e),a=this.getDatasetMeta(e)),a.type=s,a.indexAxis=i.indexAxis||dx(s,this.options),a.order=i.order||0,a.index=e,a.label=""+i.label,a.visible=this.isDatasetVisible(e),a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{let i=dy.getController(s),{datasetElementType:n,dataElementType:o}=hd.datasets[s];Object.assign(i,{dataElementType:dy.getElement(o),datasetElementType:n&&dy.getElement(n)}),a.controller=new i(this,e),r.push(a.controller)}}return this._updateMetasets(),r}_resetElements(){uu(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;let a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let e=0,i=this.data.datasets.length;e<i;e++){let{controller:i}=this.getDatasetMeta(e),r=!n&&-1===a.indexOf(i);i.buildOrUpdateElements(r),s=Math.max(+i.getMaxOverflow(),s)}s=this._minPadding=r.layout.autoPadding?s:0,this._updateLayout(s),n||uu(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(dz("z","_idx"));let{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){uu(this.scales,e=>{c0.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options;uw(new Set(Object.keys(this._listeners)),new Set(e.events))&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this;for(let{method:i,start:r,count:n}of this._getUniformDataChanges()||[])!function(e,i,r){for(let n of Object.keys(e)){let a=+n;if(a>=i){let s=e[n];delete e[n],(r>0||a>i)&&(e[a+r]=s)}}}(e,r,"_removeElements"===i?-n:n)}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=i=>new Set(e.filter(e=>e[0]===i).map((e,i)=>i+","+e.splice(1).join(","))),n=r(0);for(let e=1;e<i;e++)if(!uw(n,r(e)))return;return Array.from(n).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;c0.update(this,this.width,this.height,e);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],uu(this.boxes,e=>{r&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,i)=>{e._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,ub(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){let r=this.getDatasetMeta(e),n={meta:r,index:e,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(i),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(cc.has(this)?this.attached&&!cc.running(this)&&cc.start(this):(this.draw(),dR({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:e,height:i}=this._resizeBeforeDraw;this._resize(e,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;let i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let i,r;let n=this._sortedMetasets,a=[];for(i=0,r=n.length;i<r;++i){let r=n[i];(!e||r.visible)&&a.push(r)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;let e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let i=this.ctx,r=e._clip,n=!r.disabled,a=function(e,i){let{xScale:r,yScale:n}=e;return r&&n?{left:dN(r,i,"left"),right:dN(r,i,"right"),top:dN(n,i,"top"),bottom:dN(n,i,"bottom")}:i}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(n&&hv(i,{left:!1===r.left?0:a.left-r.left,right:!1===r.right?this.width:a.right+r.right,top:!1===r.top?0:a.top-r.top,bottom:!1===r.bottom?this.height:a.bottom+r.bottom}),e.controller.draw(),n&&hx(i),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return hy(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,n){let a=cU.modes[i];return"function"==typeof a?a(this,e,r,n):[]}getDatasetMeta(e){let i=this.data.datasets[e],r=this._metasets,n=r.filter(e=>e&&e._dataset===i).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=hO(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let i=this.data.datasets[e];if(!i)return!1;let r=this.getDatasetMeta(e);return"boolean"==typeof r.hidden?!r.hidden:!i.hidden}setDatasetVisibility(e,i){this.getDatasetMeta(e).hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){let n=r?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,n);ux(i)?(a.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),s.update(a,{visible:r}),this.update(i=>i.datasetIndex===e?n:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){let i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),cc.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),hm(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete dj[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,i=this.platform,r=(r,n)=>{i.addEventListener(this,r,n),e[r]=n},n=(e,i,r)=>{e.offsetX=i,e.offsetY=r,this._eventHandler(e)};uu(this.options.events,e=>r(e,n))}bindResponsiveEvents(){let e;this._responsiveListeners||(this._responsiveListeners={});let i=this._responsiveListeners,r=this.platform,n=(e,n)=>{r.addEventListener(this,e,n),i[e]=n},a=(e,n)=>{i[e]&&(r.removeEventListener(this,e,n),delete i[e])},s=(e,i)=>{this.canvas&&this.resize(e,i)},o=()=>{a("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",e)};e=()=>{this.attached=!1,a("resize",s),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():e()}unbindEvents(){uu(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},uu(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){let n,a,s;let o=r?"set":"remove";for("dataset"===i&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),a=0,s=e.length;a<s;++a){let i=(n=e[a])&&this.getDatasetMeta(n.datasetIndex).controller;i&&i[o+"HoverStyle"](n.element,n.datasetIndex,n.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let i=this._active||[],r=e.map(({datasetIndex:e,index:i})=>{let r=this.getDatasetMeta(e);if(!r)throw Error("No dataset found at index "+e);return{datasetIndex:e,element:r.data[i],index:i}});uh(r,i)||(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return 1===this._plugins._cache.filter(i=>i.plugin.id===e).length}_updateHoverStyles(e,i,r){let n=this.options.hover,a=(e,i)=>e.filter(e=>!i.some(i=>e.datasetIndex===i.datasetIndex&&e.index===i.index)),s=a(i,e),o=r?e:a(e,i);s.length&&this.updateHoverStyle(s,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(e,i){let r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},n=i=>(i.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;let a=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(a||r.changed)&&this.render(),this}_handleEvent(e,i,r){var n;let{_active:a=[],options:s}=this,o=this._getActiveElements(e,a,r,i),l="mouseup"===e.type||"click"===e.type||"contextmenu"===e.type,u=(n=this._lastEvent,r&&"mouseout"!==e.type?l?n:e:null);r&&(this._lastEvent=null,ul(s.onHover,[e,o,this],this),l&&ul(s.onClick,[e,o,this],this));let h=!uh(o,a);return(h||i)&&(this._active=o,this._updateHoverStyles(o,a,i)),this._lastEvent=u,h}_getActiveElements(e,i,r,n){if("mouseout"===e.type)return[];if(!r)return i;let a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}function dV(){return uu(dH.instances,e=>e._plugins.invalidate())}function dU(e,i,r,n){return{x:r+e*Math.cos(i),y:n+e*Math.sin(i)}}function d$(e,i,r,n,a,s){let{x:o,y:l,startAngle:u,pixelMargin:h,innerRadius:c}=i,d=Math.max(i.outerRadius+n+r-h,0),f=c>0?c+n+r+h:0,p=0,m=a-u;if(n){let e=d>0?d-n:0,i=((c>0?c-n:0)+e)/2;p=(m-(0!==i?m*i/(i+n):m))/2}let _=Math.max(.001,m*d-r/uM)/d,g=(m-_)/2,y=u+g+p,v=a-g-p,{outerStart:x,outerEnd:b,innerStart:w,innerEnd:M}=function(e,i,r,n){let a=hD(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),s=(r-i)/2,o=Math.min(s,n*i/2),l=e=>{let i=(r-Math.min(s,e))*n/2;return uU(e,0,Math.min(s,i))};return{outerStart:l(a.outerStart),outerEnd:l(a.outerEnd),innerStart:uU(a.innerStart,0,o),innerEnd:uU(a.innerEnd,0,o)}}(i,f,d,v-y),T=d-x,L=d-b,S=y+x/T,k=v-b/L,D=f+w,E=f+M,A=y+w/D,P=v-M/E;if(e.beginPath(),s){let i=(S+k)/2;if(e.arc(o,l,d,S,i),e.arc(o,l,d,i,k),b>0){let i=dU(L,k,o,l);e.arc(i.x,i.y,b,k,v+uD)}let r=dU(E,v,o,l);if(e.lineTo(r.x,r.y),M>0){let i=dU(E,P,o,l);e.arc(i.x,i.y,M,v+uD,P+Math.PI)}let n=(v-M/f+(y+w/f))/2;if(e.arc(o,l,f,v-M/f,n,!0),e.arc(o,l,f,n,y+w/f,!0),w>0){let i=dU(D,A,o,l);e.arc(i.x,i.y,w,A+Math.PI,y-uD)}let a=dU(T,y,o,l);if(e.lineTo(a.x,a.y),x>0){let i=dU(T,S,o,l);e.arc(i.x,i.y,x,y-uD,S)}}else{e.moveTo(o,l);let i=Math.cos(S)*d+o,r=Math.sin(S)*d+l;e.lineTo(i,r);let n=Math.cos(k)*d+o,a=Math.sin(k)*d+l;e.lineTo(n,a)}e.closePath()}function dW(e,i,r=i){e.lineCap=ua(r.borderCapStyle,i.borderCapStyle),e.setLineDash(ua(r.borderDash,i.borderDash)),e.lineDashOffset=ua(r.borderDashOffset,i.borderDashOffset),e.lineJoin=ua(r.borderJoinStyle,i.borderJoinStyle),e.lineWidth=ua(r.borderWidth,i.borderWidth),e.strokeStyle=ua(r.borderColor,i.borderColor)}function dG(e,i,r){e.lineTo(r.x,r.y)}function dq(e,i,r={}){let n=e.length,{start:a=0,end:s=n-1}=r,{start:o,end:l}=i,u=Math.max(a,o),h=Math.min(s,l);return{count:n,start:u,loop:i.loop,ilen:h<u&&!(a<o&&s<o||a>l&&s>l)?n+h-u:h-u}}function dZ(e,i,r,n){let a,s,o;let{points:l,options:u}=i,{count:h,start:c,loop:d,ilen:f}=dq(l,r,n),p=u.stepped?hb:u.tension||"monotone"===u.cubicInterpolationMode?hw:dG,{move:m=!0,reverse:_}=n||{};for(a=0;a<=f;++a)(s=l[(c+(_?f-a:a))%h]).skip||(m?(e.moveTo(s.x,s.y),m=!1):p(e,o,s,_,u.stepped),o=s);return d&&p(e,o,s=l[(c+(_?f:0))%h],_,u.stepped),!!d}function dX(e,i,r,n){let a,s,o,l,u,h;let c=i.points,{count:d,start:f,ilen:p}=dq(c,r,n),{move:m=!0,reverse:_}=n||{},g=0,y=0,v=e=>(f+(_?p-e:e))%d,x=()=>{l!==u&&(e.lineTo(g,u),e.lineTo(g,l),e.lineTo(g,h))};for(m&&(s=c[v(0)],e.moveTo(s.x,s.y)),a=0;a<=p;++a){if((s=c[v(a)]).skip)continue;let i=s.x,r=s.y,n=0|i;n===o?(r<l?l=r:r>u&&(u=r),g=(y*g+i)/++y):(x(),e.lineTo(i,r),o=n,y=0,l=u=r),h=r}x()}function dJ(e){let i=e.options,r=i.borderDash&&i.borderDash.length;return e._decimated||e._loop||i.tension||"monotone"===i.cubicInterpolationMode||i.stepped||r?dZ:dX}let dK="function"==typeof Path2D;class dQ extends dl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){let r=this.options;if((r.tension||"monotone"===r.cubicInterpolationMode)&&!r.stepped&&!this._pointsUpdated){let n=r.spanGaps?this._loop:this._fullLoop;(function(e,i,r,n,a){let s,o,l,u;if(i.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===i.cubicInterpolationMode)!function(e,i="x"){let r,n,a;let s=hZ(i),o=e.length,l=Array(o).fill(0),u=Array(o),h=hq(e,0);for(r=0;r<o;++r)if(n=a,a=h,h=hq(e,r+1),a){if(h){let e=h[i]-a[i];l[r]=0!==e?(h[s]-a[s])/e:0}u[r]=n?h?uC(l[r-1])!==uC(l[r])?0:(l[r-1]+l[r])/2:l[r-1]:l[r]}(function(e,i,r){let n,a,s,o,l;let u=e.length,h=hq(e,0);for(let c=0;c<u-1;++c)if(l=h,h=hq(e,c+1),l&&h){if(uI(i[c],0,hG)){r[c]=r[c+1]=0;continue}(o=Math.pow(n=r[c]/i[c],2)+Math.pow(a=r[c+1]/i[c],2))<=9||(s=3/Math.sqrt(o),r[c]=n*s*i[c],r[c+1]=a*s*i[c])}})(e,l,u),function(e,i,r="x"){let n,a,s;let o=hZ(r),l=e.length,u=hq(e,0);for(let h=0;h<l;++h){if(a=s,s=u,u=hq(e,h+1),!s)continue;let l=s[r],c=s[o];a&&(n=(l-a[r])/3,s[`cp1${r}`]=l-n,s[`cp1${o}`]=c-n*i[h]),u&&(n=(u[r]-l)/3,s[`cp2${r}`]=l+n,s[`cp2${o}`]=c+n*i[h])}}(e,u,i)}(e,a);else{let r=n?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)u=function(e,i,r,n){let a=e.skip?i:e,s=r.skip?i:r,o=uB(i,a),l=uB(s,i),u=o/(o+l),h=l/(o+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;let c=n*u,d=n*h;return{previous:{x:i.x-c*(s.x-a.x),y:i.y-c*(s.y-a.y)},next:{x:i.x+d*(s.x-a.x),y:i.y+d*(s.y-a.y)}}}(r,l=e[s],e[Math.min(s+1,o-(n?0:1))%o],i.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,r=l}i.capBezierPoints&&function(e,i){let r,n,a,s,o;let l=hy(e[0],i);for(r=0,n=e.length;r<n;++r)o=s,s=l,l=r<n-1&&hy(e[r+1],i),s&&(a=e[r],o&&(a.cp1x=hX(a.cp1x,i.left,i.right),a.cp1y=hX(a.cp1y,i.top,i.bottom)),l&&(a.cp2x=hX(a.cp2x,i.left,i.right),a.cp2y=hX(a.cp2y,i.top,i.bottom)))}(e,r)})(this._points,r,e,n,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,i){let r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];let s=!!e._loop,{start:o,end:l}=function(e,i,r,n){let a=0,s=i-1;if(r&&!n)for(;a<i&&!e[a].skip;)a++;for(;a<i&&e[a].skip;)a++;for(a%=i,r&&(s+=a);s>a&&e[s%i].skip;)s--;return{start:a,end:s%=i}}(r,a,s,n);if(!0===n)return cu(e,[{start:o,end:l,loop:s}],r,i);let u=l<o?l+a:l,h=!!e._fullLoop&&0===o&&l===a-1;return cu(e,function(e,i,r,n){let a;let s=e.length,o=[],l=i,u=e[i];for(a=i+1;a<=r;++a){let r=e[a%s];r.skip||r.stop?u.skip||(n=!1,o.push({start:i%s,end:(a-1)%s,loop:n}),i=l=r.stop?a:null):(l=a,u.skip&&(i=a)),u=r}return null!==l&&o.push({start:i%s,end:l%s,loop:n}),o}(r,o,u,h),r,i)}(this,this.options.segment))}first(){let e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){let e=this.segments,i=this.points,r=e.length;return r&&i[e[r-1].end]}interpolate(e,i){let r,n;let a=this.options,s=e[i],o=this.points,l=cl(this,{property:i,start:s,end:s});if(!l.length)return;let u=[],h=a.stepped?ce:a.tension||"monotone"===a.cubicInterpolationMode?ct:h9;for(r=0,n=l.length;r<n;++r){let{start:n,end:c}=l[r],d=o[n],f=o[c];if(d===f){u.push(d);continue}let p=Math.abs((s-d[i])/(f[i]-d[i])),m=h(d,f,p,a.stepped);m[i]=e[i],u.push(m)}return 1===u.length?u[0]:u}pathSegment(e,i,r){return dJ(this)(e,this,i,r)}path(e,i,r){let n=this.segments,a=dJ(this),s=this._loop;for(let o of(i=i||0,r=r||this.points.length-i,n))s&=a(e,this,o,{start:i,end:i+r-1});return!!s}draw(e,i,r,n){let a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),function(e,i,r,n){if(dK&&!i.options.segment){let a;(a=i._path)||(a=i._path=new Path2D,i.path(a,r,n)&&a.closePath()),dW(e,i.options),e.stroke(a)}else!function(e,i,r,n){let{segments:a,options:s}=i,o=dJ(i);for(let l of a)dW(e,s,l.style),e.beginPath(),o(e,i,l,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}(e,i,r,n)}(e,this,r,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function d0(e,i,r,n){let a=e.options,{[r]:s}=e.getProps([r],n);return Math.abs(i-s)<a.radius+a.hitRadius}function d1(e,i){let r,n,a,s,o;let{x:l,y:u,base:h,width:c,height:d}=e.getProps(["x","y","base","width","height"],i);return e.horizontal?(o=d/2,r=Math.min(l,h),n=Math.max(l,h),a=u-o,s=u+o):(r=l-(o=c/2),n=l+o,a=Math.min(u,h),s=Math.max(u,h)),{left:r,top:a,right:n,bottom:s}}function d2(e,i,r,n){return e?0:uU(i,r,n)}function d3(e,i,r,n){let a=null===i,s=null===r,o=e&&!(a&&s)&&d1(e,n);return o&&(a||u$(i,o.left,o.right))&&(s||u$(r,o.top,o.bottom))}function d4(e,i){e.rect(i.x,i.y,i.w,i.h)}function d5(e,i,r={}){let n=e.x!==r.x?-i:0,a=e.y!==r.y?-i:0,s=(e.x+e.w!==r.x+r.w?i:0)-n,o=(e.y+e.h!==r.y+r.h?i:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+s,h:e.h+o,radius:e.radius}}var d6=Object.freeze({__proto__:null,ArcElement:class extends dl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){let{angle:n,distance:a}=uj(this.getProps(["x","y"],r),{x:e,y:i}),{startAngle:s,endAngle:o,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),c=(this.options.spacing+this.options.borderWidth)/2,d=ua(h,o-s)>=uT||uV(n,s,o),f=u$(a,l+c,u+c);return d&&f}getCenterPoint(e){let{x:i,y:r,startAngle:n,endAngle:a,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:u}=this.options,h=(n+a)/2,c=(s+o+u+l)/2;return{x:i+Math.cos(h)*c,y:r+Math.sin(h)*c}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:i,circumference:r}=this,n=(i.offset||0)/4,a=(i.spacing||0)/2,s=i.circular;if(this.pixelMargin="inner"===i.borderAlign?.33:0,this.fullCircles=r>uT?Math.floor(r/uT):0,0===r||this.innerRadius<0||this.outerRadius<0)return;e.save();let o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*n,Math.sin(o)*n);let l=n*(1-Math.sin(Math.min(uM,r||0)));e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,function(e,i,r,n,a){let{fullCircles:s,startAngle:o,circumference:l}=i,u=i.endAngle;if(s){d$(e,i,r,n,u,a);for(let i=0;i<s;++i)e.fill();isNaN(l)||(u=o+(l%uT||uT))}d$(e,i,r,n,u,a),e.fill()}(e,this,l,a,s),function(e,i,r,n,a){let{fullCircles:s,startAngle:o,circumference:l,options:u}=i,{borderWidth:h,borderJoinStyle:c,borderDash:d,borderDashOffset:f}=u,p="inner"===u.borderAlign;if(!h)return;e.setLineDash(d||[]),e.lineDashOffset=f,p?(e.lineWidth=2*h,e.lineJoin=c||"round"):(e.lineWidth=h,e.lineJoin=c||"bevel");let m=i.endAngle;if(s){d$(e,i,r,n,m,a);for(let i=0;i<s;++i)e.stroke();isNaN(l)||(m=o+(l%uT||uT))}p&&function(e,i,r){let{startAngle:n,pixelMargin:a,x:s,y:o,outerRadius:l,innerRadius:u}=i,h=a/l;e.beginPath(),e.arc(s,o,l,n-h,r+h),u>a?(h=a/u,e.arc(s,o,u,r+h,n-h,!0)):e.arc(s,o,a,r+uD,n-uD),e.closePath(),e.clip()}(e,i,m),s||(d$(e,i,r,n,m,a),e.stroke())}(e,this,l,a,s),e.restore()}},BarElement:class extends dl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){var i;let{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:s,outer:o}=function(e){let i=d1(e),r=i.right-i.left,n=i.bottom-i.top,a=function(e,i,r){let n=e.options.borderWidth,a=e.borderSkipped,s=hE(n);return{t:d2(a.top,s.top,0,r),r:d2(a.right,s.right,0,i),b:d2(a.bottom,s.bottom,0,r),l:d2(a.left,s.left,0,i)}}(e,r/2,n/2),s=function(e,i,r){let{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,s=hA(a),o=Math.min(i,r),l=e.borderSkipped,u=n||ui(a);return{topLeft:d2(!u||l.top||l.left,s.topLeft,0,o),topRight:d2(!u||l.top||l.right,s.topRight,0,o),bottomLeft:d2(!u||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:d2(!u||l.bottom||l.right,s.bottomRight,0,o)}}(e,r/2,n/2);return{outer:{x:i.left,y:i.top,w:r,h:n,radius:s},inner:{x:i.left+a.l,y:i.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,s.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(a.b,a.r))}}}}(this),l=(i=o.radius).topLeft||i.topRight||i.bottomLeft||i.bottomRight?hT:d4;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),l(e,d5(o,r,s)),e.clip(),l(e,d5(s,-r,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,d5(s,r)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,i,r){return d3(this,e,i,r)}inXRange(e,i){return d3(this,e,null,i)}inYRange(e,i){return d3(this,null,e,i)}getCenterPoint(e){let{x:i,y:r,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(i+n)/2:i,y:a?r:(r+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},LineElement:dQ,PointElement:class extends dl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){let n=this.options,{x:a,y:s}=this.getProps(["x","y"],r);return Math.pow(e-a,2)+Math.pow(i-s,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,i){return d0(this,e,"x",i)}inYRange(e,i){return d0(this,e,"y",i)}getCenterPoint(e){let{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){let i=(e=e||this.options||{}).radius||0,r=(i=Math.max(i,i&&e.hoverRadius||0))&&e.borderWidth||0;return(i+r)*2}draw(e,i){let r=this.options;!this.skip&&!(r.radius<.1)&&hy(this,i,this.size(r)/2)&&(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,h_(e,r,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}});let d8=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],d7=d8.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function d9(e){return d8[e%d8.length]}function fe(e){return d7[e%d7.length]}function ft(e){let i;for(i in e)if(e[i].borderColor||e[i].backgroundColor)return!0;return!1}function fi(e){if(e._decimated){let i=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:i})}}function fr(e){e.data.datasets.forEach(e=>{fi(e)})}function fn(e,i,r,n){if(n)return;let a=i[e],s=r[e];return"angle"===e&&(a=uH(a),s=uH(s)),{property:e,start:a,end:s}}function fa(e,i,r){for(;i>e;i--){let e=r[i];if(!isNaN(e.x)&&!isNaN(e.y))break}return i}function fs(e,i,r,n){return e&&i?n(e[r],i[r]):e?e[r]:i?i[r]:0}function fo(e,i){let r=[],n=!1;return ut(e)?(n=!0,r=e):r=function(e,i){let{x:r=null,y:n=null}=e||{},a=i.points,s=[];return i.segments.forEach(({start:e,end:i})=>{i=fa(e,i,a);let o=a[e],l=a[i];null!==n?(s.push({x:o.x,y:n}),s.push({x:l.x,y:n})):null!==r&&(s.push({x:r,y:o.y}),s.push({x:r,y:l.y}))}),s}(e,i),r.length?new dQ({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function fl(e){return e&&!1!==e.fill}class fu{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,r){let{x:n,y:a,radius:s}=this;return i=i||{start:0,end:uT},e.arc(n,a,s,i.end,i.start,!0),!r.bounds}interpolate(e){let{x:i,y:r,radius:n}=this,a=e.angle;return{x:i+Math.cos(a)*n,y:r+Math.sin(a)*n,angle:a}}}function fh(e,i,r){let n=function(e){let{chart:i,fill:r,line:n}=e;if(ur(r))return function(e,i){let r=e.getDatasetMeta(i);return r&&e.isDatasetVisible(i)?r.dataset:null}(i,r);if("stack"===r)return function(e){let{scale:i,index:r,line:n}=e,a=[],s=n.segments,o=n.points,l=function(e,i){let r=[],n=e.getMatchingVisibleMetas("line");for(let e=0;e<n.length;e++){let a=n[e];if(a.index===i)break;a.hidden||r.unshift(a.dataset)}return r}(i,r);l.push(fo({x:null,y:i.bottom},n));for(let e=0;e<s.length;e++){let i=s[e];for(let e=i.start;e<=i.end;e++)!function(e,i,r){let n=[];for(let a=0;a<r.length;a++){let{first:s,last:o,point:l}=function(e,i,r){let n=e.interpolate(i,r);if(!n)return{};let a=n[r],s=e.segments,o=e.points,l=!1,u=!1;for(let e=0;e<s.length;e++){let i=s[e],n=o[i.start][r],h=o[i.end][r];if(u$(a,n,h)){l=a===n,u=a===h;break}}return{first:l,last:u,point:n}}(r[a],i,"x");if(l&&(!s||!o)){if(s)n.unshift(l);else if(e.push(l),!o)break}}e.push(...n)}(a,o[e],l)}return new dQ({points:a,options:{}})}(e);if("shape"===r)return!0;let a=(e.scale||{}).getPointPositionForValue?function(e){let{scale:i,fill:r}=e,n=i.options,a=i.getLabels().length,s=n.reverse?i.max:i.min,o="start"===r?s:"end"===r?i.options.reverse?i.min:i.max:ui(r)?r.value:i.getBaseValue(),l=[];if(n.grid.circular){let e=i.getPointPositionForValue(0,s);return new fu({x:e.x,y:e.y,radius:i.getDistanceFromCenterForValue(o)})}for(let e=0;e<a;++e)l.push(i.getPointPositionForValue(e,o));return l}(e):function(e){let i;let{scale:r={},fill:n}=e,a=(i=null,"start"===n?i=r.bottom:"end"===n?i=r.top:ui(n)?i=r.getPixelForValue(n.value):r.getBasePixel&&(i=r.getBasePixel()),i);if(ur(a)){let e=r.isHorizontal();return{x:e?a:null,y:e?null:a}}return null}(e);return a instanceof fu?a:fo(a,n)}(i),{line:a,scale:s,axis:o}=i,l=a.options,u=l.fill,h=l.backgroundColor,{above:c=h,below:d=h}=u||{};n&&a.points.length&&(hv(e,r),function(e,i){let{line:r,target:n,above:a,below:s,area:o,scale:l}=i,u=r._loop?"angle":i.axis;e.save(),"x"===u&&s!==a&&(fc(e,n,o.top),fd(e,{line:r,target:n,color:a,scale:l,property:u}),e.restore(),e.save(),fc(e,n,o.bottom)),fd(e,{line:r,target:n,color:s,scale:l,property:u}),e.restore()}(e,{line:a,target:n,above:c,below:d,area:r,scale:s,axis:o}),hx(e))}function fc(e,i,r){let{segments:n,points:a}=i,s=!0,o=!1;for(let l of(e.beginPath(),n)){let{start:n,end:u}=l,h=a[n],c=a[fa(n,u,a)];s?(e.moveTo(h.x,h.y),s=!1):(e.lineTo(h.x,r),e.lineTo(h.x,h.y)),(o=!!i.pathSegment(e,l,{move:o}))?e.closePath():e.lineTo(c.x,r)}e.lineTo(i.first().x,r),e.closePath(),e.clip()}function fd(e,i){let{line:r,target:n,property:a,color:s,scale:o}=i;for(let{source:i,target:l,start:u,end:h}of function(e,i,r){let n=e.segments,a=e.points,s=i.points,o=[];for(let e of n){let{start:n,end:l}=e;l=fa(n,l,a);let u=fn(r,a[n],a[l],e.loop);if(!i.segments){o.push({source:e,target:u,start:a[n],end:a[l]});continue}for(let n of cl(i,u)){let i=fn(r,s[n.start],s[n.end],n.loop);for(let s of co(e,a,i))o.push({source:s,target:n,start:{[r]:fs(u,i,"start",Math.max)},end:{[r]:fs(u,i,"end",Math.min)}})}}return o}(r,n,a)){let c;let{style:{backgroundColor:d=s}={}}=i,f=!0!==n;e.save(),e.fillStyle=d,function(e,i,r){let{top:n,bottom:a}=i.chart.chartArea,{property:s,start:o,end:l}=r||{};"x"===s&&(e.beginPath(),e.rect(o,n,l-o,a-n),e.clip())}(e,o,f&&fn(a,u,h)),e.beginPath();let p=!!r.pathSegment(e,i);if(f){p?e.closePath():ff(e,n,h,a);let i=!!n.pathSegment(e,l,{move:p,reverse:!0});(c=p&&i)||ff(e,n,u,a)}e.closePath(),e.fill(c?"evenodd":"nonzero"),e.restore()}}function ff(e,i,r,n){let a=i.interpolate(r,n);a&&e.lineTo(a.x,a.y)}let fp=(e,i)=>{let{boxHeight:r=i,boxWidth:n=i}=e;return e.usePointStyle&&(r=Math.min(r,i),n=e.pointStyleWidth||Math.min(n,i)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(i,r)}},fm=(e,i)=>null!==e&&null!==i&&e.datasetIndex===i.datasetIndex&&e.index===i.index;class f_ extends dl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,r){this.maxWidth=e,this.maxHeight=i,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},i=ul(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(i=>e.filter(i,this.chart.data))),e.sort&&(i=i.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){let e,i;let{options:r,ctx:n}=this;if(!r.display){this.width=this.height=0;return}let a=r.labels,s=hC(a.font),o=s.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=fp(a,o);n.font=s.string,this.isHorizontal()?(e=this.maxWidth,i=this._fitRows(l,o,u,h)+10):(i=this.maxHeight,e=this._fitCols(l,s,u,h)+10),this.width=Math.min(e,r.maxWidth||this.maxWidth),this.height=Math.min(i,r.maxHeight||this.maxHeight)}_fitRows(e,i,r,n){let{ctx:a,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=n+o,c=e;a.textAlign="left",a.textBaseline="middle";let d=-1,f=-h;return this.legendItems.forEach((e,p)=>{let m=r+i/2+a.measureText(e.text).width;(0===p||u[u.length-1]+m+2*o>s)&&(c+=h,u[u.length-(p>0?0:1)]=0,f+=h,d++),l[p]={left:0,top:f,row:d,width:m,height:n},u[u.length-1]+=m+o}),c}_fitCols(e,i,r,n){let{ctx:a,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=s-e,c=o,d=0,f=0,p=0,m=0;return this.legendItems.forEach((e,s)=>{var _;let g,y;let{itemWidth:v,itemHeight:x}={itemWidth:((g=e.text)&&"string"!=typeof g&&(g=g.reduce((e,i)=>e.length>i.length?e:i)),r+i.size/2+a.measureText(g).width),itemHeight:(_=i.lineHeight,y=n,"string"!=typeof e.text&&(y=fg(e,_)),y)};s>0&&f+x+2*o>h&&(c+=d+o,u.push({width:d,height:f}),p+=d+o,m++,d=f=0),l[s]={left:p,top:f,col:m,width:v,height:x},d=Math.max(d,v),f+=x+o}),c+=d,u.push({width:d,height:f}),c}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:r,labels:{padding:n},rtl:a}}=this,s=ci(a,this.left,this.width);if(this.isHorizontal()){let a=0,o=u1(r,this.left+n,this.right-this.lineWidths[a]);for(let l of i)a!==l.row&&(a=l.row,o=u1(r,this.left+n,this.right-this.lineWidths[a])),l.top+=this.top+e+n,l.left=s.leftForLtr(s.x(o),l.width),o+=l.width+n}else{let a=0,o=u1(r,this.top+e+n,this.bottom-this.columnSizes[a].height);for(let l of i)l.col!==a&&(a=l.col,o=u1(r,this.top+e+n,this.bottom-this.columnSizes[a].height)),l.top=o,l.left+=this.left+n,l.left=s.leftForLtr(s.x(l.left),l.width),o+=l.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){let e=this.ctx;hv(e,this),this._draw(),hx(e)}}_draw(){let e;let{options:i,columnSizes:r,lineWidths:n,ctx:a}=this,{align:s,labels:o}=i,l=hd.color,u=ci(i.rtl,this.left,this.width),h=hC(o.font),{padding:c}=o,d=h.size,f=d/2;this.drawTitle(),a.textAlign=u.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=h.string;let{boxWidth:p,boxHeight:m,itemHeight:_}=fp(o,d),g=function(e,i,r){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;a.save();let n=ua(r.lineWidth,1);if(a.fillStyle=ua(r.fillStyle,l),a.lineCap=ua(r.lineCap,"butt"),a.lineDashOffset=ua(r.lineDashOffset,0),a.lineJoin=ua(r.lineJoin,"miter"),a.lineWidth=n,a.strokeStyle=ua(r.strokeStyle,l),a.setLineDash(ua(r.lineDash,[])),o.usePointStyle)hg(a,{radius:m*Math.SQRT2/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:n},u.xPlus(e,p/2),i+f,o.pointStyleWidth&&p);else{let s=i+Math.max((d-m)/2,0),o=u.leftForLtr(e,p),l=hA(r.borderRadius);a.beginPath(),Object.values(l).some(e=>0!==e)?hT(a,{x:o,y:s,w:p,h:m,radius:l}):a.rect(o,s,p,m),a.fill(),0!==n&&a.stroke()}a.restore()},y=function(e,i,r){hM(a,r.text,e,i+_/2,h,{strikethrough:r.hidden,textAlign:u.textAlign(r.textAlign)})},v=this.isHorizontal(),x=this._computeTitleHeight();e=v?{x:u1(s,this.left+c,this.right-n[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:u1(s,this.top+x+c,this.bottom-r[0].height),line:0},cr(this.ctx,i.textDirection);let b=_+c;this.legendItems.forEach((l,d)=>{a.strokeStyle=l.fontColor,a.fillStyle=l.fontColor;let m=a.measureText(l.text).width,_=u.textAlign(l.textAlign||(l.textAlign=o.textAlign)),w=p+f+m,M=e.x,T=e.y;if(u.setWidth(this.width),v?d>0&&M+w+c>this.right&&(T=e.y+=b,e.line++,M=e.x=u1(s,this.left+c,this.right-n[e.line])):d>0&&T+b>this.bottom&&(M=e.x=M+r[e.line].width+c,e.line++,T=e.y=u1(s,this.top+x+c,this.bottom-r[e.line].height)),g(u.x(M),T,l),M=u2(_,M+p+f,v?M+w:this.right,i.rtl),y(u.x(M),T,l),v)e.x+=w+c;else if("string"!=typeof l.text){let i=h.lineHeight;e.y+=fg(l,i)+c}else e.y+=b}),cn(this.ctx,i.textDirection)}drawTitle(){let e;let i=this.options,r=i.title,n=hC(r.font),a=hP(r.padding);if(!r.display)return;let s=ci(i.rtl,this.left,this.width),o=this.ctx,l=r.position,u=n.size/2,h=a.top+u,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),e=this.top+h,c=u1(i.align,c,this.right-d);else{let r=this.columnSizes.reduce((e,i)=>Math.max(e,i.height),0);e=h+u1(i.align,this.top,this.bottom-r-i.labels.padding-this._computeTitleHeight())}let f=u1(l,c,c+d);o.textAlign=s.textAlign(u0(l)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=n.string,hM(o,r.text,f,e,n)}_computeTitleHeight(){let e=this.options.title,i=hC(e.font),r=hP(e.padding);return e.display?i.lineHeight+r.height:0}_getLegendItemAt(e,i){let r,n,a;if(u$(e,this.left,this.right)&&u$(i,this.top,this.bottom)){for(r=0,a=this.legendHitBoxes;r<a.length;++r)if(u$(e,(n=a[r]).left,n.left+n.width)&&u$(i,n.top,n.top+n.height))return this.legendItems[r]}return null}handleEvent(e){var i;let r=this.options;if(("mousemove"!==(i=e.type)&&"mouseout"!==i||!r.onHover&&!r.onLeave)&&(!r.onClick||"click"!==i&&"mouseup"!==i))return;let n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){let i=this._hoveredItem,a=fm(i,n);i&&!a&&ul(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&ul(r.onHover,[e,n,this],this)}else n&&ul(r.onClick,[e,n,this],this)}}function fg(e,i){return i*(e.text?e.text.length:0)}class fy extends dl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;let n=ut(r.text)?r.text.length:1;this._padding=hP(r.padding);let a=n*hC(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){let e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){let i,r,n;let{top:a,left:s,bottom:o,right:l,options:u}=this,h=u.align,c=0;return this.isHorizontal()?(r=u1(h,s,l),n=a+e,i=l-s):("left"===u.position?(r=s+e,n=u1(h,o,a),c=-.5*uM):(r=l-e,n=u1(h,a,o),c=.5*uM),i=o-a),{titleX:r,titleY:n,maxWidth:i,rotation:c}}draw(){let e=this.ctx,i=this.options;if(!i.display)return;let r=hC(i.font),n=r.lineHeight/2+this._padding.top,{titleX:a,titleY:s,maxWidth:o,rotation:l}=this._drawArgs(n);hM(e,i.text,0,0,r,{color:i.color,maxWidth:o,rotation:l,textAlign:u0(i.align),textBaseline:"middle",translation:[a,s]})}}let fv=new WeakMap,fx={average(e){let i,r;if(!e.length)return!1;let n=new Set,a=0,s=0;for(i=0,r=e.length;i<r;++i){let r=e[i].element;if(r&&r.hasValue()){let e=r.tooltipPosition();n.add(e.x),a+=e.y,++s}}return{x:[...n].reduce((e,i)=>e+i)/n.size,y:a/s}},nearest(e,i){let r,n,a;if(!e.length)return!1;let s=i.x,o=i.y,l=Number.POSITIVE_INFINITY;for(r=0,n=e.length;r<n;++r){let n=e[r].element;if(n&&n.hasValue()){let e=uB(i,n.getCenterPoint());e<l&&(l=e,a=n)}}if(a){let e=a.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function fb(e,i){return i&&(ut(i)?Array.prototype.push.apply(e,i):e.push(i)),e}function fw(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function fM(e,i){let r=e.chart.ctx,{body:n,footer:a,title:s}=e,{boxWidth:o,boxHeight:l}=i,u=hC(i.bodyFont),h=hC(i.titleFont),c=hC(i.footerFont),d=s.length,f=a.length,p=n.length,m=hP(i.padding),_=m.height,g=0,y=n.reduce((e,i)=>e+i.before.length+i.lines.length+i.after.length,0);y+=e.beforeBody.length+e.afterBody.length,d&&(_+=d*h.lineHeight+(d-1)*i.titleSpacing+i.titleMarginBottom),y&&(_+=p*(i.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+(y-p)*u.lineHeight+(y-1)*i.bodySpacing),f&&(_+=i.footerMarginTop+f*c.lineHeight+(f-1)*i.footerSpacing);let v=0,x=function(e){g=Math.max(g,r.measureText(e).width+v)};return r.save(),r.font=h.string,uu(e.title,x),r.font=u.string,uu(e.beforeBody.concat(e.afterBody),x),v=i.displayColors?o+2+i.boxPadding:0,uu(n,e=>{uu(e.before,x),uu(e.lines,x),uu(e.after,x)}),v=0,r.font=c.string,uu(e.footer,x),r.restore(),{width:g+=m.width,height:_}}function fT(e,i,r){let n=r.yAlign||i.yAlign||function(e,i){let{y:r,height:n}=i;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}(e,r);return{xAlign:r.xAlign||i.xAlign||function(e,i,r,n){let{x:a,width:s}=r,{width:o,chartArea:{left:l,right:u}}=e,h="center";return"center"===n?h=a<=(l+u)/2?"left":"right":a<=s/2?h="left":a>=o-s/2&&(h="right"),function(e,i,r,n){let{x:a,width:s}=n,o=r.caretSize+r.caretPadding;if("left"===e&&a+s+o>i.width||"right"===e&&a-s-o<0)return!0}(h,e,i,r)&&(h="center"),h}(e,i,r,n),yAlign:n}}function fL(e,i,r,n){let{caretSize:a,caretPadding:s,cornerRadius:o}=e,{xAlign:l,yAlign:u}=r,h=a+s,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:p}=hA(o),m=function(e,i){let{x:r,width:n}=e;return"right"===i?r-=n:"center"===i&&(r-=n/2),r}(i,l),_=function(e,i,r){let{y:n,height:a}=e;return"top"===i?n+=r:"bottom"===i?n-=a+r:n-=a/2,n}(i,u,h);return"center"===u?"left"===l?m+=h:"right"===l&&(m-=h):"left"===l?m-=Math.max(c,f)+a:"right"===l&&(m+=Math.max(d,p)+a),{x:uU(m,0,n.width-i.width),y:uU(_,0,n.height-i.height)}}function fS(e,i,r){let n=hP(r.padding);return"center"===i?e.x+e.width/2:"right"===i?e.x+e.width-n.right:e.x+n.left}function fk(e,i){let r=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return r?e.override(r):e}let fD={beforeTitle:l7,title(e){if(e.length>0){let i=e[0],r=i.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return i.dataset.label||"";if(i.label)return i.label;if(n>0&&i.dataIndex<n)return r[i.dataIndex]}return""},afterTitle:l7,beforeBody:l7,beforeLabel:l7,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let i=e.dataset.label||"";i&&(i+=": ");let r=e.formattedValue;return ue(r)||(i+=r),i},labelColor(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:l7,afterBody:l7,beforeFooter:l7,footer:l7,afterFooter:l7};function fE(e,i,r,n){let a=e[i].call(r,n);return void 0===a?fD[i].call(r,n):a}class fA extends dl{static positioners=fx;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let i=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&i.options.animation&&r.animations,a=new cm(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=hO(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(e,i){let{callbacks:r}=i,n=fE(r,"beforeTitle",this,e),a=fE(r,"title",this,e),s=fE(r,"afterTitle",this,e),o=[];return o=fb(o,fw(n)),o=fb(o,fw(a)),o=fb(o,fw(s))}getBeforeBody(e,i){return fb([],fw(fE(i.callbacks,"beforeBody",this,e)))}getBody(e,i){let{callbacks:r}=i,n=[];return uu(e,e=>{let i={before:[],lines:[],after:[]},a=fk(r,e);fb(i.before,fw(fE(a,"beforeLabel",this,e))),fb(i.lines,fE(a,"label",this,e)),fb(i.after,fw(fE(a,"afterLabel",this,e))),n.push(i)}),n}getAfterBody(e,i){return fb([],fw(fE(i.callbacks,"afterBody",this,e)))}getFooter(e,i){let{callbacks:r}=i,n=fE(r,"beforeFooter",this,e),a=fE(r,"footer",this,e),s=fE(r,"afterFooter",this,e),o=[];return o=fb(o,fw(n)),o=fb(o,fw(a)),o=fb(o,fw(s))}_createItems(e){let i,r;let n=this._active,a=this.chart.data,s=[],o=[],l=[],u=[];for(i=0,r=n.length;i<r;++i)u.push(function(e,i){let{element:r,datasetIndex:n,index:a}=i,s=e.getDatasetMeta(n).controller,{label:o,value:l}=s.getLabelAndValue(a);return{chart:e,label:o,parsed:s.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:l,dataset:s.getDataset(),dataIndex:a,datasetIndex:n,element:r}}(this.chart,n[i]));return e.filter&&(u=u.filter((i,r,n)=>e.filter(i,r,n,a))),e.itemSort&&(u=u.sort((i,r)=>e.itemSort(i,r,a))),uu(u,i=>{let r=fk(e.callbacks,i);s.push(fE(r,"labelColor",this,i)),o.push(fE(r,"labelPointStyle",this,i)),l.push(fE(r,"labelTextColor",this,i))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,i){let r;let n=this.options.setContext(this.getContext()),a=this._active,s=[];if(a.length){let e=fx[n.position].call(this,a,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);let i=this._size=fM(this,n),o=Object.assign({},e,i),l=fT(this.chart,n,o),u=fL(n,o,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,r={opacity:1,x:u.x,y:u.y,width:i.width,height:i.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,n){let a=this.getCaretPosition(e,r,n);i.lineTo(a.x1,a.y1),i.lineTo(a.x2,a.y2),i.lineTo(a.x3,a.y3)}getCaretPosition(e,i,r){let n,a,s,o,l,u;let{xAlign:h,yAlign:c}=this,{caretSize:d,cornerRadius:f}=r,{topLeft:p,topRight:m,bottomLeft:_,bottomRight:g}=hA(f),{x:y,y:v}=e,{width:x,height:b}=i;return"center"===c?(l=v+b/2,"left"===h?(a=(n=y)-d,o=l+d,u=l-d):(a=(n=y+x)+d,o=l-d,u=l+d),s=n):(a="left"===h?y+Math.max(p,_)+d:"right"===h?y+x-Math.max(m,g)-d:this.caretX,"top"===c?(l=(o=v)-d,n=a-d,s=a+d):(l=(o=v+b)+d,n=a+d,s=a-d),u=o),{x1:n,x2:a,x3:s,y1:o,y2:l,y3:u}}drawTitle(e,i,r){let n,a,s;let o=this.title,l=o.length;if(l){let u=ci(r.rtl,this.x,this.width);for(s=0,e.x=fS(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",n=hC(r.titleFont),a=r.titleSpacing,i.fillStyle=r.titleColor,i.font=n.string;s<l;++s)i.fillText(o[s],u.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+a,s+1===l&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,i,r,n,a){let s=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=a,h=hC(a.bodyFont),c=fS(this,"left",a),d=n.x(c),f=l<h.lineHeight?(h.lineHeight-l)/2:0,p=i.y+f;if(a.usePointStyle){let i={radius:Math.min(u,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},r=n.leftForLtr(d,u)+u/2,h=p+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,h_(e,i,r,h),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,h_(e,i,r,h)}else{e.lineWidth=ui(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;let i=n.leftForLtr(d,u),r=n.leftForLtr(n.xPlus(d,1),u-2),o=hA(s.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,hT(e,{x:i,y:p,w:u,h:l,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),hT(e,{x:r,y:p+1,w:u-2,h:l-2,radius:o}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(i,p,u,l),e.strokeRect(i,p,u,l),e.fillStyle=s.backgroundColor,e.fillRect(r,p+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){let n,a,s,o,l,u,h;let{body:c}=this,{bodySpacing:d,bodyAlign:f,displayColors:p,boxHeight:m,boxWidth:_,boxPadding:g}=r,y=hC(r.bodyFont),v=y.lineHeight,x=0,b=ci(r.rtl,this.x,this.width),w=function(r){i.fillText(r,b.x(e.x+x),e.y+v/2),e.y+=v+d},M=b.textAlign(f);for(i.textAlign=f,i.textBaseline="middle",i.font=y.string,e.x=fS(this,M,r),i.fillStyle=r.bodyColor,uu(this.beforeBody,w),x=p&&"right"!==M?"center"===f?_/2+g:_+2+g:0,o=0,u=c.length;o<u;++o){for(n=c[o],a=this.labelTextColors[o],i.fillStyle=a,uu(n.before,w),s=n.lines,p&&s.length&&(this._drawColorBox(i,e,o,b,r),v=Math.max(y.lineHeight,m)),l=0,h=s.length;l<h;++l)w(s[l]),v=y.lineHeight;uu(n.after,w)}x=0,v=y.lineHeight,uu(this.afterBody,w),e.y-=d}drawFooter(e,i,r){let n,a;let s=this.footer,o=s.length;if(o){let l=ci(r.rtl,this.x,this.width);for(e.x=fS(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",n=hC(r.footerFont),i.fillStyle=r.footerColor,i.font=n.string,a=0;a<o;++a)i.fillText(s[a],l.x(e.x),e.y+n.lineHeight/2),e.y+=n.lineHeight+r.footerSpacing}}drawBackground(e,i,r,n){let{xAlign:a,yAlign:s}=this,{x:o,y:l}=e,{width:u,height:h}=r,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:p}=hA(n.cornerRadius);i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,i.lineWidth=n.borderWidth,i.beginPath(),i.moveTo(o+c,l),"top"===s&&this.drawCaret(e,i,r,n),i.lineTo(o+u-d,l),i.quadraticCurveTo(o+u,l,o+u,l+d),"center"===s&&"right"===a&&this.drawCaret(e,i,r,n),i.lineTo(o+u,l+h-p),i.quadraticCurveTo(o+u,l+h,o+u-p,l+h),"bottom"===s&&this.drawCaret(e,i,r,n),i.lineTo(o+f,l+h),i.quadraticCurveTo(o,l+h,o,l+h-f),"center"===s&&"left"===a&&this.drawCaret(e,i,r,n),i.lineTo(o,l+c),i.quadraticCurveTo(o,l,o+c,l),i.closePath(),i.fill(),n.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){let i=this.chart,r=this.$animations,n=r&&r.x,a=r&&r.y;if(n||a){let r=fx[e.position].call(this,this._active,this._eventPosition);if(!r)return;let s=this._size=fM(this,e),o=Object.assign({},r,this._size),l=fT(i,e,o),u=fL(e,o,l,i);(n._to!==u.x||a._to!==u.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=s.width,this.height=s.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let n={width:this.width,height:this.height},a={x:this.x,y:this.y};r=.001>Math.abs(r)?0:r;let s=hP(i.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,n,i),cr(e,i.textDirection),a.y+=s.top,this.drawTitle(a,e,i),this.drawBody(a,e,i),this.drawFooter(a,e,i),cn(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){let r=this._active,n=e.map(({datasetIndex:e,index:i})=>{let r=this.chart.getDatasetMeta(e);if(!r)throw Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:r.data[i],index:i}}),a=!uh(r,n),s=this._positionChanged(n,i);(a||s)&&(this._active=n,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let n=this.options,a=this._active||[],s=this._getActiveElements(e,a,i,r),o=this._positionChanged(s,e),l=i||!uh(s,a)||o;return l&&(this._active=s,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),l}_getActiveElements(e,i,r,n){let a=this.options;if("mouseout"===e.type)return[];if(!n)return i.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));let s=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&s.reverse(),s}_positionChanged(e,i){let{caretX:r,caretY:n,options:a}=this,s=fx[a.position].call(this,e,i);return!1!==s&&(r!==s.x||n!==s.y)}}var fP=Object.freeze({__proto__:null,Colors:{id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,i,r){let n;if(!r.enabled)return;let{data:{datasets:a},options:s}=e.config,{elements:o}=s;if(!r.forceOverride&&(ft(a)||s&&(s.borderColor||s.backgroundColor)||o&&ft(o)))return;let l=(n=0,(i,r)=>{var a,s,o;let l=e.getDatasetMeta(r).controller;l instanceof cO?(a=n,i.backgroundColor=i.data.map(()=>d9(a++)),n=a):l instanceof cz?(s=n,i.backgroundColor=i.data.map(()=>fe(s++)),n=s):l&&(o=n,i.borderColor=d9(o),i.backgroundColor=fe(o),n=++o)});a.forEach(l)}},Decimation:{id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,i,r)=>{if(!r.enabled){fr(e);return}let n=e.width;e.data.datasets.forEach((i,a)=>{let s;let{_data:o,indexAxis:l}=i,u=e.getDatasetMeta(a),h=o||i.data;if("y"===hI([l,e.options.indexAxis])||!u.controller.supportsDecimation)return;let c=e.scales[u.xAxisID];if("linear"!==c.type&&"time"!==c.type||e.options.parsing)return;let{start:d,count:f}=function(e,i){let r;let n=i.length,a=0,{iScale:s}=e,{min:o,max:l,minDefined:u,maxDefined:h}=s.getUserBounds();return u&&(a=uU(uG(i,s.axis,o).lo,0,n-1)),r=h?uU(uG(i,s.axis,l).hi+1,a,n)-a:n-a,{start:a,count:r}}(u,h);if(f<=(r.threshold||4*n)){fi(i);return}switch(ue(o)&&(i._data=h,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),r.algorithm){case"lttb":s=function(e,i,r,n,a){let s,o,l,u,h;let c=a.samples||n;if(c>=r)return e.slice(i,i+r);let d=[],f=(r-2)/(c-2),p=0,m=i+r-1,_=i;for(s=0,d[p++]=e[_];s<c-2;s++){let n,a=0,c=0,m=Math.floor((s+1)*f)+1+i,g=Math.min(Math.floor((s+2)*f)+1,r)+i,y=g-m;for(n=m;n<g;n++)a+=e[n].x,c+=e[n].y;a/=y,c/=y;let v=Math.floor(s*f)+1+i,x=Math.min(Math.floor((s+1)*f)+1,r)+i,{x:b,y:w}=e[_];for(l=u=-1,n=v;n<x;n++)(u=.5*Math.abs((b-a)*(e[n].y-w)-(b-e[n].x)*(c-w)))>l&&(l=u,o=e[n],h=n);d[p++]=o,_=h}return d[p++]=e[m],d}(h,d,f,n,r);break;case"min-max":s=function(e,i,r,n){let a,s,o,l,u,h,c,d,f,p,m=0,_=0,g=[],y=e[i].x,v=e[i+r-1].x-y;for(a=i;a<i+r;++a){o=((s=e[a]).x-y)/v*n,l=s.y;let i=0|o;if(i===u)l<f?(f=l,h=a):l>p&&(p=l,c=a),m=(_*m+s.x)/++_;else{let r=a-1;if(!ue(h)&&!ue(c)){let i=Math.min(h,c),n=Math.max(h,c);i!==d&&i!==r&&g.push({...e[i],x:m}),n!==d&&n!==r&&g.push({...e[n],x:m})}a>0&&r!==d&&g.push(e[r]),g.push(s),u=i,_=0,f=p=l,h=c=d=a}}return g}(h,d,f,n);break;default:throw Error(`Unsupported decimation algorithm '${r.algorithm}'`)}i._decimated=s})},destroy(e){fr(e)}},Filler:{id:"filler",afterDatasetsUpdate(e,i,r){let n,a,s,o;let l=(e.data.datasets||[]).length,u=[];for(a=0;a<l;++a)s=(n=e.getDatasetMeta(a)).dataset,o=null,s&&s.options&&s instanceof dQ&&(o={visible:e.isDatasetVisible(a),index:a,fill:function(e,i,r){var n,a;let s=function(e){let i=e.options,r=i.fill,n=ua(r&&r.target,r);return void 0===n&&(n=!!i.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(e);if(ui(s))return!isNaN(s.value)&&s;let o=parseFloat(s);return ur(o)&&Math.floor(o)===o?(n=s[0],a=o,("-"===n||"+"===n)&&(a=i+a),a!==i&&!(a<0)&&!(a>=r)&&a):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}(s,a,l),chart:e,axis:n.controller.options.indexAxis,scale:n.vScale,line:s}),n.$filler=o,u.push(o);for(a=0;a<l;++a)(o=u[a])&&!1!==o.fill&&(o.fill=function(e,i,r){let n;let a=e[i].fill,s=[i];if(!r)return a;for(;!1!==a&&-1===s.indexOf(a);){if(!ur(a))return a;if(!(n=e[a]))break;if(n.visible)return a;s.push(a),a=n.fill}return!1}(u,a,r.propagate))},beforeDraw(e,i,r){let n="beforeDraw"===r.drawTime,a=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let i=a.length-1;i>=0;--i){let r=a[i].$filler;r&&(r.line.updateControlPoints(s,r.axis),n&&r.fill&&fh(e.ctx,r,s))}},beforeDatasetsDraw(e,i,r){if("beforeDatasetsDraw"!==r.drawTime)return;let n=e.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){let r=n[i].$filler;fl(r)&&fh(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,i,r){let n=i.meta.$filler;fl(n)&&"beforeDatasetDraw"===r.drawTime&&fh(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Legend:{id:"legend",_element:f_,start(e,i,r){let n=e.legend=new f_({ctx:e.ctx,options:r,chart:e});c0.configure(e,n,r),c0.addBox(e,n)},stop(e){c0.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,i,r){let n=e.legend;c0.configure(e,n,r),n.options=r},afterUpdate(e){let i=e.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(e,i){i.replay||e.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,i,r){let n=i.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),i.hidden=!0):(a.show(n),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let i=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:s,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{let u=e.controller.getStyle(r?0:void 0),h=hP(u.borderWidth);return{text:i[e.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:a||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},SubTitle:{id:"subtitle",start(e,i,r){let n=new fy({ctx:e.ctx,options:r,chart:e});c0.configure(e,n,r),c0.addBox(e,n),fv.set(e,n)},stop(e){c0.removeBox(e,fv.get(e)),fv.delete(e)},beforeUpdate(e,i,r){let n=fv.get(e);c0.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Title:{id:"title",_element:fy,start(e,i,r){!function(e,i){let r=new fy({ctx:e.ctx,options:i,chart:e});c0.configure(e,r,i),c0.addBox(e,r),e.titleBlock=r}(e,r)},stop(e){let i=e.titleBlock;c0.removeBox(e,i),delete e.titleBlock},beforeUpdate(e,i,r){let n=e.titleBlock;c0.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Tooltip:{id:"tooltip",_element:fA,positioners:fx,afterInit(e,i,r){r&&(e.tooltip=new fA({chart:e,options:r}))},beforeUpdate(e,i,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,i,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){let i=e.tooltip;if(i&&i._willRender()){let r={tooltip:i};if(!1===e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0}))return;i.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,i){if(e.tooltip){let r=i.replay;e.tooltip.handleEvent(i.event,r,i.inChartArea)&&(i.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,i)=>i.bodyFont.size,boxWidth:(e,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});let fC=(e,i,r,n)=>("string"==typeof i?(r=e.push(i)-1,n.unshift({index:r,label:i})):isNaN(i)&&(r=null),r),fI=(e,i)=>null===e?null:uU(Math.round(e),0,i);function fO(e){let i=this.getLabels();return e>=0&&e<i.length?i[e]:e}function fz(e,i,{horizontal:r,minRotation:n}){let a=uY(n),s=(r?Math.sin(a):Math.cos(a))||.001,o=.75*i*(""+e).length;return Math.min(i/s,o)}class fR extends d_{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return ue(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:i,maxDefined:r}=this.getUserBounds(),{min:n,max:a}=this,s=e=>n=i?n:e,o=e=>a=r?a:e;if(e){let e=uC(n),i=uC(a);e<0&&i<0?o(0):e>0&&i>0&&s(0)}if(n===a){let i=0===a?1:Math.abs(.05*a);o(a+i),e||s(n-i)}this.min=n,this.max=a}getTickLimit(){let e;let{maxTicksLimit:i,stepSize:r}=this.options.ticks;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(this.id,e=1e3):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,i=e.ticks,r=this.getTickLimit(),n=function(e,i){let r,n,a,s;let o=[],{bounds:l,step:u,min:h,max:c,precision:d,count:f,maxTicks:p,maxDigits:m,includeBounds:_}=e,g=u||1,y=p-1,{min:v,max:x}=i,b=!ue(h),w=!ue(c),M=!ue(f),T=(x-v)/(m+1),L=uO((x-v)/y/g)*g;if(L<1e-14&&!b&&!w)return[{value:v},{value:x}];(s=Math.ceil(x/L)-Math.floor(v/L))>y&&(L=uO(s*L/y/g)*g),ue(d)||(L=Math.ceil(L*(r=Math.pow(10,d)))/r),"ticks"===l?(n=Math.floor(v/L)*L,a=Math.ceil(x/L)*L):(n=v,a=x),b&&w&&u&&function(e,i){let r=Math.round(e);return r-i<=e&&r+i>=e}((c-h)/u,L/1e3)?(s=Math.round(Math.min((c-h)/L,p)),L=(c-h)/s,n=h,a=c):M?(n=b?h:n,L=((a=w?c:a)-n)/(s=f-1)):s=uI(s=(a-n)/L,Math.round(s),L/1e3)?Math.round(s):Math.ceil(s);let S=Math.max(uF(L),uF(n));n=Math.round(n*(r=Math.pow(10,ue(d)?S:d)))/r,a=Math.round(a*r)/r;let k=0;for(b&&(_&&n!==h?(o.push({value:h}),n<h&&k++,uI(Math.round((n+k*L)*r)/r,h,fz(h,T,e))&&k++):n<h&&k++);k<s;++k){let e=Math.round((n+k*L)*r)/r;if(w&&e>c)break;o.push({value:e})}return w&&_&&a!==c?o.length&&uI(o[o.length-1].value,c,fz(c,T,e))?o[o.length-1].value=c:o.push({value:c}):w&&a!==c||o.push({value:a}),o}({maxTicks:r=Math.max(2,r),bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:!1!==i.includeBounds},this._range||this);return"ticks"===e.bounds&&uR(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){let e=this.ticks,i=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let n=(r-i)/Math.max(e.length-1,1)/2;i-=n,r+=n}this._startValue=i,this._endValue=r,this._valueRange=r-i}getLabelForValue(e){return ha(e,this.chart.options.locale,this.options.ticks.format)}}class fY extends fR{static id="linear";static defaults={ticks:{callback:ho.formatters.numeric}};determineDataLimits(){let{min:e,max:i}=this.getMinMax(!0);this.min=ur(e)?e:0,this.max=ur(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),i=e?this.width:this.height,r=uY(this.options.ticks.minRotation),n=(e?Math.sin(r):Math.cos(r))||.001;return Math.ceil(i/Math.min(40,this._resolveTickFontOptions(0).lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}let fF=e=>Math.floor(uP(e)),fj=(e,i)=>Math.pow(10,fF(e)+i);function fB(e){return 1==e/Math.pow(10,fF(e))}function fN(e,i,r){let n=Math.pow(10,r),a=Math.floor(e/n);return Math.ceil(i/n)-a}class fH extends d_{static id="logarithmic";static defaults={ticks:{callback:ho.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,i){let r=fR.prototype.parse.apply(this,[e,i]);if(0===r){this._zero=!0;return}return ur(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:i}=this.getMinMax(!0);this.min=ur(e)?Math.max(0,e):null,this.max=ur(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ur(this._userMin)&&(this.min=e===fj(this.min,0)?fj(this.min,-1):fj(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:i}=this.getUserBounds(),r=this.min,n=this.max,a=i=>r=e?r:i,s=e=>n=i?n:e;r===n&&(r<=0?(a(1),s(10)):(a(fj(r,-1)),s(fj(n,1)))),r<=0&&a(fj(n,-1)),n<=0&&s(fj(r,1)),this.min=r,this.max=n}buildTicks(){let e=this.options,i=function(e,{min:i,max:r}){i=un(e.min,i);let n=[],a=fF(i),s=function(e,i){let r=fF(i-e);for(;fN(e,i,r)>10;)r++;for(;10>fN(e,i,r);)r--;return Math.min(r,fF(e))}(i,r),o=s<0?Math.pow(10,Math.abs(s)):1,l=Math.pow(10,s),u=a>s?Math.pow(10,a):0,h=Math.round((i-u)*o)/o,c=Math.floor((i-u)/l/10)*l*10,d=Math.floor((h-c)/Math.pow(10,s)),f=un(e.min,Math.round((u+c+d*Math.pow(10,s))*o)/o);for(;f<r;)n.push({value:f,major:fB(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(d=2,o=++s>=0?1:o),f=Math.round((u+c+d*Math.pow(10,s))*o)/o;let p=un(e.max,f);return n.push({value:p,major:fB(p),significand:d}),n}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&uR(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return void 0===e?"0":ha(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=uP(e),this._valueRange=uP(this.max)-uP(e)}getPixelForValue(e){return((void 0===e||0===e)&&(e=this.min),null===e||isNaN(e))?NaN:this.getPixelForDecimal(e===this.min?0:(uP(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let i=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+i*this._valueRange)}}function fV(e){let i=e.ticks;if(i.display&&e.display){let e=hP(i.backdropPadding);return ua(i.font&&i.font.size,hd.font.size)+e.height}return 0}function fU(e,i,r,n,a){return e===n||e===a?{start:i-r/2,end:i+r/2}:e<n||e>a?{start:i-r,end:i}:{start:i,end:i+r}}function f$(e,i,r,n){let{ctx:a}=e;if(r)a.arc(e.xCenter,e.yCenter,i,0,uT);else{let r=e.getPointPosition(0,i);a.moveTo(r.x,r.y);for(let s=1;s<n;s++)r=e.getPointPosition(s,i),a.lineTo(r.x,r.y)}}class fW extends fR{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ho.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=hP(fV(this.options)/2),i=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+i/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(i,r)/2)}determineDataLimits(){let{min:e,max:i}=this.getMinMax(!1);this.min=ur(e)&&!isNaN(e)?e:0,this.max=ur(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fV(this.options))}generateTickLabels(e){fR.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,i)=>{let r=ul(this.options.pointLabels.callback,[e,i],this);return r||0===r?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?function(e){let i={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},r=Object.assign({},i),n=[],a=[],s=e._pointLabels.length,o=e.options.pointLabels,l=o.centerPointLabels?uM/s:0;for(let c=0;c<s;c++){var u,h;let s=o.setContext(e.getPointLabelContext(c));a[c]=s.padding;let d=e.getPointPosition(c,e.drawingArea+a[c],l),f=hC(s.font),p=(u=e.ctx,h=ut(h=e._pointLabels[c])?h:[h],{w:function(e,i,r,n){let a,s,o,l,u;let h=(n=n||{}).data=n.data||{},c=n.garbageCollect=n.garbageCollect||[];n.font!==i&&(h=n.data={},c=n.garbageCollect=[],n.font=i),e.save(),e.font=i;let d=0,f=r.length;for(a=0;a<f;a++)if(null==(l=r[a])||ut(l)){if(ut(l))for(s=0,o=l.length;s<o;s++)null==(u=l[s])||ut(u)||(d=hf(e,h,c,d,u))}else d=hf(e,h,c,d,l);e.restore();let p=c.length/2;if(p>r.length){for(a=0;a<p;a++)delete h[c[a]];c.splice(0,p)}return d}(u,f.string,h),h:h.length*f.lineHeight});n[c]=p;let m=uH(e.getIndexAngle(c)+l),_=Math.round(180/uM*m);!function(e,i,r,n,a){let s=Math.abs(Math.sin(r)),o=Math.abs(Math.cos(r)),l=0,u=0;n.start<i.l?(l=(i.l-n.start)/s,e.l=Math.min(e.l,i.l-l)):n.end>i.r&&(l=(n.end-i.r)/s,e.r=Math.max(e.r,i.r+l)),a.start<i.t?(u=(i.t-a.start)/o,e.t=Math.min(e.t,i.t-u)):a.end>i.b&&(u=(a.end-i.b)/o,e.b=Math.max(e.b,i.b+u))}(r,i,m,fU(_,d.x,p.w,0,180),fU(_,d.y,p.h,90,270))}e.setCenterPoint(i.l-r.l,r.r-i.r,i.t-r.t,r.b-i.b),e._pointLabelItems=function(e,i,r){let n;let a=[],s=e._pointLabels.length,o=e.options,{centerPointLabels:l,display:u}=o.pointLabels,h={extra:fV(o)/2,additionalAngle:l?uM/s:0};for(let o=0;o<s;o++){h.padding=r[o],h.size=i[o];let s=function(e,i,r){var n,a,s,o;let l=e.drawingArea,{extra:u,additionalAngle:h,padding:c,size:d}=r,f=e.getPointPosition(i,l+u+c,h),p=Math.round(180/uM*uH(f.angle+uD)),m=(n=f.y,a=d.h,90===p||270===p?n-=a/2:(p>270||p<90)&&(n-=a),n),_=0===p||180===p?"center":p<180?"left":"right",g=(s=f.x,o=d.w,"right"===_?s-=o:"center"===_&&(s-=o/2),s);return{visible:!0,x:f.x,y:m,textAlign:_,left:g,top:m,right:g+d.w,bottom:m+d.h}}(e,o,h);a.push(s),"auto"===u&&(s.visible=function(e,i){if(!i)return!0;let{left:r,top:n,right:a,bottom:s}=e;return!(hy({x:r,y:n},i)||hy({x:r,y:s},i)||hy({x:a,y:n},i)||hy({x:a,y:s},i))}(s,n),s.visible&&(n=s))}return a}(e,n,a)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,i,r,n){this.xCenter+=Math.floor((e-i)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,i,r,n))}getIndexAngle(e){return uH(uT/(this._pointLabels.length||1)*e+uY(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(ue(e))return NaN;let i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*i:(e-this.min)*i}getValueForDistanceFromCenter(e){if(ue(e))return NaN;let i=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(e){let i=this._pointLabels||[];if(e>=0&&e<i.length){let r=i[e];return hO(this.getContext(),{label:r,index:e,type:"pointLabel"})}}getPointPosition(e,i,r=0){let n=this.getIndexAngle(e)-uD+r;return{x:Math.cos(n)*i+this.xCenter,y:Math.sin(n)*i+this.yCenter,angle:n}}getPointPositionForValue(e,i){return this.getPointPosition(e,this.getDistanceFromCenterForValue(i))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:i,top:r,right:n,bottom:a}=this._pointLabelItems[e];return{left:i,top:r,right:n,bottom:a}}drawBackground(){let{backgroundColor:e,grid:{circular:i}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),f$(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e,i,r;let n=this.ctx,a=this.options,{angleLines:s,grid:o,border:l}=a,u=this._pointLabels.length;if(a.pointLabels.display&&function(e,i){let{ctx:r,options:{pointLabels:n}}=e;for(let a=i-1;a>=0;a--){let i=e._pointLabelItems[a];if(!i.visible)continue;let s=n.setContext(e.getPointLabelContext(a));!function(e,i,r){let{left:n,top:a,right:s,bottom:o}=r,{backdropColor:l}=i;if(!ue(l)){let r=hA(i.borderRadius),u=hP(i.backdropPadding);e.fillStyle=l;let h=n-u.left,c=a-u.top,d=s-n+u.width,f=o-a+u.height;Object.values(r).some(e=>0!==e)?(e.beginPath(),hT(e,{x:h,y:c,w:d,h:f,radius:r}),e.fill()):e.fillRect(h,c,d,f)}}(r,s,i);let o=hC(s.font),{x:l,y:u,textAlign:h}=i;hM(r,e._pointLabels[a],l,u+o.lineHeight/2,o,{color:s.color,textAlign:h,textBaseline:"middle"})}}(this,u),o.display&&this.ticks.forEach((e,r)=>{if(0!==r||0===r&&this.min<0){i=this.getDistanceFromCenterForValue(e.value);let n=this.getContext(r),a=o.setContext(n),s=l.setContext(n);!function(e,i,r,n,a){let s=e.ctx,o=i.circular,{color:l,lineWidth:u}=i;(o||n)&&l&&u&&!(r<0)&&(s.save(),s.strokeStyle=l,s.lineWidth=u,s.setLineDash(a.dash),s.lineDashOffset=a.dashOffset,s.beginPath(),f$(e,r,o,n),s.closePath(),s.stroke(),s.restore())}(this,a,i,u,s)}}),s.display){for(n.save(),e=u-1;e>=0;e--){let o=s.setContext(this.getPointLabelContext(e)),{color:l,lineWidth:u}=o;u&&l&&(n.lineWidth=u,n.strokeStyle=l,n.setLineDash(o.borderDash),n.lineDashOffset=o.borderDashOffset,i=this.getDistanceFromCenterForValue(a.ticks.reverse?this.min:this.max),r=this.getPointPosition(e,i),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(r.x,r.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){let e,i;let r=this.ctx,n=this.options,a=n.ticks;if(!a.display)return;let s=this.getIndexAngle(0);r.save(),r.translate(this.xCenter,this.yCenter),r.rotate(s),r.textAlign="center",r.textBaseline="middle",this.ticks.forEach((s,o)=>{if(0===o&&this.min>=0&&!n.reverse)return;let l=a.setContext(this.getContext(o)),u=hC(l.font);if(e=this.getDistanceFromCenterForValue(this.ticks[o].value),l.showLabelBackdrop){r.font=u.string,i=r.measureText(s.label).width,r.fillStyle=l.backdropColor;let n=hP(l.backdropPadding);r.fillRect(-i/2-n.left,-e-u.size/2-n.top,i+n.width,u.size+n.height)}hM(r,s.label,0,-e,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),r.restore()}drawTitle(){}}let fG={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fq=Object.keys(fG);function fZ(e,i){return e-i}function fX(e,i){if(ue(i))return null;let r=e._adapter,{parser:n,round:a,isoWeekday:s}=e._parseOpts,o=i;return("function"==typeof n&&(o=n(o)),ur(o)||(o="string"==typeof n?r.parse(o,n):r.parse(o)),null===o)?null:(a&&(o="week"===a&&(uz(s)||!0===s)?r.startOf(o,"isoWeek",s):r.startOf(o,a)),+o)}function fJ(e,i,r,n){let a=fq.length;for(let s=fq.indexOf(e);s<a-1;++s){let e=fG[fq[s]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((r-i)/(a*e.size))<=n)return fq[s]}return fq[a-1]}function fK(e,i,r){if(r){if(r.length){let{lo:n,hi:a}=uW(r,i);e[r[n]>=i?r[n]:r[a]]=!0}}else e[i]=!0}function fQ(e,i,r){let n,a;let s=[],o={},l=i.length;for(n=0;n<l;++n)o[a=i[n]]=n,s.push({value:a,major:!1});return 0!==l&&r?function(e,i,r,n){let a,s;let o=e._adapter,l=+o.startOf(i[0].value,n),u=i[i.length-1].value;for(a=l;a<=u;a=+o.add(a,1,n))(s=r[a])>=0&&(i[s].major=!0);return i}(e,s,o,r):s}class f0 extends d_{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){let r=e.time||(e.time={}),n=this._adapter=new cj._date(e.adapters.date);n.init(i),um(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return void 0===e?null:fX(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,i=this._adapter,r=e.time.unit||"day",{min:n,max:a,minDefined:s,maxDefined:o}=this.getUserBounds();function l(e){s||isNaN(e.min)||(n=Math.min(n,e.min)),o||isNaN(e.max)||(a=Math.max(a,e.max))}s&&o||(l(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&l(this.getMinMax(!1))),n=ur(n)&&!isNaN(n)?n:+i.startOf(Date.now(),r),a=ur(a)&&!isNaN(a)?a:+i.endOf(Date.now(),r)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){let e=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){let e=this.options,i=e.time,r=e.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);let a=this.min,s=function(e,i,r){let n=0,a=e.length;for(;n<a&&e[n]<i;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}(n,a,this.max);return this._unit=i.unit||(r.autoSkip?fJ(i.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,i,r,n,a){for(let s=fq.length-1;s>=fq.indexOf(r);s--){let r=fq[s];if(fG[r].common&&e._adapter.diff(a,n,r)>=i-1)return r}return fq[r?fq.indexOf(r):0]}(this,s.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(e){for(let i=fq.indexOf(e)+1,r=fq.length;i<r;++i)if(fG[fq[i]].common)return fq[i]}(this._unit):void 0,this.initOffsets(n),e.reverse&&s.reverse(),fQ(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i,r,n=0,a=0;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),n=1===e.length?1-i:(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),a=1===e.length?r:(r-this.getDecimalForValue(e[e.length-2]))/2);let s=e.length<3?.5:.25;n=uU(n,0,s),a=uU(a,0,s),this._offsets={start:n,end:a,factor:1/(n+1+a)}}_generate(){let e,i;let r=this._adapter,n=this.min,a=this.max,s=this.options,o=s.time,l=o.unit||fJ(o.minUnit,n,a,this._getLabelCapacity(n)),u=ua(s.ticks.stepSize,1),h="week"===l&&o.isoWeekday,c=uz(h)||!0===h,d={},f=n;if(c&&(f=+r.startOf(f,"isoWeek",h)),f=+r.startOf(f,c?"day":l),r.diff(a,n,l)>1e5*u)throw Error(n+" and "+a+" are too far apart with stepSize of "+u+" "+l);let p="data"===s.ticks.source&&this.getDataTimestamps();for(e=f,i=0;e<a;e=+r.add(e,u,l),i++)fK(d,e,p);return(e===a||"ticks"===s.bounds||1===i)&&fK(d,e,p),Object.keys(d).sort(fZ).map(e=>+e)}getLabelForValue(e){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(e,r.tooltipFormat):i.format(e,r.displayFormats.datetime)}format(e,i){let r=this.options.time.displayFormats,n=this._unit,a=i||r[n];return this._adapter.format(e,a)}_tickFormatFunction(e,i,r,n){let a=this.options,s=a.ticks.callback;if(s)return ul(s,[e,i,r],this);let o=a.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&o[l],c=u&&o[u],d=r[i],f=u&&c&&d&&d.major;return this._adapter.format(e,n||(f?c:h))}generateTickLabels(e){let i,r,n;for(i=0,r=e.length;i<r;++i)(n=e[i]).label=this._tickFormatFunction(n.value,i,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){let i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){let i=this.options.ticks,r=this.ctx.measureText(e).width,n=uY(this.isHorizontal()?i.maxRotation:i.minRotation),a=Math.cos(n),s=Math.sin(n),o=this._resolveTickFontOptions(0).size;return{w:r*a+o*s,h:r*s+o*a}}_getLabelCapacity(e){let i=this.options.time,r=i.displayFormats,n=r[i.unit]||r.millisecond,a=this._tickFormatFunction(e,0,fQ(this,[e],this._majorUnit),n),s=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,i,r=this._cache.data||[];if(r.length)return r;let n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,i=n.length;e<i;++e)r=r.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){let e,i;let r=this._cache.labels||[];if(r.length)return r;let n=this.getLabels();for(e=0,i=n.length;e<i;++e)r.push(fX(this,n[e]));return this._cache.labels=this._normalized?r:this.normalize(r)}normalize(e){return uJ(e.sort(fZ))}}function f1(e,i,r){let n,a,s,o,l=0,u=e.length-1;r?(i>=e[l].pos&&i<=e[u].pos&&({lo:l,hi:u}=uG(e,"pos",i)),{pos:n,time:s}=e[l],{pos:a,time:o}=e[u]):(i>=e[l].time&&i<=e[u].time&&({lo:l,hi:u}=uG(e,"time",i)),{time:n,pos:s}=e[l],{time:a,pos:o}=e[u]);let h=a-n;return h?s+(o-s)*(i-n)/h:s}class f2 extends f0{static id="timeseries";static defaults=f0.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=f1(i,this.min),this._tableRange=f1(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let i,r,n;let{min:a,max:s}=this,o=[],l=[];for(i=0,r=e.length;i<r;++i)(n=e[i])>=a&&n<=s&&o.push(n);if(o.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(i=0,r=o.length;i<r;++i)Math.round((o[i+1]+o[i-1])/2)!==(n=o[i])&&l.push({time:n,pos:i/(r-1)});return l}_generate(){let e=this.min,i=this.max,r=super.getDataTimestamps();return r.includes(e)&&r.length||r.splice(0,0,e),r.includes(i)&&1!==r.length||r.push(i),r.sort((e,i)=>e-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let i=this.getDataTimestamps(),r=this.getLabelTimestamps();return e=i.length&&r.length?this.normalize(i.concat(r)):i.length?i:r,e=this._cache.all=e}getDecimalForValue(e){return(f1(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return f1(this._table,r*this._tableRange+this._minPos,!0)}}var f3=Object.freeze({__proto__:null,CategoryScale:class extends d_{static id="category";static defaults={ticks:{callback:fO}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let i=this._addedLabels;if(i.length){let e=this.getLabels();for(let{index:r,label:n}of i)e[r]===n&&e.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(ue(e))return null;let r=this.getLabels();return fI(i=isFinite(i)&&r[i]===e?i:function(e,i,r,n){let a=e.indexOf(i);return -1===a?fC(e,i,r,n):a!==e.lastIndexOf(i)?r:a}(r,e,ua(i,e),this._addedLabels),r.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:n}=this.getMinMax(!0);"ticks"!==this.options.bounds||(e||(r=0),i||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){let e=this.min,i=this.max,r=this.options.offset,n=[],a=this.getLabels();a=0===e&&i===a.length-1?a:a.slice(e,i+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let r=e;r<=i;r++)n.push({value:r});return n}getLabelForValue(e){return fO.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:fY,LogarithmicScale:fH,RadialLinearScale:fW,TimeScale:f0,TimeSeriesScale:f2});function f4(e,i,r,n){let a=null===i,s=null===r,o=!!e&&(!a||!s)&&function(e,i){let r,n,a,s,o;let{x:l,y:u,base:h,width:c,height:d}=e.getProps(["x","low","high","width","height"],i);return e.horizontal?(o=d/2,r=Math.min(l,h),n=Math.max(l,h),a=u-o,s=u+o):(r=l-(o=c/2),n=l+o,a=Math.min(u,h),s=Math.max(u,h)),{left:r,top:a,right:n,bottom:s}}(e,n);return o&&(a||i>=o.left&&i<=o.right)&&(s||r>=o.top&&r<=o.bottom)}dH.register(...[cR,d6,fP,f3]),dH.defaults.elements.financial={color:{up:"rgba(80, 160, 115, 1)",down:"rgba(215, 85, 65, 1)",unchanged:"rgba(90, 90, 90, 1)"}};class f5 extends dl{height(){return this.base-this.y}inRange(e,i,r){return f4(this,e,i,r)}inXRange(e,i){return f4(this,e,null,i)}inYRange(e,i){return f4(this,null,e,i)}getRange(e){return"x"===e?this.width/2:this.height/2}getCenterPoint(e){let{x:i,low:r,high:n}=this.getProps(["x","low","high"],e);return{x:i,y:(n+r)/2}}tooltipPosition(e){let{x:i,open:r,close:n}=this.getProps(["x","open","close"],e);return{x:i,y:(r+n)/2}}}let f6=dH.defaults;class f8 extends f5{draw(e){let{x:i,open:r,high:n,low:a,close:s}=this,o=ua(this.armLengthRatio,f6.elements.ohlc.armLengthRatio),l=ua(this.armLength,f6.elements.ohlc.armLength);null===l&&(l=this.width*o*.5),s<r?e.strokeStyle=ua(this.color?this.color.up:void 0,f6.elements.ohlc.color.up):s>r?e.strokeStyle=ua(this.color?this.color.down:void 0,f6.elements.ohlc.color.down):e.strokeStyle=ua(this.color?this.color.unchanged:void 0,f6.elements.ohlc.color.unchanged),e.lineWidth=ua(this.lineWidth,f6.elements.ohlc.lineWidth),e.beginPath(),e.moveTo(i,n),e.lineTo(i,a),e.moveTo(i-l,r),e.lineTo(i,r),e.moveTo(i+l,s),e.lineTo(i,s),e.stroke()}}f8.id="ohlc",f8.defaults=up({},[f6.elements.financial,{lineWidth:2,armLength:null,armLengthRatio:.8}]);class f7 extends cI{getLabelAndValue(e){let i=this.getParsed(e),r=this._cachedMeta.iScale.axis,{o:n,h:a,l:s,c:o}=i,l=`O: ${n}  H: ${a}  L: ${s}  C: ${o}`;return{label:`${this._cachedMeta.iScale.getLabelForValue(i[r])}`,value:l}}getAllParsedValues(){let e=this._cachedMeta,i=e.iScale.axis,r=e._parsed,n=[];for(let e=0;e<r.length;++e)n.push(r[e][i]);return n}getMinMax(e){let i=this._cachedMeta,r=i._parsed,n=i.iScale.axis;if(r.length<2)return{min:0,max:1};if(e===i.iScale)return{min:r[0][n],max:r[r.length-1][n]};let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(let e=0;e<r.length;e++){let i=r[e];a=Math.min(a,i.l),s=Math.max(s,i.h)}return{min:a,max:s}}_getRuler(){let e=this.options,i=this._cachedMeta,r=i.iScale,n=r.axis,a=[];for(let e=0;e<i.data.length;++e)a.push(r.getPixelForValue(this.getParsed(e)[n]));let s=e.barThickness;return{min:function(e,i){let r,n,a,s,o=e._length;for(a=1,s=i.length;a<s;++a)o=Math.min(o,Math.abs(i[a]-i[a-1]));for(a=0,s=e.ticks.length;a<s;++a)n=e.getPixelForTick(a),o=a>0?Math.min(o,Math.abs(n-r)):o,r=n;return o}(r,a),pixels:a,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,ratio:s?1:e.categoryPercentage*e.barPercentage}}calculateElementProperties(e,i,r,n){let a=this._cachedMeta.vScale,s=a.getBasePixel(),o=this._calculateBarIndexPixels(e,i,n),l=this.chart.data.datasets[this.index].data[e],u=a.getPixelForValue(l.o),h=a.getPixelForValue(l.h),c=a.getPixelForValue(l.l),d=a.getPixelForValue(l.c);return{base:r?s:c,x:o.center,y:(c+h)/2,width:o.size,open:u,high:h,low:c,close:d}}draw(){let e=this.chart,i=this._cachedMeta.data;hv(e.ctx,e.chartArea);for(let e=0;e<i.length;++e)i[e].draw(this._ctx);hx(e.ctx)}}f7.overrides={label:"",parsing:!1,hover:{mode:"label"},datasets:{categoryPercentage:.8,barPercentage:.9,animation:{numbers:{type:"number",properties:["x","y","base","width","open","high","low","close"]}}},scales:{x:{type:"timeseries",offset:!0,ticks:{major:{enabled:!0},fontStyle:e=>e.tick.major?"bold":void 0,source:"data",maxRotation:0,autoSkip:!0,autoSkipPadding:75,sampleSize:100},afterBuildTicks:e=>{let i=window&&window.luxon&&window.luxon.DateTime;if(!i)return;let r=e._majorUnit,n=e.ticks,a=n[0];if(!a)return;let s=i.fromMillis(a.value);"minute"===r&&0===s.second||"hour"===r&&0===s.minute||"day"===r&&9===s.hour||"month"===r&&s.day<=3&&1===s.weekday||"year"===r&&1===s.month?a.major=!0:a.major=!1;let o=s.get(r);for(let e=1;e<n.length;e++){let a=n[e],l=(s=i.fromMillis(a.value)).get(r);a.major=l!==o,o=l}e.ticks=n}},y:{type:"linear"}},plugins:{tooltip:{intersect:!1,mode:"index",callbacks:{label(e){let i=e.parsed;if(!ue(i.y))return hd.plugins.tooltip.callbacks.label(e);let{o:r,h:n,l:a,c:s}=i;return`O: ${r}  H: ${n}  L: ${a}  C: ${s}`}}}}};class f9 extends f7{updateElements(e,i,r,n){let a=this.getDataset(),s=this._ruler||this._getRuler(),o=this.resolveDataElementOptions(i,n),l=this.getSharedOptions(o),u=this.includeOptions(n,l);for(let i=0;i<r;i++){let r=l||this.resolveDataElementOptions(i,n),o={...this.calculateElementProperties(i,s,"reset"===n,r),datasetLabel:a.label||"",lineWidth:a.lineWidth,armLength:a.armLength,armLengthRatio:a.armLengthRatio,color:a.color};u&&(o.options=r),this.updateElement(e[i],i,o,n)}}}f9.id="ohlc",f9.defaults=up({dataElementType:f8.id,datasets:{barPercentage:1,categoryPercentage:1}},dH.defaults.financial);let pe=dH.defaults;class pt extends f5{draw(e){let i;let{x:r,open:n,high:a,low:s,close:o}=this,l=this.borderColor;"string"==typeof l&&(l={up:l,down:l,unchanged:l}),o<n?(i=ua(l?l.up:void 0,pe.elements.candlestick.borderColor),e.fillStyle=ua(this.color?this.color.up:void 0,pe.elements.candlestick.color.up)):o>n?(i=ua(l?l.down:void 0,pe.elements.candlestick.borderColor),e.fillStyle=ua(this.color?this.color.down:void 0,pe.elements.candlestick.color.down)):(i=ua(l?l.unchanged:void 0,pe.elements.candlestick.borderColor),e.fillStyle=ua(this.color?this.color.unchanged:void 0,pe.elements.candlestick.color.unchanged)),e.lineWidth=ua(this.borderWidth,pe.elements.candlestick.borderWidth),e.strokeStyle=ua(i,pe.elements.candlestick.borderColor),e.beginPath(),e.moveTo(r,a),e.lineTo(r,Math.min(n,o)),e.moveTo(r,s),e.lineTo(r,Math.max(n,o)),e.stroke(),e.fillRect(r-this.width/2,o,this.width,n-o),e.strokeRect(r-this.width/2,o,this.width,n-o),e.closePath()}}pt.id="candlestick",pt.defaults=up({},[pe.elements.financial,{borderColor:pe.elements.financial.color.unchanged,borderWidth:1}]);class pi extends f7{updateElements(e,i,r,n){let a=this.getDataset(),s=this._ruler||this._getRuler(),o=this.resolveDataElementOptions(i,n),l=this.getSharedOptions(o),u=this.includeOptions(n,l);this.updateSharedOptions(l,n,o);for(let o=i;o<r;o++){let i=l||this.resolveDataElementOptions(o,n),r={...this.calculateElementProperties(o,s,"reset"===n,i),datasetLabel:a.label||"",color:a.color,borderColor:a.borderColor,borderWidth:a.borderWidth};u&&(r.options=i),this.updateElement(e[o],o,r,n)}}}pi.id="candlestick",pi.defaults=up({dataElementType:pt.id},dH.defaults.financial);var pr=r(381),pn=r.n(pr);let pa={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};cj._date.override("function"==typeof pn()?{_id:"moment",formats:function(){return pa},parse:function(e,i){return"string"==typeof e&&"string"==typeof i?e=pn()(e,i):e instanceof pn()||(e=pn()(e)),e.isValid()?e.valueOf():null},format:function(e,i){return pn()(e).format(i)},add:function(e,i,r){return pn()(e).add(i,r).valueOf()},diff:function(e,i,r){return pn()(e).diff(pn()(i),r)},startOf:function(e,i,r){return(e=pn()(e),"isoWeek"===i)?(r=Math.trunc(Math.min(Math.max(0,r),6)),e.isoWeekday(r).startOf("day").valueOf()):e.startOf(i).valueOf()},endOf:function(e,i){return pn()(e).endOf(i).valueOf()}}:{});let ps=new class{data=[];minPrice=0;maxPrice=0;observers=[];subscribe(e){this.observers.push(e)}unsubscribe(e){let i=this.observers.indexOf(e);-1!==i&&this.observers.splice(i,1)}notifySubscribers(){this.observers.forEach(e=>{e.update(this.data,this.minPrice,this.maxPrice)})}setData(e,i,r){this.data=e,this.minPrice=i,this.maxPrice=r,this.notifySubscribers()}},po=[{text:"Select Date:",id:"selectedDate",type:"date"},{text:"Minimum Price:",id:"minPrice",type:"number"},{text:"Maximum Price:",id:"maxPrice",type:"number"}],pl=(e,i)=>Number(Math.random()*(i-e+1)+e),pu=(e,i,r)=>{let n=new Date(r).getTime(),a=[];for(let r=0;r<30;r+=1){let s=864e5*r,o=pl(e,i),l=pl(e,i),u=pl(Math.max(o,l),i),h=pl(e,Math.min(l,o)),c=n+s;a.push({x:c,o,h:u,l:h,c:l})}return a},ph=e=>({labels:[],datasets:[{data:e,label:"Candlestick Data",backgroundColor:"#000000",color:{up:"rgba(80, 160, 115, 1)",down:"rgba(215, 85, 65, 1)",unchanged:"rgba(90, 90, 90, 1)"},pointRadius:0,pointHoverRadius:0}]}),pc=(e,i)=>({responsive:!0,scales:{y:{beginAtZero:!1,min:e,max:i}},plugins:{title:{display:!0,text:"Candlestick Chart"},legend:{display:!1}}}),pd=tQ.div`
  ${({theme:e})=>tH`
    max-width: ${e.spacing(1200)};
    max-height: ${e.spacing(630)};
    margin: ${e.spacing(20)} auto;
    margin-bottom: ${e.spacing(400)};
  `}
`,pf=tQ.label`
  ${({theme:e})=>tH`
    ${e.typography.variant.h6};
    color: ${e.colors.secondary};
  `}
`;tQ.form`
  display: flex;
  flex-direction: column;
  justify-content: center;
`;let pp=tQ.div`
  ${({theme:e})=>tH`
    display: flex;
    flex-direction: row;
    justify-content: space-evenly;
    margin: ${e.spacing(20)};
  `}
`,pm=tQ.input`
  ${({theme:e})=>tH`
    ${e.typography.variant.h6}
    width: ${e.spacing(70)};
    max-width: ${e.spacing(150)};
    margin-left: ${e.spacing(8)};
    border-radius: ${e.spacing(20)};
    ${e.media.lg`min-width: ${e.spacing(130)};`}
  `}
`,p_=tQ.div`
  display: flex;
  align-items: end;
`,pg=t1`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,py=tQ.button`
  ${({theme:e})=>tH`
    display: flex;

    ${e.typography.variant.h6};
    max-width: ${e.spacing(100)};

    color: ${e.colors.primary};

    background-color: ${e.colors.secondary};
    border-radius: ${e.spacing(20)};

    transition:
      background-color 0.3s ease,
      transform 0.3s ease;
    animation: ${pg} 0.5s ease;

    &:hover {
      transform: scale(1.05);
      background-color: ${e.colors.gray5};
    }
  `}
`;dH.register(f8,f9,pt,pi);class pv extends eo.PureComponent{chartRef=(0,eo.createRef)();chartInstance=null;constructor(e){super(e),this.state={minPrice:0,maxPrice:1e3,selectedDate:new Date().toISOString().split("T")[0]}}componentDidMount(){let e=this.chartRef.current?.getContext("2d"),{minPrice:i,maxPrice:r,selectedDate:n}=this.state,a=pu(Number(i),Number(r),n);e&&(this.chartInstance=new dH(e,{type:"candlestick",data:ph(a),options:pc(i,r)})),ps.subscribe(this)}componentWillUnmount(){ps.unsubscribe(this)}handleInputChange=e=>i=>{let{value:r}=i.target;this.setState({[e]:r})};handleFormSubmit=e=>{e.preventDefault();let{minPrice:i,maxPrice:r,selectedDate:n}=this.state,{scrollY:a}=window,s=pu(Number(i),Number(r),n);ps.setData(s,Number(i),Number(r)),window.scrollTo(0,a)};update=(e,i,r)=>{let n=this.chartRef.current?.getContext("2d");n&&this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=new dH(n,{type:"candlestick",data:ph(e),options:pc(i,r)}),this.chartInstance.update())};render(){let{minPrice:e,maxPrice:i,selectedDate:r}=this.state,n={selectedDate:r??"",minPrice:Number(e),maxPrice:Number(i)};return(0,ea.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[(0,ea.jsxs)(pp,{children:[po.map(({text:e,id:i,type:r})=>(0,ea.jsxs)(pf,{htmlFor:i,children:[e,(0,ea.jsx)(pm,{id:i,type:r,value:n[i],onChange:this.handleInputChange(i)})]},i)),(0,ea.jsx)(p_,{children:(0,ea.jsx)(py,{type:"submit",children:"Submit"})})]}),(0,ea.jsx)(pd,{children:(0,ea.jsx)("canvas",{ref:this.chartRef})})]})}}let px=[{path:"/",element:(0,ea.jsx)(()=>{let[e,i]=(0,eo.useState)("USD"),[r,n]=(0,eo.useState)("USD"),{isShown:a,toggle:s}=le(),{currency:o,loading:l,error:u}=oY(),h=e=>()=>{n(e),s()};return(0,ea.jsxs)(lw,{children:[(0,ea.jsx)(lu,{currenciesList:lr(o).filter(i=>i!==e),setSelectedCurrency:i,defaultValue:e,disable:!1}),l?(0,ea.jsx)(lC,{children:"Loading"}):(0,ea.jsx)(ea.Fragment,{children:(0,ea.jsxs)(lM,{children:[(0,ea.jsx)(lb,{isShown:a,hide:s,currencyList:o,cardCurrency:r,givenCurrency:e}),(0,ea.jsx)(lL,{children:"Stocks"}),(0,ea.jsx)(lT,{children:Object.values(o?.data??{}).map(i=>(0,ea.jsx)(lS,{onClick:h(i.code),children:(0,ea.jsxs)(lD,{children:[aT.QUOTES_SECTION.filter(e=>e.name===i.code).map(({icon:e,name:i})=>(0,ea.jsx)(lk,{children:e},i)),(0,ea.jsxs)(lE,{children:[(0,ea.jsx)(lA,{children:i.code}),(0,ea.jsx)(lP,{children:li(o,e,i.value)})]})]})},i.code))})]})}),u&&(0,ea.jsxs)("p",{children:["Error: ",u]})]})},{})},{path:"contact",element:(0,ea.jsx)(()=>(0,ea.jsxs)(o5,{children:[(0,ea.jsx)(o6,{children:"Our office located at"}),(0,ea.jsx)(o9,{children:"street Lienina, Vitebsk, Belarus"}),(0,ea.jsx)(o6,{children:"Contact us"}),(0,ea.jsxs)(o8,{children:[(0,ea.jsx)(o7,{as:"a",href:"mailto:business@money.kz",children:"business@money.kz"}),(0,ea.jsx)(o7,{children:"+14888841"})]})]}),{})},{path:"bankcard",element:(0,ea.jsx)(o4,{})},{path:"timeline",element:(0,ea.jsx)(pv,{})}],pb=(function(e){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];var a=tH.apply(void 0,[e].concat(r)),s="sc-global-"+tG(JSON.stringify(a)),o=new t0(a,s);function l(e){var i=tA(),r=tP(),n=(0,eo.useContext)(tX),a=(0,eo.useRef)(i.allocateGSInstance(s)).current;return i.server&&u(a,e,i,n,r),(0,eo.useLayoutEffect)(function(){if(!i.server)return u(a,e,i,n,r),function(){return o.removeStyles(a,i)}},[a,e,i,n,r]),null}function u(e,i,r,n,a){if(o.isStatic)o.renderStyles(e,e5,r,a);else{var s=eq({},i,{theme:tV(i,n,l.defaultProps)});o.renderStyles(e,s,r,a)}}return eo.memo(l)})`
body{
    overflow-x: hidden;
    box-sizing:border-box;
    margin: 0;
    padding: 0; 

}


:root {
	align-content: center;

	max-width: 1546px;
	margin: 0 auto;

	font-family: Poppins, sans-serif;

	background-color: ${({theme:e})=>e.colors.primary};
}
`,pw=function(e,i){if(su&&e.$$typeof===su)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var r,n=null!==(r=null==i?void 0:i.forwardRef)&&void 0!==r&&r,a=e,s=e.displayName||e.name;if(sl&&e.$$typeof===sl&&(n=!0,"function"!=typeof(a=e.render)))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var o=function(e,i){return function(e,i){void 0===i&&(i="observed");var r,n,a=eo.useRef(null);if(!a.current){var s={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:i,subscribe:function(e){return sr.unregister(s),s.onStoreChange=e,s.reaction||(ss(s),s.stateVersion=Symbol()),function(){var e;s.onStoreChange=null,null===(e=s.reaction)||void 0===e||e.dispose(),s.reaction=null}},getSnapshot:function(){return s.stateVersion}};a.current=s}var o=a.current;if(o.reaction||(ss(o),sr.register(a,o,o)),eo.useDebugValue(o.reaction,st),(0,sn.useSyncExternalStore)(o.subscribe,o.getSnapshot,sa),o.reaction.track(function(){try{r=e()}catch(i){n=i}}),n)throw n;return r}(function(){return a(e,i)},s)};return o.displayName=e.displayName,Object.defineProperty(o,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(o.contextTypes=e.contextTypes),n&&(o=(0,eo.forwardRef)(o)),function(e,i){Object.keys(e).forEach(function(r){sh[r]||Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}(e,o=(0,eo.memo)(o)),o}(()=>(0,ea.jsxs)(tJ,{theme:aL.theme,children:[(0,ea.jsx)(pb,{}),(0,ea.jsx)(eO,{children:(0,ea.jsx)(eC,{path:"/",element:(0,ea.jsx)(oW,{}),children:px.map(({path:e,element:i})=>(0,ea.jsx)(eC,{path:e,element:i},e))})})]}));async function pM(){return null}let pT=es.createRoot(document.getElementById("root"));pM().then(()=>{pT.render((0,ea.jsx)(a7,{children:(0,ea.jsx)(eY,{children:(0,ea.jsx)(pw,{})})}))})})()})();
//# sourceMappingURL=main.19e079c5.js.map